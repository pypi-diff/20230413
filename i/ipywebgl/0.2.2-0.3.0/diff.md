# Comparing `tmp/ipywebgl-0.2.2.tar.gz` & `tmp/ipywebgl-0.3.0.tar.gz`

## Comparing `ipywebgl-0.2.2.tar` & `ipywebgl-0.3.0.tar`

### file list

```diff
@@ -1,97 +1,106 @@
--rw-r--r--   0        0        0       46 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/.eslintignore
--rw-r--r--   0        0        0      834 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/.eslintrc.js
--rw-r--r--   0        0        0      114 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/.npmignore
--rw-r--r--   0        0        0       54 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/.prettierignore
--rw-r--r--   0        0        0       29 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/.prettierrc
--rw-r--r--   0        0        0      615 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/MANIFEST.in
--rw-r--r--   0        0        0      190 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/babel.config.js
--rw-r--r--   0        0        0      205 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/dev_requirements.txt
--rw-r--r--   0        0        0      182 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/install.json
--rw-r--r--   0        0        0       67 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/ipywebgl.json
--rw-r--r--   0        0        0      511 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/jest.config.js
--rw-r--r--   0        0        0   387684 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/logo.kra
--rw-r--r--   0        0        0   421627 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/logo.kra~
--rw-r--r--   0        0        0   626961 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/package-lock.json
--rw-r--r--   0        0        0     3016 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/package.json
--rw-r--r--   0        0        0      849 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/readthedocs.yml
--rw-r--r--   0        0        0       94 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/setup.py
--rw-r--r--   0        0        0    60202 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/social_preview.png
--rw-r--r--   0        0        0      629 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/tbump.toml
--rw-r--r--   0        0        0      101 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/tsconfig.eslint.json
--rw-r--r--   0        0        0      578 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/tsconfig.json
--rw-r--r--   0        0        0     2278 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/webpack.config.js
--rw-r--r--   0        0        0      235 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/css/widget.css
--rw-r--r--   0        0        0      625 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/Makefile
--rw-r--r--   0        0        0     1210 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/api.rst
--rw-r--r--   0        0        0     6542 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/conf.py
--rw-r--r--   0        0        0     2090 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/develop-install.rst
--rw-r--r--   0        0        0      728 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/index.rst
--rw-r--r--   0        0        0      994 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/installing.rst
--rw-r--r--   0        0        0     1677 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/introduction.rst
--rwxr-xr-x   0        0        0      811 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/make.bat
--rw-r--r--   0        0        0       30 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/requirements.in
--rw-r--r--   0        0        0     1250 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/requirements.txt
--rw-r--r--   0        0        0    32633 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/_static/embed-bundle.js
--rw-r--r--   0        0        0   106338 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/_static/embed-bundle.js.map
--rw-r--r--   0        0        0      125 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/_static/helper.js
--rw-r--r--   0        0        0       50 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/examples/3d_camera.nblink
--rw-r--r--   0        0        0      211 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/examples/index.rst
--rw-r--r--   0        0        0       57 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/examples/indexed_vertices.nblink
--rw-r--r--   0        0        0       48 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/examples/instanced.nblink
--rw-r--r--   0        0        0       53 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/examples/introduction.nblink
--rw-r--r--   0        0        0       62 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/examples/introduction_extended.nblink
--rw-r--r--   0        0        0       47 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/examples/shadow.nblink
--rw-r--r--   0        0        0       45 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/examples/ssao.nblink
--rw-r--r--   0        0        0       55 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/examples/uniform_buffer.nblink
--rw-r--r--   0        0        0    96698 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/images/logo_1024.png
--rw-r--r--   0        0        0     9645 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/images/logo_128.png
--rw-r--r--   0        0        0   232980 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/images/logo_2048.png
--rw-r--r--   0        0        0    20785 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/images/logo_256.png
--rw-r--r--   0        0        0     1605 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/images/logo_32.png
--rw-r--r--   0        0        0    43821 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/images/logo_512.png
--rw-r--r--   0        0        0     4553 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/docs/images/logo_64.png
--rw-r--r--   0        0        0     8632 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/examples/3d_camera.ipynb
--rw-r--r--   0        0        0     3596 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/examples/draw_axis.ipynb
--rw-r--r--   0        0        0     5578 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/examples/indexed_vertices.ipynb
--rw-r--r--   0        0        0    15740 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/examples/instanced.ipynb
--rw-r--r--   0        0        0    13966 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/examples/introduction.ipynb
--rw-r--r--   0        0        0     6369 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/examples/introduction_extended.ipynb
--rw-r--r--   0        0        0    21495 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/examples/shadow.ipynb
--rw-r--r--   0        0        0    73727 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/examples/sky.ipynb
--rw-r--r--   0        0        0    40130 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/examples/ssao.ipynb
--rw-r--r--   0        0        0     5051 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/examples/texture.ipynb
--rw-r--r--   0        0        0     5099 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/examples/uniform_buffer.ipynb
--rw-r--r--   0        0        0     1674 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/ipywebgl/__init__.py
--rw-r--r--   0        0        0      257 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/ipywebgl/_frontend.py
--rw-r--r--   0        0        0      222 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/ipywebgl/_version.py
--rw-r--r--   0        0        0      533 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/ipywebgl/arraybuffer.py
--rw-r--r--   0        0        0      810 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/ipywebgl/glresource.py
--rw-r--r--   0        0        0    73504 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/ipywebgl/glviewer.py
--rw-r--r--   0        0        0    20663 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/ipywebgl/labextension/build_log.json
--rw-r--r--   0        0        0     3039 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/ipywebgl/labextension/package.json
--rw-r--r--   0        0        0     1248 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/ipywebgl/labextension/static/lib_index_js.115506ce89c3f4c34456.js
--rw-r--r--   0        0        0     1226 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/ipywebgl/labextension/static/lib_index_js.115506ce89c3f4c34456.js.map
--rw-r--r--   0        0        0     2427 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/ipywebgl/labextension/static/lib_plugin_js.a4fea4dfcfff14540990.js
--rw-r--r--   0        0        0     2628 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/ipywebgl/labextension/static/lib_plugin_js.a4fea4dfcfff14540990.js.map
--rw-r--r--   0        0        0    76116 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/ipywebgl/labextension/static/lib_widgets_js.417df79f43e89915d69a.js
--rw-r--r--   0        0        0    84191 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/ipywebgl/labextension/static/lib_widgets_js.417df79f43e89915d69a.js.map
--rw-r--r--   0        0        0    26426 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/ipywebgl/labextension/static/remoteEntry.8194deb74d0ed2d99f98.js
--rw-r--r--   0        0        0    25148 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/ipywebgl/labextension/static/remoteEntry.8194deb74d0ed2d99f98.js.map
--rw-r--r--   0        0        0      118 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/ipywebgl/labextension/static/style.js
--rw-r--r--   0        0        0      422 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/ipywebgl/nbextension/extension.js
--rw-r--r--   0        0        0    33420 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/ipywebgl/nbextension/index.js
--rw-r--r--   0        0        0   107839 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/ipywebgl/nbextension/index.js.map
--rw-r--r--   0        0        0      793 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/src/arraybuffer.ts
--rw-r--r--   0        0        0      632 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/src/extension.ts
--rw-r--r--   0        0        0     2590 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/src/glresource.ts
--rw-r--r--   0        0        0    39089 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/src/glviewer.ts
--rw-r--r--   0        0        0      152 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/src/index.ts
--rw-r--r--   0        0        0     7192 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/src/matrix.ts
--rw-r--r--   0        0        0     1157 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/src/plugin.ts
--rw-r--r--   0        0        0      594 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/src/version.ts
--rw-r--r--   0        0        0       62 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/src/widgets.ts
--rw-r--r--   0        0        0     2112 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/.gitignore
--rw-r--r--   0        0        0     1526 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/LICENSE.txt
--rw-r--r--   0        0        0     1877 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/README.md
--rw-r--r--   0        0        0     2332 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/pyproject.toml
--rw-r--r--   0        0        0     4893 2020-02-02 00:00:00.000000 ipywebgl-0.2.2/PKG-INFO
+-rw-r--r--   0        0        0       46 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/.eslintignore
+-rw-r--r--   0        0        0      834 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/.eslintrc.js
+-rw-r--r--   0        0        0      114 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/.npmignore
+-rw-r--r--   0        0        0       54 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/.prettierignore
+-rw-r--r--   0        0        0       29 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/.prettierrc
+-rw-r--r--   0        0        0      615 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/MANIFEST.in
+-rw-r--r--   0        0        0      190 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/babel.config.js
+-rw-r--r--   0        0        0      205 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/dev_requirements.txt
+-rw-r--r--   0        0        0      182 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/install.json
+-rw-r--r--   0        0        0       67 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/ipywebgl.json
+-rw-r--r--   0        0        0      511 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/jest.config.js
+-rw-r--r--   0        0        0   387684 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/logo.kra
+-rw-r--r--   0        0        0   421627 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/logo.kra~
+-rw-r--r--   0        0        0   626961 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/package-lock.json
+-rw-r--r--   0        0        0     3016 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/package.json
+-rw-r--r--   0        0        0      849 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/readthedocs.yml
+-rw-r--r--   0        0        0       94 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/setup.py
+-rw-r--r--   0        0        0    60202 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/social_preview.png
+-rw-r--r--   0        0        0      629 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/tbump.toml
+-rw-r--r--   0        0        0      101 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/tsconfig.eslint.json
+-rw-r--r--   0        0        0      578 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/tsconfig.json
+-rw-r--r--   0        0        0     2278 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/webpack.config.js
+-rw-r--r--   0        0        0      235 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/css/widget.css
+-rw-r--r--   0        0        0      625 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/Makefile
+-rw-r--r--   0        0        0     1210 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/api.rst
+-rw-r--r--   0        0        0     6542 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/conf.py
+-rw-r--r--   0        0        0     2090 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/develop-install.rst
+-rw-r--r--   0        0        0      728 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/index.rst
+-rw-r--r--   0        0        0      994 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/installing.rst
+-rw-r--r--   0        0        0     1677 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/introduction.rst
+-rwxr-xr-x   0        0        0      811 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/make.bat
+-rw-r--r--   0        0        0       30 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/requirements.in
+-rw-r--r--   0        0        0     1250 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/requirements.txt
+-rw-r--r--   0        0        0    32633 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/_static/embed-bundle.js
+-rw-r--r--   0        0        0   106338 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/_static/embed-bundle.js.map
+-rw-r--r--   0        0        0      125 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/_static/helper.js
+-rw-r--r--   0        0        0       50 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/examples/3d_camera.nblink
+-rw-r--r--   0        0        0      211 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/examples/index.rst
+-rw-r--r--   0        0        0       57 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/examples/indexed_vertices.nblink
+-rw-r--r--   0        0        0       48 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/examples/instanced.nblink
+-rw-r--r--   0        0        0       53 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/examples/introduction.nblink
+-rw-r--r--   0        0        0       62 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/examples/introduction_extended.nblink
+-rw-r--r--   0        0        0       47 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/examples/shadow.nblink
+-rw-r--r--   0        0        0       45 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/examples/ssao.nblink
+-rw-r--r--   0        0        0       55 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/examples/uniform_buffer.nblink
+-rw-r--r--   0        0        0    49068 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/images/example_interact.png
+-rw-r--r--   0        0        0    47283 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/images/example_program.png
+-rw-r--r--   0        0        0    85001 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/images/example_shadow.png
+-rw-r--r--   0        0        0   332585 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/images/example_shadow.png-autosave.kra
+-rw-r--r--   0        0        0    36202 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/images/example_triangle.png
+-rw-r--r--   0        0        0   243959 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/images/example_triangle.png-autosave.kra
+-rw-r--r--   0        0        0     9122 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/images/example_triangle_alone.png
+-rw-r--r--   0        0        0   121416 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/images/examples.png
+-rw-r--r--   0        0        0    96698 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/images/logo_1024.png
+-rw-r--r--   0        0        0     9645 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/images/logo_128.png
+-rw-r--r--   0        0        0   232980 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/images/logo_2048.png
+-rw-r--r--   0        0        0    20785 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/images/logo_256.png
+-rw-r--r--   0        0        0     1605 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/images/logo_32.png
+-rw-r--r--   0        0        0    43821 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/images/logo_512.png
+-rw-r--r--   0        0        0     4553 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/images/logo_64.png
+-rw-r--r--   0        0        0     5104 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/docs/images/shader_resource.png
+-rw-r--r--   0        0        0     8739 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/examples/3d_camera.ipynb
+-rw-r--r--   0        0        0     3596 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/examples/draw_axis.ipynb
+-rw-r--r--   0        0        0     5578 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/examples/indexed_vertices.ipynb
+-rw-r--r--   0        0        0    15740 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/examples/instanced.ipynb
+-rw-r--r--   0        0        0    13968 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/examples/introduction.ipynb
+-rw-r--r--   0        0        0     6206 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/examples/introduction_extended.ipynb
+-rw-r--r--   0        0        0    21495 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/examples/shadow.ipynb
+-rw-r--r--   0        0        0    73727 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/examples/sky.ipynb
+-rw-r--r--   0        0        0    40130 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/examples/ssao.ipynb
+-rw-r--r--   0        0        0     5051 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/examples/texture.ipynb
+-rw-r--r--   0        0        0     5099 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/examples/uniform_buffer.ipynb
+-rw-r--r--   0        0        0     1674 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/ipywebgl/__init__.py
+-rw-r--r--   0        0        0      257 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/ipywebgl/_frontend.py
+-rw-r--r--   0        0        0      222 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/ipywebgl/_version.py
+-rw-r--r--   0        0        0      533 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/ipywebgl/arraybuffer.py
+-rw-r--r--   0        0        0      810 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/ipywebgl/glresource.py
+-rw-r--r--   0        0        0    73676 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/ipywebgl/glviewer.py
+-rw-r--r--   0        0        0    20663 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/ipywebgl/labextension/build_log.json
+-rw-r--r--   0        0        0     3039 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/ipywebgl/labextension/package.json
+-rw-r--r--   0        0        0     1248 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/ipywebgl/labextension/static/lib_index_js.115506ce89c3f4c34456.js
+-rw-r--r--   0        0        0     1226 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/ipywebgl/labextension/static/lib_index_js.115506ce89c3f4c34456.js.map
+-rw-r--r--   0        0        0     2427 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/ipywebgl/labextension/static/lib_plugin_js.a4fea4dfcfff14540990.js
+-rw-r--r--   0        0        0     2628 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/ipywebgl/labextension/static/lib_plugin_js.a4fea4dfcfff14540990.js.map
+-rw-r--r--   0        0        0    76378 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/ipywebgl/labextension/static/lib_widgets_js.c158407baadd2aaa9731.js
+-rw-r--r--   0        0        0    84496 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/ipywebgl/labextension/static/lib_widgets_js.c158407baadd2aaa9731.js.map
+-rw-r--r--   0        0        0    26426 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/ipywebgl/labextension/static/remoteEntry.b6f087db7d3bb0b5dfbe.js
+-rw-r--r--   0        0        0    25148 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/ipywebgl/labextension/static/remoteEntry.b6f087db7d3bb0b5dfbe.js.map
+-rw-r--r--   0        0        0      118 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/ipywebgl/labextension/static/style.js
+-rw-r--r--   0        0        0      422 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/ipywebgl/nbextension/extension.js
+-rw-r--r--   0        0        0    33554 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/ipywebgl/nbextension/index.js
+-rw-r--r--   0        0        0   108226 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/ipywebgl/nbextension/index.js.map
+-rw-r--r--   0        0        0      793 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/src/arraybuffer.ts
+-rw-r--r--   0        0        0      632 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/src/extension.ts
+-rw-r--r--   0        0        0     2590 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/src/glresource.ts
+-rw-r--r--   0        0        0    39329 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/src/glviewer.ts
+-rw-r--r--   0        0        0      152 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/src/index.ts
+-rw-r--r--   0        0        0     7192 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/src/matrix.ts
+-rw-r--r--   0        0        0     1157 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/src/plugin.ts
+-rw-r--r--   0        0        0      594 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/src/version.ts
+-rw-r--r--   0        0        0       62 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/src/widgets.ts
+-rw-r--r--   0        0        0     2112 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/.gitignore
+-rw-r--r--   0        0        0     1526 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/LICENSE.txt
+-rw-r--r--   0        0        0     1877 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/README.md
+-rw-r--r--   0        0        0     2332 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/pyproject.toml
+-rw-r--r--   0        0        0     4893 2020-02-02 00:00:00.000000 ipywebgl-0.3.0/PKG-INFO
```

### Comparing `ipywebgl-0.2.2/.eslintrc.js` & `ipywebgl-0.3.0/.eslintrc.js`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/MANIFEST.in` & `ipywebgl-0.3.0/MANIFEST.in`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/logo.kra` & `ipywebgl-0.3.0/logo.kra`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/logo.kra~` & `ipywebgl-0.3.0/logo.kra~`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/package-lock.json` & `ipywebgl-0.3.0/package-lock.json`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/package.json` & `ipywebgl-0.3.0/package.json`

 * *Files 1% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.96875%*

 * *Differences: {"'version'": "'0.3.0'"}*

```diff
@@ -86,9 +86,9 @@
         "prepack": "yarn run build:lib",
         "watch": "npm-run-all -p watch:*",
         "watch:labextension": "jupyter labextension watch .",
         "watch:lib": "tsc -w",
         "watch:nbextension": "webpack --watch --mode=development"
     },
     "types": "./lib/index.d.ts",
-    "version": "0.2.2"
+    "version": "0.3.0"
 }
```

### Comparing `ipywebgl-0.2.2/readthedocs.yml` & `ipywebgl-0.3.0/readthedocs.yml`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/social_preview.png` & `ipywebgl-0.3.0/social_preview.png`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/tbump.toml` & `ipywebgl-0.3.0/tbump.toml`

 * *Files 2% similar despite different names*

```diff
@@ -4,15 +4,15 @@
 default = ""
 
 [[field]]
 name = "release"
 default = ""
 
 [version]
-current = "0.2.2"
+current = "0.3.0"
 regex = "(?P<major>\\d+)\\.(?P<minor>\\d+)\\.(?P<patch>\\d+)((?P<channel>a|b|rc|.dev)(?P<release>\\d+))?"
 
 [git]
 message_template = "Bump to {new_version}"
 tag_template = "v{new_version}"
 
 [[file]]
```

### Comparing `ipywebgl-0.2.2/tsconfig.json` & `ipywebgl-0.3.0/tsconfig.json`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/webpack.config.js` & `ipywebgl-0.3.0/webpack.config.js`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/docs/Makefile` & `ipywebgl-0.3.0/docs/Makefile`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/docs/api.rst` & `ipywebgl-0.3.0/docs/api.rst`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/docs/conf.py` & `ipywebgl-0.3.0/docs/conf.py`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/docs/develop-install.rst` & `ipywebgl-0.3.0/docs/develop-install.rst`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/docs/index.rst` & `ipywebgl-0.3.0/docs/index.rst`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/docs/installing.rst` & `ipywebgl-0.3.0/docs/installing.rst`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/docs/introduction.rst` & `ipywebgl-0.3.0/docs/introduction.rst`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/docs/make.bat` & `ipywebgl-0.3.0/docs/make.bat`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/docs/requirements.txt` & `ipywebgl-0.3.0/docs/requirements.txt`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/docs/_static/embed-bundle.js` & `ipywebgl-0.3.0/docs/_static/embed-bundle.js`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/docs/_static/embed-bundle.js.map` & `ipywebgl-0.3.0/docs/_static/embed-bundle.js.map`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/docs/images/logo_1024.png` & `ipywebgl-0.3.0/docs/images/logo_1024.png`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/docs/images/logo_128.png` & `ipywebgl-0.3.0/docs/images/logo_128.png`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/docs/images/logo_2048.png` & `ipywebgl-0.3.0/docs/images/logo_2048.png`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/docs/images/logo_256.png` & `ipywebgl-0.3.0/docs/images/logo_256.png`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/docs/images/logo_32.png` & `ipywebgl-0.3.0/docs/images/logo_32.png`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/docs/images/logo_512.png` & `ipywebgl-0.3.0/docs/images/logo_512.png`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/docs/images/logo_64.png` & `ipywebgl-0.3.0/docs/images/logo_64.png`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/examples/3d_camera.ipynb` & `ipywebgl-0.3.0/examples/3d_camera.ipynb`

 * *Files 2% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9965950294777199%*

 * *Differences: {"'cells'": "{8: {'execution_count': 10}, 11: {'execution_count': 15, 'outputs': {0: {'data': "*

 * *            "{'application/vnd.jupyter.widget-view+json': {'model_id': "*

 * *            "'acd20c279b844bb2bdd2168e49de5b00'}, 'text/plain': "*

 * *            "['GLViewer(camera_pitch=-36.39999999999999, camera_pos=[-91.63365691831456, "*

 * *            "92.76164591870047, 163.7879990208860…']}, 'execution_count': 15}}}, 14: "*

 * *            "{'execution_count': 14, 'outputs': {0: {'data': "*

 * *            "{'application/vnd.jupyt […]*

```diff
@@ -116,15 +116,15 @@
             "source": [
                 "### Grid vertex buffer\n",
                 "Create a grid vertex array. By creating a set of lines in X and Z. (Y is up in our viewport)"
             ]
         },
         {
             "cell_type": "code",
-            "execution_count": 4,
+            "execution_count": 10,
             "id": "e33d4338-db5f-41ec-87b2-52874c5289c3",
             "metadata": {},
             "outputs": [],
             "source": [
                 "def grid(size, steps):\n",
                 "    u = np.repeat(np.linspace(-size, size, steps), 2)\n",
                 "    v = np.tile([-size, size], steps)\n",
@@ -180,30 +180,30 @@
                 "    * or runtime with : <code>w.move_keys = 'ijkl'</code>\n",
                 "\n",
                 "Any letters can be used."
             ]
         },
         {
             "cell_type": "code",
-            "execution_count": 6,
+            "execution_count": 15,
             "id": "74581a5c-5325-4ff7-a3ca-35c08bcf29b7",
             "metadata": {},
             "outputs": [
                 {
                     "data": {
                         "application/vnd.jupyter.widget-view+json": {
-                            "model_id": "4de480ba7a524f94a64bba6d8e8b4b99",
+                            "model_id": "acd20c279b844bb2bdd2168e49de5b00",
                             "version_major": 2,
                             "version_minor": 0
                         },
                         "text/plain": [
-                            "GLViewer(camera_pos=[0, 50, 200])"
+                            "GLViewer(camera_pitch=-36.39999999999999, camera_pos=[-91.63365691831456, 92.76164591870047, 163.7879990208860\u2026"
                         ]
                     },
-                    "execution_count": 6,
+                    "execution_count": 15,
                     "metadata": {},
                     "output_type": "execute_result"
                 }
             ],
             "source": [
                 "w.clear()\n",
                 "w.use_program(program)\n",
@@ -243,44 +243,44 @@
             ],
             "source": [
                 "w.camera_pos, w.camera_pitch, w.camera_yaw"
             ]
         },
         {
             "cell_type": "code",
-            "execution_count": 8,
+            "execution_count": 14,
             "id": "5f308f6c-c1ae-4ec9-8610-ea7795dee94a",
             "metadata": {},
             "outputs": [
                 {
                     "data": {
                         "application/vnd.jupyter.widget-view+json": {
-                            "model_id": "d69dee1aff954f1ea05a4f3c509d86e8",
+                            "model_id": "718f60442d0f43208b4d7c5f61d432f1",
                             "version_major": 2,
                             "version_minor": 0
                         },
                         "text/plain": [
                             "interactive(children=(IntSlider(value=0, description='angle', max=360), Output()), _dom_classes=('widget-inter\u2026"
                         ]
                     },
                     "metadata": {},
                     "output_type": "display_data"
                 },
                 {
                     "data": {
                         "application/vnd.jupyter.widget-view+json": {
-                            "model_id": "4de480ba7a524f94a64bba6d8e8b4b99",
+                            "model_id": "acd20c279b844bb2bdd2168e49de5b00",
                             "version_major": 2,
                             "version_minor": 0
                         },
                         "text/plain": [
                             "GLViewer(camera_pitch=-20.0, camera_pos=[0.0, 70, 200.0])"
                         ]
                     },
-                    "execution_count": 8,
+                    "execution_count": 14,
                     "metadata": {},
                     "output_type": "execute_result"
                 }
             ],
             "source": [
                 "from ipywidgets import widgets, interact\n",
                 "\n",
@@ -295,19 +295,21 @@
                 "    angle=widgets.IntSlider(min=0, max=360, step=1, value=0),\n",
                 ")\n",
                 "w"
             ]
         },
         {
             "cell_type": "code",
-            "execution_count": null,
+            "execution_count": 11,
             "id": "b6d47314-c752-48e1-958c-663fcd3a0ac9",
             "metadata": {},
             "outputs": [],
-            "source": []
+            "source": [
+                "w.verbose = 0"
+            ]
         }
     ],
     "metadata": {
         "kernelspec": {
             "display_name": "Python 3 (ipykernel)",
             "language": "python",
             "name": "python3"
```

### Comparing `ipywebgl-0.2.2/examples/draw_axis.ipynb` & `ipywebgl-0.3.0/examples/draw_axis.ipynb`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/examples/indexed_vertices.ipynb` & `ipywebgl-0.3.0/examples/indexed_vertices.ipynb`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/examples/instanced.ipynb` & `ipywebgl-0.3.0/examples/instanced.ipynb`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/examples/introduction.ipynb` & `ipywebgl-0.3.0/examples/introduction.ipynb`

 * *Files 3% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9988358109085649%*

 * *Differences: {"'cells'": "{5: {'outputs': {0: {'data': {'application/vnd.jupyter.widget-view+json': "*

 * *            "{'model_id': 'd299cf34098a45aca1802501146a52c8'}}}}}, 7: {'outputs': {0: {'data': "*

 * *            "{'application/vnd.jupyter.widget-view+json': {'model_id': "*

 * *            "'4aeae0c64efe4b58be266d09413713e8'}}}}}, 8: {'outputs': {0: {'data': "*

 * *            "{'application/vnd.jupyter.widget-view+json': {'model_id': "*

 * *            "'6ab2c9a9cc7f4519aea27c8cb2e2ad48'}}}}}, 9: {'outputs': {0: {'data': "*

 * *             […]*

```diff
@@ -63,15 +63,15 @@
             "cell_type": "code",
             "execution_count": 2,
             "metadata": {},
             "outputs": [
                 {
                     "data": {
                         "application/vnd.jupyter.widget-view+json": {
-                            "model_id": "aade8c4cea1142db8d56a21562a25789",
+                            "model_id": "d299cf34098a45aca1802501146a52c8",
                             "version_major": 2,
                             "version_minor": 0
                         },
                         "text/plain": [
                             "GLViewer(camera_pos=[0, 50, 200])"
                         ]
                     },
@@ -107,15 +107,15 @@
             "cell_type": "code",
             "execution_count": 3,
             "metadata": {},
             "outputs": [
                 {
                     "data": {
                         "application/vnd.jupyter.widget-view+json": {
-                            "model_id": "52c8a3c9a8fd4d7da27693764548bbeb",
+                            "model_id": "4aeae0c64efe4b58be266d09413713e8",
                             "version_major": 2,
                             "version_minor": 0
                         },
                         "text/plain": [
                             "GLResourceWidget(uid=0)"
                         ]
                     },
@@ -148,15 +148,15 @@
             "cell_type": "code",
             "execution_count": 4,
             "metadata": {},
             "outputs": [
                 {
                     "data": {
                         "application/vnd.jupyter.widget-view+json": {
-                            "model_id": "eb4d0057d6c34516ad86c753f5c879c2",
+                            "model_id": "6ab2c9a9cc7f4519aea27c8cb2e2ad48",
                             "version_major": 2,
                             "version_minor": 0
                         },
                         "text/plain": [
                             "GLResourceWidget(uid=1)"
                         ]
                     },
@@ -190,15 +190,15 @@
             "cell_type": "code",
             "execution_count": 5,
             "metadata": {},
             "outputs": [
                 {
                     "data": {
                         "application/vnd.jupyter.widget-view+json": {
-                            "model_id": "e583ce6fb7e1450f9e8ce9e07950b673",
+                            "model_id": "b7524005a4a5475d896e2f89a51aae0d",
                             "version_major": 2,
                             "version_minor": 0
                         },
                         "text/plain": [
                             "GLResourceWidget(uid=2)"
                         ]
                     },
@@ -234,15 +234,15 @@
             "cell_type": "code",
             "execution_count": 6,
             "metadata": {},
             "outputs": [
                 {
                     "data": {
                         "application/vnd.jupyter.widget-view+json": {
-                            "model_id": "d4306c24c36942ea84a81e1ade81b888",
+                            "model_id": "f34fd708f0f44793b777525bf0523824",
                             "version_major": 2,
                             "version_minor": 0
                         },
                         "text/plain": [
                             "GLResourceWidget(uid=3)"
                         ]
                     },
@@ -285,15 +285,15 @@
             "cell_type": "code",
             "execution_count": 7,
             "metadata": {},
             "outputs": [
                 {
                     "data": {
                         "application/vnd.jupyter.widget-view+json": {
-                            "model_id": "14ec9ce42500472e984a8ce14564eaf3",
+                            "model_id": "4f958b0c37634a18b6c5e4bfc5772106",
                             "version_major": 2,
                             "version_minor": 0
                         },
                         "text/plain": [
                             "GLResourceWidget(uid=4)"
                         ]
                     },
@@ -351,29 +351,29 @@
             "source": [
                 "### Move the GLViewer\n",
                 "By redisplaying the viewer here we move it down here."
             ]
         },
         {
             "cell_type": "code",
-            "execution_count": 9,
+            "execution_count": 13,
             "metadata": {},
             "outputs": [
                 {
                     "data": {
                         "application/vnd.jupyter.widget-view+json": {
-                            "model_id": "aade8c4cea1142db8d56a21562a25789",
+                            "model_id": "d299cf34098a45aca1802501146a52c8",
                             "version_major": 2,
                             "version_minor": 0
                         },
                         "text/plain": [
                             "GLViewer(camera_pos=[0, 50, 200])"
                         ]
                     },
-                    "execution_count": 9,
+                    "execution_count": 13,
                     "metadata": {},
                     "output_type": "execute_result"
                 }
             ],
             "source": [
                 "w"
             ]
@@ -390,15 +390,15 @@
             "cell_type": "code",
             "execution_count": 10,
             "metadata": {},
             "outputs": [
                 {
                     "data": {
                         "application/vnd.jupyter.widget-view+json": {
-                            "model_id": "e583ce6fb7e1450f9e8ce9e07950b673",
+                            "model_id": "b7524005a4a5475d896e2f89a51aae0d",
                             "version_major": 2,
                             "version_minor": 0
                         },
                         "text/plain": [
                             "GLResourceWidget(uid=2)"
                         ]
                     },
@@ -459,43 +459,43 @@
             "source": [
                 "## Interactive\n",
                 "Let's tweak the triangle position directly in the notebook using the interact function."
             ]
         },
         {
             "cell_type": "code",
-            "execution_count": 12,
+            "execution_count": 14,
             "metadata": {},
             "outputs": [
                 {
                     "data": {
                         "application/vnd.jupyter.widget-view+json": {
-                            "model_id": "4b6477e5e7fe4d9b860c3f681cbba947",
+                            "model_id": "2cb0bf954aa4464ab9a2d2e8fcf8f3f2",
                             "version_major": 2,
                             "version_minor": 0
                         },
                         "text/plain": [
                             "interactive(children=(FloatSlider(value=0.0, description='x', max=1.0, min=-1.0, step=0.01), FloatSlider(value\u2026"
                         ]
                     },
                     "metadata": {},
                     "output_type": "display_data"
                 },
                 {
                     "data": {
                         "application/vnd.jupyter.widget-view+json": {
-                            "model_id": "aade8c4cea1142db8d56a21562a25789",
+                            "model_id": "d299cf34098a45aca1802501146a52c8",
                             "version_major": 2,
                             "version_minor": 0
                         },
                         "text/plain": [
                             "GLViewer(camera_pos=[0, 50, 200])"
                         ]
                     },
-                    "execution_count": 12,
+                    "execution_count": 14,
                     "metadata": {},
                     "output_type": "execute_result"
                 }
             ],
             "source": [
                 "from ipywidgets import widgets, interact\n",
                 "\n",
```

### Comparing `ipywebgl-0.2.2/examples/introduction_extended.ipynb` & `ipywebgl-0.3.0/examples/introduction_extended.ipynb`

 * *Files 6% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9910559275793651%*

 * *Differences: {"'cells'": "{6: {'outputs': {0: {'data': {'application/vnd.jupyter.widget-view+json': "*

 * *            "{'model_id': '05f020d10b3443a4895a0d83a0b70b5e'}}}}}, 8: {'outputs': {0: {'data': "*

 * *            "{'application/vnd.jupyter.widget-view+json': {'model_id': "*

 * *            "'a1b1edb1637d4ee09aca25a46ab94ca7'}}}}}, 10: {'outputs': {0: {'data': "*

 * *            "{'application/vnd.jupyter.widget-view+json': {'model_id': "*

 * *            "'3022b3cf1a3345a48c25f6296e85cb8d'}}}}}, 12: {'outputs': {0: {'data': "*

 * *           […]*

```diff
@@ -65,15 +65,15 @@
             "execution_count": 3,
             "id": "eb742cf7-fe3b-4bce-86ff-2c458db0273a",
             "metadata": {},
             "outputs": [
                 {
                     "data": {
                         "application/vnd.jupyter.widget-view+json": {
-                            "model_id": "c59ed8c476964c919c8bfbc35ed7ae4b",
+                            "model_id": "05f020d10b3443a4895a0d83a0b70b5e",
                             "version_major": 2,
                             "version_minor": 0
                         },
                         "text/plain": [
                             "GLResourceWidget(uid=2)"
                         ]
                     },
@@ -119,15 +119,15 @@
             "execution_count": 4,
             "id": "000dbfff-e2aa-4bae-95c1-9cacf964db44",
             "metadata": {},
             "outputs": [
                 {
                     "data": {
                         "application/vnd.jupyter.widget-view+json": {
-                            "model_id": "b0a5280251ff4e89bdb3657bbadbd9fa",
+                            "model_id": "a1b1edb1637d4ee09aca25a46ab94ca7",
                             "version_major": 2,
                             "version_minor": 0
                         },
                         "text/plain": [
                             "GLResourceWidget(uid=3)"
                         ]
                     },
@@ -169,15 +169,15 @@
             "execution_count": 5,
             "id": "18499404-1510-41e8-b311-985bc92b6a7b",
             "metadata": {},
             "outputs": [
                 {
                     "data": {
                         "application/vnd.jupyter.widget-view+json": {
-                            "model_id": "45f0295ef9494147b337b00293b749f3",
+                            "model_id": "3022b3cf1a3345a48c25f6296e85cb8d",
                             "version_major": 2,
                             "version_minor": 0
                         },
                         "text/plain": [
                             "GLResourceWidget(uid=4)"
                         ]
                     },
@@ -211,15 +211,15 @@
             "execution_count": 6,
             "id": "21181c39-7e9b-4799-9472-0875afa86b11",
             "metadata": {},
             "outputs": [
                 {
                     "data": {
                         "application/vnd.jupyter.widget-view+json": {
-                            "model_id": "30496af58b6b4ade982ce7dab5074281",
+                            "model_id": "96a6a33499a8474a895421ca85f155e4",
                             "version_major": 2,
                             "version_minor": 0
                         },
                         "text/plain": [
                             "GLViewer(camera_pos=[0, 50, 200])"
                         ]
                     },
@@ -235,22 +235,14 @@
                 "w.bind_vertex_array(vao)\n",
                 "w.draw_arrays('TRIANGLES', 0, 3)\n",
                 "\n",
                 "# render in loop if needed\n",
                 "w.execute_commands()\n",
                 "w"
             ]
-        },
-        {
-            "cell_type": "code",
-            "execution_count": null,
-            "id": "0d628f31-7b65-4352-af6d-4d749f33648f",
-            "metadata": {},
-            "outputs": [],
-            "source": []
         }
     ],
     "metadata": {
         "kernelspec": {
             "display_name": "Python 3 (ipykernel)",
             "language": "python",
             "name": "python3"
```

### Comparing `ipywebgl-0.2.2/examples/shadow.ipynb` & `ipywebgl-0.3.0/examples/shadow.ipynb`

 * *Files 0% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9994434497974537%*

 * *Differences: {"'cells'": "{19: {'execution_count': 11, 'outputs': {0: {'data': "*

 * *            "{'application/vnd.jupyter.widget-view+json': {'model_id': "*

 * *            "'71a01bcefcf848bba855b1112d1726e0'}}}, 1: {'data': "*

 * *            "{'application/vnd.jupyter.widget-view+json': {'model_id': "*

 * *            "'69b0240b2dd94fca8f6f380028c0df33'}}, 'execution_count': 11}}}}"}*

```diff
@@ -554,44 +554,44 @@
                 "### Display\n",
                 "\n",
                 "display with the choice of shadow map projection"
             ]
         },
         {
             "cell_type": "code",
-            "execution_count": 10,
+            "execution_count": 11,
             "id": "709fcf32-9fb2-48e7-bde8-92a83546e540",
             "metadata": {},
             "outputs": [
                 {
                     "data": {
                         "application/vnd.jupyter.widget-view+json": {
-                            "model_id": "f5eacf0906f047feb3fddada7c66467f",
+                            "model_id": "71a01bcefcf848bba855b1112d1726e0",
                             "version_major": 2,
                             "version_minor": 0
                         },
                         "text/plain": [
                             "interactive(children=(Checkbox(value=False, description='perspective projection'), Output()), _dom_classes=('w\u2026"
                         ]
                     },
                     "metadata": {},
                     "output_type": "display_data"
                 },
                 {
                     "data": {
                         "application/vnd.jupyter.widget-view+json": {
-                            "model_id": "347573249fcb4608b6c5de2fc0d5cbc8",
+                            "model_id": "69b0240b2dd94fca8f6f380028c0df33",
                             "version_major": 2,
                             "version_minor": 0
                         },
                         "text/plain": [
                             "GLViewer(camera_pitch=-37.0, camera_pos=[33.45616955516928, 37.90264690920414, 36.766131171063385], camera_yaw\u2026"
                         ]
                     },
-                    "execution_count": 10,
+                    "execution_count": 11,
                     "metadata": {},
                     "output_type": "execute_result"
                 }
             ],
             "source": [
                 "from ipywidgets import widgets, interact\n",
                 "\n",
```

### Comparing `ipywebgl-0.2.2/examples/sky.ipynb` & `ipywebgl-0.3.0/examples/sky.ipynb`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/examples/ssao.ipynb` & `ipywebgl-0.3.0/examples/ssao.ipynb`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/examples/texture.ipynb` & `ipywebgl-0.3.0/examples/texture.ipynb`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/examples/uniform_buffer.ipynb` & `ipywebgl-0.3.0/examples/uniform_buffer.ipynb`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/ipywebgl/__init__.py` & `ipywebgl-0.3.0/ipywebgl/__init__.py`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/ipywebgl/arraybuffer.py` & `ipywebgl-0.3.0/ipywebgl/arraybuffer.py`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/ipywebgl/glresource.py` & `ipywebgl-0.3.0/ipywebgl/glresource.py`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/ipywebgl/glviewer.py` & `ipywebgl-0.3.0/ipywebgl/glviewer.py`

 * *Files 0% similar despite different names*

```diff
@@ -29,14 +29,15 @@
         camera_fov (float): the camera field of view in degree. Defaults to 50.
         camera_near (float): the camera near plane distance. Defaults to 1.
         camera_far (float): the camera far plane distance. Defaults to 5000.
         mouse_speed (float): mouse speed (camera rotation speed). Defaults to 1.
         move_speed (float): move speed (camera translation speed). Defaults to 1.
         move_keys (str): the move keys as a string. Forward, Left, Back, Right. Defaults to 'wasd'.
         shader_matrix_major (str): the type of matrix (for the ViewProjection for instance) to send to the shader {'row_major' or 'column_major'}. Defaults to 'row_major'.
+        verbose (int): with verbose set to 1, all the commands executed by the frontend will be logged in the console. Defaults to 0.
     """
     _model_name = Unicode('GLModel').tag(sync=True)
     _model_module = Unicode(module_name).tag(sync=True)
     _model_module_version = Unicode(module_version).tag(sync=True)
     _view_name = Unicode('GLViewer').tag(sync=True)
     _view_module = Unicode(module_name).tag(sync=True)
     _view_module_version = Unicode(module_version).tag(sync=True)
@@ -49,14 +50,15 @@
     camera_fov = Float(50.0).tag(sync=True)
     camera_near = Float(1.0).tag(sync=True)
     camera_far = Float(5000.0).tag(sync=True)
     mouse_speed = Float(1).tag(sync=True)
     move_speed = Float(1).tag(sync=True)
     move_keys = Unicode('wasd').tag(sync=True)
     shader_matrix_major = Unicode('row_major').tag(sync=True)
+    verbose = Int(0).tag(sync=True)
 
     def __init__(self, **kwargs):
         super().__init__(**kwargs)
         self._resources = []
         self._commands = []
         self._buffers = []
```

### Comparing `ipywebgl-0.2.2/ipywebgl/labextension/build_log.json` & `ipywebgl-0.3.0/ipywebgl/labextension/build_log.json`

 * *Files 1% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9999992985409654%*

 * *Differences: {'0': "{'plugins': {1: {'_options': {'shared': {'ipywebgl': {'version': '0.3.0'}}}}}}"}*

```diff
@@ -583,15 +583,15 @@
                             "import": false,
                             "requiredVersion": "^1.33.0",
                             "singleton": true
                         },
                         "ipywebgl": {
                             "import": "E:\\github\\research\\ipywebgl\\lib\\index.js",
                             "singleton": true,
-                            "version": "0.2.2"
+                            "version": "0.3.0"
                         },
                         "react": {
                             "import": false,
                             "requiredVersion": "^17.0.1",
                             "singleton": true
                         },
                         "react-dom": {
```

### Comparing `ipywebgl-0.2.2/ipywebgl/labextension/package.json` & `ipywebgl-0.3.0/ipywebgl/labextension/package.json`

 * *Files 6% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9677734375%*

 * *Differences: {"'jupyterlab'": "{'_build': {'load': 'static\\\\remoteEntry.b6f087db7d3bb0b5dfbe.js'}}",*

 * * "'version'": "'0.3.0'"}*

```diff
@@ -46,15 +46,15 @@
         "dist/*.js",
         "css/*.css"
     ],
     "homepage": "https://github.com/JeromeEippers/ipywebgl",
     "jupyterlab": {
         "_build": {
             "extension": "./extension",
-            "load": "static\\remoteEntry.8194deb74d0ed2d99f98.js"
+            "load": "static\\remoteEntry.b6f087db7d3bb0b5dfbe.js"
         },
         "extension": "lib/plugin",
         "outputDir": "ipywebgl/labextension/",
         "sharedPackages": {
             "@jupyter-widgets/base": {
                 "bundled": false,
                 "singleton": true
@@ -90,9 +90,9 @@
         "prepack": "yarn run build:lib",
         "watch": "npm-run-all -p watch:*",
         "watch:labextension": "jupyter labextension watch .",
         "watch:lib": "tsc -w",
         "watch:nbextension": "webpack --watch --mode=development"
     },
     "types": "./lib/index.d.ts",
-    "version": "0.2.2"
+    "version": "0.3.0"
 }
```

### Comparing `ipywebgl-0.2.2/ipywebgl/labextension/static/lib_index_js.115506ce89c3f4c34456.js` & `ipywebgl-0.3.0/ipywebgl/labextension/static/lib_index_js.115506ce89c3f4c34456.js`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/ipywebgl/labextension/static/lib_index_js.115506ce89c3f4c34456.js.map` & `ipywebgl-0.3.0/ipywebgl/labextension/static/lib_index_js.115506ce89c3f4c34456.js.map`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/ipywebgl/labextension/static/lib_plugin_js.a4fea4dfcfff14540990.js` & `ipywebgl-0.3.0/ipywebgl/labextension/static/lib_plugin_js.a4fea4dfcfff14540990.js`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/ipywebgl/labextension/static/lib_plugin_js.a4fea4dfcfff14540990.js.map` & `ipywebgl-0.3.0/ipywebgl/labextension/static/lib_plugin_js.a4fea4dfcfff14540990.js.map`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/ipywebgl/labextension/static/lib_widgets_js.417df79f43e89915d69a.js` & `ipywebgl-0.3.0/ipywebgl/labextension/static/lib_widgets_js.c158407baadd2aaa9731.js`

 * *Files 1% similar despite different names*

#### js-beautify {}

```diff
@@ -182,15 +182,16 @@
                             camera_yaw: 0,
                             camera_pitch: 0,
                             camera_fov: 50.0,
                             camera_near: 1.0,
                             camera_far: 5000.0,
                             mouse_speed: 1,
                             move_speed: 1,
-                            move_keys: 'wasd'
+                            move_keys: 'wasd',
+                            verbose: 0
                         });
                     }
                     initialize(attributes, options) {
                         super.initialize(attributes, options);
                         this.canvas = document.createElement('canvas');
                         this.ctx = this.canvas.getContext("webgl2", {
                             preserveDrawingBuffer: true
@@ -292,15 +293,21 @@
                             if (gl[key] === value) {
                                 keys.push(key);
                             }
                         }
                         return keys.length ? keys.join(' | ') : `0x${value.toString(16)}`;
                     }
                     execute_command(gl, command, converted_buffers) {
-                        console.log(command);
+                        if (this.get('verbose') > 0) {
+                            console.log(command);
+                            if (command.hasOwnProperty('buffer_metadata')) {
+                                console.log('data');
+                                console.log(converted_buffers[command.buffer_metadata.index]);
+                            }
+                        }
                         //console.log(this.bound_buffers);
                         switch (command.cmd) {
                             case 'viewport':
                                 gl.viewport(command.x, command.y, command.width, command.height);
                                 break;
                             case 'enable':
                             case 'disable': {
@@ -1896,15 +1903,15 @@
             /*!**********************!*\
               !*** ./package.json ***!
               \**********************/
             /***/
             ((module) => {
 
                 "use strict";
-                module.exports = JSON.parse('{"name":"ipywebgl","version":"0.2.2","description":"A Custom Jupyter Widget Library","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/JeromeEippers/ipywebgl","bugs":{"url":"https://github.com/JeromeEippers/ipywebgl/issues"},"license":"BSD-3-Clause","author":{"name":"Jerome Eippers","email":"jerome@eippers.be"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/JeromeEippers/ipywebgl"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipywebgl/labextension","clean:nbextension":"rimraf ipywebgl/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.2","@jupyterlab/builder":"^3.0.0","@lumino/application":"^1.6.0","@lumino/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipywebgl/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}');
+                module.exports = JSON.parse('{"name":"ipywebgl","version":"0.3.0","description":"A Custom Jupyter Widget Library","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/JeromeEippers/ipywebgl","bugs":{"url":"https://github.com/JeromeEippers/ipywebgl/issues"},"license":"BSD-3-Clause","author":{"name":"Jerome Eippers","email":"jerome@eippers.be"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/JeromeEippers/ipywebgl"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipywebgl/labextension","clean:nbextension":"rimraf ipywebgl/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.2","@jupyterlab/builder":"^3.0.0","@lumino/application":"^1.6.0","@lumino/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipywebgl/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}');
 
                 /***/
             })
 
     }
 ]);
-//# sourceMappingURL=lib_widgets_js.417df79f43e89915d69a.js.map
+//# sourceMappingURL=lib_widgets_js.c158407baadd2aaa9731.js.map
```

### Comparing `ipywebgl-0.2.2/ipywebgl/labextension/static/lib_widgets_js.417df79f43e89915d69a.js.map` & `ipywebgl-0.3.0/ipywebgl/labextension/static/lib_widgets_js.c158407baadd2aaa9731.js.map`

 * *Files 0% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.8441558441558442%*

 * *Differences: {"'file'": "'lib_widgets_js.c158407baadd2aaa9731.js'",*

 * * "'mappings'": "';;;;;;;;;AAAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;;;;;;;;;;;ACnCa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB,GAAG,kBAAkB;AAC3C,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,kBAAkB,mBAAO,CAAC,mCAAW;AACrC;AACA,mBAAO,CAAC,2CAAmB;AAC3B;AACA;AACA,6CAA6C,uBAAuB,6QAA6Q,iBAAiB,UAAU;AAC5W;A […]*

```diff
@@ -1,10 +1,10 @@
 {
-    "file": "lib_widgets_js.417df79f43e89915d69a.js",
-    "mappings": ";;;;;;;;;AAAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;;;;;;;;;;;ACnCa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB,GAAG,kBAAkB;AAC3C,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,kBAAkB,mBAAO,CAAC,mCAAW;AACrC;AACA,mBAAO,CAAC,2CAAmB;AAC3B;AACA;AACA,6CAA6C,uBAAuB,6QAA6Q,iBAAiB,UAAU;AAC5W;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,uDAAuD,wCAAwC,YAAY,qCAAqC;AAChJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,IAAI;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;;;;;;;;;;;ACxDa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB,GAAG,eAAe;AAClC,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,kBAAkB,mBAAO,CAAC,mCAAW;AACrC,iBAAiB,mBAAO,CAAC,iCAAU;AACnC,sBAAsB,mBAAO,CAAC,2CAAe;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,uBAAuB,2bAA2b;AAC/f;AACA;AACA;AACA;AACA,sDAAsD,6BAA6B;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,mBAAmB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,iBAAiB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,oBAAoB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,iBAAiB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,iBAAiB;AACzD;AACA;AACA;AACA;AACA,oGAAoG,0CAA0C;AAC9I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,gGAAgG;AAClK;AACA;AACA,4DAA4D,6HAA6H;AACzL;AACA;AACA;AACA;AACA;AACA,wCAAwC,kBAAkB;AAC1D;AACA;AACA,0DAA0D,4HAA4H;AACtL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,sCAAsC;AACnH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8FAA8F,oDAAoD;AAClJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,gBAAgB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,4CAA4C;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,mDAAmD;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,+FAA+F,4CAA4C;AAC3I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,iDAAiD;AACvI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,2CAA2C;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wGAAwG,uCAAuC;AAC/I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yFAAyF,0CAA0C;AACnI;AACA,qDAAqD;AACrD;AACA;AACA,+DAA+D,uIAAuI;AACtM;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yFAAyF,0CAA0C;AACnI;AACA,qDAAqD;AACrD;AACA;AACA,+DAA+D,sKAAsK;AACrO;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,eAAe;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,qBAAqB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,qBAAqB;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,oDAAoD,IAAI;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,gBAAgB;AAChB;;;;;;;;;;;AC36Ba;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB,GAAG,aAAa,GAAG,eAAe,GAAG,mBAAmB,GAAG,mBAAmB,GAAG,mBAAmB,GAAG,qBAAqB,GAAG,iBAAiB,GAAG,eAAe,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,wBAAwB,GAAG,mBAAmB,GAAG,sCAAsC,GAAG,0BAA0B;AAC/W;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;;;;;;;;;;AC/Na;AACb;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB,GAAG,sBAAsB;AAC5C;AACA;AACA;AACA,aAAa,mBAAO,CAAC,uCAAiB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,mBAAmB;AACnB;;;;;;;;;;;ACpBa;AACb;AACA;AACA,mCAAmC,oCAAoC,gBAAgB;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,mBAAO,CAAC,qCAAY;AACjC,aAAa,mBAAO,CAAC,yCAAc;AACnC;;;;;;;;;;ACdA;AACA,kCAAkC,mBAAO,CAAC,qGAAgD;AAC1F;AACA;AACA,kDAAkD,oBAAoB,8BAA8B,gCAAgC,wBAAwB,KAAK,4BAA4B,wBAAwB,kBAAkB,KAAK,8BAA8B,kBAAkB,KAAK;AACjS;AACA;;;;;;;;;;;;ACNa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA,4CAA4C,qBAAqB;AACjE;;AAEA;AACA,KAAK;AACL,KAAK;AACL;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,sBAAsB,iBAAiB;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,qBAAqB;AAC1C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,+BAA+B;;AAE/B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,qDAAqD,cAAc;AACnE;AACA;;;;;;;;;;AC7FA,UAAU,mBAAO,CAAC,oJAAwE;AAC1F,0BAA0B,mBAAO,CAAC,qHAAuD;;AAEzF;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;;AAIA;;;;;;;;;;;AClBa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,wDAAwD;;AAExD;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA,kBAAkB,wBAAwB;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,KAAwC,GAAG,sBAAiB,GAAG,CAAI;;AAEnF;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,qEAAqE,qBAAqB,cAAc;;AAExG;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA,yDAAyD;AACzD,IAAI;;AAEJ;;;AAGA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAoB,4BAA4B;AAChD;AACA;AACA;AACA;;AAEA;;AAEA,qBAAqB,6BAA6B;AAClD;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA",
+    "file": "lib_widgets_js.c158407baadd2aaa9731.js",
+    "mappings": ";;;;;;;;;AAAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;;;;;;;;;;;ACnCa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB,GAAG,kBAAkB;AAC3C,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,kBAAkB,mBAAO,CAAC,mCAAW;AACrC;AACA,mBAAO,CAAC,2CAAmB;AAC3B;AACA;AACA,6CAA6C,uBAAuB,6QAA6Q,iBAAiB,UAAU;AAC5W;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,uDAAuD,wCAAwC,YAAY,qCAAqC;AAChJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,IAAI;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;;;;;;;;;;;ACxDa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB,GAAG,eAAe;AAClC,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,kBAAkB,mBAAO,CAAC,mCAAW;AACrC,iBAAiB,mBAAO,CAAC,iCAAU;AACnC,sBAAsB,mBAAO,CAAC,2CAAe;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,uBAAuB,ucAAuc;AAC3gB;AACA;AACA;AACA;AACA,sDAAsD,6BAA6B;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,mBAAmB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,iBAAiB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,oBAAoB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,iBAAiB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,iBAAiB;AACzD;AACA;AACA;AACA;AACA,oGAAoG,0CAA0C;AAC9I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,gGAAgG;AAClK;AACA;AACA,4DAA4D,6HAA6H;AACzL;AACA;AACA;AACA;AACA;AACA,wCAAwC,kBAAkB;AAC1D;AACA;AACA,0DAA0D,4HAA4H;AACtL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,sCAAsC;AACnH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8FAA8F,oDAAoD;AAClJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,gBAAgB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,4CAA4C;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,mDAAmD;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,+FAA+F,4CAA4C;AAC3I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,iDAAiD;AACvI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,2CAA2C;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wGAAwG,uCAAuC;AAC/I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yFAAyF,0CAA0C;AACnI;AACA,qDAAqD;AACrD;AACA;AACA,+DAA+D,uIAAuI;AACtM;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yFAAyF,0CAA0C;AACnI;AACA,qDAAqD;AACrD;AACA;AACA,+DAA+D,sKAAsK;AACrO;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,eAAe;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,qBAAqB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,qBAAqB;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,oDAAoD,IAAI;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,gBAAgB;AAChB;;;;;;;;;;;ACj7Ba;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB,GAAG,aAAa,GAAG,eAAe,GAAG,mBAAmB,GAAG,mBAAmB,GAAG,mBAAmB,GAAG,qBAAqB,GAAG,iBAAiB,GAAG,eAAe,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,wBAAwB,GAAG,mBAAmB,GAAG,sCAAsC,GAAG,0BAA0B;AAC/W;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;;;;;;;;;;AC/Na;AACb;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB,GAAG,sBAAsB;AAC5C;AACA;AACA;AACA,aAAa,mBAAO,CAAC,uCAAiB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,mBAAmB;AACnB;;;;;;;;;;;ACpBa;AACb;AACA;AACA,mCAAmC,oCAAoC,gBAAgB;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,mBAAO,CAAC,qCAAY;AACjC,aAAa,mBAAO,CAAC,yCAAc;AACnC;;;;;;;;;;ACdA;AACA,kCAAkC,mBAAO,CAAC,qGAAgD;AAC1F;AACA;AACA,kDAAkD,oBAAoB,8BAA8B,gCAAgC,wBAAwB,KAAK,4BAA4B,wBAAwB,kBAAkB,KAAK,8BAA8B,kBAAkB,KAAK;AACjS;AACA;;;;;;;;;;;;ACNa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA,4CAA4C,qBAAqB;AACjE;;AAEA;AACA,KAAK;AACL,KAAK;AACL;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,sBAAsB,iBAAiB;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,qBAAqB;AAC1C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,+BAA+B;;AAE/B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,qDAAqD,cAAc;AACnE;AACA;;;;;;;;;;AC7FA,UAAU,mBAAO,CAAC,oJAAwE;AAC1F,0BAA0B,mBAAO,CAAC,qHAAuD;;AAEzF;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;;AAIA;;;;;;;;;;;AClBa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,wDAAwD;;AAExD;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA,kBAAkB,wBAAwB;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,KAAwC,GAAG,sBAAiB,GAAG,CAAI;;AAEnF;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,qEAAqE,qBAAqB,cAAc;;AAExG;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA,yDAAyD;AACzD,IAAI;;AAEJ;;;AAGA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAoB,4BAA4B;AAChD;AACA;AACA;AACA;;AAEA;;AAEA,qBAAqB,6BAA6B;AAClD;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA",
     "names": [],
     "sourceRoot": "",
     "sources": [
         "webpack://ipywebgl/./lib/arraybuffer.js",
         "webpack://ipywebgl/./lib/glresource.js",
         "webpack://ipywebgl/./lib/glviewer.js",
         "webpack://ipywebgl/./lib/matrix.js",
@@ -14,15 +14,15 @@
         "webpack://ipywebgl/./node_modules/css-loader/dist/runtime/api.js",
         "webpack://ipywebgl/./css/widget.css?a195",
         "webpack://ipywebgl/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"
     ],
     "sourcesContent": [
         "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.buffer_to_array = void 0;\r\nfunction buffer_to_array(dtype, buffer) {\r\n    switch (dtype) {\r\n        case 'int8':\r\n            return new Int8Array(buffer);\r\n            break;\r\n        case 'uint8':\r\n            return new Uint8Array(buffer);\r\n            break;\r\n        case 'int16':\r\n            return new Int16Array(buffer);\r\n            break;\r\n        case 'uint16':\r\n            return new Uint16Array(buffer);\r\n            break;\r\n        case 'int32':\r\n            return new Int32Array(buffer);\r\n            break;\r\n        case 'uint32':\r\n            return new Uint32Array(buffer);\r\n            break;\r\n        case 'float32':\r\n            return new Float32Array(buffer);\r\n            break;\r\n        case 'float64':\r\n            return new Float64Array(buffer);\r\n            break;\r\n        default:\r\n            throw 'Unknown dtype ' + dtype;\r\n            break;\r\n    }\r\n}\r\nexports.buffer_to_array = buffer_to_array;\r\n//# sourceMappingURL=arraybuffer.js.map",
         "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GLResourceView = exports.GLResource = void 0;\r\nconst base_1 = require(\"@jupyter-widgets/base\");\r\nconst version_1 = require(\"./version\");\r\n// Import the CSS\r\nrequire(\"../css/widget.css\");\r\nclass GLResource extends base_1.DOMWidgetModel {\r\n    defaults() {\r\n        return Object.assign(Object.assign({}, super.defaults()), { _model_name: 'GLResource', _model_module: version_1.MODULE_NAME, _model_module_version: version_1.MODULE_VERSION, _view_name: 'GLResourceView', _view_module: version_1.MODULE_NAME, _view_module_version: version_1.MODULE_VERSION, _context: null, _gl_ptr: null, _info: { type: 'not set' }, uid: 0 });\r\n    }\r\n    initialize(attributes, options) {\r\n        super.initialize(attributes, options);\r\n        this.get('_context').register_resource(this);\r\n    }\r\n}\r\nexports.GLResource = GLResource;\r\nGLResource.serializers = Object.assign(Object.assign({}, base_1.DOMWidgetModel.serializers), { _context: { deserialize: base_1.unpack_models } });\r\nclass GLResourceView extends base_1.DOMWidgetView {\r\n    render() {\r\n        const root = this.el;\r\n        const jsonDisplay = document.createElement(\"div\");\r\n        jsonDisplay.classList.add(\"ipywebgl-json-display\");\r\n        const jsonKey = document.createElement(\"div\");\r\n        jsonKey.classList.add(\"ipywebgl-json-key\");\r\n        jsonKey.textContent = \"uid:\";\r\n        const jsonValue = document.createElement(\"div\");\r\n        jsonValue.classList.add(\"ipywebgl-json-value\");\r\n        jsonValue.textContent = this.model.get('uid');\r\n        jsonDisplay.appendChild(jsonKey);\r\n        jsonDisplay.appendChild(jsonValue);\r\n        this.displayJson(this.model.get('_info'), jsonDisplay);\r\n        root.appendChild(jsonDisplay);\r\n    }\r\n    displayJson(json, parent) {\r\n        for (const key in json) {\r\n            const jsonKey = document.createElement(\"div\");\r\n            jsonKey.classList.add(\"ipywebgl-json-key\");\r\n            jsonKey.textContent = `${key}:`;\r\n            const jsonValue = document.createElement(\"div\");\r\n            jsonValue.classList.add(\"ipywebgl-json-value\");\r\n            if (typeof json[key] === \"object\") {\r\n                const nestedJsonDisplay = document.createElement(\"div\");\r\n                nestedJsonDisplay.classList.add(\"ipywebgl-json-display\");\r\n                this.displayJson(json[key], nestedJsonDisplay);\r\n                jsonValue.appendChild(nestedJsonDisplay);\r\n            }\r\n            else {\r\n                jsonValue.textContent = json[key];\r\n            }\r\n            parent.appendChild(jsonKey);\r\n            parent.appendChild(jsonValue);\r\n        }\r\n    }\r\n}\r\nexports.GLResourceView = GLResourceView;\r\n//# sourceMappingURL=glresource.js.map",
-        "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GLViewer = exports.GLModel = void 0;\r\nconst base_1 = require(\"@jupyter-widgets/base\");\r\nconst version_1 = require(\"./version\");\r\nconst matrix_1 = require(\"./matrix\");\r\nconst arraybuffer_1 = require(\"./arraybuffer\");\r\nclass GLModel extends base_1.DOMWidgetModel {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.resources = [];\r\n        this.bound_buffers = {};\r\n        this.commands = [];\r\n        this.buffers = [];\r\n    }\r\n    defaults() {\r\n        return Object.assign(Object.assign({}, super.defaults()), { _model_name: 'GLModel', _model_module: version_1.MODULE_NAME, _model_module_version: version_1.MODULE_VERSION, _view_name: 'GLViewer', _view_module: version_1.MODULE_NAME, _view_module_version: version_1.MODULE_VERSION, shader_matrix_major: 'row_major', width: 700, height: 500, camera_pos: [0, 50, 200], camera_yaw: 0, camera_pitch: 0, camera_fov: 50.0, camera_near: 1.0, camera_far: 5000.0, mouse_speed: 1, move_speed: 1, move_keys: 'wasd' });\r\n    }\r\n    initialize(attributes, options) {\r\n        super.initialize(attributes, options);\r\n        this.canvas = document.createElement('canvas');\r\n        this.ctx = this.canvas.getContext(\"webgl2\", { preserveDrawingBuffer: true });\r\n        if (this.ctx == null) {\r\n            console.error('could not create a webgl2 context, this is not supported in your browser');\r\n        }\r\n        else {\r\n            const gl = this.ctx;\r\n            this.view_block = gl.createBuffer();\r\n            gl.bindBuffer(gl.UNIFORM_BUFFER, this.view_block);\r\n            gl.bufferData(gl.UNIFORM_BUFFER, 256, gl.DYNAMIC_DRAW);\r\n            gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n            gl.bindBufferBase(gl.UNIFORM_BUFFER, 0, this.view_block);\r\n            //extensions to activate\r\n            gl.getExtension(\"EXT_color_buffer_float\");\r\n        }\r\n        this.resizeCanvas();\r\n        this.on_some_change(['width', 'height', 'camera_fov', 'camera_near', 'camera_far'], this.resizeCanvas, this);\r\n        this.on_some_change(['camera_pos', 'camera_yaw', 'camera_pitch'], this.run_commands, this);\r\n        this.on('msg:custom', this.handle_custom_messages, this);\r\n        this.camera_matrix = matrix_1.m4Translation(0, 50, 200);\r\n        this.view_matrix = matrix_1.m4inverse(this.camera_matrix);\r\n    }\r\n    resizeCanvas() {\r\n        this.canvas.setAttribute('width', this.get('width'));\r\n        this.canvas.setAttribute('height', this.get('height'));\r\n        if (this.ctx != null) {\r\n            this.ctx.viewport(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\r\n        }\r\n        this.projection_matrix = matrix_1.m4ProjectionMatrix(this.get('camera_fov'), this.get('width') / this.get('height'), this.get('camera_near'), this.get('camera_far'));\r\n    }\r\n    handle_custom_messages(command, buffers) {\r\n        if (command.clear == true) {\r\n            this.commands = [];\r\n            this.buffers = [];\r\n        }\r\n        let commands = command.commands;\r\n        let converted_buffers = [];\r\n        commands.forEach((element) => {\r\n            if (element.hasOwnProperty('buffer_metadata')) {\r\n                const converted = arraybuffer_1.buffer_to_array(element.buffer_metadata.dtype, buffers[element.buffer_metadata.index].buffer);\r\n                converted_buffers.push(converted);\r\n            }\r\n        });\r\n        if (command.only_once == true) {\r\n            this.execute_commands(commands, converted_buffers);\r\n        }\r\n        else {\r\n            let buffer_id_offset = this.buffers.length;\r\n            this.buffers = this.buffers.concat(converted_buffers);\r\n            commands.forEach((element) => {\r\n                if (element.hasOwnProperty('buffer_metadata')) {\r\n                    element.buffer_metadata.index += buffer_id_offset;\r\n                }\r\n            });\r\n            this.commands = this.commands.concat(commands);\r\n        }\r\n        this.run_commands();\r\n    }\r\n    update_camera() {\r\n        let pos = this.get('camera_pos');\r\n        let yaw = this.get('camera_yaw') * Math.PI / 180.0;\r\n        let pitch = this.get('camera_pitch') * Math.PI / 180.0;\r\n        this.camera_matrix = matrix_1.m4Translation(pos[0], pos[1], pos[2]);\r\n        this.camera_matrix = matrix_1.m4dot(this.camera_matrix, matrix_1.m4Yrotation(yaw));\r\n        this.camera_matrix = matrix_1.m4dot(this.camera_matrix, matrix_1.m4Xrotation(pitch));\r\n        this.view_matrix = matrix_1.m4inverse(this.camera_matrix);\r\n        this.view_proj_matrix = matrix_1.m4dot(this.projection_matrix, this.view_matrix);\r\n    }\r\n    run_commands() {\r\n        this.execute_commands(this.commands, this.buffers);\r\n    }\r\n    execute_commands(commands, converted_buffers) {\r\n        if (this.ctx == null)\r\n            return;\r\n        const gl = this.ctx;\r\n        this.update_camera();\r\n        // update the uniform Block\r\n        let cm = (this.get('shader_matrix_major') == 'row_major') ? matrix_1.m4Transpose(this.camera_matrix) : this.camera_matrix;\r\n        const cm_f32 = new Float32Array(cm);\r\n        let vm = (this.get('shader_matrix_major') == 'row_major') ? matrix_1.m4Transpose(this.view_matrix) : this.view_matrix;\r\n        const vm_f32 = new Float32Array(vm);\r\n        let pm = (this.get('shader_matrix_major') == 'row_major') ? matrix_1.m4Transpose(this.projection_matrix) : this.projection_matrix;\r\n        const pm_f32 = new Float32Array(pm);\r\n        let vpm = (this.get('shader_matrix_major') == 'row_major') ? matrix_1.m4Transpose(this.view_proj_matrix) : this.view_proj_matrix;\r\n        const vpm_f32 = new Float32Array(vpm);\r\n        gl.bindBuffer(gl.UNIFORM_BUFFER, this.view_block);\r\n        gl.bufferSubData(gl.UNIFORM_BUFFER, 0, cm_f32, 0);\r\n        gl.bufferSubData(gl.UNIFORM_BUFFER, 64, vm_f32, 0);\r\n        gl.bufferSubData(gl.UNIFORM_BUFFER, 128, pm_f32, 0);\r\n        gl.bufferSubData(gl.UNIFORM_BUFFER, 192, vpm_f32, 0);\r\n        gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n        commands.forEach((command) => {\r\n            this.execute_command(gl, command, converted_buffers);\r\n        });\r\n    }\r\n    glEnumToString(gl, value) {\r\n        const keys = [];\r\n        for (const key in gl) {\r\n            if (gl[key] === value) {\r\n                keys.push(key);\r\n            }\r\n        }\r\n        return keys.length ? keys.join(' | ') : `0x${value.toString(16)}`;\r\n    }\r\n    execute_command(gl, command, converted_buffers) {\r\n        console.log(command);\r\n        //console.log(this.bound_buffers);\r\n        switch (command.cmd) {\r\n            case 'viewport':\r\n                gl.viewport(command.x, command.y, command.width, command.height);\r\n                break;\r\n            case 'enable':\r\n            case 'disable':\r\n                {\r\n                    let cap = 0;\r\n                    if (command.blend)\r\n                        cap |= gl.BLEND;\r\n                    if (command.depth_test)\r\n                        cap |= gl.DEPTH_TEST;\r\n                    if (command.dither)\r\n                        cap |= gl.DITHER;\r\n                    if (command.polygon_offset_fill)\r\n                        cap |= gl.POLYGON_OFFSET_FILL;\r\n                    if (command.sample_alpha_to_coverage)\r\n                        cap |= gl.SAMPLE_ALPHA_TO_COVERAGE;\r\n                    if (command.sample_coverage)\r\n                        cap |= gl.SAMPLE_COVERAGE;\r\n                    if (command.scissor_test)\r\n                        cap |= gl.SCISSOR_TEST;\r\n                    if (command.stencil_test)\r\n                        cap |= gl.STENCIL_TEST;\r\n                    if (command.rasterizer_discard)\r\n                        cap |= gl.RASTERIZER_DISCARD;\r\n                    if (command.cull_face)\r\n                        cap |= gl.CULL_FACE;\r\n                    if (command.cmd == 'enable') {\r\n                        gl.enable(cap);\r\n                    }\r\n                    else {\r\n                        gl.disable(cap);\r\n                    }\r\n                }\r\n                break;\r\n            case 'clearColor':\r\n                gl.clearColor(command.r, command.g, command.b, command.a);\r\n                break;\r\n            case 'clear':\r\n                {\r\n                    let bits = 0;\r\n                    if (command.depth)\r\n                        bits |= gl.DEPTH_BUFFER_BIT;\r\n                    if (command.color)\r\n                        bits |= gl.COLOR_BUFFER_BIT;\r\n                    if (command.stencil)\r\n                        bits |= gl.STENCIL_BUFFER_BIT;\r\n                    gl.clear(bits);\r\n                }\r\n                break;\r\n            case 'frontFace':\r\n                {\r\n                    gl.frontFace(gl[command.mode]);\r\n                }\r\n                break;\r\n            case 'cullFace':\r\n                {\r\n                    gl.cullFace(gl[command.mode]);\r\n                }\r\n                break;\r\n            // ------------------------------- DEPTH --------------------------------------\r\n            case 'depthFunc':\r\n                {\r\n                    gl.depthFunc(gl[command.func]);\r\n                }\r\n                break;\r\n            case 'depthMask':\r\n                {\r\n                    gl.depthMask(command.flag);\r\n                }\r\n                break;\r\n            case 'depthRange':\r\n                {\r\n                    gl.depthRange(command.z_near, command.z_far);\r\n                }\r\n                break;\r\n            // ------------------------------- COLOR --------------------------------------\r\n            case 'blendColor':\r\n                gl.blendColor(command.r, command.g, command.b, command.a);\r\n                break;\r\n            case 'blendEquation':\r\n                gl.blendEquation(gl[command.mode]);\r\n                break;\r\n            case 'blendEquationSeparate':\r\n                gl.blendEquationSeparate(gl[command.mode_rgb], gl[command.mode_alpha]);\r\n                break;\r\n            case 'blendFunc':\r\n                gl.blendFunc(gl[command.s_factor], gl[command.d_factor]);\r\n                break;\r\n            case 'blend_func_separate':\r\n                gl.blendFuncSeparate(gl[command.src_rgb], gl[command.dst_rgb], gl[command.src_alpha], gl[command.dst_alpha]);\r\n                break;\r\n            // ------------------------------- TEXTURE --------------------------------------\r\n            case 'createTexture':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createTexture();\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: 'texture' });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'bindTexture':\r\n                {\r\n                    if (command.texture > -1) {\r\n                        const texture = this.get_resource(command.texture).get('_gl_ptr');\r\n                        gl.bindTexture(gl[command.target], texture);\r\n                    }\r\n                    else {\r\n                        gl.bindTexture(gl[command.target], null);\r\n                    }\r\n                }\r\n                break;\r\n            case 'activeTexture':\r\n                gl.activeTexture(gl.TEXTURE0 + command.texture);\r\n                break;\r\n            case 'generateMipmap':\r\n                gl.generateMipmap(gl[command.target]);\r\n                break;\r\n            case 'texImage2D':\r\n                if (command.hasOwnProperty('buffer_metadata')) {\r\n                    gl.texImage2D(gl[command.target], command.level, gl[command.internal_format], command.width, command.height, command.border, gl[command.format], gl[command.data_type], converted_buffers[command.buffer_metadata.index]);\r\n                }\r\n                else {\r\n                    gl.texImage2D(gl[command.target], command.level, gl[command.internal_format], command.width, command.height, command.border, gl[command.format], gl[command.data_type], null);\r\n                }\r\n                break;\r\n            case 'texStorage2D':\r\n                {\r\n                    gl.texStorage2D(gl[command.target], command.levels, gl[command.internal_format], command.width, command.height);\r\n                }\r\n                break;\r\n            case 'texImage3D':\r\n                if (command.hasOwnProperty('buffer_metadata')) {\r\n                    gl.texImage3D(gl[command.target], command.level, gl[command.internal_format], command.width, command.height, command.depth, command.border, gl[command.format], gl[command.data_type], converted_buffers[command.buffer_metadata.index]);\r\n                }\r\n                else {\r\n                    gl.texImage3D(gl[command.target], command.level, gl[command.internal_format], command.width, command.height, command.depth, command.border, gl[command.format], gl[command.data_type], null);\r\n                }\r\n                break;\r\n            case 'texStorage3D':\r\n                {\r\n                    gl.texStorage3D(gl[command.target], command.levels, gl[command.internal_format], command.width, command.height, command.depth);\r\n                }\r\n                break;\r\n            case 'texParameteri':\r\n                gl.texParameteri(gl[command.target], gl[command.pname], command.param);\r\n                break;\r\n            case 'texParameterf':\r\n                gl.texParameterf(gl[command.target], gl[command.pname], command.param);\r\n                break;\r\n            case 'texParameter_str':\r\n                gl.texParameteri(gl[command.target], gl[command.pname], gl[command.param]);\r\n                break;\r\n            case 'pixelStorei':\r\n                {\r\n                    if (command.pname == 'UNPACK_COLORSPACE_CONVERSION_WEBGL') {\r\n                        gl.pixelStorei(gl[command.pname], gl[command.param]);\r\n                    }\r\n                    else {\r\n                        gl.pixelStorei(gl[command.pname], command.param);\r\n                    }\r\n                }\r\n                break;\r\n            // ------------------------------- SHADERS --------------------------------------\r\n            case 'createShader':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createShader(gl[command.type]);\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: command.type });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'shaderSource':\r\n                {\r\n                    const res = this.get_resource(command.shader);\r\n                    const ptr = res.get('_gl_ptr');\r\n                    gl.shaderSource(ptr, command.source);\r\n                }\r\n                break;\r\n            case 'compileShader':\r\n                {\r\n                    const res = this.get_resource(command.shader);\r\n                    const ptr = res.get('_gl_ptr');\r\n                    gl.compileShader(ptr);\r\n                    let resinfo = res.get('_info');\r\n                    if (!gl.getShaderParameter(ptr, gl.COMPILE_STATUS)) {\r\n                        let info = gl.getShaderInfoLog(ptr);\r\n                        resinfo.message = info;\r\n                    }\r\n                    else {\r\n                        resinfo.message = 'compiled';\r\n                    }\r\n                    res.set('_info', resinfo);\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            // ------------------------------- PROGRAMS --------------------------------------\r\n            case 'createProgram':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createProgram();\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: 'Program' });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'attachShader':\r\n                {\r\n                    const prog = this.get_resource(command.program).get('_gl_ptr');\r\n                    const shader = this.get_resource(command.shader).get('_gl_ptr');\r\n                    gl.attachShader(prog, shader);\r\n                }\r\n                break;\r\n            case 'bindAttribLocation':\r\n                {\r\n                    let res = this.get_resource(command.program);\r\n                    const ptr = res.get('_gl_ptr');\r\n                    gl.bindAttribLocation(ptr, command.index, command.name);\r\n                }\r\n                break;\r\n            case 'linkProgram':\r\n                {\r\n                    let res = this.get_resource(command.program);\r\n                    const ptr = res.get('_gl_ptr');\r\n                    gl.linkProgram(ptr);\r\n                    gl.validateProgram(ptr);\r\n                    let resinfo = res.get('_info');\r\n                    if (!gl.getProgramParameter(ptr, gl.LINK_STATUS)) {\r\n                        let info = gl.getShaderInfoLog(ptr);\r\n                        resinfo.message = info;\r\n                    }\r\n                    else {\r\n                        //bind our viewBlock\r\n                        let viewBlockIndex = gl.getUniformBlockIndex(ptr, 'ViewBlock');\r\n                        if (viewBlockIndex < 4294967295) {\r\n                            gl.uniformBlockBinding(ptr, viewBlockIndex, 0);\r\n                        }\r\n                        resinfo.message = 'linked';\r\n                        resinfo.uniforms_blocks = [];\r\n                        resinfo.uniforms = [];\r\n                        const numUniforms = gl.getProgramParameter(ptr, gl.ACTIVE_UNIFORMS);\r\n                        const indices = [...Array(numUniforms).keys()];\r\n                        const blockIndices = gl.getActiveUniforms(ptr, indices, gl.UNIFORM_BLOCK_INDEX);\r\n                        const offsets = gl.getActiveUniforms(ptr, indices, gl.UNIFORM_OFFSET);\r\n                        for (let i = 0; i < numUniforms; ++i) {\r\n                            const info = gl.getActiveUniform(ptr, i);\r\n                            if (info) {\r\n                                // regroup the blocks\r\n                                if (blockIndices[i] > -1) {\r\n                                    let uniform_block = resinfo.uniforms_blocks.find((element) => { return element.index == blockIndices[i]; });\r\n                                    if (uniform_block == undefined) {\r\n                                        uniform_block = {\r\n                                            index: blockIndices[i],\r\n                                            name: gl.getActiveUniformBlockName(ptr, blockIndices[i]),\r\n                                            size: gl.getActiveUniformBlockParameter(ptr, blockIndices[i], gl.UNIFORM_BLOCK_DATA_SIZE),\r\n                                            uniforms: []\r\n                                        };\r\n                                        resinfo.uniforms_blocks.push(uniform_block);\r\n                                    }\r\n                                    uniform_block.uniforms.push({ name: info.name, type: this.glEnumToString(gl, info.type), size: info.size, offset: offsets[i] });\r\n                                }\r\n                                else {\r\n                                    resinfo.uniforms.push({ name: info.name, type: this.glEnumToString(gl, info.type), size: info.size, location: gl.getUniformLocation(ptr, info.name) });\r\n                                }\r\n                            }\r\n                        }\r\n                        resinfo.attributes = [];\r\n                        const numAttribute = gl.getProgramParameter(ptr, gl.ACTIVE_ATTRIBUTES);\r\n                        for (let i = 0; i < numAttribute; ++i) {\r\n                            const info = gl.getActiveAttrib(ptr, i);\r\n                            if (info)\r\n                                resinfo.attributes.push({ name: info.name, type: this.glEnumToString(gl, info.type), size: info.size, location: gl.getAttribLocation(ptr, info.name) });\r\n                        }\r\n                    }\r\n                    res.set('_info', resinfo);\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'useProgram':\r\n                {\r\n                    if (command.program >= 0) {\r\n                        const res = this.get_resource(command.program);\r\n                        const ptr = res.get('_gl_ptr');\r\n                        gl.useProgram(ptr);\r\n                        this.bound_program = res;\r\n                    }\r\n                    else {\r\n                        gl.useProgram(null);\r\n                        this.bound_program = null;\r\n                    }\r\n                }\r\n                break;\r\n            case 'uniform':\r\n            case 'uniformMatrix':\r\n                {\r\n                    if (this.bound_program != null) {\r\n                        let resinfo = this.bound_program.get('_info');\r\n                        const uniform = resinfo.uniforms.find((element) => { return element.name == command.name; });\r\n                        if (uniform != undefined) {\r\n                            const location = uniform.location;\r\n                            if (command.cmd == 'uniform') {\r\n                                let shape = command.buffer_metadata.shape[command.buffer_metadata.shape.length - 1];\r\n                                if (command.buffer_metadata.dtype == 'int32') {\r\n                                    let bufarray = converted_buffers[command.buffer_metadata.index];\r\n                                    if (shape == 1)\r\n                                        gl.uniform1iv(location, bufarray);\r\n                                    else if (shape == 2)\r\n                                        gl.uniform2iv(location, bufarray);\r\n                                    else if (shape == 3)\r\n                                        gl.uniform3iv(location, bufarray);\r\n                                    else if (shape == 4)\r\n                                        gl.uniform4iv(location, bufarray);\r\n                                }\r\n                                else if (command.buffer_metadata.dtype == 'uint32') {\r\n                                    let bufarray = converted_buffers[command.buffer_metadata.index];\r\n                                    if (shape == 1)\r\n                                        gl.uniform1uiv(location, bufarray);\r\n                                    else if (shape == 2)\r\n                                        gl.uniform2uiv(location, bufarray);\r\n                                    else if (shape == 3)\r\n                                        gl.uniform3uiv(location, bufarray);\r\n                                    else if (shape == 4)\r\n                                        gl.uniform4uiv(location, bufarray);\r\n                                }\r\n                                else if (command.buffer_metadata.dtype == 'float32') {\r\n                                    let bufarray = converted_buffers[command.buffer_metadata.index];\r\n                                    if (shape == 1)\r\n                                        gl.uniform1fv(location, bufarray);\r\n                                    else if (shape == 2)\r\n                                        gl.uniform2fv(location, bufarray);\r\n                                    else if (shape == 3)\r\n                                        gl.uniform3fv(location, bufarray);\r\n                                    else if (shape == 4)\r\n                                        gl.uniform4fv(location, bufarray);\r\n                                }\r\n                            }\r\n                            else {\r\n                                let a = command.buffer_metadata.shape[command.buffer_metadata.shape.length - 2];\r\n                                let b = command.buffer_metadata.shape[command.buffer_metadata.shape.length - 1];\r\n                                let bufarray = converted_buffers[command.buffer_metadata.index];\r\n                                if (a == 2) {\r\n                                    if (b == 2)\r\n                                        gl.uniformMatrix2fv(location, false, bufarray);\r\n                                    else if (b == 3)\r\n                                        gl.uniformMatrix2x3fv(location, false, bufarray);\r\n                                    else if (b == 4)\r\n                                        gl.uniformMatrix2x4fv(location, false, bufarray);\r\n                                }\r\n                                else if (a == 3) {\r\n                                    if (b == 2)\r\n                                        gl.uniformMatrix3x2fv(location, false, bufarray);\r\n                                    else if (b == 3)\r\n                                        gl.uniformMatrix3fv(location, false, bufarray);\r\n                                    else if (b == 4)\r\n                                        gl.uniformMatrix3x4fv(location, false, bufarray);\r\n                                }\r\n                                else if (a == 4) {\r\n                                    if (b == 2)\r\n                                        gl.uniformMatrix4x2fv(location, false, bufarray);\r\n                                    else if (b == 3)\r\n                                        gl.uniformMatrix4x3fv(location, false, bufarray);\r\n                                    else if (b == 4)\r\n                                        gl.uniformMatrix4fv(location, false, bufarray);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            case 'uniformBlockBinding':\r\n                {\r\n                    let res = this.get_resource(command.program);\r\n                    const ptr = res.get('_gl_ptr');\r\n                    const uniformblock = res.get('_info').uniforms_blocks.find((element) => { return element.name == command.uniform_block_name; });\r\n                    if (uniformblock != undefined) {\r\n                        gl.uniformBlockBinding(ptr, uniformblock.index, command.uniform_block_binding);\r\n                    }\r\n                }\r\n                break;\r\n            // ------------------------------- BUFFERS --------------------------------------\r\n            case 'createBuffer':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createBuffer();\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: 'Buffer' });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'bindBuffer':\r\n                {\r\n                    const target = command.target;\r\n                    if (command.buffer >= 0) {\r\n                        const res = this.get_resource(command.buffer);\r\n                        const ptr = res.get('_gl_ptr');\r\n                        gl.bindBuffer(gl[target], ptr);\r\n                        this.bound_buffers[target] = res;\r\n                    }\r\n                    else {\r\n                        gl.bindBuffer(gl[target], null);\r\n                        this.bound_buffers[target] = null;\r\n                    }\r\n                }\r\n                break;\r\n            case 'bindBufferBase':\r\n                {\r\n                    const target = command.target;\r\n                    if (command.buffer >= 0) {\r\n                        const res = this.get_resource(command.buffer);\r\n                        const ptr = res.get('_gl_ptr');\r\n                        gl.bindBufferBase(gl[target], command.index, ptr);\r\n                    }\r\n                    else {\r\n                        gl.bindBufferBase(gl[target], command.index, null);\r\n                    }\r\n                }\r\n                break;\r\n            case 'bufferData':\r\n                {\r\n                    const target = command.target;\r\n                    const usage = command.usage;\r\n                    if (command.hasOwnProperty('buffer_metadata')) {\r\n                        gl.bufferData(gl[target], converted_buffers[command.buffer_metadata.index], gl[usage]);\r\n                        let buf = this.bound_buffers[target];\r\n                        if (command.update_info && buf != null) {\r\n                            const size = gl.getBufferParameter(gl[target], gl.BUFFER_SIZE);\r\n                            buf.set('_info', { type: \"Buffer\", size: size, target: target });\r\n                            buf.save_changes();\r\n                        }\r\n                    }\r\n                    else {\r\n                        let buf = this.bound_buffers[target];\r\n                        gl.bufferData(gl[target], null, gl[usage]);\r\n                        if (command.update_info && buf != null) {\r\n                            buf.set('_info', { type: \"Buffer\", size: 'Undefined', target: target });\r\n                            buf.save_changes();\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            case 'createUniformBuffer':\r\n                {\r\n                    let res = this.get_resource(command.buffer);\r\n                    const ptr = gl.createBuffer();\r\n                    let info = { type: 'Buffer' };\r\n                    const prog = this.get_resource(command.program);\r\n                    const uniformblock = prog.get('_info').uniforms_blocks.find((element) => { return element.name == command.block_name; });\r\n                    if (uniformblock != undefined) {\r\n                        gl.bindBuffer(gl.UNIFORM_BUFFER, ptr);\r\n                        gl.bufferData(gl.UNIFORM_BUFFER, uniformblock.size, gl[command.usage]);\r\n                        gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n                        this.bound_buffers[\"UNIFORM_BUFFER\"] = null;\r\n                        info[\"size\"] = uniformblock.size;\r\n                        info[\"target\"] = \"UNIFORM_BUFFER\";\r\n                        info[\"uniformblock\"] = uniformblock;\r\n                    }\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', info);\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'bufferSubData':\r\n            case 'bufferSubDataStr':\r\n                {\r\n                    const target = command.target;\r\n                    let offset = command.dst_byte_offset;\r\n                    if (command.cmd == 'bufferSubDataStr') {\r\n                        offset = 0;\r\n                        let buf = this.bound_buffers[target];\r\n                        if (buf != null) {\r\n                            const uniformblock = buf.get('_info').uniformblock;\r\n                            const uniform = uniformblock.uniforms.find((element) => { return element.name == command.dst_byte_offset; });\r\n                            if (uniform != undefined) {\r\n                                offset = uniform.offset;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (command.hasOwnProperty('buffer_metadata')) {\r\n                        gl.bufferSubData(gl[target], offset, converted_buffers[command.buffer_metadata.index], command.src_offset);\r\n                    }\r\n                    else {\r\n                        gl.bufferSubData(gl[target], offset, command.src_offset);\r\n                    }\r\n                }\r\n                break;\r\n            // ------------------------------- VERTEX ARRAYS --------------------------------------\r\n            case 'createVertexArray':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createVertexArray();\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: 'Vertex Array Object', bindings: [] });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'bindVertexArray':\r\n                {\r\n                    if (command.vertex_array >= 0) {\r\n                        const res = this.get_resource(command.vertex_array);\r\n                        const ptr = res.get('_gl_ptr');\r\n                        gl.bindVertexArray(ptr);\r\n                        this.bound_vao = res;\r\n                    }\r\n                    else {\r\n                        gl.bindVertexArray(null);\r\n                        this.bound_vao = null;\r\n                    }\r\n                }\r\n                break;\r\n            case 'vertexAttribPointer':\r\n            case 'vertexAttribIPointer':\r\n            case 'enableVertexAttribArray':\r\n            case 'disableVertexAttribArray':\r\n            case 'vertexAttrib[1234]fv':\r\n            case 'vertexAttribI4[u]iv':\r\n            case 'vertexAttribDivisor':\r\n                {\r\n                    let index = -1;\r\n                    if (typeof command.index === 'number') {\r\n                        index = command.index;\r\n                    }\r\n                    else {\r\n                        if (this.bound_program != null) {\r\n                            const attr = this.bound_program.get('_info').attributes.find((element) => { return element.name == command.index; });\r\n                            if (attr != undefined) {\r\n                                index = attr.location;\r\n                            }\r\n                        }\r\n                        else {\r\n                            console.error(\"a program must be bound to find the attribute\");\r\n                        }\r\n                    }\r\n                    let buf = this.bound_buffers['ARRAY_BUFFER'];\r\n                    if (index >= 0) {\r\n                        index += command.index_offset;\r\n                        if (command.cmd == \"vertexAttribIPointer\") {\r\n                            gl.vertexAttribIPointer(index, command.size, gl[command.type], command.stride, command.offset);\r\n                            if (this.bound_vao != null && buf != null) {\r\n                                let vao_info = this.bound_vao.get('_info');\r\n                                const buffer_uid = buf.get('uid');\r\n                                let binding_info = vao_info.bindings.find((element) => { return element.buffer_uid == buffer_uid; });\r\n                                if (binding_info == undefined) {\r\n                                    binding_info = { buffer_uid: buffer_uid, attributes: [] };\r\n                                    vao_info.bindings.push(binding_info);\r\n                                }\r\n                                binding_info.attributes.push({ pointer: \"vertexAttribIPointer\", index: index, size: command.size, type: command.type, stride: command.stride, offset: command.offset });\r\n                                this.bound_vao.set('_info', vao_info);\r\n                                this.bound_vao.save_changes();\r\n                            }\r\n                        }\r\n                        else if (command.cmd == \"vertexAttribPointer\") {\r\n                            gl.vertexAttribPointer(index, command.size, gl[command.type], command.normalized, command.stride, command.offset);\r\n                            if (this.bound_vao != null && buf != null) {\r\n                                let vao_info = this.bound_vao.get('_info');\r\n                                const buffer_uid = buf.get('uid');\r\n                                let binding_info = vao_info.bindings.find((element) => { return element.buffer_uid == buffer_uid; });\r\n                                if (binding_info == undefined) {\r\n                                    binding_info = { buffer_uid: buffer_uid, attributes: [] };\r\n                                    vao_info.bindings.push(binding_info);\r\n                                }\r\n                                binding_info.attributes.push({ pointer: \"vertexAttribPointer\", index: index, size: command.size, type: command.type, normalized: command.normalized, stride: command.stride, offset: command.offset });\r\n                                this.bound_vao.set('_info', vao_info);\r\n                                this.bound_vao.save_changes();\r\n                            }\r\n                        }\r\n                        else if (command.cmd == \"enableVertexAttribArray\") {\r\n                            gl.enableVertexAttribArray(index);\r\n                        }\r\n                        else if (command.cmd == \"disableVertexAttribArray\") {\r\n                            gl.disableVertexAttribArray(index);\r\n                        }\r\n                        else if (command.cmd == \"vertexAttrib[1234]fv\") {\r\n                            if (command.buffer_metadata.shape[0] == 1) {\r\n                                gl.vertexAttrib1fv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                            else if (command.buffer_metadata.shape[0] == 2) {\r\n                                gl.vertexAttrib2fv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                            if (command.buffer_metadata.shape[0] == 3) {\r\n                                gl.vertexAttrib3fv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                            if (command.buffer_metadata.shape[0] == 4) {\r\n                                gl.vertexAttrib4fv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                        }\r\n                        else if (command.cmd == \"vertexAttribI4[u]iv\") {\r\n                            if (command.buffer_metadata.dtype == \"uint32\") {\r\n                                gl.vertexAttribI4uiv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                            else if (command.buffer_metadata.dtype == \"int32\") {\r\n                                gl.vertexAttribI4iv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                        }\r\n                        else if (command.cmd == \"vertexAttribDivisor\") {\r\n                            gl.vertexAttribDivisor(index, command.divisor);\r\n                        }\r\n                    }\r\n                    else {\r\n                        console.error(`attribute ${command.index} location not found`);\r\n                    }\r\n                }\r\n                break;\r\n            // ------------------------------- RENDER --------------------------------------\r\n            case 'drawArrays':\r\n                {\r\n                    gl.drawArrays(gl[command.mode], command.first, command.count);\r\n                }\r\n                break;\r\n            case 'drawArraysInstanced':\r\n                {\r\n                    gl.drawArraysInstanced(gl[command.mode], command.first, command.count, command.instance_count);\r\n                }\r\n                break;\r\n            case 'drawElements':\r\n                {\r\n                    gl.drawElements(gl[command.mode], command.count, gl[command.type], command.offset);\r\n                }\r\n                break;\r\n            case 'drawElementsInstanced':\r\n                {\r\n                    gl.drawElementsInstanced(gl[command.mode], command.count, gl[command.type], command.offset, command.instance_count);\r\n                }\r\n                break;\r\n            // ------------------------------- FRAMEBUFFER --------------------------------------\r\n            case 'createFramebuffer':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createFramebuffer();\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: 'Framebuffer' });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'bindFramebuffer':\r\n                {\r\n                    if (command.framebuffer >= 0) {\r\n                        let res = this.get_resource(command.framebuffer);\r\n                        gl.bindFramebuffer(gl[command.target], res.get('_gl_ptr'));\r\n                    }\r\n                    else {\r\n                        gl.bindFramebuffer(gl[command.target], null);\r\n                    }\r\n                }\r\n                break;\r\n            case 'framebufferTexture2D':\r\n                {\r\n                    let res = this.get_resource(command.texture);\r\n                    gl.framebufferTexture2D(gl[command.target], gl[command.attachement], gl[command.textarget], res.get('_gl_ptr'), command.level);\r\n                }\r\n                break;\r\n            case 'drawBuffers':\r\n                {\r\n                    const buffers = command.buffers.map((element) => { return gl[element]; });\r\n                    gl.drawBuffers(buffers);\r\n                }\r\n                break;\r\n        }\r\n    }\r\n    register_resource(resource) {\r\n        if (resource.get('uid') != this.resources.length) {\r\n            console.error('uid not matching what we have internally');\r\n        }\r\n        this.resources.push(resource);\r\n    }\r\n    get_resource(index) {\r\n        return this.resources[index];\r\n    }\r\n}\r\nexports.GLModel = GLModel;\r\nGLModel.serializers = Object.assign({}, base_1.DOMWidgetModel.serializers);\r\nclass GLViewer extends base_1.DOMWidgetView {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.is_mouse_down = false;\r\n        this.move_direction = [false, false, false, false];\r\n        this.will_redraw = false;\r\n    }\r\n    render() {\r\n        this.el.appendChild(this.model.canvas);\r\n        this.resizeCanvas();\r\n        this.model.on_some_change(['width', 'height'], this.resizeCanvas, this);\r\n        this.el.addEventListener('mousemove', {\r\n            handleEvent: this.onMouseMove.bind(this)\r\n        });\r\n        this.el.addEventListener('mousedown', {\r\n            handleEvent: this.onMouseDown.bind(this)\r\n        });\r\n        this.el.addEventListener('mouseup', {\r\n            handleEvent: this.onMouseUp.bind(this)\r\n        });\r\n        this.el.addEventListener('mouseout', {\r\n            handleEvent: this.onMouseOut.bind(this)\r\n        });\r\n        this.el.addEventListener('keydown', {\r\n            handleEvent: this.onKeyDown.bind(this)\r\n        });\r\n        this.el.addEventListener('keyup', {\r\n            handleEvent: this.onKeyUp.bind(this)\r\n        });\r\n        this.el.setAttribute('tabindex', '0');\r\n    }\r\n    resizeCanvas() {\r\n        this.el.setAttribute('width', this.model.get('width'));\r\n        this.el.setAttribute('height', this.model.get('height'));\r\n        this.model.resizeCanvas();\r\n    }\r\n    redraw() {\r\n        this.will_redraw = false;\r\n        // update movement if needed\r\n        if (this.move_direction[0] || this.move_direction[1] || this.move_direction[2] || this.move_direction[3]) {\r\n            let speed = this.model.get('move_speed');\r\n            let forward_axis = matrix_1.m4getColumnK(this.model.camera_matrix);\r\n            let side_axis = matrix_1.m4getColumnI(this.model.camera_matrix);\r\n            let camera_pos = this.model.get('camera_pos');\r\n            if (this.move_direction[0]) {\r\n                camera_pos = matrix_1.vec3Add(camera_pos, matrix_1.vec3Scale(forward_axis, -speed));\r\n            }\r\n            if (this.move_direction[2]) {\r\n                camera_pos = matrix_1.vec3Add(camera_pos, matrix_1.vec3Scale(forward_axis, speed));\r\n            }\r\n            if (this.move_direction[1]) {\r\n                camera_pos = matrix_1.vec3Add(camera_pos, matrix_1.vec3Scale(side_axis, -speed));\r\n            }\r\n            if (this.move_direction[3]) {\r\n                camera_pos = matrix_1.vec3Add(camera_pos, matrix_1.vec3Scale(side_axis, speed));\r\n            }\r\n            this.model.set('camera_pos', camera_pos);\r\n            this.touch();\r\n            // request a new frame if we are moving\r\n            this.requestRedraw();\r\n        }\r\n        // re draw\r\n        this.model.run_commands();\r\n    }\r\n    requestRedraw() {\r\n        if (this.will_redraw == false) {\r\n            this.will_redraw = true;\r\n            requestAnimationFrame(this.redraw.bind(this));\r\n        }\r\n    }\r\n    onMouseMove(event) {\r\n        //this.model.send({ event: 'mouse_move', ...this.getCoordinates(event) }, {});\r\n        if (this.is_mouse_down) {\r\n            let speed = this.model.get('mouse_speed');\r\n            this.model.set('camera_yaw', this.model.get('camera_yaw') - (event.movementX) * 0.2 * speed);\r\n            this.model.set('camera_pitch', this.model.get('camera_pitch') - (event.movementY) * 0.2 * speed);\r\n            this.touch();\r\n            this.requestRedraw();\r\n        }\r\n    }\r\n    onMouseDown(event) {\r\n        this.is_mouse_down = true;\r\n        this.model.canvas.focus();\r\n    }\r\n    onMouseUp(event) {\r\n        this.is_mouse_down = false;\r\n    }\r\n    onMouseOut(event) {\r\n        this.is_mouse_down = false;\r\n        this.move_direction = [false, false, false, false];\r\n    }\r\n    onKeyDown(event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        let keys = this.model.get('move_keys');\r\n        if (event.repeat == false) {\r\n            if (event.key == keys[0]) {\r\n                this.move_direction[0] = true;\r\n                this.requestRedraw();\r\n            }\r\n            else if (event.key == keys[1]) {\r\n                this.move_direction[1] = true;\r\n                this.requestRedraw();\r\n            }\r\n            else if (event.key == keys[2]) {\r\n                this.move_direction[2] = true;\r\n                this.requestRedraw();\r\n            }\r\n            else if (event.key == keys[3]) {\r\n                this.move_direction[3] = true;\r\n                this.requestRedraw();\r\n            }\r\n        }\r\n    }\r\n    onKeyUp(event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        let keys = this.model.get('move_keys');\r\n        if (event.key == keys[0]) {\r\n            this.move_direction[0] = false;\r\n        }\r\n        else if (event.key == keys[1]) {\r\n            this.move_direction[1] = false;\r\n        }\r\n        else if (event.key == keys[2]) {\r\n            this.move_direction[2] = false;\r\n        }\r\n        else if (event.key == keys[3]) {\r\n            this.move_direction[3] = false;\r\n        }\r\n    }\r\n    getCoordinates(event) {\r\n        const rect = this.el.getBoundingClientRect();\r\n        const x = (this.model.get('width') * (event.clientX - rect.left)) / rect.width;\r\n        const y = (this.model.get('height') * (event.clientY - rect.top)) / rect.height;\r\n        return { x, y };\r\n    }\r\n}\r\nexports.GLViewer = GLViewer;\r\n//# sourceMappingURL=glviewer.js.map",
+        "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GLViewer = exports.GLModel = void 0;\r\nconst base_1 = require(\"@jupyter-widgets/base\");\r\nconst version_1 = require(\"./version\");\r\nconst matrix_1 = require(\"./matrix\");\r\nconst arraybuffer_1 = require(\"./arraybuffer\");\r\nclass GLModel extends base_1.DOMWidgetModel {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.resources = [];\r\n        this.bound_buffers = {};\r\n        this.commands = [];\r\n        this.buffers = [];\r\n    }\r\n    defaults() {\r\n        return Object.assign(Object.assign({}, super.defaults()), { _model_name: 'GLModel', _model_module: version_1.MODULE_NAME, _model_module_version: version_1.MODULE_VERSION, _view_name: 'GLViewer', _view_module: version_1.MODULE_NAME, _view_module_version: version_1.MODULE_VERSION, shader_matrix_major: 'row_major', width: 700, height: 500, camera_pos: [0, 50, 200], camera_yaw: 0, camera_pitch: 0, camera_fov: 50.0, camera_near: 1.0, camera_far: 5000.0, mouse_speed: 1, move_speed: 1, move_keys: 'wasd', verbose: 0 });\r\n    }\r\n    initialize(attributes, options) {\r\n        super.initialize(attributes, options);\r\n        this.canvas = document.createElement('canvas');\r\n        this.ctx = this.canvas.getContext(\"webgl2\", { preserveDrawingBuffer: true });\r\n        if (this.ctx == null) {\r\n            console.error('could not create a webgl2 context, this is not supported in your browser');\r\n        }\r\n        else {\r\n            const gl = this.ctx;\r\n            this.view_block = gl.createBuffer();\r\n            gl.bindBuffer(gl.UNIFORM_BUFFER, this.view_block);\r\n            gl.bufferData(gl.UNIFORM_BUFFER, 256, gl.DYNAMIC_DRAW);\r\n            gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n            gl.bindBufferBase(gl.UNIFORM_BUFFER, 0, this.view_block);\r\n            //extensions to activate\r\n            gl.getExtension(\"EXT_color_buffer_float\");\r\n        }\r\n        this.resizeCanvas();\r\n        this.on_some_change(['width', 'height', 'camera_fov', 'camera_near', 'camera_far'], this.resizeCanvas, this);\r\n        this.on_some_change(['camera_pos', 'camera_yaw', 'camera_pitch'], this.run_commands, this);\r\n        this.on('msg:custom', this.handle_custom_messages, this);\r\n        this.camera_matrix = matrix_1.m4Translation(0, 50, 200);\r\n        this.view_matrix = matrix_1.m4inverse(this.camera_matrix);\r\n    }\r\n    resizeCanvas() {\r\n        this.canvas.setAttribute('width', this.get('width'));\r\n        this.canvas.setAttribute('height', this.get('height'));\r\n        if (this.ctx != null) {\r\n            this.ctx.viewport(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\r\n        }\r\n        this.projection_matrix = matrix_1.m4ProjectionMatrix(this.get('camera_fov'), this.get('width') / this.get('height'), this.get('camera_near'), this.get('camera_far'));\r\n    }\r\n    handle_custom_messages(command, buffers) {\r\n        if (command.clear == true) {\r\n            this.commands = [];\r\n            this.buffers = [];\r\n        }\r\n        let commands = command.commands;\r\n        let converted_buffers = [];\r\n        commands.forEach((element) => {\r\n            if (element.hasOwnProperty('buffer_metadata')) {\r\n                const converted = arraybuffer_1.buffer_to_array(element.buffer_metadata.dtype, buffers[element.buffer_metadata.index].buffer);\r\n                converted_buffers.push(converted);\r\n            }\r\n        });\r\n        if (command.only_once == true) {\r\n            this.execute_commands(commands, converted_buffers);\r\n        }\r\n        else {\r\n            let buffer_id_offset = this.buffers.length;\r\n            this.buffers = this.buffers.concat(converted_buffers);\r\n            commands.forEach((element) => {\r\n                if (element.hasOwnProperty('buffer_metadata')) {\r\n                    element.buffer_metadata.index += buffer_id_offset;\r\n                }\r\n            });\r\n            this.commands = this.commands.concat(commands);\r\n        }\r\n        this.run_commands();\r\n    }\r\n    update_camera() {\r\n        let pos = this.get('camera_pos');\r\n        let yaw = this.get('camera_yaw') * Math.PI / 180.0;\r\n        let pitch = this.get('camera_pitch') * Math.PI / 180.0;\r\n        this.camera_matrix = matrix_1.m4Translation(pos[0], pos[1], pos[2]);\r\n        this.camera_matrix = matrix_1.m4dot(this.camera_matrix, matrix_1.m4Yrotation(yaw));\r\n        this.camera_matrix = matrix_1.m4dot(this.camera_matrix, matrix_1.m4Xrotation(pitch));\r\n        this.view_matrix = matrix_1.m4inverse(this.camera_matrix);\r\n        this.view_proj_matrix = matrix_1.m4dot(this.projection_matrix, this.view_matrix);\r\n    }\r\n    run_commands() {\r\n        this.execute_commands(this.commands, this.buffers);\r\n    }\r\n    execute_commands(commands, converted_buffers) {\r\n        if (this.ctx == null)\r\n            return;\r\n        const gl = this.ctx;\r\n        this.update_camera();\r\n        // update the uniform Block\r\n        let cm = (this.get('shader_matrix_major') == 'row_major') ? matrix_1.m4Transpose(this.camera_matrix) : this.camera_matrix;\r\n        const cm_f32 = new Float32Array(cm);\r\n        let vm = (this.get('shader_matrix_major') == 'row_major') ? matrix_1.m4Transpose(this.view_matrix) : this.view_matrix;\r\n        const vm_f32 = new Float32Array(vm);\r\n        let pm = (this.get('shader_matrix_major') == 'row_major') ? matrix_1.m4Transpose(this.projection_matrix) : this.projection_matrix;\r\n        const pm_f32 = new Float32Array(pm);\r\n        let vpm = (this.get('shader_matrix_major') == 'row_major') ? matrix_1.m4Transpose(this.view_proj_matrix) : this.view_proj_matrix;\r\n        const vpm_f32 = new Float32Array(vpm);\r\n        gl.bindBuffer(gl.UNIFORM_BUFFER, this.view_block);\r\n        gl.bufferSubData(gl.UNIFORM_BUFFER, 0, cm_f32, 0);\r\n        gl.bufferSubData(gl.UNIFORM_BUFFER, 64, vm_f32, 0);\r\n        gl.bufferSubData(gl.UNIFORM_BUFFER, 128, pm_f32, 0);\r\n        gl.bufferSubData(gl.UNIFORM_BUFFER, 192, vpm_f32, 0);\r\n        gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n        commands.forEach((command) => {\r\n            this.execute_command(gl, command, converted_buffers);\r\n        });\r\n    }\r\n    glEnumToString(gl, value) {\r\n        const keys = [];\r\n        for (const key in gl) {\r\n            if (gl[key] === value) {\r\n                keys.push(key);\r\n            }\r\n        }\r\n        return keys.length ? keys.join(' | ') : `0x${value.toString(16)}`;\r\n    }\r\n    execute_command(gl, command, converted_buffers) {\r\n        if (this.get('verbose') > 0) {\r\n            console.log(command);\r\n            if (command.hasOwnProperty('buffer_metadata')) {\r\n                console.log('data');\r\n                console.log(converted_buffers[command.buffer_metadata.index]);\r\n            }\r\n        }\r\n        //console.log(this.bound_buffers);\r\n        switch (command.cmd) {\r\n            case 'viewport':\r\n                gl.viewport(command.x, command.y, command.width, command.height);\r\n                break;\r\n            case 'enable':\r\n            case 'disable':\r\n                {\r\n                    let cap = 0;\r\n                    if (command.blend)\r\n                        cap |= gl.BLEND;\r\n                    if (command.depth_test)\r\n                        cap |= gl.DEPTH_TEST;\r\n                    if (command.dither)\r\n                        cap |= gl.DITHER;\r\n                    if (command.polygon_offset_fill)\r\n                        cap |= gl.POLYGON_OFFSET_FILL;\r\n                    if (command.sample_alpha_to_coverage)\r\n                        cap |= gl.SAMPLE_ALPHA_TO_COVERAGE;\r\n                    if (command.sample_coverage)\r\n                        cap |= gl.SAMPLE_COVERAGE;\r\n                    if (command.scissor_test)\r\n                        cap |= gl.SCISSOR_TEST;\r\n                    if (command.stencil_test)\r\n                        cap |= gl.STENCIL_TEST;\r\n                    if (command.rasterizer_discard)\r\n                        cap |= gl.RASTERIZER_DISCARD;\r\n                    if (command.cull_face)\r\n                        cap |= gl.CULL_FACE;\r\n                    if (command.cmd == 'enable') {\r\n                        gl.enable(cap);\r\n                    }\r\n                    else {\r\n                        gl.disable(cap);\r\n                    }\r\n                }\r\n                break;\r\n            case 'clearColor':\r\n                gl.clearColor(command.r, command.g, command.b, command.a);\r\n                break;\r\n            case 'clear':\r\n                {\r\n                    let bits = 0;\r\n                    if (command.depth)\r\n                        bits |= gl.DEPTH_BUFFER_BIT;\r\n                    if (command.color)\r\n                        bits |= gl.COLOR_BUFFER_BIT;\r\n                    if (command.stencil)\r\n                        bits |= gl.STENCIL_BUFFER_BIT;\r\n                    gl.clear(bits);\r\n                }\r\n                break;\r\n            case 'frontFace':\r\n                {\r\n                    gl.frontFace(gl[command.mode]);\r\n                }\r\n                break;\r\n            case 'cullFace':\r\n                {\r\n                    gl.cullFace(gl[command.mode]);\r\n                }\r\n                break;\r\n            // ------------------------------- DEPTH --------------------------------------\r\n            case 'depthFunc':\r\n                {\r\n                    gl.depthFunc(gl[command.func]);\r\n                }\r\n                break;\r\n            case 'depthMask':\r\n                {\r\n                    gl.depthMask(command.flag);\r\n                }\r\n                break;\r\n            case 'depthRange':\r\n                {\r\n                    gl.depthRange(command.z_near, command.z_far);\r\n                }\r\n                break;\r\n            // ------------------------------- COLOR --------------------------------------\r\n            case 'blendColor':\r\n                gl.blendColor(command.r, command.g, command.b, command.a);\r\n                break;\r\n            case 'blendEquation':\r\n                gl.blendEquation(gl[command.mode]);\r\n                break;\r\n            case 'blendEquationSeparate':\r\n                gl.blendEquationSeparate(gl[command.mode_rgb], gl[command.mode_alpha]);\r\n                break;\r\n            case 'blendFunc':\r\n                gl.blendFunc(gl[command.s_factor], gl[command.d_factor]);\r\n                break;\r\n            case 'blend_func_separate':\r\n                gl.blendFuncSeparate(gl[command.src_rgb], gl[command.dst_rgb], gl[command.src_alpha], gl[command.dst_alpha]);\r\n                break;\r\n            // ------------------------------- TEXTURE --------------------------------------\r\n            case 'createTexture':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createTexture();\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: 'texture' });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'bindTexture':\r\n                {\r\n                    if (command.texture > -1) {\r\n                        const texture = this.get_resource(command.texture).get('_gl_ptr');\r\n                        gl.bindTexture(gl[command.target], texture);\r\n                    }\r\n                    else {\r\n                        gl.bindTexture(gl[command.target], null);\r\n                    }\r\n                }\r\n                break;\r\n            case 'activeTexture':\r\n                gl.activeTexture(gl.TEXTURE0 + command.texture);\r\n                break;\r\n            case 'generateMipmap':\r\n                gl.generateMipmap(gl[command.target]);\r\n                break;\r\n            case 'texImage2D':\r\n                if (command.hasOwnProperty('buffer_metadata')) {\r\n                    gl.texImage2D(gl[command.target], command.level, gl[command.internal_format], command.width, command.height, command.border, gl[command.format], gl[command.data_type], converted_buffers[command.buffer_metadata.index]);\r\n                }\r\n                else {\r\n                    gl.texImage2D(gl[command.target], command.level, gl[command.internal_format], command.width, command.height, command.border, gl[command.format], gl[command.data_type], null);\r\n                }\r\n                break;\r\n            case 'texStorage2D':\r\n                {\r\n                    gl.texStorage2D(gl[command.target], command.levels, gl[command.internal_format], command.width, command.height);\r\n                }\r\n                break;\r\n            case 'texImage3D':\r\n                if (command.hasOwnProperty('buffer_metadata')) {\r\n                    gl.texImage3D(gl[command.target], command.level, gl[command.internal_format], command.width, command.height, command.depth, command.border, gl[command.format], gl[command.data_type], converted_buffers[command.buffer_metadata.index]);\r\n                }\r\n                else {\r\n                    gl.texImage3D(gl[command.target], command.level, gl[command.internal_format], command.width, command.height, command.depth, command.border, gl[command.format], gl[command.data_type], null);\r\n                }\r\n                break;\r\n            case 'texStorage3D':\r\n                {\r\n                    gl.texStorage3D(gl[command.target], command.levels, gl[command.internal_format], command.width, command.height, command.depth);\r\n                }\r\n                break;\r\n            case 'texParameteri':\r\n                gl.texParameteri(gl[command.target], gl[command.pname], command.param);\r\n                break;\r\n            case 'texParameterf':\r\n                gl.texParameterf(gl[command.target], gl[command.pname], command.param);\r\n                break;\r\n            case 'texParameter_str':\r\n                gl.texParameteri(gl[command.target], gl[command.pname], gl[command.param]);\r\n                break;\r\n            case 'pixelStorei':\r\n                {\r\n                    if (command.pname == 'UNPACK_COLORSPACE_CONVERSION_WEBGL') {\r\n                        gl.pixelStorei(gl[command.pname], gl[command.param]);\r\n                    }\r\n                    else {\r\n                        gl.pixelStorei(gl[command.pname], command.param);\r\n                    }\r\n                }\r\n                break;\r\n            // ------------------------------- SHADERS --------------------------------------\r\n            case 'createShader':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createShader(gl[command.type]);\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: command.type });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'shaderSource':\r\n                {\r\n                    const res = this.get_resource(command.shader);\r\n                    const ptr = res.get('_gl_ptr');\r\n                    gl.shaderSource(ptr, command.source);\r\n                }\r\n                break;\r\n            case 'compileShader':\r\n                {\r\n                    const res = this.get_resource(command.shader);\r\n                    const ptr = res.get('_gl_ptr');\r\n                    gl.compileShader(ptr);\r\n                    let resinfo = res.get('_info');\r\n                    if (!gl.getShaderParameter(ptr, gl.COMPILE_STATUS)) {\r\n                        let info = gl.getShaderInfoLog(ptr);\r\n                        resinfo.message = info;\r\n                    }\r\n                    else {\r\n                        resinfo.message = 'compiled';\r\n                    }\r\n                    res.set('_info', resinfo);\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            // ------------------------------- PROGRAMS --------------------------------------\r\n            case 'createProgram':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createProgram();\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: 'Program' });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'attachShader':\r\n                {\r\n                    const prog = this.get_resource(command.program).get('_gl_ptr');\r\n                    const shader = this.get_resource(command.shader).get('_gl_ptr');\r\n                    gl.attachShader(prog, shader);\r\n                }\r\n                break;\r\n            case 'bindAttribLocation':\r\n                {\r\n                    let res = this.get_resource(command.program);\r\n                    const ptr = res.get('_gl_ptr');\r\n                    gl.bindAttribLocation(ptr, command.index, command.name);\r\n                }\r\n                break;\r\n            case 'linkProgram':\r\n                {\r\n                    let res = this.get_resource(command.program);\r\n                    const ptr = res.get('_gl_ptr');\r\n                    gl.linkProgram(ptr);\r\n                    gl.validateProgram(ptr);\r\n                    let resinfo = res.get('_info');\r\n                    if (!gl.getProgramParameter(ptr, gl.LINK_STATUS)) {\r\n                        let info = gl.getShaderInfoLog(ptr);\r\n                        resinfo.message = info;\r\n                    }\r\n                    else {\r\n                        //bind our viewBlock\r\n                        let viewBlockIndex = gl.getUniformBlockIndex(ptr, 'ViewBlock');\r\n                        if (viewBlockIndex < 4294967295) {\r\n                            gl.uniformBlockBinding(ptr, viewBlockIndex, 0);\r\n                        }\r\n                        resinfo.message = 'linked';\r\n                        resinfo.uniforms_blocks = [];\r\n                        resinfo.uniforms = [];\r\n                        const numUniforms = gl.getProgramParameter(ptr, gl.ACTIVE_UNIFORMS);\r\n                        const indices = [...Array(numUniforms).keys()];\r\n                        const blockIndices = gl.getActiveUniforms(ptr, indices, gl.UNIFORM_BLOCK_INDEX);\r\n                        const offsets = gl.getActiveUniforms(ptr, indices, gl.UNIFORM_OFFSET);\r\n                        for (let i = 0; i < numUniforms; ++i) {\r\n                            const info = gl.getActiveUniform(ptr, i);\r\n                            if (info) {\r\n                                // regroup the blocks\r\n                                if (blockIndices[i] > -1) {\r\n                                    let uniform_block = resinfo.uniforms_blocks.find((element) => { return element.index == blockIndices[i]; });\r\n                                    if (uniform_block == undefined) {\r\n                                        uniform_block = {\r\n                                            index: blockIndices[i],\r\n                                            name: gl.getActiveUniformBlockName(ptr, blockIndices[i]),\r\n                                            size: gl.getActiveUniformBlockParameter(ptr, blockIndices[i], gl.UNIFORM_BLOCK_DATA_SIZE),\r\n                                            uniforms: []\r\n                                        };\r\n                                        resinfo.uniforms_blocks.push(uniform_block);\r\n                                    }\r\n                                    uniform_block.uniforms.push({ name: info.name, type: this.glEnumToString(gl, info.type), size: info.size, offset: offsets[i] });\r\n                                }\r\n                                else {\r\n                                    resinfo.uniforms.push({ name: info.name, type: this.glEnumToString(gl, info.type), size: info.size, location: gl.getUniformLocation(ptr, info.name) });\r\n                                }\r\n                            }\r\n                        }\r\n                        resinfo.attributes = [];\r\n                        const numAttribute = gl.getProgramParameter(ptr, gl.ACTIVE_ATTRIBUTES);\r\n                        for (let i = 0; i < numAttribute; ++i) {\r\n                            const info = gl.getActiveAttrib(ptr, i);\r\n                            if (info)\r\n                                resinfo.attributes.push({ name: info.name, type: this.glEnumToString(gl, info.type), size: info.size, location: gl.getAttribLocation(ptr, info.name) });\r\n                        }\r\n                    }\r\n                    res.set('_info', resinfo);\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'useProgram':\r\n                {\r\n                    if (command.program >= 0) {\r\n                        const res = this.get_resource(command.program);\r\n                        const ptr = res.get('_gl_ptr');\r\n                        gl.useProgram(ptr);\r\n                        this.bound_program = res;\r\n                    }\r\n                    else {\r\n                        gl.useProgram(null);\r\n                        this.bound_program = null;\r\n                    }\r\n                }\r\n                break;\r\n            case 'uniform':\r\n            case 'uniformMatrix':\r\n                {\r\n                    if (this.bound_program != null) {\r\n                        let resinfo = this.bound_program.get('_info');\r\n                        const uniform = resinfo.uniforms.find((element) => { return element.name == command.name; });\r\n                        if (uniform != undefined) {\r\n                            const location = uniform.location;\r\n                            if (command.cmd == 'uniform') {\r\n                                let shape = command.buffer_metadata.shape[command.buffer_metadata.shape.length - 1];\r\n                                if (command.buffer_metadata.dtype == 'int32') {\r\n                                    let bufarray = converted_buffers[command.buffer_metadata.index];\r\n                                    if (shape == 1)\r\n                                        gl.uniform1iv(location, bufarray);\r\n                                    else if (shape == 2)\r\n                                        gl.uniform2iv(location, bufarray);\r\n                                    else if (shape == 3)\r\n                                        gl.uniform3iv(location, bufarray);\r\n                                    else if (shape == 4)\r\n                                        gl.uniform4iv(location, bufarray);\r\n                                }\r\n                                else if (command.buffer_metadata.dtype == 'uint32') {\r\n                                    let bufarray = converted_buffers[command.buffer_metadata.index];\r\n                                    if (shape == 1)\r\n                                        gl.uniform1uiv(location, bufarray);\r\n                                    else if (shape == 2)\r\n                                        gl.uniform2uiv(location, bufarray);\r\n                                    else if (shape == 3)\r\n                                        gl.uniform3uiv(location, bufarray);\r\n                                    else if (shape == 4)\r\n                                        gl.uniform4uiv(location, bufarray);\r\n                                }\r\n                                else if (command.buffer_metadata.dtype == 'float32') {\r\n                                    let bufarray = converted_buffers[command.buffer_metadata.index];\r\n                                    if (shape == 1)\r\n                                        gl.uniform1fv(location, bufarray);\r\n                                    else if (shape == 2)\r\n                                        gl.uniform2fv(location, bufarray);\r\n                                    else if (shape == 3)\r\n                                        gl.uniform3fv(location, bufarray);\r\n                                    else if (shape == 4)\r\n                                        gl.uniform4fv(location, bufarray);\r\n                                }\r\n                            }\r\n                            else {\r\n                                let a = command.buffer_metadata.shape[command.buffer_metadata.shape.length - 2];\r\n                                let b = command.buffer_metadata.shape[command.buffer_metadata.shape.length - 1];\r\n                                let bufarray = converted_buffers[command.buffer_metadata.index];\r\n                                if (a == 2) {\r\n                                    if (b == 2)\r\n                                        gl.uniformMatrix2fv(location, false, bufarray);\r\n                                    else if (b == 3)\r\n                                        gl.uniformMatrix2x3fv(location, false, bufarray);\r\n                                    else if (b == 4)\r\n                                        gl.uniformMatrix2x4fv(location, false, bufarray);\r\n                                }\r\n                                else if (a == 3) {\r\n                                    if (b == 2)\r\n                                        gl.uniformMatrix3x2fv(location, false, bufarray);\r\n                                    else if (b == 3)\r\n                                        gl.uniformMatrix3fv(location, false, bufarray);\r\n                                    else if (b == 4)\r\n                                        gl.uniformMatrix3x4fv(location, false, bufarray);\r\n                                }\r\n                                else if (a == 4) {\r\n                                    if (b == 2)\r\n                                        gl.uniformMatrix4x2fv(location, false, bufarray);\r\n                                    else if (b == 3)\r\n                                        gl.uniformMatrix4x3fv(location, false, bufarray);\r\n                                    else if (b == 4)\r\n                                        gl.uniformMatrix4fv(location, false, bufarray);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            case 'uniformBlockBinding':\r\n                {\r\n                    let res = this.get_resource(command.program);\r\n                    const ptr = res.get('_gl_ptr');\r\n                    const uniformblock = res.get('_info').uniforms_blocks.find((element) => { return element.name == command.uniform_block_name; });\r\n                    if (uniformblock != undefined) {\r\n                        gl.uniformBlockBinding(ptr, uniformblock.index, command.uniform_block_binding);\r\n                    }\r\n                }\r\n                break;\r\n            // ------------------------------- BUFFERS --------------------------------------\r\n            case 'createBuffer':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createBuffer();\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: 'Buffer' });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'bindBuffer':\r\n                {\r\n                    const target = command.target;\r\n                    if (command.buffer >= 0) {\r\n                        const res = this.get_resource(command.buffer);\r\n                        const ptr = res.get('_gl_ptr');\r\n                        gl.bindBuffer(gl[target], ptr);\r\n                        this.bound_buffers[target] = res;\r\n                    }\r\n                    else {\r\n                        gl.bindBuffer(gl[target], null);\r\n                        this.bound_buffers[target] = null;\r\n                    }\r\n                }\r\n                break;\r\n            case 'bindBufferBase':\r\n                {\r\n                    const target = command.target;\r\n                    if (command.buffer >= 0) {\r\n                        const res = this.get_resource(command.buffer);\r\n                        const ptr = res.get('_gl_ptr');\r\n                        gl.bindBufferBase(gl[target], command.index, ptr);\r\n                    }\r\n                    else {\r\n                        gl.bindBufferBase(gl[target], command.index, null);\r\n                    }\r\n                }\r\n                break;\r\n            case 'bufferData':\r\n                {\r\n                    const target = command.target;\r\n                    const usage = command.usage;\r\n                    if (command.hasOwnProperty('buffer_metadata')) {\r\n                        gl.bufferData(gl[target], converted_buffers[command.buffer_metadata.index], gl[usage]);\r\n                        let buf = this.bound_buffers[target];\r\n                        if (command.update_info && buf != null) {\r\n                            const size = gl.getBufferParameter(gl[target], gl.BUFFER_SIZE);\r\n                            buf.set('_info', { type: \"Buffer\", size: size, target: target });\r\n                            buf.save_changes();\r\n                        }\r\n                    }\r\n                    else {\r\n                        let buf = this.bound_buffers[target];\r\n                        gl.bufferData(gl[target], null, gl[usage]);\r\n                        if (command.update_info && buf != null) {\r\n                            buf.set('_info', { type: \"Buffer\", size: 'Undefined', target: target });\r\n                            buf.save_changes();\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            case 'createUniformBuffer':\r\n                {\r\n                    let res = this.get_resource(command.buffer);\r\n                    const ptr = gl.createBuffer();\r\n                    let info = { type: 'Buffer' };\r\n                    const prog = this.get_resource(command.program);\r\n                    const uniformblock = prog.get('_info').uniforms_blocks.find((element) => { return element.name == command.block_name; });\r\n                    if (uniformblock != undefined) {\r\n                        gl.bindBuffer(gl.UNIFORM_BUFFER, ptr);\r\n                        gl.bufferData(gl.UNIFORM_BUFFER, uniformblock.size, gl[command.usage]);\r\n                        gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n                        this.bound_buffers[\"UNIFORM_BUFFER\"] = null;\r\n                        info[\"size\"] = uniformblock.size;\r\n                        info[\"target\"] = \"UNIFORM_BUFFER\";\r\n                        info[\"uniformblock\"] = uniformblock;\r\n                    }\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', info);\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'bufferSubData':\r\n            case 'bufferSubDataStr':\r\n                {\r\n                    const target = command.target;\r\n                    let offset = command.dst_byte_offset;\r\n                    if (command.cmd == 'bufferSubDataStr') {\r\n                        offset = 0;\r\n                        let buf = this.bound_buffers[target];\r\n                        if (buf != null) {\r\n                            const uniformblock = buf.get('_info').uniformblock;\r\n                            const uniform = uniformblock.uniforms.find((element) => { return element.name == command.dst_byte_offset; });\r\n                            if (uniform != undefined) {\r\n                                offset = uniform.offset;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (command.hasOwnProperty('buffer_metadata')) {\r\n                        gl.bufferSubData(gl[target], offset, converted_buffers[command.buffer_metadata.index], command.src_offset);\r\n                    }\r\n                    else {\r\n                        gl.bufferSubData(gl[target], offset, command.src_offset);\r\n                    }\r\n                }\r\n                break;\r\n            // ------------------------------- VERTEX ARRAYS --------------------------------------\r\n            case 'createVertexArray':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createVertexArray();\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: 'Vertex Array Object', bindings: [] });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'bindVertexArray':\r\n                {\r\n                    if (command.vertex_array >= 0) {\r\n                        const res = this.get_resource(command.vertex_array);\r\n                        const ptr = res.get('_gl_ptr');\r\n                        gl.bindVertexArray(ptr);\r\n                        this.bound_vao = res;\r\n                    }\r\n                    else {\r\n                        gl.bindVertexArray(null);\r\n                        this.bound_vao = null;\r\n                    }\r\n                }\r\n                break;\r\n            case 'vertexAttribPointer':\r\n            case 'vertexAttribIPointer':\r\n            case 'enableVertexAttribArray':\r\n            case 'disableVertexAttribArray':\r\n            case 'vertexAttrib[1234]fv':\r\n            case 'vertexAttribI4[u]iv':\r\n            case 'vertexAttribDivisor':\r\n                {\r\n                    let index = -1;\r\n                    if (typeof command.index === 'number') {\r\n                        index = command.index;\r\n                    }\r\n                    else {\r\n                        if (this.bound_program != null) {\r\n                            const attr = this.bound_program.get('_info').attributes.find((element) => { return element.name == command.index; });\r\n                            if (attr != undefined) {\r\n                                index = attr.location;\r\n                            }\r\n                        }\r\n                        else {\r\n                            console.error(\"a program must be bound to find the attribute\");\r\n                        }\r\n                    }\r\n                    let buf = this.bound_buffers['ARRAY_BUFFER'];\r\n                    if (index >= 0) {\r\n                        index += command.index_offset;\r\n                        if (command.cmd == \"vertexAttribIPointer\") {\r\n                            gl.vertexAttribIPointer(index, command.size, gl[command.type], command.stride, command.offset);\r\n                            if (this.bound_vao != null && buf != null) {\r\n                                let vao_info = this.bound_vao.get('_info');\r\n                                const buffer_uid = buf.get('uid');\r\n                                let binding_info = vao_info.bindings.find((element) => { return element.buffer_uid == buffer_uid; });\r\n                                if (binding_info == undefined) {\r\n                                    binding_info = { buffer_uid: buffer_uid, attributes: [] };\r\n                                    vao_info.bindings.push(binding_info);\r\n                                }\r\n                                binding_info.attributes.push({ pointer: \"vertexAttribIPointer\", index: index, size: command.size, type: command.type, stride: command.stride, offset: command.offset });\r\n                                this.bound_vao.set('_info', vao_info);\r\n                                this.bound_vao.save_changes();\r\n                            }\r\n                        }\r\n                        else if (command.cmd == \"vertexAttribPointer\") {\r\n                            gl.vertexAttribPointer(index, command.size, gl[command.type], command.normalized, command.stride, command.offset);\r\n                            if (this.bound_vao != null && buf != null) {\r\n                                let vao_info = this.bound_vao.get('_info');\r\n                                const buffer_uid = buf.get('uid');\r\n                                let binding_info = vao_info.bindings.find((element) => { return element.buffer_uid == buffer_uid; });\r\n                                if (binding_info == undefined) {\r\n                                    binding_info = { buffer_uid: buffer_uid, attributes: [] };\r\n                                    vao_info.bindings.push(binding_info);\r\n                                }\r\n                                binding_info.attributes.push({ pointer: \"vertexAttribPointer\", index: index, size: command.size, type: command.type, normalized: command.normalized, stride: command.stride, offset: command.offset });\r\n                                this.bound_vao.set('_info', vao_info);\r\n                                this.bound_vao.save_changes();\r\n                            }\r\n                        }\r\n                        else if (command.cmd == \"enableVertexAttribArray\") {\r\n                            gl.enableVertexAttribArray(index);\r\n                        }\r\n                        else if (command.cmd == \"disableVertexAttribArray\") {\r\n                            gl.disableVertexAttribArray(index);\r\n                        }\r\n                        else if (command.cmd == \"vertexAttrib[1234]fv\") {\r\n                            if (command.buffer_metadata.shape[0] == 1) {\r\n                                gl.vertexAttrib1fv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                            else if (command.buffer_metadata.shape[0] == 2) {\r\n                                gl.vertexAttrib2fv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                            if (command.buffer_metadata.shape[0] == 3) {\r\n                                gl.vertexAttrib3fv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                            if (command.buffer_metadata.shape[0] == 4) {\r\n                                gl.vertexAttrib4fv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                        }\r\n                        else if (command.cmd == \"vertexAttribI4[u]iv\") {\r\n                            if (command.buffer_metadata.dtype == \"uint32\") {\r\n                                gl.vertexAttribI4uiv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                            else if (command.buffer_metadata.dtype == \"int32\") {\r\n                                gl.vertexAttribI4iv(index, converted_buffers[command.buffer_metadata.index]);\r\n                            }\r\n                        }\r\n                        else if (command.cmd == \"vertexAttribDivisor\") {\r\n                            gl.vertexAttribDivisor(index, command.divisor);\r\n                        }\r\n                    }\r\n                    else {\r\n                        console.error(`attribute ${command.index} location not found`);\r\n                    }\r\n                }\r\n                break;\r\n            // ------------------------------- RENDER --------------------------------------\r\n            case 'drawArrays':\r\n                {\r\n                    gl.drawArrays(gl[command.mode], command.first, command.count);\r\n                }\r\n                break;\r\n            case 'drawArraysInstanced':\r\n                {\r\n                    gl.drawArraysInstanced(gl[command.mode], command.first, command.count, command.instance_count);\r\n                }\r\n                break;\r\n            case 'drawElements':\r\n                {\r\n                    gl.drawElements(gl[command.mode], command.count, gl[command.type], command.offset);\r\n                }\r\n                break;\r\n            case 'drawElementsInstanced':\r\n                {\r\n                    gl.drawElementsInstanced(gl[command.mode], command.count, gl[command.type], command.offset, command.instance_count);\r\n                }\r\n                break;\r\n            // ------------------------------- FRAMEBUFFER --------------------------------------\r\n            case 'createFramebuffer':\r\n                {\r\n                    let res = this.get_resource(command.resource);\r\n                    const ptr = gl.createFramebuffer();\r\n                    res.set('_gl_ptr', ptr);\r\n                    res.set('_info', { type: 'Framebuffer' });\r\n                    res.save_changes();\r\n                }\r\n                break;\r\n            case 'bindFramebuffer':\r\n                {\r\n                    if (command.framebuffer >= 0) {\r\n                        let res = this.get_resource(command.framebuffer);\r\n                        gl.bindFramebuffer(gl[command.target], res.get('_gl_ptr'));\r\n                    }\r\n                    else {\r\n                        gl.bindFramebuffer(gl[command.target], null);\r\n                    }\r\n                }\r\n                break;\r\n            case 'framebufferTexture2D':\r\n                {\r\n                    let res = this.get_resource(command.texture);\r\n                    gl.framebufferTexture2D(gl[command.target], gl[command.attachement], gl[command.textarget], res.get('_gl_ptr'), command.level);\r\n                }\r\n                break;\r\n            case 'drawBuffers':\r\n                {\r\n                    const buffers = command.buffers.map((element) => { return gl[element]; });\r\n                    gl.drawBuffers(buffers);\r\n                }\r\n                break;\r\n        }\r\n    }\r\n    register_resource(resource) {\r\n        if (resource.get('uid') != this.resources.length) {\r\n            console.error('uid not matching what we have internally');\r\n        }\r\n        this.resources.push(resource);\r\n    }\r\n    get_resource(index) {\r\n        return this.resources[index];\r\n    }\r\n}\r\nexports.GLModel = GLModel;\r\nGLModel.serializers = Object.assign({}, base_1.DOMWidgetModel.serializers);\r\nclass GLViewer extends base_1.DOMWidgetView {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.is_mouse_down = false;\r\n        this.move_direction = [false, false, false, false];\r\n        this.will_redraw = false;\r\n    }\r\n    render() {\r\n        this.el.appendChild(this.model.canvas);\r\n        this.resizeCanvas();\r\n        this.model.on_some_change(['width', 'height'], this.resizeCanvas, this);\r\n        this.el.addEventListener('mousemove', {\r\n            handleEvent: this.onMouseMove.bind(this)\r\n        });\r\n        this.el.addEventListener('mousedown', {\r\n            handleEvent: this.onMouseDown.bind(this)\r\n        });\r\n        this.el.addEventListener('mouseup', {\r\n            handleEvent: this.onMouseUp.bind(this)\r\n        });\r\n        this.el.addEventListener('mouseout', {\r\n            handleEvent: this.onMouseOut.bind(this)\r\n        });\r\n        this.el.addEventListener('keydown', {\r\n            handleEvent: this.onKeyDown.bind(this)\r\n        });\r\n        this.el.addEventListener('keyup', {\r\n            handleEvent: this.onKeyUp.bind(this)\r\n        });\r\n        this.el.setAttribute('tabindex', '0');\r\n    }\r\n    resizeCanvas() {\r\n        this.el.setAttribute('width', this.model.get('width'));\r\n        this.el.setAttribute('height', this.model.get('height'));\r\n        this.model.resizeCanvas();\r\n    }\r\n    redraw() {\r\n        this.will_redraw = false;\r\n        // update movement if needed\r\n        if (this.move_direction[0] || this.move_direction[1] || this.move_direction[2] || this.move_direction[3]) {\r\n            let speed = this.model.get('move_speed');\r\n            let forward_axis = matrix_1.m4getColumnK(this.model.camera_matrix);\r\n            let side_axis = matrix_1.m4getColumnI(this.model.camera_matrix);\r\n            let camera_pos = this.model.get('camera_pos');\r\n            if (this.move_direction[0]) {\r\n                camera_pos = matrix_1.vec3Add(camera_pos, matrix_1.vec3Scale(forward_axis, -speed));\r\n            }\r\n            if (this.move_direction[2]) {\r\n                camera_pos = matrix_1.vec3Add(camera_pos, matrix_1.vec3Scale(forward_axis, speed));\r\n            }\r\n            if (this.move_direction[1]) {\r\n                camera_pos = matrix_1.vec3Add(camera_pos, matrix_1.vec3Scale(side_axis, -speed));\r\n            }\r\n            if (this.move_direction[3]) {\r\n                camera_pos = matrix_1.vec3Add(camera_pos, matrix_1.vec3Scale(side_axis, speed));\r\n            }\r\n            this.model.set('camera_pos', camera_pos);\r\n            this.touch();\r\n            // request a new frame if we are moving\r\n            this.requestRedraw();\r\n        }\r\n        // re draw\r\n        this.model.run_commands();\r\n    }\r\n    requestRedraw() {\r\n        if (this.will_redraw == false) {\r\n            this.will_redraw = true;\r\n            requestAnimationFrame(this.redraw.bind(this));\r\n        }\r\n    }\r\n    onMouseMove(event) {\r\n        //this.model.send({ event: 'mouse_move', ...this.getCoordinates(event) }, {});\r\n        if (this.is_mouse_down) {\r\n            let speed = this.model.get('mouse_speed');\r\n            this.model.set('camera_yaw', this.model.get('camera_yaw') - (event.movementX) * 0.2 * speed);\r\n            this.model.set('camera_pitch', this.model.get('camera_pitch') - (event.movementY) * 0.2 * speed);\r\n            this.touch();\r\n            this.requestRedraw();\r\n        }\r\n    }\r\n    onMouseDown(event) {\r\n        this.is_mouse_down = true;\r\n        this.model.canvas.focus();\r\n    }\r\n    onMouseUp(event) {\r\n        this.is_mouse_down = false;\r\n    }\r\n    onMouseOut(event) {\r\n        this.is_mouse_down = false;\r\n        this.move_direction = [false, false, false, false];\r\n    }\r\n    onKeyDown(event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        let keys = this.model.get('move_keys');\r\n        if (event.repeat == false) {\r\n            if (event.key == keys[0]) {\r\n                this.move_direction[0] = true;\r\n                this.requestRedraw();\r\n            }\r\n            else if (event.key == keys[1]) {\r\n                this.move_direction[1] = true;\r\n                this.requestRedraw();\r\n            }\r\n            else if (event.key == keys[2]) {\r\n                this.move_direction[2] = true;\r\n                this.requestRedraw();\r\n            }\r\n            else if (event.key == keys[3]) {\r\n                this.move_direction[3] = true;\r\n                this.requestRedraw();\r\n            }\r\n        }\r\n    }\r\n    onKeyUp(event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        let keys = this.model.get('move_keys');\r\n        if (event.key == keys[0]) {\r\n            this.move_direction[0] = false;\r\n        }\r\n        else if (event.key == keys[1]) {\r\n            this.move_direction[1] = false;\r\n        }\r\n        else if (event.key == keys[2]) {\r\n            this.move_direction[2] = false;\r\n        }\r\n        else if (event.key == keys[3]) {\r\n            this.move_direction[3] = false;\r\n        }\r\n    }\r\n    getCoordinates(event) {\r\n        const rect = this.el.getBoundingClientRect();\r\n        const x = (this.model.get('width') * (event.clientX - rect.left)) / rect.width;\r\n        const y = (this.model.get('height') * (event.clientY - rect.top)) / rect.height;\r\n        return { x, y };\r\n    }\r\n}\r\nexports.GLViewer = GLViewer;\r\n//# sourceMappingURL=glviewer.js.map",
         "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.m4inverse = exports.m4dot = exports.m4Scale = exports.m4Zrotation = exports.m4Yrotation = exports.m4Xrotation = exports.m4Translation = exports.vec3Scale = exports.vec3Add = exports.m4getColumnK = exports.m4getColumnJ = exports.m4getColumnI = exports.m4getTranslation = exports.m4Transpose = exports.m4OrthographicProjectionMatrix = exports.m4ProjectionMatrix = void 0;\r\nfunction m4ProjectionMatrix(fov_y, aspect_ratio, near, far) {\r\n    const ymax = near * Math.tan(fov_y * Math.PI / 360.0);\r\n    const xmax = ymax * aspect_ratio;\r\n    return frustrum(-xmax, xmax, -ymax, ymax, near, far);\r\n}\r\nexports.m4ProjectionMatrix = m4ProjectionMatrix;\r\nfunction frustrum(left, right, bottom, top, near, far) {\r\n    const A = (right + left) / (right - left);\r\n    const B = (top + bottom) / (top - bottom);\r\n    const C = -(far + near) / (far - near);\r\n    const D = -2. * far * near / (far - near);\r\n    const E = 2. * near / (right - left);\r\n    const F = 2. * near / (top - bottom);\r\n    return [\r\n        E, 0, A, 0,\r\n        0, F, B, 0,\r\n        0, 0, C, D,\r\n        0, 0, -1, 0\r\n    ];\r\n}\r\nfunction m4OrthographicProjectionMatrix(width, height, near, far) {\r\n    const A = 1. / width;\r\n    const B = 1. / height;\r\n    const C = -(far + near) / (far - near);\r\n    const D = -2. / (far - near);\r\n    return [\r\n        A, 0, 0, 0,\r\n        0, B, 0, 0,\r\n        0, 0, D, C,\r\n        0, 0, 0, 1\r\n    ];\r\n}\r\nexports.m4OrthographicProjectionMatrix = m4OrthographicProjectionMatrix;\r\nfunction m4Transpose(m) {\r\n    return [\r\n        m[0], m[4], m[8], m[12],\r\n        m[1], m[5], m[9], m[13],\r\n        m[2], m[6], m[10], m[14],\r\n        m[3], m[7], m[11], m[15],\r\n    ];\r\n}\r\nexports.m4Transpose = m4Transpose;\r\nfunction m4getTranslation(m) {\r\n    return [\r\n        m[3], m[7], m[11]\r\n    ];\r\n}\r\nexports.m4getTranslation = m4getTranslation;\r\nfunction m4getColumnI(m) {\r\n    return [\r\n        m[0], m[4], m[8]\r\n    ];\r\n}\r\nexports.m4getColumnI = m4getColumnI;\r\nfunction m4getColumnJ(m) {\r\n    return [\r\n        m[1], m[5], m[9]\r\n    ];\r\n}\r\nexports.m4getColumnJ = m4getColumnJ;\r\nfunction m4getColumnK(m) {\r\n    return [\r\n        m[2], m[6], m[10]\r\n    ];\r\n}\r\nexports.m4getColumnK = m4getColumnK;\r\nfunction vec3Add(a, b) {\r\n    return [\r\n        a[0] + b[0],\r\n        a[1] + b[1],\r\n        a[2] + b[2]\r\n    ];\r\n}\r\nexports.vec3Add = vec3Add;\r\nfunction vec3Scale(a, scale) {\r\n    return [\r\n        a[0] * scale,\r\n        a[1] * scale,\r\n        a[2] * scale\r\n    ];\r\n}\r\nexports.vec3Scale = vec3Scale;\r\nfunction m4Translation(tx, ty, tz) {\r\n    return [\r\n        1, 0, 0, tx,\r\n        0, 1, 0, ty,\r\n        0, 0, 1, tz,\r\n        0, 0, 0, 1,\r\n    ];\r\n}\r\nexports.m4Translation = m4Translation;\r\nfunction m4Xrotation(angleInRadians) {\r\n    var c = Math.cos(angleInRadians);\r\n    var s = Math.sin(angleInRadians);\r\n    return [\r\n        1, 0, 0, 0,\r\n        0, c, -s, 0,\r\n        0, s, c, 0,\r\n        0, 0, 0, 1,\r\n    ];\r\n}\r\nexports.m4Xrotation = m4Xrotation;\r\nfunction m4Yrotation(angleInRadians) {\r\n    var c = Math.cos(angleInRadians);\r\n    var s = Math.sin(angleInRadians);\r\n    return [\r\n        c, 0, s, 0,\r\n        0, 1, 0, 0,\r\n        -s, 0, c, 0,\r\n        0, 0, 0, 1,\r\n    ];\r\n}\r\nexports.m4Yrotation = m4Yrotation;\r\nfunction m4Zrotation(angleInRadians) {\r\n    var c = Math.cos(angleInRadians);\r\n    var s = Math.sin(angleInRadians);\r\n    return [\r\n        c, -s, 0, 0,\r\n        s, c, 0, 0,\r\n        0, 0, 1, 0,\r\n        0, 0, 0, 1,\r\n    ];\r\n}\r\nexports.m4Zrotation = m4Zrotation;\r\nfunction m4Scale(sx, sy, sz) {\r\n    return [\r\n        sx, 0, 0, 0,\r\n        0, sy, 0, 0,\r\n        0, 0, sz, 0,\r\n        0, 0, 0, 1,\r\n    ];\r\n}\r\nexports.m4Scale = m4Scale;\r\nfunction m4dot(b, a) {\r\n    return [\r\n        b[0] * a[0] + b[1] * a[4] + b[2] * a[8] + b[3] * a[12],\r\n        b[0] * a[1] + b[1] * a[5] + b[2] * a[9] + b[3] * a[13],\r\n        b[0] * a[2] + b[1] * a[6] + b[2] * a[10] + b[3] * a[14],\r\n        b[0] * a[3] + b[1] * a[7] + b[2] * a[11] + b[3] * a[15],\r\n        b[4] * a[0] + b[5] * a[4] + b[6] * a[8] + b[7] * a[12],\r\n        b[4] * a[1] + b[5] * a[5] + b[6] * a[9] + b[7] * a[13],\r\n        b[4] * a[2] + b[5] * a[6] + b[6] * a[10] + b[7] * a[14],\r\n        b[4] * a[3] + b[5] * a[7] + b[6] * a[11] + b[7] * a[15],\r\n        b[8] * a[0] + b[9] * a[4] + b[10] * a[8] + b[11] * a[12],\r\n        b[8] * a[1] + b[9] * a[5] + b[10] * a[9] + b[11] * a[13],\r\n        b[8] * a[2] + b[9] * a[6] + b[10] * a[10] + b[11] * a[14],\r\n        b[8] * a[3] + b[9] * a[7] + b[10] * a[11] + b[11] * a[15],\r\n        b[12] * a[0] + b[13] * a[4] + b[14] * a[8] + b[15] * a[12],\r\n        b[12] * a[1] + b[13] * a[5] + b[14] * a[9] + b[15] * a[13],\r\n        b[12] * a[2] + b[13] * a[6] + b[14] * a[10] + b[15] * a[14],\r\n        b[12] * a[3] + b[13] * a[7] + b[14] * a[11] + b[15] * a[15],\r\n    ];\r\n}\r\nexports.m4dot = m4dot;\r\nfunction m4inverse(m) {\r\n    var tmp_0 = m[10] * m[15];\r\n    var tmp_1 = m[14] * m[11];\r\n    var tmp_2 = m[6] * m[15];\r\n    var tmp_3 = m[14] * m[7];\r\n    var tmp_4 = m[6] * m[11];\r\n    var tmp_5 = m[10] * m[7];\r\n    var tmp_6 = m[2] * m[15];\r\n    var tmp_7 = m[14] * m[3];\r\n    var tmp_8 = m[2] * m[11];\r\n    var tmp_9 = m[10] * m[3];\r\n    var tmp_10 = m[2] * m[7];\r\n    var tmp_11 = m[6] * m[3];\r\n    var tmp_12 = m[8] * m[13];\r\n    var tmp_13 = m[12] * m[9];\r\n    var tmp_14 = m[4] * m[13];\r\n    var tmp_15 = m[12] * m[5];\r\n    var tmp_16 = m[4] * m[9];\r\n    var tmp_17 = m[8] * m[5];\r\n    var tmp_18 = m[0] * m[13];\r\n    var tmp_19 = m[12] * m[1];\r\n    var tmp_20 = m[0] * m[9];\r\n    var tmp_21 = m[8] * m[1];\r\n    var tmp_22 = m[0] * m[5];\r\n    var tmp_23 = m[4] * m[1];\r\n    var t0 = (tmp_0 * m[5] + tmp_3 * m[9] + tmp_4 * m[13]) -\r\n        (tmp_1 * m[5] + tmp_2 * m[9] + tmp_5 * m[13]);\r\n    var t1 = (tmp_1 * m[1] + tmp_6 * m[9] + tmp_9 * m[13]) -\r\n        (tmp_0 * m[1] + tmp_7 * m[9] + tmp_8 * m[13]);\r\n    var t2 = (tmp_2 * m[1] + tmp_7 * m[5] + tmp_10 * m[13]) -\r\n        (tmp_3 * m[1] + tmp_6 * m[5] + tmp_11 * m[13]);\r\n    var t3 = (tmp_5 * m[1] + tmp_8 * m[5] + tmp_11 * m[9]) -\r\n        (tmp_4 * m[1] + tmp_9 * m[5] + tmp_10 * m[9]);\r\n    var d = 1.0 / (m[0] * t0 + m[4] * t1 + m[8] * t2 + m[12] * t3);\r\n    return [\r\n        d * t0,\r\n        d * t1,\r\n        d * t2,\r\n        d * t3,\r\n        d * ((tmp_1 * m[4] + tmp_2 * m[8] + tmp_5 * m[12]) -\r\n            (tmp_0 * m[4] + tmp_3 * m[8] + tmp_4 * m[12])),\r\n        d * ((tmp_0 * m[0] + tmp_7 * m[8] + tmp_8 * m[12]) -\r\n            (tmp_1 * m[0] + tmp_6 * m[8] + tmp_9 * m[12])),\r\n        d * ((tmp_3 * m[0] + tmp_6 * m[4] + tmp_11 * m[12]) -\r\n            (tmp_2 * m[0] + tmp_7 * m[4] + tmp_10 * m[12])),\r\n        d * ((tmp_4 * m[0] + tmp_9 * m[4] + tmp_10 * m[8]) -\r\n            (tmp_5 * m[0] + tmp_8 * m[4] + tmp_11 * m[8])),\r\n        d * ((tmp_12 * m[7] + tmp_15 * m[11] + tmp_16 * m[15]) -\r\n            (tmp_13 * m[7] + tmp_14 * m[11] + tmp_17 * m[15])),\r\n        d * ((tmp_13 * m[3] + tmp_18 * m[11] + tmp_21 * m[15]) -\r\n            (tmp_12 * m[3] + tmp_19 * m[11] + tmp_20 * m[15])),\r\n        d * ((tmp_14 * m[3] + tmp_19 * m[7] + tmp_22 * m[15]) -\r\n            (tmp_15 * m[3] + tmp_18 * m[7] + tmp_23 * m[15])),\r\n        d * ((tmp_17 * m[3] + tmp_20 * m[7] + tmp_23 * m[11]) -\r\n            (tmp_16 * m[3] + tmp_21 * m[7] + tmp_22 * m[11])),\r\n        d * ((tmp_14 * m[10] + tmp_17 * m[14] + tmp_13 * m[6]) -\r\n            (tmp_16 * m[14] + tmp_12 * m[6] + tmp_15 * m[10])),\r\n        d * ((tmp_20 * m[14] + tmp_12 * m[2] + tmp_19 * m[10]) -\r\n            (tmp_18 * m[10] + tmp_21 * m[14] + tmp_13 * m[2])),\r\n        d * ((tmp_18 * m[6] + tmp_23 * m[14] + tmp_15 * m[2]) -\r\n            (tmp_22 * m[14] + tmp_14 * m[2] + tmp_19 * m[6])),\r\n        d * ((tmp_22 * m[10] + tmp_16 * m[2] + tmp_21 * m[6]) -\r\n            (tmp_20 * m[6] + tmp_23 * m[10] + tmp_17 * m[2])),\r\n    ];\r\n}\r\nexports.m4inverse = m4inverse;\r\n//# sourceMappingURL=matrix.js.map",
         "\"use strict\";\r\n// Copyright (c) Jerome Eippers\r\n// Distributed under the terms of the Modified BSD License.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MODULE_NAME = exports.MODULE_VERSION = void 0;\r\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n// @ts-ignore\r\n// eslint-disable-next-line @typescript-eslint/no-var-requires\r\nconst data = require('../package.json');\r\n/**\r\n * The _model_module_version/_view_module_version this package implements.\r\n *\r\n * The html widget manager assumes that this is the same as the npm package\r\n * version number.\r\n */\r\nexports.MODULE_VERSION = data.version;\r\n/*\r\n * The current package name.\r\n */\r\nexports.MODULE_NAME = data.name;\r\n//# sourceMappingURL=version.js.map",
         "\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./glviewer\"), exports);\r\n__exportStar(require(\"./glresource\"), exports);\r\n//# sourceMappingURL=widgets.js.map",
         "// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".ipywebgl-json-display {\\r\\n  padding: 10px;\\r\\n  font-family: sans-serif;\\r\\n  background-color: #f2f2f2;\\r\\n  margin-left: 20px;\\r\\n}\\r\\n\\r\\n.ipywebgl-json-key {\\r\\n  font-weight: bold;\\r\\n  color: #333;\\r\\n}\\r\\n\\r\\n.ipywebgl-json-value {\\r\\n  color: #555;\\r\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n",
         "\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}",
         "var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./widget.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};",
         "\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};"
```

### Comparing `ipywebgl-0.2.2/ipywebgl/labextension/static/remoteEntry.8194deb74d0ed2d99f98.js` & `ipywebgl-0.3.0/ipywebgl/labextension/static/remoteEntry.b6f087db7d3bb0b5dfbe.js`

 * *Files 0% similar despite different names*

#### js-beautify {}

```diff
@@ -155,15 +155,15 @@
     (() => {
         /******/ // This function allow to reference async chunks
         /******/
         __webpack_require__.u = (chunkId) => {
             /******/ // return url for filenames based on template
             /******/
             return "" + chunkId + "." + {
-                "lib_widgets_js": "417df79f43e89915d69a",
+                "lib_widgets_js": "c158407baadd2aaa9731",
                 "lib_index_js": "115506ce89c3f4c34456",
                 "lib_plugin_js": "a4fea4dfcfff14540990"
             } [chunkId] + ".js";
             /******/
         };
         /******/
     })();
@@ -372,15 +372,15 @@
             /******/
             var promises = [];
             /******/
             switch (name) {
                 /******/
                 case "default": {
                     /******/
-                    register("ipywebgl", "0.2.2", () => (Promise.all([__webpack_require__.e("lib_widgets_js"), __webpack_require__.e("lib_index_js")]).then(() => (() => (__webpack_require__( /*! ./lib/index.js */ "./lib/index.js"))))));
+                    register("ipywebgl", "0.3.0", () => (Promise.all([__webpack_require__.e("lib_widgets_js"), __webpack_require__.e("lib_index_js")]).then(() => (() => (__webpack_require__( /*! ./lib/index.js */ "./lib/index.js"))))));
                     /******/
                 }
                 /******/
                 break;
                 /******/
             }
             /******/
@@ -1011,8 +1011,8 @@
     /******/
     var __webpack_exports__ = __webpack_require__("webpack/container/entry/ipywebgl");
     /******/
     (_JUPYTERLAB = typeof _JUPYTERLAB === "undefined" ? {} : _JUPYTERLAB).ipywebgl = __webpack_exports__;
     /******/
     /******/
 })();
-//# sourceMappingURL=remoteEntry.8194deb74d0ed2d99f98.js.map
+//# sourceMappingURL=remoteEntry.b6f087db7d3bb0b5dfbe.js.map
```

### Comparing `ipywebgl-0.2.2/ipywebgl/labextension/static/remoteEntry.8194deb74d0ed2d99f98.js.map` & `ipywebgl-0.3.0/ipywebgl/labextension/static/remoteEntry.b6f087db7d3bb0b5dfbe.js.map`

 * *Files 1% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9126984126984128%*

 * *Differences: {"'file'": "'remoteEntry.b6f087db7d3bb0b5dfbe.js'",*

 * * "'sourcesContent'": "{insert: [(4, '// This function allow to reference async "*

 * *                     'chunks\\n__webpack_require__.u = (chunkId) => {\\n\\t// return url for '*

 * *                     'filenames based on template\\n\\treturn "" + chunkId + "." + '*

 * *                     '{"lib_widgets_js":"c158407baadd2aaa9731","lib_index_js":"115506ce89c3f4c34456","lib_plugin_js":"a4fea4dfcfff14540990"}[chunkId] '*

 * *                     '+ ".js";\\n};\'), (8, \'_ […]*

```diff
@@ -1,9 +1,9 @@
 {
-    "file": "remoteEntry.8194deb74d0ed2d99f98.js",
+    "file": "remoteEntry.b6f087db7d3bb0b5dfbe.js",
     "mappings": ";;;;;;;;;;;AAAA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;UCjCD;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;;;;WC5BA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;;;;;WCRA;WACA;WACA;WACA,8BAA8B,qHAAqH;WACnJ;;;;;WCJA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA;WACA,uBAAuB,4BAA4B;WACnD;WACA;WACA;WACA,iBAAiB,oBAAoB;WACrC;WACA,mGAAmG,YAAY;WAC/G;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,mEAAmE,iCAAiC;WACpG;WACA;WACA;WACA;;;;;WCxCA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,oJAAoJ;WACpJ;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,IAAI,aAAa;WACjB;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC3CA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WCfA;WACA;WACA,WAAW,6BAA6B,iBAAiB,GAAG,qEAAqE;WACjI;WACA;WACA;WACA,qCAAqC,aAAa,EAAE,wDAAwD,2BAA2B,4BAA4B,2BAA2B,+CAA+C,mCAAmC;WAChR;WACA;WACA;WACA,qBAAqB,8BAA8B,SAAS,sDAAsD,gBAAgB,eAAe,KAAK,6DAA6D,SAAS,SAAS,QAAQ,eAAe,KAAK,eAAe,qGAAqG,WAAW,aAAa;WAC7Y;WACA;WACA;WACA,gBAAgB,8BAA8B,qBAAqB,YAAY,sBAAsB,SAAS,iDAAiD,6FAA6F,WAAW,uBAAuB,2BAA2B,wBAAwB,KAAK,oCAAoC,oBAAoB,wBAAwB,oBAAoB,SAAS,KAAK,yBAAyB,KAAK,gCAAgC,yBAAyB,QAAQ,eAAe,KAAK,eAAe,4DAA4D;WACtoB;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,CAAC;;WAED;WACA;WACA;WACA,CAAC;WACD;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM;WACN,KAAK,WAAW;WAChB,GAAG;WACH;WACA;;;;;WCvKA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA,iCAAiC;;WAEjC;WACA;WACA;WACA,KAAK;WACL,eAAe;WACf;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM;WACN;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;WACA;WACA;;;;;WCrFA;;;;;UEAA;UACA;UACA;UACA",
     "names": [],
     "sourceRoot": "",
     "sources": [
         "webpack://ipywebgl/webpack/container-entry",
         "webpack://ipywebgl/webpack/bootstrap",
         "webpack://ipywebgl/webpack/runtime/define property getters",
@@ -22,19 +22,19 @@
         "webpack://ipywebgl/webpack/after-startup"
     ],
     "sourcesContent": [
         "var moduleMap = {\n\t\"./index\": () => {\n\t\treturn Promise.all([__webpack_require__.e(\"lib_widgets_js\"), __webpack_require__.e(\"lib_index_js\")]).then(() => (() => ((__webpack_require__(/*! ./lib/index.js */ \"./lib/index.js\")))));\n\t},\n\t\"./extension\": () => {\n\t\treturn Promise.all([__webpack_require__.e(\"lib_widgets_js\"), __webpack_require__.e(\"lib_plugin_js\")]).then(() => (() => ((__webpack_require__(/*! ./lib/plugin */ \"./lib/plugin.js\")))));\n\t}\n};\nvar get = (module, getScope) => {\n\t__webpack_require__.R = getScope;\n\tgetScope = (\n\t\t__webpack_require__.o(moduleMap, module)\n\t\t\t? moduleMap[module]()\n\t\t\t: Promise.resolve().then(() => {\n\t\t\t\tthrow new Error('Module \"' + module + '\" does not exist in container.');\n\t\t\t})\n\t);\n\t__webpack_require__.R = undefined;\n\treturn getScope;\n};\nvar init = (shareScope, initScope) => {\n\tif (!__webpack_require__.S) return;\n\tvar name = \"default\"\n\tvar oldScope = __webpack_require__.S[name];\n\tif(oldScope && oldScope !== shareScope) throw new Error(\"Container initialization failed as it has already been initialized with a different share scope\");\n\t__webpack_require__.S[name] = shareScope;\n\treturn __webpack_require__.I(name, initScope);\n};\n\n// This exports getters to disallow modifications\n__webpack_require__.d(exports, {\n\tget: () => (get),\n\tinit: () => (init)\n});",
         "// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// expose the module cache\n__webpack_require__.c = __webpack_module_cache__;\n\n",
         "// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};",
         "__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};",
-        "// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + {\"lib_widgets_js\":\"417df79f43e89915d69a\",\"lib_index_js\":\"115506ce89c3f4c34456\",\"lib_plugin_js\":\"a4fea4dfcfff14540990\"}[chunkId] + \".js\";\n};",
+        "// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + {\"lib_widgets_js\":\"c158407baadd2aaa9731\",\"lib_index_js\":\"115506ce89c3f4c34456\",\"lib_plugin_js\":\"a4fea4dfcfff14540990\"}[chunkId] + \".js\";\n};",
         "__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();",
         "__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))",
         "var inProgress = {};\nvar dataWebpackPrefix = \"ipywebgl:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t};\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};",
-        "__webpack_require__.S = {};\nvar initPromises = {};\nvar initTokens = {};\n__webpack_require__.I = (name, initScope) => {\n\tif(!initScope) initScope = [];\n\t// handling circular init calls\n\tvar initToken = initTokens[name];\n\tif(!initToken) initToken = initTokens[name] = {};\n\tif(initScope.indexOf(initToken) >= 0) return;\n\tinitScope.push(initToken);\n\t// only runs once\n\tif(initPromises[name]) return initPromises[name];\n\t// creates a new share scope if needed\n\tif(!__webpack_require__.o(__webpack_require__.S, name)) __webpack_require__.S[name] = {};\n\t// runs all init snippets from all modules reachable\n\tvar scope = __webpack_require__.S[name];\n\tvar warn = (msg) => (typeof console !== \"undefined\" && console.warn && console.warn(msg));\n\tvar uniqueName = \"ipywebgl\";\n\tvar register = (name, version, factory, eager) => {\n\t\tvar versions = scope[name] = scope[name] || {};\n\t\tvar activeVersion = versions[version];\n\t\tif(!activeVersion || (!activeVersion.loaded && (!eager != !activeVersion.eager ? eager : uniqueName > activeVersion.from))) versions[version] = { get: factory, from: uniqueName, eager: !!eager };\n\t};\n\tvar initExternal = (id) => {\n\t\tvar handleError = (err) => (warn(\"Initialization of sharing external failed: \" + err));\n\t\ttry {\n\t\t\tvar module = __webpack_require__(id);\n\t\t\tif(!module) return;\n\t\t\tvar initFn = (module) => (module && module.init && module.init(__webpack_require__.S[name], initScope))\n\t\t\tif(module.then) return promises.push(module.then(initFn, handleError));\n\t\t\tvar initResult = initFn(module);\n\t\t\tif(initResult && initResult.then) return promises.push(initResult['catch'](handleError));\n\t\t} catch(err) { handleError(err); }\n\t}\n\tvar promises = [];\n\tswitch(name) {\n\t\tcase \"default\": {\n\t\t\tregister(\"ipywebgl\", \"0.2.2\", () => (Promise.all([__webpack_require__.e(\"lib_widgets_js\"), __webpack_require__.e(\"lib_index_js\")]).then(() => (() => (__webpack_require__(/*! ./lib/index.js */ \"./lib/index.js\"))))));\n\t\t}\n\t\tbreak;\n\t}\n\tif(!promises.length) return initPromises[name] = 1;\n\treturn initPromises[name] = Promise.all(promises).then(() => (initPromises[name] = 1));\n};",
+        "__webpack_require__.S = {};\nvar initPromises = {};\nvar initTokens = {};\n__webpack_require__.I = (name, initScope) => {\n\tif(!initScope) initScope = [];\n\t// handling circular init calls\n\tvar initToken = initTokens[name];\n\tif(!initToken) initToken = initTokens[name] = {};\n\tif(initScope.indexOf(initToken) >= 0) return;\n\tinitScope.push(initToken);\n\t// only runs once\n\tif(initPromises[name]) return initPromises[name];\n\t// creates a new share scope if needed\n\tif(!__webpack_require__.o(__webpack_require__.S, name)) __webpack_require__.S[name] = {};\n\t// runs all init snippets from all modules reachable\n\tvar scope = __webpack_require__.S[name];\n\tvar warn = (msg) => (typeof console !== \"undefined\" && console.warn && console.warn(msg));\n\tvar uniqueName = \"ipywebgl\";\n\tvar register = (name, version, factory, eager) => {\n\t\tvar versions = scope[name] = scope[name] || {};\n\t\tvar activeVersion = versions[version];\n\t\tif(!activeVersion || (!activeVersion.loaded && (!eager != !activeVersion.eager ? eager : uniqueName > activeVersion.from))) versions[version] = { get: factory, from: uniqueName, eager: !!eager };\n\t};\n\tvar initExternal = (id) => {\n\t\tvar handleError = (err) => (warn(\"Initialization of sharing external failed: \" + err));\n\t\ttry {\n\t\t\tvar module = __webpack_require__(id);\n\t\t\tif(!module) return;\n\t\t\tvar initFn = (module) => (module && module.init && module.init(__webpack_require__.S[name], initScope))\n\t\t\tif(module.then) return promises.push(module.then(initFn, handleError));\n\t\t\tvar initResult = initFn(module);\n\t\t\tif(initResult && initResult.then) return promises.push(initResult['catch'](handleError));\n\t\t} catch(err) { handleError(err); }\n\t}\n\tvar promises = [];\n\tswitch(name) {\n\t\tcase \"default\": {\n\t\t\tregister(\"ipywebgl\", \"0.3.0\", () => (Promise.all([__webpack_require__.e(\"lib_widgets_js\"), __webpack_require__.e(\"lib_index_js\")]).then(() => (() => (__webpack_require__(/*! ./lib/index.js */ \"./lib/index.js\"))))));\n\t\t}\n\t\tbreak;\n\t}\n\tif(!promises.length) return initPromises[name] = 1;\n\treturn initPromises[name] = Promise.all(promises).then(() => (initPromises[name] = 1));\n};",
         "var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;",
         "var parseVersion = (str) => {\n\t// see webpack/lib/util/semver.js for original code\n\tvar p=p=>{return p.split(\".\").map((p=>{return+p==p?+p:p}))},n=/^([^-+]+)?(?:-([^+]+))?(?:\\+(.+))?$/.exec(str),r=n[1]?p(n[1]):[];return n[2]&&(r.length++,r.push.apply(r,p(n[2]))),n[3]&&(r.push([]),r.push.apply(r,p(n[3]))),r;\n}\nvar versionLt = (a, b) => {\n\t// see webpack/lib/util/semver.js for original code\n\ta=parseVersion(a),b=parseVersion(b);for(var r=0;;){if(r>=a.length)return r<b.length&&\"u\"!=(typeof b[r])[0];var e=a[r],n=(typeof e)[0];if(r>=b.length)return\"u\"==n;var t=b[r],f=(typeof t)[0];if(n!=f)return\"o\"==n&&\"n\"==f||(\"s\"==f||\"u\"==n);if(\"o\"!=n&&\"u\"!=n&&e!=t)return e<t;r++}\n}\nvar rangeToString = (range) => {\n\t// see webpack/lib/util/semver.js for original code\n\tvar r=range[0],n=\"\";if(1===range.length)return\"*\";if(r+.5){n+=0==r?\">=\":-1==r?\"<\":1==r?\"^\":2==r?\"~\":r>0?\"=\":\"!=\";for(var e=1,a=1;a<range.length;a++){e--,n+=\"u\"==(typeof(t=range[a]))[0]?\"-\":(e>0?\".\":\"\")+(e=2,t)}return n}var g=[];for(a=1;a<range.length;a++){var t=range[a];g.push(0===t?\"not(\"+o()+\")\":1===t?\"(\"+o()+\" || \"+o()+\")\":2===t?g.pop()+\" \"+g.pop():rangeToString(t))}return o();function o(){return g.pop().replace(/^\\((.+)\\)$/,\"$1\")}\n}\nvar satisfy = (range, version) => {\n\t// see webpack/lib/util/semver.js for original code\n\tif(0 in range){version=parseVersion(version);var e=range[0],r=e<0;r&&(e=-e-1);for(var n=0,i=1,a=!0;;i++,n++){var f,s,g=i<range.length?(typeof range[i])[0]:\"\";if(n>=version.length||\"o\"==(s=(typeof(f=version[n]))[0]))return!a||(\"u\"==g?i>e&&!r:\"\"==g!=r);if(\"u\"==s){if(!a||\"u\"!=g)return!1}else if(a)if(g==s)if(i<=e){if(f!=range[i])return!1}else{if(r?f>range[i]:f<range[i])return!1;f!=range[i]&&(a=!1)}else if(\"s\"!=g&&\"n\"!=g){if(r||i<=e)return!1;a=!1,i--}else{if(i<=e||s<g!=r)return!1;a=!1}else\"s\"!=g&&\"n\"!=g&&(a=!1,i--)}}var t=[],o=t.pop.bind(t);for(n=1;n<range.length;n++){var u=range[n];t.push(1==u?o()|o():2==u?o()&o():u?satisfy(u,version):!o())}return!!o();\n}\nvar ensureExistence = (scopeName, key) => {\n\tvar scope = __webpack_require__.S[scopeName];\n\tif(!scope || !__webpack_require__.o(scope, key)) throw new Error(\"Shared module \" + key + \" doesn't exist in shared scope \" + scopeName);\n\treturn scope;\n};\nvar findVersion = (scope, key) => {\n\tvar versions = scope[key];\n\tvar key = Object.keys(versions).reduce((a, b) => {\n\t\treturn !a || versionLt(a, b) ? b : a;\n\t}, 0);\n\treturn key && versions[key]\n};\nvar findSingletonVersionKey = (scope, key) => {\n\tvar versions = scope[key];\n\treturn Object.keys(versions).reduce((a, b) => {\n\t\treturn !a || (!versions[a].loaded && versionLt(a, b)) ? b : a;\n\t}, 0);\n};\nvar getInvalidSingletonVersionMessage = (scope, key, version, requiredVersion) => {\n\treturn \"Unsatisfied version \" + version + \" from \" + (version && scope[key][version].from) + \" of shared singleton module \" + key + \" (required \" + rangeToString(requiredVersion) + \")\"\n};\nvar getSingleton = (scope, scopeName, key, requiredVersion) => {\n\tvar version = findSingletonVersionKey(scope, key);\n\treturn get(scope[key][version]);\n};\nvar getSingletonVersion = (scope, scopeName, key, requiredVersion) => {\n\tvar version = findSingletonVersionKey(scope, key);\n\tif (!satisfy(requiredVersion, version)) typeof console !== \"undefined\" && console.warn && console.warn(getInvalidSingletonVersionMessage(scope, key, version, requiredVersion));\n\treturn get(scope[key][version]);\n};\nvar getStrictSingletonVersion = (scope, scopeName, key, requiredVersion) => {\n\tvar version = findSingletonVersionKey(scope, key);\n\tif (!satisfy(requiredVersion, version)) throw new Error(getInvalidSingletonVersionMessage(scope, key, version, requiredVersion));\n\treturn get(scope[key][version]);\n};\nvar findValidVersion = (scope, key, requiredVersion) => {\n\tvar versions = scope[key];\n\tvar key = Object.keys(versions).reduce((a, b) => {\n\t\tif (!satisfy(requiredVersion, b)) return a;\n\t\treturn !a || versionLt(a, b) ? b : a;\n\t}, 0);\n\treturn key && versions[key]\n};\nvar getInvalidVersionMessage = (scope, scopeName, key, requiredVersion) => {\n\tvar versions = scope[key];\n\treturn \"No satisfying version (\" + rangeToString(requiredVersion) + \") of shared module \" + key + \" found in shared scope \" + scopeName + \".\\n\" +\n\t\t\"Available versions: \" + Object.keys(versions).map((key) => {\n\t\treturn key + \" from \" + versions[key].from;\n\t}).join(\", \");\n};\nvar getValidVersion = (scope, scopeName, key, requiredVersion) => {\n\tvar entry = findValidVersion(scope, key, requiredVersion);\n\tif(entry) return get(entry);\n\tthrow new Error(getInvalidVersionMessage(scope, scopeName, key, requiredVersion));\n};\nvar warnInvalidVersion = (scope, scopeName, key, requiredVersion) => {\n\ttypeof console !== \"undefined\" && console.warn && console.warn(getInvalidVersionMessage(scope, scopeName, key, requiredVersion));\n};\nvar get = (entry) => {\n\tentry.loaded = 1;\n\treturn entry.get()\n};\nvar init = (fn) => (function(scopeName, a, b, c) {\n\tvar promise = __webpack_require__.I(scopeName);\n\tif (promise && promise.then) return promise.then(fn.bind(fn, scopeName, __webpack_require__.S[scopeName], a, b, c));\n\treturn fn(scopeName, __webpack_require__.S[scopeName], a, b, c);\n});\n\nvar load = /*#__PURE__*/ init((scopeName, scope, key) => {\n\tensureExistence(scopeName, key);\n\treturn get(findVersion(scope, key));\n});\nvar loadFallback = /*#__PURE__*/ init((scopeName, scope, key, fallback) => {\n\treturn scope && __webpack_require__.o(scope, key) ? get(findVersion(scope, key)) : fallback();\n});\nvar loadVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn get(findValidVersion(scope, key, version) || warnInvalidVersion(scope, scopeName, key, version) || findVersion(scope, key));\n});\nvar loadSingleton = /*#__PURE__*/ init((scopeName, scope, key) => {\n\tensureExistence(scopeName, key);\n\treturn getSingleton(scope, scopeName, key);\n});\nvar loadSingletonVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn getSingletonVersion(scope, scopeName, key, version);\n});\nvar loadStrictVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn getValidVersion(scope, scopeName, key, version);\n});\nvar loadStrictSingletonVersionCheck = /*#__PURE__*/ init((scopeName, scope, key, version) => {\n\tensureExistence(scopeName, key);\n\treturn getStrictSingletonVersion(scope, scopeName, key, version);\n});\nvar loadVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn get(findValidVersion(scope, key, version) || warnInvalidVersion(scope, scopeName, key, version) || findVersion(scope, key));\n});\nvar loadSingletonFallback = /*#__PURE__*/ init((scopeName, scope, key, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn getSingleton(scope, scopeName, key);\n});\nvar loadSingletonVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn getSingletonVersion(scope, scopeName, key, version);\n});\nvar loadStrictVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tvar entry = scope && __webpack_require__.o(scope, key) && findValidVersion(scope, key, version);\n\treturn entry ? get(entry) : fallback();\n});\nvar loadStrictSingletonVersionCheckFallback = /*#__PURE__*/ init((scopeName, scope, key, version, fallback) => {\n\tif(!scope || !__webpack_require__.o(scope, key)) return fallback();\n\treturn getStrictSingletonVersion(scope, scopeName, key, version);\n});\nvar installedModules = {};\nvar moduleToHandlerMapping = {\n\t\"webpack/sharing/consume/default/@jupyter-widgets/base\": () => (loadSingletonVersionCheck(\"default\", \"@jupyter-widgets/base\", [,[1,6],[1,5],[1,4],[1,3],[1,2],[1,1,1,10],1,1,1,1,1]))\n};\n// no consumes in initial chunks\nvar chunkMapping = {\n\t\"lib_widgets_js\": [\n\t\t\"webpack/sharing/consume/default/@jupyter-widgets/base\"\n\t]\n};\n__webpack_require__.f.consumes = (chunkId, promises) => {\n\tif(__webpack_require__.o(chunkMapping, chunkId)) {\n\t\tchunkMapping[chunkId].forEach((id) => {\n\t\t\tif(__webpack_require__.o(installedModules, id)) return promises.push(installedModules[id]);\n\t\t\tvar onFactory = (factory) => {\n\t\t\t\tinstalledModules[id] = 0;\n\t\t\t\t__webpack_require__.m[id] = (module) => {\n\t\t\t\t\tdelete __webpack_require__.c[id];\n\t\t\t\t\tmodule.exports = factory();\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar onError = (error) => {\n\t\t\t\tdelete installedModules[id];\n\t\t\t\t__webpack_require__.m[id] = (module) => {\n\t\t\t\t\tdelete __webpack_require__.c[id];\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t};\n\t\t\ttry {\n\t\t\t\tvar promise = moduleToHandlerMapping[id]();\n\t\t\t\tif(promise.then) {\n\t\t\t\t\tpromises.push(installedModules[id] = promise.then(onFactory)['catch'](onError));\n\t\t\t\t} else onFactory(promise);\n\t\t\t} catch(e) { onError(e); }\n\t\t});\n\t}\n}",
         "// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"ipywebgl\": 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkipywebgl\"] = self[\"webpackChunkipywebgl\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));",
         "__webpack_require__.nc = undefined;",
         "",
         "// module cache are used so entry inlining is disabled\n// startup\n// Load entry module and return exports\nvar __webpack_exports__ = __webpack_require__(\"webpack/container/entry/ipywebgl\");\n",
         ""
```

### Comparing `ipywebgl-0.2.2/ipywebgl/nbextension/index.js` & `ipywebgl-0.3.0/ipywebgl/nbextension/index.js`

 * *Files 1% similar despite different names*

#### js-beautify {}

```diff
@@ -314,15 +314,16 @@
                             camera_yaw: 0,
                             camera_pitch: 0,
                             camera_fov: 50,
                             camera_near: 1,
                             camera_far: 5e3,
                             mouse_speed: 1,
                             move_speed: 1,
-                            move_keys: "wasd"
+                            move_keys: "wasd",
+                            verbose: 0
                         })
                     }
                     initialize(e, t) {
                         if (super.initialize(e, t), this.canvas = document.createElement("canvas"), this.ctx = this.canvas.getContext("webgl2", {
                                 preserveDrawingBuffer: !0
                             }), null == this.ctx) console.error("could not create a webgl2 context, this is not supported in your browser");
                         else {
@@ -379,15 +380,15 @@
                     }
                     glEnumToString(e, t) {
                         const r = [];
                         for (const a in e) e[a] === t && r.push(a);
                         return r.length ? r.join(" | ") : `0x${t.toString(16)}`
                     }
                     execute_command(e, t, r) {
-                        switch (console.log(t), t.cmd) {
+                        switch (this.get("verbose") > 0 && (console.log(t), t.hasOwnProperty("buffer_metadata") && (console.log("data"), console.log(r[t.buffer_metadata.index]))), t.cmd) {
                             case "viewport":
                                 e.viewport(t.x, t.y, t.width, t.height);
                                 break;
                             case "enable":
                             case "disable": {
                                 let r = 0;
                                 t.blend && (r |= e.BLEND), t.depth_test && (r |= e.DEPTH_TEST), t.dither && (r |= e.DITHER), t.polygon_offset_fill && (r |= e.POLYGON_OFFSET_FILL), t.sample_alpha_to_coverage && (r |= e.SAMPLE_ALPHA_TO_COVERAGE), t.sample_coverage && (r |= e.SAMPLE_COVERAGE), t.scissor_test && (r |= e.SCISSOR_TEST), t.stencil_test && (r |= e.STENCIL_TEST), t.rasterizer_discard && (r |= e.RASTERIZER_DISCARD), t.cull_face && (r |= e.CULL_FACE), "enable" == t.cmd ? e.enable(r) : e.disable(r)
@@ -998,15 +999,15 @@
             },
             146: t => {
                 "use strict";
                 t.exports = e
             },
             147: e => {
                 "use strict";
-                e.exports = JSON.parse('{"name":"ipywebgl","version":"0.2.2","description":"A Custom Jupyter Widget Library","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/JeromeEippers/ipywebgl","bugs":{"url":"https://github.com/JeromeEippers/ipywebgl/issues"},"license":"BSD-3-Clause","author":{"name":"Jerome Eippers","email":"jerome@eippers.be"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/JeromeEippers/ipywebgl"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipywebgl/labextension","clean:nbextension":"rimraf ipywebgl/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.2","@jupyterlab/builder":"^3.0.0","@lumino/application":"^1.6.0","@lumino/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipywebgl/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')
+                e.exports = JSON.parse('{"name":"ipywebgl","version":"0.3.0","description":"A Custom Jupyter Widget Library","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/JeromeEippers/ipywebgl","bugs":{"url":"https://github.com/JeromeEippers/ipywebgl/issues"},"license":"BSD-3-Clause","author":{"name":"Jerome Eippers","email":"jerome@eippers.be"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/JeromeEippers/ipywebgl"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipywebgl/labextension","clean:nbextension":"rimraf ipywebgl/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.2","@jupyterlab/builder":"^3.0.0","@lumino/application":"^1.6.0","@lumino/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipywebgl/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')
             }
         },
         r = {};
 
     function a(e) {
         var i = r[e];
         if (void 0 !== i) return i.exports;
```

### Comparing `ipywebgl-0.2.2/ipywebgl/nbextension/index.js.map` & `ipywebgl-0.3.0/ipywebgl/nbextension/index.js.map`

 * *Files 2% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9200389016366041%*

 * *Differences: {"'mappings'": "'iEAEAA,EADkC,EAAQ,IAChCC,EAA4B,IAE9BC,KAAK,CAACC,EAAOC,GAAI,0QAA2Q,KAEpSD,EAAOH,QAAUA,C,uBCEjBG,EAAOH,QAAU,SAAUK,GACzB,IAAIC,EAAO,GAuDX,OArDAA,EAAKC,SAAW,WACd,OAAOC,KAAKC,KAAI,SAAUC,GACxB,IAAIC,EAsDV,SAAgCD,EAAML,GACpC,IAoBiBO,EAEbC,EACAC,EAvBAH,EAAUD,EAAK,IAAM,GAErBK,EAAaL,EAAK,GAEtB,IAAKK,EACH,OAAOJ,EAGT,GAAIN,GAAgC,mBAATW,KAAqB,CAC9C,IAAIC,GAWWL,EAXeG,EAa5BF,EAASG,KAAKE,SAASC,mBAAmBC,KAAKC,UAAUT,MACzDE,EAAO,+DAA+DQ,OAAOT,GAC1E,OAAOS,OAAOR,EAAM,QAdrBS,EAAaR,EAAWS,QAAQf,KAAI,SAAUgB,GAChD,M […]*

```diff
@@ -1,10 +1,10 @@
 {
     "file": "index.js",
-    "mappings": "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",
+    "mappings": "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",
     "names": [
         "exports",
         "___CSS_LOADER_API_IMPORT___",
         "push",
         "module",
         "id",
         "useSourceMap",
@@ -181,14 +181,15 @@
         "camera_pitch",
         "camera_fov",
         "camera_near",
         "camera_far",
         "mouse_speed",
         "move_speed",
         "move_keys",
+        "verbose",
         "canvas",
         "ctx",
         "getContext",
         "preserveDrawingBuffer",
         "console",
         "error",
         "gl",
@@ -578,15 +579,15 @@
         "// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".ipywebgl-json-display {\\r\\n  padding: 10px;\\r\\n  font-family: sans-serif;\\r\\n  background-color: #f2f2f2;\\r\\n  margin-left: 20px;\\r\\n}\\r\\n\\r\\n.ipywebgl-json-key {\\r\\n  font-weight: bold;\\r\\n  color: #333;\\r\\n}\\r\\n\\r\\n.ipywebgl-json-value {\\r\\n  color: #555;\\r\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n",
         "\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}",
         "var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./widget.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};",
         "\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};",
         "export function buffer_to_array(dtype:String, buffer: any) {\r\n    switch (dtype) {\r\n      case 'int8':\r\n        return new Int8Array(buffer);\r\n        break;\r\n      case 'uint8':\r\n        return new Uint8Array(buffer);\r\n        break;\r\n      case 'int16':\r\n        return new Int16Array(buffer);\r\n        break;\r\n      case 'uint16':\r\n        return new Uint16Array(buffer);\r\n        break;\r\n      case 'int32':\r\n        return new Int32Array(buffer);\r\n        break;\r\n      case 'uint32':\r\n        return new Uint32Array(buffer);\r\n        break;\r\n      case 'float32':\r\n        return new Float32Array(buffer);\r\n        break;\r\n      case 'float64':\r\n        return new Float64Array(buffer);\r\n        break;\r\n      default:\r\n        throw 'Unknown dtype ' + dtype;\r\n        break;\r\n    }\r\n  }",
         "// Copyright (c) Jupyter Development Team.\r\n// Distributed under the terms of the Modified BSD License.\r\n\r\n// Entry point for the notebook bundle containing custom model definitions.\r\n//\r\n// Setup notebook base URL\r\n//\r\n// Some static assets may be required by the custom widget javascript. The base\r\n// url for the notebook is not known at build time and is therefore computed\r\n// dynamically.\r\n// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n(window as any).__webpack_public_path__ =\r\n  document.querySelector('body')!.getAttribute('data-base-url') +\r\n  'nbextensions/ipywebgl';\r\n\r\nexport * from './index';\r\n",
         "import {\r\n    DOMWidgetModel,\r\n    DOMWidgetView,\r\n    ISerializers,\r\n    unpack_models\r\n  } from '@jupyter-widgets/base';\r\n  \r\nimport { MODULE_NAME, MODULE_VERSION } from './version';\r\n\r\n// Import the CSS\r\nimport '../css/widget.css';\r\n\r\nexport class GLResource extends DOMWidgetModel{\r\n    defaults() {\r\n      return {\r\n        ...super.defaults(),\r\n        _model_name: 'GLResource',\r\n        _model_module: MODULE_NAME,\r\n        _model_module_version: MODULE_VERSION,\r\n        _view_name: 'GLResourceView',\r\n        _view_module: MODULE_NAME,\r\n        _view_module_version: MODULE_VERSION,\r\n  \r\n        _context: null,\r\n        _gl_ptr:null,\r\n        _info: {type:'not set'},\r\n  \r\n        uid: 0,\r\n      };\r\n    }\r\n\r\n    static serializers: ISerializers = {\r\n        ...DOMWidgetModel.serializers,\r\n        _context: { deserialize: unpack_models },\r\n      };\r\n    \r\n    initialize(attributes: any, options: any) {\r\n        super.initialize(attributes, options);\r\n        this.get('_context').register_resource(this);\r\n    }\r\n}\r\n  \r\nexport class GLResourceView extends DOMWidgetView {\r\n\r\n    render() {\r\n\r\n      const root = this.el;\r\n      const jsonDisplay = document.createElement(\"div\");\r\n      jsonDisplay.classList.add(\"ipywebgl-json-display\");\r\n  \r\n      const jsonKey = document.createElement(\"div\");\r\n      jsonKey.classList.add(\"ipywebgl-json-key\");\r\n      jsonKey.textContent = \"uid:\";\r\n\r\n      const jsonValue = document.createElement(\"div\");\r\n      jsonValue.classList.add(\"ipywebgl-json-value\");\r\n      jsonValue.textContent = this.model.get('uid');\r\n      jsonDisplay.appendChild(jsonKey);\r\n      jsonDisplay.appendChild(jsonValue);\r\n\r\n      this.displayJson(this.model.get('_info'), jsonDisplay);\r\n      root.appendChild(jsonDisplay);\r\n    }\r\n\r\n    displayJson(json:any, parent:any) {\r\n      for (const key in json) {\r\n        const jsonKey = document.createElement(\"div\");\r\n        jsonKey.classList.add(\"ipywebgl-json-key\");\r\n        jsonKey.textContent = `${key}:`;\r\n\r\n        const jsonValue = document.createElement(\"div\");\r\n        jsonValue.classList.add(\"ipywebgl-json-value\");\r\n\r\n        if (typeof json[key] === \"object\") {\r\n          const nestedJsonDisplay = document.createElement(\"div\");\r\n          nestedJsonDisplay.classList.add(\"ipywebgl-json-display\");\r\n\r\n          this.displayJson(json[key], nestedJsonDisplay);\r\n          jsonValue.appendChild(nestedJsonDisplay);\r\n        } else {\r\n          jsonValue.textContent = json[key];\r\n        }\r\n\r\n        parent.appendChild(jsonKey);\r\n        parent.appendChild(jsonValue);\r\n      }\r\n    }\r\n\r\n    \r\n}\r\n\r\n  ",
-        "import {\r\n  DOMWidgetModel,\r\n  DOMWidgetView,\r\n  ISerializers,\r\n} from '@jupyter-widgets/base';\r\n\r\nimport { MODULE_NAME, MODULE_VERSION } from './version';\r\n\r\nimport { m4dot, m4getColumnI, m4getColumnK, m4inverse, m4ProjectionMatrix, m4Translation, m4Transpose, m4Xrotation, m4Yrotation, vec3Add, vec3Scale } from './matrix';\r\nimport { GLResource } from './glresource';\r\nimport { buffer_to_array } from './arraybuffer';\r\n\r\n\r\nexport class GLModel extends DOMWidgetModel {\r\n  defaults() {\r\n    return {\r\n      ...super.defaults(),\r\n      _model_name: 'GLModel',\r\n      _model_module: MODULE_NAME,\r\n      _model_module_version: MODULE_VERSION,\r\n      _view_name: 'GLViewer',\r\n      _view_module: MODULE_NAME,\r\n      _view_module_version: MODULE_VERSION,\r\n      shader_matrix_major:'row_major',\r\n      width:700,\r\n      height:500,\r\n      camera_pos:[0,50,200],\r\n      camera_yaw:0,\r\n      camera_pitch:0,\r\n      camera_fov:50.0,\r\n      camera_near:1.0,\r\n      camera_far:5000.0,\r\n      mouse_speed:1,\r\n      move_speed:1,\r\n      move_keys:'wasd',\r\n    };\r\n  }\r\n\r\n  static serializers: ISerializers = {\r\n    ...DOMWidgetModel.serializers,\r\n  };\r\n\r\n  initialize(attributes: any, options: any) {\r\n    super.initialize(attributes, options);\r\n\r\n    this.canvas = document.createElement('canvas');\r\n    this.ctx = this.canvas.getContext(\"webgl2\", {preserveDrawingBuffer: true});\r\n    if (this.ctx == null){\r\n      console.error('could not create a webgl2 context, this is not supported in your browser');\r\n    }\r\n    else{\r\n      const gl:WebGL2RenderingContext = this.ctx;\r\n      this.view_block = gl.createBuffer();\r\n      gl.bindBuffer(gl.UNIFORM_BUFFER, this.view_block);\r\n      gl.bufferData(gl.UNIFORM_BUFFER, 256, gl.DYNAMIC_DRAW);\r\n      gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n      gl.bindBufferBase(gl.UNIFORM_BUFFER, 0, this.view_block);\r\n\r\n      //extensions to activate\r\n      gl.getExtension(\"EXT_color_buffer_float\")\r\n    }\r\n\r\n    this.resizeCanvas();\r\n    this.on_some_change(['width', 'height', 'camera_fov', 'camera_near', 'camera_far'], this.resizeCanvas, this);\r\n    this.on_some_change(['camera_pos', 'camera_yaw', 'camera_pitch'], this.run_commands, this);\r\n\r\n    this.on('msg:custom', this.handle_custom_messages, this);\r\n\r\n    this.camera_matrix = m4Translation(0,50,200);\r\n    this.view_matrix = m4inverse(this.camera_matrix);\r\n  }\r\n\r\n  resizeCanvas() {\r\n    this.canvas.setAttribute('width', this.get('width'));\r\n    this.canvas.setAttribute('height', this.get('height'));\r\n    if (this.ctx != null){\r\n      this.ctx.viewport(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\r\n    }\r\n    this.projection_matrix = m4ProjectionMatrix(this.get('camera_fov'), this.get('width')/this.get('height'), this.get('camera_near'), this.get('camera_far'));\r\n  }\r\n\r\n  handle_custom_messages(command: any, buffers:any) {\r\n    if(command.clear == true){\r\n      this.commands = [];\r\n      this.buffers = [];\r\n    }\r\n    let commands = command.commands;\r\n    let converted_buffers:any[] = [];\r\n    commands.forEach((element:any)=>{\r\n      if (element.hasOwnProperty('buffer_metadata')) {\r\n        const converted = buffer_to_array(element.buffer_metadata.dtype, buffers[element.buffer_metadata.index].buffer);\r\n        converted_buffers.push(converted);\r\n      }\r\n    });\r\n\r\n    if(command.only_once == true){\r\n      this.execute_commands(commands, converted_buffers);\r\n    }\r\n    else{\r\n      let buffer_id_offset = this.buffers.length;\r\n      this.buffers = this.buffers.concat(converted_buffers);\r\n      commands.forEach((element:any)=>{\r\n        if (element.hasOwnProperty('buffer_metadata')) {\r\n          element.buffer_metadata.index += buffer_id_offset;\r\n        }\r\n      });\r\n      this.commands = this.commands.concat(commands);\r\n    }\r\n\r\n    this.run_commands();\r\n  }\r\n\r\n  private update_camera(){\r\n    let pos = this.get('camera_pos');\r\n    let yaw = this.get('camera_yaw') * Math.PI / 180.0;\r\n    let pitch = this.get('camera_pitch') * Math.PI / 180.0;\r\n    this.camera_matrix = m4Translation(pos[0], pos[1], pos[2]);\r\n    this.camera_matrix = m4dot(this.camera_matrix, m4Yrotation(yaw));\r\n    this.camera_matrix = m4dot(this.camera_matrix, m4Xrotation(pitch));\r\n    this.view_matrix = m4inverse(this.camera_matrix);\r\n    this.view_proj_matrix = m4dot(this.projection_matrix, this.view_matrix);\r\n  }\r\n\r\n  run_commands(){\r\n    this.execute_commands(this.commands, this.buffers);\r\n  }\r\n\r\n  execute_commands(commands:any[], converted_buffers:any[]){\r\n    if (this.ctx == null) return;\r\n    const gl:WebGL2RenderingContext = this.ctx;\r\n\r\n    this.update_camera();\r\n\r\n    // update the uniform Block\r\n    let cm = (this.get('shader_matrix_major')=='row_major')? m4Transpose(this.camera_matrix): this.camera_matrix;\r\n    const cm_f32 = new Float32Array(cm);\r\n    let vm = (this.get('shader_matrix_major')=='row_major')? m4Transpose(this.view_matrix): this.view_matrix;\r\n    const vm_f32 = new Float32Array(vm);\r\n    let pm = (this.get('shader_matrix_major')=='row_major')? m4Transpose(this.projection_matrix): this.projection_matrix;\r\n    const pm_f32 = new Float32Array(pm);\r\n    let vpm = (this.get('shader_matrix_major')=='row_major')? m4Transpose(this.view_proj_matrix): this.view_proj_matrix;\r\n    const vpm_f32 = new Float32Array(vpm);\r\n\r\n    gl.bindBuffer(gl.UNIFORM_BUFFER, this.view_block);\r\n    gl.bufferSubData(gl.UNIFORM_BUFFER, 0, cm_f32, 0);\r\n    gl.bufferSubData(gl.UNIFORM_BUFFER, 64, vm_f32, 0);\r\n    gl.bufferSubData(gl.UNIFORM_BUFFER, 128, pm_f32, 0);\r\n    gl.bufferSubData(gl.UNIFORM_BUFFER, 192, vpm_f32, 0);\r\n    gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n\r\n    commands.forEach((command:any)=>{\r\n      this.execute_command(gl, command, converted_buffers);\r\n    });\r\n  }\r\n\r\n  glEnumToString(gl:WebGL2RenderingContext, value:any) {\r\n    const keys = [];\r\n    for (const key in gl) {\r\n      if ((gl as any)[key] === value) {\r\n        keys.push(key);\r\n      }\r\n    }\r\n    return keys.length ? keys.join(' | ') : `0x${value.toString(16)}`;\r\n  }\r\n\r\n  execute_command(gl:WebGL2RenderingContext, command:any, converted_buffers:any[]){\r\n    console.log(command);\r\n    //console.log(this.bound_buffers);\r\n    switch(command.cmd){\r\n      case 'viewport':\r\n          gl.viewport(command.x, command.y, command.width, command.height);\r\n        break;\r\n      case 'enable':\r\n      case 'disable':\r\n        {\r\n          let cap = 0;\r\n          if (command.blend) cap |= gl.BLEND;\r\n          if (command.depth_test) cap |= gl.DEPTH_TEST;\r\n          if (command.dither) cap |= gl.DITHER;\r\n          if (command.polygon_offset_fill) cap |= gl.POLYGON_OFFSET_FILL;\r\n          if (command.sample_alpha_to_coverage) cap |= gl.SAMPLE_ALPHA_TO_COVERAGE;\r\n          if (command.sample_coverage) cap |= gl.SAMPLE_COVERAGE;\r\n          if (command.scissor_test) cap |= gl.SCISSOR_TEST;\r\n          if (command.stencil_test) cap |= gl.STENCIL_TEST;\r\n          if (command.rasterizer_discard) cap |= gl.RASTERIZER_DISCARD;\r\n          if (command.cull_face) cap |= gl.CULL_FACE;\r\n          if (command.cmd == 'enable'){\r\n            gl.enable(cap);\r\n          } else{\r\n            gl.disable(cap);\r\n          }\r\n        }\r\n        break;\r\n      case 'clearColor':\r\n          gl.clearColor(command.r, command.g, command.b, command.a);\r\n        break;\r\n      case 'clear':{\r\n        let bits = 0;\r\n        if (command.depth) bits |= gl.DEPTH_BUFFER_BIT;\r\n        if (command.color) bits |= gl.COLOR_BUFFER_BIT;\r\n        if (command.stencil) bits |= gl.STENCIL_BUFFER_BIT;\r\n        gl.clear(bits);\r\n      }\r\n      break;\r\n      case 'frontFace':{\r\n        gl.frontFace((gl as any)[command.mode]);\r\n      }\r\n      break;\r\n      case 'cullFace':{\r\n        gl.cullFace((gl as any)[command.mode]);\r\n      }\r\n      break;\r\n\r\n      // ------------------------------- DEPTH --------------------------------------\r\n      case 'depthFunc':{\r\n        gl.depthFunc((gl as any)[command.func]);\r\n      }\r\n      break;\r\n      case 'depthMask':{\r\n        gl.depthMask(command.flag);\r\n      }\r\n      break;\r\n      case 'depthRange':{\r\n        gl.depthRange(command.z_near, command.z_far);\r\n      }\r\n      break;\r\n\r\n      // ------------------------------- COLOR --------------------------------------\r\n      case 'blendColor':\r\n          gl.blendColor(command.r, command.g, command.b, command.a);\r\n        break;\r\n      case 'blendEquation':\r\n        gl.blendEquation((gl as any)[command.mode]);\r\n        break;\r\n      case 'blendEquationSeparate':\r\n          gl.blendEquationSeparate((gl as any)[command.mode_rgb], (gl as any)[command.mode_alpha]);\r\n          break;\r\n      case 'blendFunc':\r\n          gl.blendFunc((gl as any)[command.s_factor], (gl as any)[command.d_factor])\r\n      break;\r\n      case 'blend_func_separate':\r\n         gl.blendFuncSeparate((gl as any)[command.src_rgb], (gl as any)[command.dst_rgb], (gl as any)[command.src_alpha], (gl as any)[command.dst_alpha])\r\n        break;\r\n        \r\n      // ------------------------------- TEXTURE --------------------------------------\r\n      case 'createTexture':{\r\n        let res = this.get_resource(command.resource);\r\n        const ptr = gl.createTexture();\r\n        res.set('_gl_ptr', ptr);\r\n        res.set('_info', {type:'texture'});\r\n        res.save_changes();\r\n      }\r\n      break;\r\n      case 'bindTexture':{\r\n        if (command.texture > -1){\r\n          const texture = this.get_resource(command.texture).get('_gl_ptr');\r\n          gl.bindTexture((gl as any)[command.target], texture);\r\n        }\r\n        else{\r\n          gl.bindTexture((gl as any)[command.target], null);\r\n        }\r\n      }\r\n      break;\r\n      case 'activeTexture':\r\n        gl.activeTexture(gl.TEXTURE0 + command.texture);\r\n      break;\r\n      case 'generateMipmap':\r\n        gl.generateMipmap((gl as any)[command.target]);\r\n      break;\r\n      case 'texImage2D':\r\n        if (command.hasOwnProperty('buffer_metadata')){\r\n          gl.texImage2D(\r\n            (gl as any)[command.target],\r\n            command.level,\r\n            (gl as any)[command.internal_format],\r\n            command.width,\r\n            command.height,\r\n            command.border,\r\n            (gl as any)[command.format],\r\n            (gl as any)[command.data_type],\r\n            converted_buffers[command.buffer_metadata.index]\r\n          )\r\n        }\r\n        else{\r\n          gl.texImage2D(\r\n            (gl as any)[command.target],\r\n            command.level,\r\n            (gl as any)[command.internal_format],\r\n            command.width,\r\n            command.height,\r\n            command.border,\r\n            (gl as any)[command.format],\r\n            (gl as any)[command.data_type],\r\n            null\r\n          )\r\n        }\r\n      break;\r\n      case 'texStorage2D':{\r\n        gl.texStorage2D(\r\n          (gl as any)[command.target],\r\n          command.levels,\r\n          (gl as any)[command.internal_format],\r\n          command.width,\r\n          command.height\r\n        );\r\n      }\r\n      break;\r\n      case 'texImage3D':\r\n        if (command.hasOwnProperty('buffer_metadata')){\r\n          gl.texImage3D(\r\n            (gl as any)[command.target],\r\n            command.level,\r\n            (gl as any)[command.internal_format],\r\n            command.width,\r\n            command.height,\r\n            command.depth,\r\n            command.border,\r\n            (gl as any)[command.format],\r\n            (gl as any)[command.data_type],\r\n            converted_buffers[command.buffer_metadata.index]\r\n          )\r\n        }else{\r\n          gl.texImage3D(\r\n            (gl as any)[command.target],\r\n            command.level,\r\n            (gl as any)[command.internal_format],\r\n            command.width,\r\n            command.height,\r\n            command.depth,\r\n            command.border,\r\n            (gl as any)[command.format],\r\n            (gl as any)[command.data_type],\r\n            null\r\n          )\r\n        }\r\n      break;\r\n      case 'texStorage3D':{\r\n        gl.texStorage3D(\r\n          (gl as any)[command.target],\r\n          command.levels,\r\n          (gl as any)[command.internal_format],\r\n          command.width,\r\n          command.height,\r\n          command.depth\r\n        );\r\n      }\r\n      break;\r\n      case 'texParameteri':\r\n        gl.texParameteri((gl as any)[command.target], (gl as any)[command.pname], command.param);\r\n      break;\r\n      case 'texParameterf':\r\n        gl.texParameterf((gl as any)[command.target], (gl as any)[command.pname], command.param);\r\n      break;\r\n      case 'texParameter_str':\r\n        gl.texParameteri((gl as any)[command.target], (gl as any)[command.pname], (gl as any)[command.param]);\r\n      break;\r\n      case 'pixelStorei':{\r\n        if (command.pname == 'UNPACK_COLORSPACE_CONVERSION_WEBGL'){\r\n          gl.pixelStorei((gl as any)[command.pname], (gl as any)[command.param]);\r\n        }\r\n        else{\r\n          gl.pixelStorei((gl as any)[command.pname], command.param);\r\n        }\r\n      }\r\n      break;\r\n      // ------------------------------- SHADERS --------------------------------------\r\n      case 'createShader':{\r\n        let res = this.get_resource(command.resource);\r\n        const ptr = gl.createShader((gl as any)[command.type]);\r\n        res.set('_gl_ptr', ptr);\r\n        res.set('_info', {type:command.type});\r\n        res.save_changes();\r\n      }\r\n      break;\r\n      case 'shaderSource':{\r\n        const res = this.get_resource(command.shader);\r\n          const ptr = res.get('_gl_ptr');\r\n          gl.shaderSource(ptr, command.source);\r\n        }\r\n        break;\r\n      case 'compileShader':{\r\n          const res = this.get_resource(command.shader);\r\n          const ptr = res.get('_gl_ptr');\r\n          gl.compileShader(ptr);\r\n          let resinfo = res.get('_info');\r\n\r\n          if ( !gl.getShaderParameter(ptr, gl.COMPILE_STATUS) ) {\r\n            let info = gl.getShaderInfoLog( ptr );\r\n            resinfo.message = info;\r\n          }\r\n          else{\r\n            resinfo.message = 'compiled';\r\n          }\r\n          res.set('_info', resinfo);\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      // ------------------------------- PROGRAMS --------------------------------------\r\n      case 'createProgram':{\r\n          let res = this.get_resource(command.resource);\r\n          const ptr = gl.createProgram();\r\n          res.set('_gl_ptr', ptr);\r\n          res.set('_info', {type:'Program'});\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      case 'attachShader':{\r\n          const prog = this.get_resource(command.program).get('_gl_ptr');\r\n          const shader = this.get_resource(command.shader).get('_gl_ptr');\r\n          gl.attachShader(prog, shader);\r\n        }\r\n        break;\r\n      case 'bindAttribLocation':{\r\n          let res = this.get_resource(command.program);\r\n          const ptr = res.get('_gl_ptr');\r\n          gl.bindAttribLocation(ptr, command.index, command.name);\r\n        }\r\n        break;\r\n      case 'linkProgram':{\r\n          let res = this.get_resource(command.program);\r\n          const ptr = res.get('_gl_ptr');\r\n          gl.linkProgram(ptr);\r\n          gl.validateProgram(ptr);\r\n          let resinfo = res.get('_info');\r\n\r\n          if ( !gl.getProgramParameter( ptr, gl.LINK_STATUS) ) {\r\n            let info = gl.getShaderInfoLog( ptr );\r\n            resinfo.message = info;\r\n          }\r\n          else{\r\n            //bind our viewBlock\r\n            let viewBlockIndex = gl.getUniformBlockIndex(ptr, 'ViewBlock');\r\n            if (viewBlockIndex < 4294967295){\r\n              gl.uniformBlockBinding(ptr, viewBlockIndex, 0);\r\n            }\r\n            resinfo.message = 'linked';\r\n            resinfo.uniforms_blocks = [];\r\n            resinfo.uniforms = [];\r\n            const numUniforms = gl.getProgramParameter(ptr, gl.ACTIVE_UNIFORMS);\r\n            const indices = [...Array(numUniforms).keys()];\r\n            const blockIndices = gl.getActiveUniforms(ptr, indices, gl.UNIFORM_BLOCK_INDEX);\r\n            const offsets = gl.getActiveUniforms(ptr, indices, gl.UNIFORM_OFFSET);\r\n            for (let i = 0; i < numUniforms; ++i) {\r\n              const info = gl.getActiveUniform(ptr, i);\r\n              if (info){\r\n                // regroup the blocks\r\n                if (blockIndices[i]>-1){\r\n                  let uniform_block = resinfo.uniforms_blocks.find((element:any)=>{return element.index == blockIndices[i]});\r\n                  if (uniform_block == undefined){\r\n                    uniform_block = {\r\n                      index:blockIndices[i], \r\n                      name:gl.getActiveUniformBlockName(ptr, blockIndices[i]), \r\n                      size:gl.getActiveUniformBlockParameter(ptr, blockIndices[i], gl.UNIFORM_BLOCK_DATA_SIZE),\r\n                      uniforms:[]};\r\n                    resinfo.uniforms_blocks.push(uniform_block);\r\n                  }\r\n                  uniform_block.uniforms.push(\r\n                    {name:info.name, type:this.glEnumToString(gl, info.type), size:info.size, offset:offsets[i]}\r\n                  )\r\n                }\r\n                else{\r\n                  resinfo.uniforms.push({name:info.name, type:this.glEnumToString(gl, info.type), size:info.size, location:gl.getUniformLocation(ptr, info.name)});\r\n                }\r\n              }\r\n            }\r\n            resinfo.attributes = [];\r\n            const numAttribute = gl.getProgramParameter(ptr, gl.ACTIVE_ATTRIBUTES);\r\n            for (let i = 0; i < numAttribute; ++i) {\r\n              const info = gl.getActiveAttrib(ptr, i);\r\n              if (info)\r\n                resinfo.attributes.push({name:info.name, type:this.glEnumToString(gl, info.type), size:info.size, location:gl.getAttribLocation(ptr, info.name)});\r\n            }\r\n          }\r\n          res.set('_info', resinfo);\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      case 'useProgram':{\r\n          if(command.program >= 0){\r\n            const res = this.get_resource(command.program);\r\n            const ptr = res.get('_gl_ptr');\r\n            gl.useProgram(ptr);\r\n            this.bound_program = res;\r\n          } else {\r\n            gl.useProgram(null);\r\n            this.bound_program = null;\r\n          }\r\n        }\r\n        break;\r\n      case 'uniform':\r\n      case 'uniformMatrix':\r\n        {\r\n          if(this.bound_program != null){\r\n            let resinfo = this.bound_program.get('_info');\r\n            const uniform = resinfo.uniforms.find((element:any)=>{return element.name == command.name});\r\n            if (uniform != undefined){\r\n              const location = uniform.location;\r\n\r\n              if (command.cmd == 'uniform'){\r\n                let shape = command.buffer_metadata.shape[command.buffer_metadata.shape.length-1];\r\n                if (command.buffer_metadata.dtype == 'int32'){\r\n                  let bufarray:Int32Array = converted_buffers[command.buffer_metadata.index] as Int32Array;\r\n                  if (shape == 1) gl.uniform1iv(location, bufarray);\r\n                  else if (shape == 2) gl.uniform2iv(location, bufarray);\r\n                  else if (shape == 3) gl.uniform3iv(location, bufarray);\r\n                  else if (shape == 4) gl.uniform4iv(location, bufarray);\r\n                }\r\n                else if (command.buffer_metadata.dtype == 'uint32'){\r\n                  let bufarray:Uint32Array = converted_buffers[command.buffer_metadata.index] as Uint32Array;\r\n                  if (shape == 1) gl.uniform1uiv(location, bufarray);\r\n                  else if (shape == 2) gl.uniform2uiv(location, bufarray);\r\n                  else if (shape == 3) gl.uniform3uiv(location, bufarray);\r\n                  else if (shape == 4) gl.uniform4uiv(location, bufarray);\r\n                }\r\n                else if (command.buffer_metadata.dtype == 'float32'){\r\n                  let bufarray:Float32Array = converted_buffers[command.buffer_metadata.index] as Float32Array;\r\n                  if (shape == 1) gl.uniform1fv(location, bufarray);\r\n                  else if (shape == 2) gl.uniform2fv(location, bufarray);\r\n                  else if (shape == 3) gl.uniform3fv(location, bufarray);\r\n                  else if (shape == 4) gl.uniform4fv(location, bufarray);\r\n                }\r\n              }\r\n\r\n              else {\r\n                let a = command.buffer_metadata.shape[command.buffer_metadata.shape.length-2];\r\n                let b = command.buffer_metadata.shape[command.buffer_metadata.shape.length-1];\r\n                let bufarray:Float32Array = converted_buffers[command.buffer_metadata.index] as Float32Array;\r\n                if (a==2)\r\n                {\r\n                  if (b==2) gl.uniformMatrix2fv(location, false, bufarray);\r\n                  else if (b==3) gl.uniformMatrix2x3fv(location, false, bufarray);\r\n                  else if (b==4)gl.uniformMatrix2x4fv(location, false, bufarray);\r\n                }\r\n                else if (a==3)\r\n                {\r\n                  if (b==2) gl.uniformMatrix3x2fv(location, false, bufarray);\r\n                  else if (b==3) gl.uniformMatrix3fv(location, false, bufarray);\r\n                  else if (b==4)gl.uniformMatrix3x4fv(location, false, bufarray);\r\n                }\r\n                else if (a==4)\r\n                {\r\n                  if (b==2) gl.uniformMatrix4x2fv(location, false, bufarray);\r\n                  else if (b==3) gl.uniformMatrix4x3fv(location, false, bufarray);\r\n                  else if (b==4)gl.uniformMatrix4fv(location, false, bufarray);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      break;\r\n      case 'uniformBlockBinding':{\r\n        let res = this.get_resource(command.program);\r\n        const ptr = res.get('_gl_ptr');\r\n        const uniformblock = res.get('_info').uniforms_blocks.find((element:any)=>{return element.name == command.uniform_block_name});\r\n        if (uniformblock != undefined){\r\n          gl.uniformBlockBinding(ptr, uniformblock.index, command.uniform_block_binding);\r\n        }\r\n      }\r\n      break;\r\n      // ------------------------------- BUFFERS --------------------------------------\r\n      case 'createBuffer':{\r\n          let res = this.get_resource(command.resource);\r\n          const ptr = gl.createBuffer();\r\n          res.set('_gl_ptr', ptr);\r\n          res.set('_info', {type:'Buffer'});\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      case 'bindBuffer':{\r\n          const target:string = command.target;\r\n          if(command.buffer >= 0){\r\n            const res = this.get_resource(command.buffer);\r\n            const ptr = res.get('_gl_ptr');\r\n            gl.bindBuffer((gl as any)[target], ptr);\r\n            (this.bound_buffers as any)[target] = res;\r\n          } else {\r\n            gl.bindBuffer((gl as any)[target], null);\r\n            (this.bound_buffers as any)[target]  = null;\r\n          }\r\n        }\r\n        break;\r\n      case 'bindBufferBase':{\r\n          const target:string = command.target;\r\n          if(command.buffer >= 0){\r\n            const res = this.get_resource(command.buffer);\r\n            const ptr = res.get('_gl_ptr');\r\n            gl.bindBufferBase((gl as any)[target], command.index, ptr);\r\n          } else {\r\n            gl.bindBufferBase((gl as any)[target], command.index, null);\r\n          }\r\n        }\r\n        break;\r\n      case 'bufferData':{\r\n          const target:string = command.target;\r\n          const usage:string = command.usage;\r\n\r\n          if (command.hasOwnProperty('buffer_metadata')){\r\n            gl.bufferData((gl as any)[target], converted_buffers[command.buffer_metadata.index], (gl as any)[usage]);\r\n\r\n            let buf = (this.bound_buffers as any)[target];\r\n            if (command.update_info && buf != null){\r\n              const size = gl.getBufferParameter((gl as any)[target], gl.BUFFER_SIZE);\r\n              buf.set('_info', {type:\"Buffer\", size:size, target:target});\r\n              buf.save_changes();\r\n            }\r\n          }\r\n          else{\r\n            let buf = (this.bound_buffers as any)[target];\r\n            gl.bufferData((gl as any)[target], null, (gl as any)[usage]);\r\n            if (command.update_info && buf != null){\r\n              buf.set('_info', {type:\"Buffer\", size:'Undefined', target:target});\r\n              buf.save_changes();\r\n            }\r\n          }\r\n        }\r\n        break;\r\n      case 'createUniformBuffer':{\r\n          let res = this.get_resource(command.buffer);\r\n          const ptr = gl.createBuffer();\r\n\r\n          let info = {type:'Buffer'};\r\n          const prog = this.get_resource(command.program);\r\n          const uniformblock = prog.get('_info').uniforms_blocks.find((element:any)=>{return element.name == command.block_name});\r\n          if (uniformblock != undefined){\r\n            gl.bindBuffer(gl.UNIFORM_BUFFER, ptr);\r\n            gl.bufferData(gl.UNIFORM_BUFFER, uniformblock.size, (gl as any)[command.usage]);\r\n            gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n            (this.bound_buffers as any)[\"UNIFORM_BUFFER\"] = null;\r\n            (info as any)[\"size\"] = uniformblock.size;\r\n            (info as any)[\"target\"] = \"UNIFORM_BUFFER\";\r\n            (info as any)[\"uniformblock\"] = uniformblock;\r\n          }\r\n          res.set('_gl_ptr', ptr);\r\n          res.set('_info', info);\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      case 'bufferSubData':\r\n      case 'bufferSubDataStr':{\r\n          const target:string = command.target;\r\n          let offset = command.dst_byte_offset;\r\n          if (command.cmd == 'bufferSubDataStr'){\r\n            offset = 0;\r\n            let buf = (this.bound_buffers as any)[target];\r\n            if (buf != null){\r\n              const uniformblock = buf.get('_info').uniformblock;\r\n              const uniform = uniformblock.uniforms.find((element:any)=>{return element.name == command.dst_byte_offset});\r\n              if (uniform != undefined){\r\n                offset = uniform.offset;\r\n              }\r\n            }\r\n          }\r\n          if (command.hasOwnProperty('buffer_metadata')){\r\n            gl.bufferSubData((gl as any)[target], offset, converted_buffers[command.buffer_metadata.index], command.src_offset);\r\n\r\n          }\r\n          else{\r\n            gl.bufferSubData((gl as any)[target], offset, command.src_offset);\r\n          }\r\n        }\r\n        break;\r\n      // ------------------------------- VERTEX ARRAYS --------------------------------------\r\n      case 'createVertexArray':{\r\n          let res = this.get_resource(command.resource);\r\n          const ptr = gl.createVertexArray();\r\n          res.set('_gl_ptr', ptr);\r\n          res.set('_info', {type:'Vertex Array Object', bindings:[]});\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      case 'bindVertexArray':{\r\n          if(command.vertex_array >= 0){\r\n            const res = this.get_resource(command.vertex_array);\r\n            const ptr = res.get('_gl_ptr');\r\n            gl.bindVertexArray(ptr);\r\n            this.bound_vao = res;\r\n          } else {\r\n            gl.bindVertexArray(null);\r\n            this.bound_vao = null;\r\n          }\r\n        }\r\n        break;\r\n      case 'vertexAttribPointer':\r\n      case 'vertexAttribIPointer':\r\n      case 'enableVertexAttribArray':\r\n      case 'disableVertexAttribArray':\r\n      case 'vertexAttrib[1234]fv':\r\n      case 'vertexAttribI4[u]iv':\r\n      case 'vertexAttribDivisor':\r\n        {\r\n          let index = -1;\r\n          if (typeof command.index === 'number'){\r\n            index = command.index;\r\n          }\r\n          else{\r\n            if (this.bound_program != null){\r\n              const attr = this.bound_program.get('_info').attributes.find((element:any)=>{return element.name == command.index});\r\n              if (attr != undefined){\r\n                index = attr.location;\r\n              }\r\n            }else{\r\n              console.error(\"a program must be bound to find the attribute\");\r\n            }\r\n          }\r\n          let buf = (this.bound_buffers as any)['ARRAY_BUFFER'];\r\n          if (index >= 0){\r\n            index += command.index_offset\r\n            if (command.cmd == \"vertexAttribIPointer\"){\r\n              gl.vertexAttribIPointer(index, command.size, (gl as any)[command.type], command.stride, command.offset);\r\n              if (this.bound_vao != null && buf != null){\r\n                let vao_info = this.bound_vao.get('_info');\r\n                const buffer_uid = buf.get('uid');\r\n                let binding_info = vao_info.bindings.find((element:any)=>{return element.buffer_uid == buffer_uid});\r\n                if (binding_info == undefined){\r\n                  binding_info = {buffer_uid : buffer_uid, attributes : []};\r\n                  vao_info.bindings.push(binding_info);\r\n                }\r\n                binding_info.attributes.push({pointer:\"vertexAttribIPointer\", index:index, size:command.size, type:command.type, stride:command.stride, offset:command.offset})\r\n                this.bound_vao.set('_info', vao_info);\r\n                this.bound_vao.save_changes();\r\n              }\r\n            }\r\n            else if (command.cmd == \"vertexAttribPointer\"){\r\n              gl.vertexAttribPointer(index, command.size, (gl as any)[command.type], command.normalized, command.stride, command.offset);\r\n              if (this.bound_vao != null && buf != null){\r\n                let vao_info = this.bound_vao.get('_info');\r\n                const buffer_uid = buf.get('uid');\r\n                let binding_info = vao_info.bindings.find((element:any)=>{return element.buffer_uid == buffer_uid});\r\n                if (binding_info == undefined){\r\n                  binding_info = {buffer_uid : buffer_uid, attributes : []};\r\n                  vao_info.bindings.push(binding_info);\r\n                }\r\n                binding_info.attributes.push({pointer:\"vertexAttribPointer\", index:index, size:command.size, type:command.type, normalized:command.normalized, stride:command.stride, offset:command.offset})\r\n                this.bound_vao.set('_info', vao_info);\r\n                this.bound_vao.save_changes();\r\n              }\r\n            }\r\n            else if (command.cmd == \"enableVertexAttribArray\"){\r\n              gl.enableVertexAttribArray(index);\r\n            }\r\n            else if (command.cmd == \"disableVertexAttribArray\"){\r\n              gl.disableVertexAttribArray(index);\r\n            }\r\n            else if (command.cmd == \"vertexAttrib[1234]fv\"){\r\n              if (command.buffer_metadata.shape[0] == 1){\r\n                gl.vertexAttrib1fv(index, converted_buffers[command.buffer_metadata.index]);\r\n              } else if (command.buffer_metadata.shape[0] == 2){\r\n                gl.vertexAttrib2fv(index, converted_buffers[command.buffer_metadata.index]);\r\n              } if (command.buffer_metadata.shape[0] == 3){\r\n                gl.vertexAttrib3fv(index, converted_buffers[command.buffer_metadata.index]);\r\n              }if (command.buffer_metadata.shape[0] == 4){\r\n                gl.vertexAttrib4fv(index, converted_buffers[command.buffer_metadata.index]);\r\n              }\r\n            }\r\n            else if (command.cmd == \"vertexAttribI4[u]iv\"){\r\n              if(command.buffer_metadata.dtype == \"uint32\"){\r\n                gl.vertexAttribI4uiv(index, converted_buffers[command.buffer_metadata.index]);\r\n              } else if(command.buffer_metadata.dtype == \"int32\"){\r\n                gl.vertexAttribI4iv(index, converted_buffers[command.buffer_metadata.index]);\r\n              }\r\n            }\r\n            else if (command.cmd == \"vertexAttribDivisor\"){\r\n              gl.vertexAttribDivisor(index, command.divisor);\r\n            }\r\n          }\r\n          else{\r\n            console.error(`attribute ${command.index} location not found`);\r\n          }\r\n        }\r\n        break;\r\n\r\n        // ------------------------------- RENDER --------------------------------------\r\n        case 'drawArrays':{\r\n          gl.drawArrays((gl as any)[command.mode], command.first, command.count);\r\n        }\r\n        break;\r\n        case 'drawArraysInstanced':{\r\n          gl.drawArraysInstanced((gl as any)[command.mode], command.first, command.count, command.instance_count);\r\n        }\r\n        break;\r\n        case 'drawElements':{\r\n          gl.drawElements((gl as any)[command.mode], command.count, (gl as any)[command.type], command.offset);\r\n        }\r\n        break;\r\n        case 'drawElementsInstanced':{\r\n          gl.drawElementsInstanced((gl as any)[command.mode], command.count, (gl as any)[command.type], command.offset, command.instance_count);\r\n        }\r\n        break;\r\n\r\n        // ------------------------------- FRAMEBUFFER --------------------------------------\r\n        case 'createFramebuffer':{\r\n          let res = this.get_resource(command.resource);\r\n          const ptr = gl.createFramebuffer();\r\n          res.set('_gl_ptr', ptr);\r\n          res.set('_info', {type:'Framebuffer'});\r\n          res.save_changes();\r\n        }\r\n        break;\r\n        case 'bindFramebuffer':{\r\n          if (command.framebuffer >= 0){\r\n            let res = this.get_resource(command.framebuffer);\r\n            gl.bindFramebuffer((gl as any)[command.target], res.get('_gl_ptr'));\r\n          }\r\n          else{\r\n            gl.bindFramebuffer((gl as any)[command.target], null);\r\n          }\r\n        }\r\n        break;\r\n        case 'framebufferTexture2D':{\r\n          let res = this.get_resource(command.texture);\r\n          gl.framebufferTexture2D((gl as any)[command.target], (gl as any)[command.attachement], (gl as any)[command.textarget], res.get('_gl_ptr'), command.level);\r\n        }\r\n        break;\r\n        case 'drawBuffers' :{\r\n          const buffers = command.buffers.map((element:any)=>{return (gl as any)[element]; });\r\n          gl.drawBuffers(buffers);\r\n        }\r\n        break;\r\n        \r\n    }\r\n  }\r\n\r\n  register_resource(resource:GLResource){\r\n    if(resource.get('uid') != this.resources.length){\r\n      console.error('uid not matching what we have internally');\r\n    }\r\n    this.resources.push(resource);\r\n  }\r\n\r\n  get_resource(index:number){\r\n    return this.resources[index];\r\n  }\r\n\r\n  canvas: HTMLCanvasElement;\r\n  ctx: WebGL2RenderingContext | null;\r\n  view_block: WebGLBuffer | null;\r\n\r\n  resources : GLResource[] = [];\r\n  bound_program: GLResource | null;\r\n  bound_buffers = {};\r\n  bound_vao: GLResource | null;\r\n  commands : any[] = [];\r\n  buffers : any[] = [];\r\n\r\n  projection_matrix:number[];\r\n  camera_matrix:number[];\r\n  view_matrix:number[];\r\n  view_proj_matrix:number[];\r\n}\r\n\r\nexport class GLViewer extends DOMWidgetView {\r\n\r\n  render() {\r\n    this.el.appendChild(this.model.canvas);\r\n\r\n    this.resizeCanvas();\r\n    this.model.on_some_change(['width', 'height'], this.resizeCanvas, this);\r\n\r\n    this.el.addEventListener('mousemove', {\r\n      handleEvent: this.onMouseMove.bind(this)\r\n    });\r\n    this.el.addEventListener('mousedown', {\r\n      handleEvent: this.onMouseDown.bind(this)\r\n    });\r\n    this.el.addEventListener('mouseup', {\r\n      handleEvent: this.onMouseUp.bind(this)\r\n    });\r\n    this.el.addEventListener('mouseout', {\r\n      handleEvent: this.onMouseOut.bind(this)\r\n    });\r\n    this.el.addEventListener('keydown', {\r\n      handleEvent: this.onKeyDown.bind(this)\r\n    });\r\n    this.el.addEventListener('keyup', {\r\n      handleEvent: this.onKeyUp.bind(this)\r\n    });\r\n    this.el.setAttribute('tabindex', '0');\r\n  }\r\n \r\n  private resizeCanvas() {\r\n    this.el.setAttribute('width', this.model.get('width'));\r\n    this.el.setAttribute('height', this.model.get('height'));\r\n    this.model.resizeCanvas();\r\n  }\r\n\r\n  private redraw(){\r\n    this.will_redraw = false;\r\n\r\n    // update movement if needed\r\n    if (this.move_direction[0] || this.move_direction[1] || this.move_direction[2] || this.move_direction[3])\r\n    {\r\n      let speed = this.model.get('move_speed');\r\n      let forward_axis = m4getColumnK(this.model.camera_matrix);\r\n      let side_axis = m4getColumnI(this.model.camera_matrix);\r\n      let camera_pos = this.model.get('camera_pos');\r\n      if (this.move_direction[0]){\r\n        camera_pos = vec3Add(camera_pos, vec3Scale(forward_axis, -speed));\r\n      }\r\n      if (this.move_direction[2]){\r\n        camera_pos = vec3Add(camera_pos, vec3Scale(forward_axis, speed));\r\n      }\r\n      if (this.move_direction[1]){\r\n        camera_pos = vec3Add(camera_pos, vec3Scale(side_axis, -speed));\r\n      }\r\n      if (this.move_direction[3]){\r\n        camera_pos = vec3Add(camera_pos, vec3Scale(side_axis, speed));\r\n      }\r\n      this.model.set('camera_pos', camera_pos);\r\n      this.touch();\r\n      // request a new frame if we are moving\r\n      this.requestRedraw();\r\n    }\r\n\r\n    // re draw\r\n    this.model.run_commands();\r\n  }\r\n\r\n  private requestRedraw(){\r\n    if (this.will_redraw == false){\r\n      this.will_redraw = true;\r\n      requestAnimationFrame(this.redraw.bind(this));\r\n    }\r\n  }\r\n\r\n  private onMouseMove(event: MouseEvent) {\r\n    //this.model.send({ event: 'mouse_move', ...this.getCoordinates(event) }, {});\r\n    if(this.is_mouse_down){\r\n      let speed = this.model.get('mouse_speed');\r\n      this.model.set('camera_yaw', this.model.get('camera_yaw')-(event.movementX)*0.2*speed);\r\n      this.model.set('camera_pitch', this.model.get('camera_pitch')-(event.movementY)*0.2*speed);\r\n      this.touch();\r\n      this.requestRedraw();\r\n    }\r\n  }\r\n\r\n  private onMouseDown(event: MouseEvent) {\r\n    this.is_mouse_down = true;\r\n    this.model.canvas.focus();\r\n  }\r\n\r\n  private onMouseUp(event: MouseEvent) {\r\n    this.is_mouse_down = false;\r\n  }\r\n\r\n  private onMouseOut(event: MouseEvent) {\r\n    this.is_mouse_down = false;\r\n    this.move_direction = [false, false, false, false];\r\n  }\r\n\r\n  private onKeyDown(event: KeyboardEvent) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    let keys = this.model.get('move_keys');\r\n\r\n    if(event.repeat == false){\r\n      if(event.key == keys[0]){\r\n        this.move_direction[0] = true;\r\n        this.requestRedraw();\r\n      }\r\n      else if(event.key == keys[1]){\r\n        this.move_direction[1] = true;\r\n        this.requestRedraw();\r\n      }\r\n      else if(event.key == keys[2]){\r\n        this.move_direction[2] = true;\r\n        this.requestRedraw();\r\n      }\r\n      else if(event.key == keys[3]){\r\n        this.move_direction[3] = true;\r\n        this.requestRedraw();\r\n      }\r\n    }\r\n  }\r\n\r\n  private onKeyUp(event: KeyboardEvent) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    let keys = this.model.get('move_keys');\r\n\r\n    if(event.key == keys[0]){\r\n      this.move_direction[0] = false;\r\n    }\r\n    else if(event.key == keys[1]){\r\n      this.move_direction[1] = false;\r\n    }\r\n    else if(event.key == keys[2]){\r\n      this.move_direction[2] = false;\r\n    }\r\n    else if(event.key == keys[3]){\r\n      this.move_direction[3] = false;\r\n    }\r\n  }\r\n\r\n  protected getCoordinates(event: MouseEvent | Touch) {\r\n    const rect = this.el.getBoundingClientRect();\r\n\r\n    const x = (this.model.get('width') * (event.clientX - rect.left)) / rect.width;\r\n    const y = (this.model.get('height') * (event.clientY - rect.top)) / rect.height;\r\n\r\n    return { x, y };\r\n  }\r\n\r\n  model : GLModel;\r\n  is_mouse_down : boolean = false;\r\n  move_direction : boolean[] = [false, false, false, false];\r\n  will_redraw = false;\r\n}\r\n",
+        "import {\r\n  DOMWidgetModel,\r\n  DOMWidgetView,\r\n  ISerializers,\r\n} from '@jupyter-widgets/base';\r\n\r\nimport { MODULE_NAME, MODULE_VERSION } from './version';\r\n\r\nimport { m4dot, m4getColumnI, m4getColumnK, m4inverse, m4ProjectionMatrix, m4Translation, m4Transpose, m4Xrotation, m4Yrotation, vec3Add, vec3Scale } from './matrix';\r\nimport { GLResource } from './glresource';\r\nimport { buffer_to_array } from './arraybuffer';\r\n\r\n\r\nexport class GLModel extends DOMWidgetModel {\r\n  defaults() {\r\n    return {\r\n      ...super.defaults(),\r\n      _model_name: 'GLModel',\r\n      _model_module: MODULE_NAME,\r\n      _model_module_version: MODULE_VERSION,\r\n      _view_name: 'GLViewer',\r\n      _view_module: MODULE_NAME,\r\n      _view_module_version: MODULE_VERSION,\r\n      shader_matrix_major:'row_major',\r\n      width:700,\r\n      height:500,\r\n      camera_pos:[0,50,200],\r\n      camera_yaw:0,\r\n      camera_pitch:0,\r\n      camera_fov:50.0,\r\n      camera_near:1.0,\r\n      camera_far:5000.0,\r\n      mouse_speed:1,\r\n      move_speed:1,\r\n      move_keys:'wasd',\r\n      verbose:0,\r\n    };\r\n  }\r\n\r\n  static serializers: ISerializers = {\r\n    ...DOMWidgetModel.serializers,\r\n  };\r\n\r\n  initialize(attributes: any, options: any) {\r\n    super.initialize(attributes, options);\r\n\r\n    this.canvas = document.createElement('canvas');\r\n    this.ctx = this.canvas.getContext(\"webgl2\", {preserveDrawingBuffer: true});\r\n    if (this.ctx == null){\r\n      console.error('could not create a webgl2 context, this is not supported in your browser');\r\n    }\r\n    else{\r\n      const gl:WebGL2RenderingContext = this.ctx;\r\n      this.view_block = gl.createBuffer();\r\n      gl.bindBuffer(gl.UNIFORM_BUFFER, this.view_block);\r\n      gl.bufferData(gl.UNIFORM_BUFFER, 256, gl.DYNAMIC_DRAW);\r\n      gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n      gl.bindBufferBase(gl.UNIFORM_BUFFER, 0, this.view_block);\r\n\r\n      //extensions to activate\r\n      gl.getExtension(\"EXT_color_buffer_float\")\r\n    }\r\n\r\n    this.resizeCanvas();\r\n    this.on_some_change(['width', 'height', 'camera_fov', 'camera_near', 'camera_far'], this.resizeCanvas, this);\r\n    this.on_some_change(['camera_pos', 'camera_yaw', 'camera_pitch'], this.run_commands, this);\r\n\r\n    this.on('msg:custom', this.handle_custom_messages, this);\r\n\r\n    this.camera_matrix = m4Translation(0,50,200);\r\n    this.view_matrix = m4inverse(this.camera_matrix);\r\n  }\r\n\r\n  resizeCanvas() {\r\n    this.canvas.setAttribute('width', this.get('width'));\r\n    this.canvas.setAttribute('height', this.get('height'));\r\n    if (this.ctx != null){\r\n      this.ctx.viewport(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\r\n    }\r\n    this.projection_matrix = m4ProjectionMatrix(this.get('camera_fov'), this.get('width')/this.get('height'), this.get('camera_near'), this.get('camera_far'));\r\n  }\r\n\r\n  handle_custom_messages(command: any, buffers:any) {\r\n    if(command.clear == true){\r\n      this.commands = [];\r\n      this.buffers = [];\r\n    }\r\n    let commands = command.commands;\r\n    let converted_buffers:any[] = [];\r\n    commands.forEach((element:any)=>{\r\n      if (element.hasOwnProperty('buffer_metadata')) {\r\n        const converted = buffer_to_array(element.buffer_metadata.dtype, buffers[element.buffer_metadata.index].buffer);\r\n        converted_buffers.push(converted);\r\n      }\r\n    });\r\n\r\n    if(command.only_once == true){\r\n      this.execute_commands(commands, converted_buffers);\r\n    }\r\n    else{\r\n      let buffer_id_offset = this.buffers.length;\r\n      this.buffers = this.buffers.concat(converted_buffers);\r\n      commands.forEach((element:any)=>{\r\n        if (element.hasOwnProperty('buffer_metadata')) {\r\n          element.buffer_metadata.index += buffer_id_offset;\r\n        }\r\n      });\r\n      this.commands = this.commands.concat(commands);\r\n    }\r\n\r\n    this.run_commands();\r\n  }\r\n\r\n  private update_camera(){\r\n    let pos = this.get('camera_pos');\r\n    let yaw = this.get('camera_yaw') * Math.PI / 180.0;\r\n    let pitch = this.get('camera_pitch') * Math.PI / 180.0;\r\n    this.camera_matrix = m4Translation(pos[0], pos[1], pos[2]);\r\n    this.camera_matrix = m4dot(this.camera_matrix, m4Yrotation(yaw));\r\n    this.camera_matrix = m4dot(this.camera_matrix, m4Xrotation(pitch));\r\n    this.view_matrix = m4inverse(this.camera_matrix);\r\n    this.view_proj_matrix = m4dot(this.projection_matrix, this.view_matrix);\r\n  }\r\n\r\n  run_commands(){\r\n    this.execute_commands(this.commands, this.buffers);\r\n  }\r\n\r\n  execute_commands(commands:any[], converted_buffers:any[]){\r\n    if (this.ctx == null) return;\r\n    const gl:WebGL2RenderingContext = this.ctx;\r\n\r\n    this.update_camera();\r\n\r\n    // update the uniform Block\r\n    let cm = (this.get('shader_matrix_major')=='row_major')? m4Transpose(this.camera_matrix): this.camera_matrix;\r\n    const cm_f32 = new Float32Array(cm);\r\n    let vm = (this.get('shader_matrix_major')=='row_major')? m4Transpose(this.view_matrix): this.view_matrix;\r\n    const vm_f32 = new Float32Array(vm);\r\n    let pm = (this.get('shader_matrix_major')=='row_major')? m4Transpose(this.projection_matrix): this.projection_matrix;\r\n    const pm_f32 = new Float32Array(pm);\r\n    let vpm = (this.get('shader_matrix_major')=='row_major')? m4Transpose(this.view_proj_matrix): this.view_proj_matrix;\r\n    const vpm_f32 = new Float32Array(vpm);\r\n\r\n    gl.bindBuffer(gl.UNIFORM_BUFFER, this.view_block);\r\n    gl.bufferSubData(gl.UNIFORM_BUFFER, 0, cm_f32, 0);\r\n    gl.bufferSubData(gl.UNIFORM_BUFFER, 64, vm_f32, 0);\r\n    gl.bufferSubData(gl.UNIFORM_BUFFER, 128, pm_f32, 0);\r\n    gl.bufferSubData(gl.UNIFORM_BUFFER, 192, vpm_f32, 0);\r\n    gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n\r\n    commands.forEach((command:any)=>{\r\n      this.execute_command(gl, command, converted_buffers);\r\n    });\r\n  }\r\n\r\n  glEnumToString(gl:WebGL2RenderingContext, value:any) {\r\n    const keys = [];\r\n    for (const key in gl) {\r\n      if ((gl as any)[key] === value) {\r\n        keys.push(key);\r\n      }\r\n    }\r\n    return keys.length ? keys.join(' | ') : `0x${value.toString(16)}`;\r\n  }\r\n\r\n  execute_command(gl:WebGL2RenderingContext, command:any, converted_buffers:any[]){\r\n    \r\n    if (this.get('verbose') > 0){\r\n      console.log(command);\r\n      if (command.hasOwnProperty('buffer_metadata')){\r\n        console.log('data');\r\n        console.log(converted_buffers[command.buffer_metadata.index]);\r\n      }\r\n    }\r\n    \r\n    //console.log(this.bound_buffers);\r\n    switch(command.cmd){\r\n      case 'viewport':\r\n          gl.viewport(command.x, command.y, command.width, command.height);\r\n        break;\r\n      case 'enable':\r\n      case 'disable':\r\n        {\r\n          let cap = 0;\r\n          if (command.blend) cap |= gl.BLEND;\r\n          if (command.depth_test) cap |= gl.DEPTH_TEST;\r\n          if (command.dither) cap |= gl.DITHER;\r\n          if (command.polygon_offset_fill) cap |= gl.POLYGON_OFFSET_FILL;\r\n          if (command.sample_alpha_to_coverage) cap |= gl.SAMPLE_ALPHA_TO_COVERAGE;\r\n          if (command.sample_coverage) cap |= gl.SAMPLE_COVERAGE;\r\n          if (command.scissor_test) cap |= gl.SCISSOR_TEST;\r\n          if (command.stencil_test) cap |= gl.STENCIL_TEST;\r\n          if (command.rasterizer_discard) cap |= gl.RASTERIZER_DISCARD;\r\n          if (command.cull_face) cap |= gl.CULL_FACE;\r\n          if (command.cmd == 'enable'){\r\n            gl.enable(cap);\r\n          } else{\r\n            gl.disable(cap);\r\n          }\r\n        }\r\n        break;\r\n      case 'clearColor':\r\n          gl.clearColor(command.r, command.g, command.b, command.a);\r\n        break;\r\n      case 'clear':{\r\n        let bits = 0;\r\n        if (command.depth) bits |= gl.DEPTH_BUFFER_BIT;\r\n        if (command.color) bits |= gl.COLOR_BUFFER_BIT;\r\n        if (command.stencil) bits |= gl.STENCIL_BUFFER_BIT;\r\n        gl.clear(bits);\r\n      }\r\n      break;\r\n      case 'frontFace':{\r\n        gl.frontFace((gl as any)[command.mode]);\r\n      }\r\n      break;\r\n      case 'cullFace':{\r\n        gl.cullFace((gl as any)[command.mode]);\r\n      }\r\n      break;\r\n\r\n      // ------------------------------- DEPTH --------------------------------------\r\n      case 'depthFunc':{\r\n        gl.depthFunc((gl as any)[command.func]);\r\n      }\r\n      break;\r\n      case 'depthMask':{\r\n        gl.depthMask(command.flag);\r\n      }\r\n      break;\r\n      case 'depthRange':{\r\n        gl.depthRange(command.z_near, command.z_far);\r\n      }\r\n      break;\r\n\r\n      // ------------------------------- COLOR --------------------------------------\r\n      case 'blendColor':\r\n          gl.blendColor(command.r, command.g, command.b, command.a);\r\n        break;\r\n      case 'blendEquation':\r\n        gl.blendEquation((gl as any)[command.mode]);\r\n        break;\r\n      case 'blendEquationSeparate':\r\n          gl.blendEquationSeparate((gl as any)[command.mode_rgb], (gl as any)[command.mode_alpha]);\r\n          break;\r\n      case 'blendFunc':\r\n          gl.blendFunc((gl as any)[command.s_factor], (gl as any)[command.d_factor])\r\n      break;\r\n      case 'blend_func_separate':\r\n         gl.blendFuncSeparate((gl as any)[command.src_rgb], (gl as any)[command.dst_rgb], (gl as any)[command.src_alpha], (gl as any)[command.dst_alpha])\r\n        break;\r\n        \r\n      // ------------------------------- TEXTURE --------------------------------------\r\n      case 'createTexture':{\r\n        let res = this.get_resource(command.resource);\r\n        const ptr = gl.createTexture();\r\n        res.set('_gl_ptr', ptr);\r\n        res.set('_info', {type:'texture'});\r\n        res.save_changes();\r\n      }\r\n      break;\r\n      case 'bindTexture':{\r\n        if (command.texture > -1){\r\n          const texture = this.get_resource(command.texture).get('_gl_ptr');\r\n          gl.bindTexture((gl as any)[command.target], texture);\r\n        }\r\n        else{\r\n          gl.bindTexture((gl as any)[command.target], null);\r\n        }\r\n      }\r\n      break;\r\n      case 'activeTexture':\r\n        gl.activeTexture(gl.TEXTURE0 + command.texture);\r\n      break;\r\n      case 'generateMipmap':\r\n        gl.generateMipmap((gl as any)[command.target]);\r\n      break;\r\n      case 'texImage2D':\r\n        if (command.hasOwnProperty('buffer_metadata')){\r\n          gl.texImage2D(\r\n            (gl as any)[command.target],\r\n            command.level,\r\n            (gl as any)[command.internal_format],\r\n            command.width,\r\n            command.height,\r\n            command.border,\r\n            (gl as any)[command.format],\r\n            (gl as any)[command.data_type],\r\n            converted_buffers[command.buffer_metadata.index]\r\n          )\r\n        }\r\n        else{\r\n          gl.texImage2D(\r\n            (gl as any)[command.target],\r\n            command.level,\r\n            (gl as any)[command.internal_format],\r\n            command.width,\r\n            command.height,\r\n            command.border,\r\n            (gl as any)[command.format],\r\n            (gl as any)[command.data_type],\r\n            null\r\n          )\r\n        }\r\n      break;\r\n      case 'texStorage2D':{\r\n        gl.texStorage2D(\r\n          (gl as any)[command.target],\r\n          command.levels,\r\n          (gl as any)[command.internal_format],\r\n          command.width,\r\n          command.height\r\n        );\r\n      }\r\n      break;\r\n      case 'texImage3D':\r\n        if (command.hasOwnProperty('buffer_metadata')){\r\n          gl.texImage3D(\r\n            (gl as any)[command.target],\r\n            command.level,\r\n            (gl as any)[command.internal_format],\r\n            command.width,\r\n            command.height,\r\n            command.depth,\r\n            command.border,\r\n            (gl as any)[command.format],\r\n            (gl as any)[command.data_type],\r\n            converted_buffers[command.buffer_metadata.index]\r\n          )\r\n        }else{\r\n          gl.texImage3D(\r\n            (gl as any)[command.target],\r\n            command.level,\r\n            (gl as any)[command.internal_format],\r\n            command.width,\r\n            command.height,\r\n            command.depth,\r\n            command.border,\r\n            (gl as any)[command.format],\r\n            (gl as any)[command.data_type],\r\n            null\r\n          )\r\n        }\r\n      break;\r\n      case 'texStorage3D':{\r\n        gl.texStorage3D(\r\n          (gl as any)[command.target],\r\n          command.levels,\r\n          (gl as any)[command.internal_format],\r\n          command.width,\r\n          command.height,\r\n          command.depth\r\n        );\r\n      }\r\n      break;\r\n      case 'texParameteri':\r\n        gl.texParameteri((gl as any)[command.target], (gl as any)[command.pname], command.param);\r\n      break;\r\n      case 'texParameterf':\r\n        gl.texParameterf((gl as any)[command.target], (gl as any)[command.pname], command.param);\r\n      break;\r\n      case 'texParameter_str':\r\n        gl.texParameteri((gl as any)[command.target], (gl as any)[command.pname], (gl as any)[command.param]);\r\n      break;\r\n      case 'pixelStorei':{\r\n        if (command.pname == 'UNPACK_COLORSPACE_CONVERSION_WEBGL'){\r\n          gl.pixelStorei((gl as any)[command.pname], (gl as any)[command.param]);\r\n        }\r\n        else{\r\n          gl.pixelStorei((gl as any)[command.pname], command.param);\r\n        }\r\n      }\r\n      break;\r\n      // ------------------------------- SHADERS --------------------------------------\r\n      case 'createShader':{\r\n        let res = this.get_resource(command.resource);\r\n        const ptr = gl.createShader((gl as any)[command.type]);\r\n        res.set('_gl_ptr', ptr);\r\n        res.set('_info', {type:command.type});\r\n        res.save_changes();\r\n      }\r\n      break;\r\n      case 'shaderSource':{\r\n        const res = this.get_resource(command.shader);\r\n          const ptr = res.get('_gl_ptr');\r\n          gl.shaderSource(ptr, command.source);\r\n        }\r\n        break;\r\n      case 'compileShader':{\r\n          const res = this.get_resource(command.shader);\r\n          const ptr = res.get('_gl_ptr');\r\n          gl.compileShader(ptr);\r\n          let resinfo = res.get('_info');\r\n\r\n          if ( !gl.getShaderParameter(ptr, gl.COMPILE_STATUS) ) {\r\n            let info = gl.getShaderInfoLog( ptr );\r\n            resinfo.message = info;\r\n          }\r\n          else{\r\n            resinfo.message = 'compiled';\r\n          }\r\n          res.set('_info', resinfo);\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      // ------------------------------- PROGRAMS --------------------------------------\r\n      case 'createProgram':{\r\n          let res = this.get_resource(command.resource);\r\n          const ptr = gl.createProgram();\r\n          res.set('_gl_ptr', ptr);\r\n          res.set('_info', {type:'Program'});\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      case 'attachShader':{\r\n          const prog = this.get_resource(command.program).get('_gl_ptr');\r\n          const shader = this.get_resource(command.shader).get('_gl_ptr');\r\n          gl.attachShader(prog, shader);\r\n        }\r\n        break;\r\n      case 'bindAttribLocation':{\r\n          let res = this.get_resource(command.program);\r\n          const ptr = res.get('_gl_ptr');\r\n          gl.bindAttribLocation(ptr, command.index, command.name);\r\n        }\r\n        break;\r\n      case 'linkProgram':{\r\n          let res = this.get_resource(command.program);\r\n          const ptr = res.get('_gl_ptr');\r\n          gl.linkProgram(ptr);\r\n          gl.validateProgram(ptr);\r\n          let resinfo = res.get('_info');\r\n\r\n          if ( !gl.getProgramParameter( ptr, gl.LINK_STATUS) ) {\r\n            let info = gl.getShaderInfoLog( ptr );\r\n            resinfo.message = info;\r\n          }\r\n          else{\r\n            //bind our viewBlock\r\n            let viewBlockIndex = gl.getUniformBlockIndex(ptr, 'ViewBlock');\r\n            if (viewBlockIndex < 4294967295){\r\n              gl.uniformBlockBinding(ptr, viewBlockIndex, 0);\r\n            }\r\n            resinfo.message = 'linked';\r\n            resinfo.uniforms_blocks = [];\r\n            resinfo.uniforms = [];\r\n            const numUniforms = gl.getProgramParameter(ptr, gl.ACTIVE_UNIFORMS);\r\n            const indices = [...Array(numUniforms).keys()];\r\n            const blockIndices = gl.getActiveUniforms(ptr, indices, gl.UNIFORM_BLOCK_INDEX);\r\n            const offsets = gl.getActiveUniforms(ptr, indices, gl.UNIFORM_OFFSET);\r\n            for (let i = 0; i < numUniforms; ++i) {\r\n              const info = gl.getActiveUniform(ptr, i);\r\n              if (info){\r\n                // regroup the blocks\r\n                if (blockIndices[i]>-1){\r\n                  let uniform_block = resinfo.uniforms_blocks.find((element:any)=>{return element.index == blockIndices[i]});\r\n                  if (uniform_block == undefined){\r\n                    uniform_block = {\r\n                      index:blockIndices[i], \r\n                      name:gl.getActiveUniformBlockName(ptr, blockIndices[i]), \r\n                      size:gl.getActiveUniformBlockParameter(ptr, blockIndices[i], gl.UNIFORM_BLOCK_DATA_SIZE),\r\n                      uniforms:[]};\r\n                    resinfo.uniforms_blocks.push(uniform_block);\r\n                  }\r\n                  uniform_block.uniforms.push(\r\n                    {name:info.name, type:this.glEnumToString(gl, info.type), size:info.size, offset:offsets[i]}\r\n                  )\r\n                }\r\n                else{\r\n                  resinfo.uniforms.push({name:info.name, type:this.glEnumToString(gl, info.type), size:info.size, location:gl.getUniformLocation(ptr, info.name)});\r\n                }\r\n              }\r\n            }\r\n            resinfo.attributes = [];\r\n            const numAttribute = gl.getProgramParameter(ptr, gl.ACTIVE_ATTRIBUTES);\r\n            for (let i = 0; i < numAttribute; ++i) {\r\n              const info = gl.getActiveAttrib(ptr, i);\r\n              if (info)\r\n                resinfo.attributes.push({name:info.name, type:this.glEnumToString(gl, info.type), size:info.size, location:gl.getAttribLocation(ptr, info.name)});\r\n            }\r\n          }\r\n          res.set('_info', resinfo);\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      case 'useProgram':{\r\n          if(command.program >= 0){\r\n            const res = this.get_resource(command.program);\r\n            const ptr = res.get('_gl_ptr');\r\n            gl.useProgram(ptr);\r\n            this.bound_program = res;\r\n          } else {\r\n            gl.useProgram(null);\r\n            this.bound_program = null;\r\n          }\r\n        }\r\n        break;\r\n      case 'uniform':\r\n      case 'uniformMatrix':\r\n        {\r\n          if(this.bound_program != null){\r\n            let resinfo = this.bound_program.get('_info');\r\n            const uniform = resinfo.uniforms.find((element:any)=>{return element.name == command.name});\r\n            if (uniform != undefined){\r\n              const location = uniform.location;\r\n\r\n              if (command.cmd == 'uniform'){\r\n                let shape = command.buffer_metadata.shape[command.buffer_metadata.shape.length-1];\r\n                if (command.buffer_metadata.dtype == 'int32'){\r\n                  let bufarray:Int32Array = converted_buffers[command.buffer_metadata.index] as Int32Array;\r\n                  if (shape == 1) gl.uniform1iv(location, bufarray);\r\n                  else if (shape == 2) gl.uniform2iv(location, bufarray);\r\n                  else if (shape == 3) gl.uniform3iv(location, bufarray);\r\n                  else if (shape == 4) gl.uniform4iv(location, bufarray);\r\n                }\r\n                else if (command.buffer_metadata.dtype == 'uint32'){\r\n                  let bufarray:Uint32Array = converted_buffers[command.buffer_metadata.index] as Uint32Array;\r\n                  if (shape == 1) gl.uniform1uiv(location, bufarray);\r\n                  else if (shape == 2) gl.uniform2uiv(location, bufarray);\r\n                  else if (shape == 3) gl.uniform3uiv(location, bufarray);\r\n                  else if (shape == 4) gl.uniform4uiv(location, bufarray);\r\n                }\r\n                else if (command.buffer_metadata.dtype == 'float32'){\r\n                  let bufarray:Float32Array = converted_buffers[command.buffer_metadata.index] as Float32Array;\r\n                  if (shape == 1) gl.uniform1fv(location, bufarray);\r\n                  else if (shape == 2) gl.uniform2fv(location, bufarray);\r\n                  else if (shape == 3) gl.uniform3fv(location, bufarray);\r\n                  else if (shape == 4) gl.uniform4fv(location, bufarray);\r\n                }\r\n              }\r\n\r\n              else {\r\n                let a = command.buffer_metadata.shape[command.buffer_metadata.shape.length-2];\r\n                let b = command.buffer_metadata.shape[command.buffer_metadata.shape.length-1];\r\n                let bufarray:Float32Array = converted_buffers[command.buffer_metadata.index] as Float32Array;\r\n                if (a==2)\r\n                {\r\n                  if (b==2) gl.uniformMatrix2fv(location, false, bufarray);\r\n                  else if (b==3) gl.uniformMatrix2x3fv(location, false, bufarray);\r\n                  else if (b==4)gl.uniformMatrix2x4fv(location, false, bufarray);\r\n                }\r\n                else if (a==3)\r\n                {\r\n                  if (b==2) gl.uniformMatrix3x2fv(location, false, bufarray);\r\n                  else if (b==3) gl.uniformMatrix3fv(location, false, bufarray);\r\n                  else if (b==4)gl.uniformMatrix3x4fv(location, false, bufarray);\r\n                }\r\n                else if (a==4)\r\n                {\r\n                  if (b==2) gl.uniformMatrix4x2fv(location, false, bufarray);\r\n                  else if (b==3) gl.uniformMatrix4x3fv(location, false, bufarray);\r\n                  else if (b==4)gl.uniformMatrix4fv(location, false, bufarray);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      break;\r\n      case 'uniformBlockBinding':{\r\n        let res = this.get_resource(command.program);\r\n        const ptr = res.get('_gl_ptr');\r\n        const uniformblock = res.get('_info').uniforms_blocks.find((element:any)=>{return element.name == command.uniform_block_name});\r\n        if (uniformblock != undefined){\r\n          gl.uniformBlockBinding(ptr, uniformblock.index, command.uniform_block_binding);\r\n        }\r\n      }\r\n      break;\r\n      // ------------------------------- BUFFERS --------------------------------------\r\n      case 'createBuffer':{\r\n          let res = this.get_resource(command.resource);\r\n          const ptr = gl.createBuffer();\r\n          res.set('_gl_ptr', ptr);\r\n          res.set('_info', {type:'Buffer'});\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      case 'bindBuffer':{\r\n          const target:string = command.target;\r\n          if(command.buffer >= 0){\r\n            const res = this.get_resource(command.buffer);\r\n            const ptr = res.get('_gl_ptr');\r\n            gl.bindBuffer((gl as any)[target], ptr);\r\n            (this.bound_buffers as any)[target] = res;\r\n          } else {\r\n            gl.bindBuffer((gl as any)[target], null);\r\n            (this.bound_buffers as any)[target]  = null;\r\n          }\r\n        }\r\n        break;\r\n      case 'bindBufferBase':{\r\n          const target:string = command.target;\r\n          if(command.buffer >= 0){\r\n            const res = this.get_resource(command.buffer);\r\n            const ptr = res.get('_gl_ptr');\r\n            gl.bindBufferBase((gl as any)[target], command.index, ptr);\r\n          } else {\r\n            gl.bindBufferBase((gl as any)[target], command.index, null);\r\n          }\r\n        }\r\n        break;\r\n      case 'bufferData':{\r\n          const target:string = command.target;\r\n          const usage:string = command.usage;\r\n\r\n          if (command.hasOwnProperty('buffer_metadata')){\r\n            gl.bufferData((gl as any)[target], converted_buffers[command.buffer_metadata.index], (gl as any)[usage]);\r\n\r\n            let buf = (this.bound_buffers as any)[target];\r\n            if (command.update_info && buf != null){\r\n              const size = gl.getBufferParameter((gl as any)[target], gl.BUFFER_SIZE);\r\n              buf.set('_info', {type:\"Buffer\", size:size, target:target});\r\n              buf.save_changes();\r\n            }\r\n          }\r\n          else{\r\n            let buf = (this.bound_buffers as any)[target];\r\n            gl.bufferData((gl as any)[target], null, (gl as any)[usage]);\r\n            if (command.update_info && buf != null){\r\n              buf.set('_info', {type:\"Buffer\", size:'Undefined', target:target});\r\n              buf.save_changes();\r\n            }\r\n          }\r\n        }\r\n        break;\r\n      case 'createUniformBuffer':{\r\n          let res = this.get_resource(command.buffer);\r\n          const ptr = gl.createBuffer();\r\n\r\n          let info = {type:'Buffer'};\r\n          const prog = this.get_resource(command.program);\r\n          const uniformblock = prog.get('_info').uniforms_blocks.find((element:any)=>{return element.name == command.block_name});\r\n          if (uniformblock != undefined){\r\n            gl.bindBuffer(gl.UNIFORM_BUFFER, ptr);\r\n            gl.bufferData(gl.UNIFORM_BUFFER, uniformblock.size, (gl as any)[command.usage]);\r\n            gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n            (this.bound_buffers as any)[\"UNIFORM_BUFFER\"] = null;\r\n            (info as any)[\"size\"] = uniformblock.size;\r\n            (info as any)[\"target\"] = \"UNIFORM_BUFFER\";\r\n            (info as any)[\"uniformblock\"] = uniformblock;\r\n          }\r\n          res.set('_gl_ptr', ptr);\r\n          res.set('_info', info);\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      case 'bufferSubData':\r\n      case 'bufferSubDataStr':{\r\n          const target:string = command.target;\r\n          let offset = command.dst_byte_offset;\r\n          if (command.cmd == 'bufferSubDataStr'){\r\n            offset = 0;\r\n            let buf = (this.bound_buffers as any)[target];\r\n            if (buf != null){\r\n              const uniformblock = buf.get('_info').uniformblock;\r\n              const uniform = uniformblock.uniforms.find((element:any)=>{return element.name == command.dst_byte_offset});\r\n              if (uniform != undefined){\r\n                offset = uniform.offset;\r\n              }\r\n            }\r\n          }\r\n          if (command.hasOwnProperty('buffer_metadata')){\r\n            gl.bufferSubData((gl as any)[target], offset, converted_buffers[command.buffer_metadata.index], command.src_offset);\r\n\r\n          }\r\n          else{\r\n            gl.bufferSubData((gl as any)[target], offset, command.src_offset);\r\n          }\r\n        }\r\n        break;\r\n      // ------------------------------- VERTEX ARRAYS --------------------------------------\r\n      case 'createVertexArray':{\r\n          let res = this.get_resource(command.resource);\r\n          const ptr = gl.createVertexArray();\r\n          res.set('_gl_ptr', ptr);\r\n          res.set('_info', {type:'Vertex Array Object', bindings:[]});\r\n          res.save_changes();\r\n        }\r\n        break;\r\n      case 'bindVertexArray':{\r\n          if(command.vertex_array >= 0){\r\n            const res = this.get_resource(command.vertex_array);\r\n            const ptr = res.get('_gl_ptr');\r\n            gl.bindVertexArray(ptr);\r\n            this.bound_vao = res;\r\n          } else {\r\n            gl.bindVertexArray(null);\r\n            this.bound_vao = null;\r\n          }\r\n        }\r\n        break;\r\n      case 'vertexAttribPointer':\r\n      case 'vertexAttribIPointer':\r\n      case 'enableVertexAttribArray':\r\n      case 'disableVertexAttribArray':\r\n      case 'vertexAttrib[1234]fv':\r\n      case 'vertexAttribI4[u]iv':\r\n      case 'vertexAttribDivisor':\r\n        {\r\n          let index = -1;\r\n          if (typeof command.index === 'number'){\r\n            index = command.index;\r\n          }\r\n          else{\r\n            if (this.bound_program != null){\r\n              const attr = this.bound_program.get('_info').attributes.find((element:any)=>{return element.name == command.index});\r\n              if (attr != undefined){\r\n                index = attr.location;\r\n              }\r\n            }else{\r\n              console.error(\"a program must be bound to find the attribute\");\r\n            }\r\n          }\r\n          let buf = (this.bound_buffers as any)['ARRAY_BUFFER'];\r\n          if (index >= 0){\r\n            index += command.index_offset\r\n            if (command.cmd == \"vertexAttribIPointer\"){\r\n              gl.vertexAttribIPointer(index, command.size, (gl as any)[command.type], command.stride, command.offset);\r\n              if (this.bound_vao != null && buf != null){\r\n                let vao_info = this.bound_vao.get('_info');\r\n                const buffer_uid = buf.get('uid');\r\n                let binding_info = vao_info.bindings.find((element:any)=>{return element.buffer_uid == buffer_uid});\r\n                if (binding_info == undefined){\r\n                  binding_info = {buffer_uid : buffer_uid, attributes : []};\r\n                  vao_info.bindings.push(binding_info);\r\n                }\r\n                binding_info.attributes.push({pointer:\"vertexAttribIPointer\", index:index, size:command.size, type:command.type, stride:command.stride, offset:command.offset})\r\n                this.bound_vao.set('_info', vao_info);\r\n                this.bound_vao.save_changes();\r\n              }\r\n            }\r\n            else if (command.cmd == \"vertexAttribPointer\"){\r\n              gl.vertexAttribPointer(index, command.size, (gl as any)[command.type], command.normalized, command.stride, command.offset);\r\n              if (this.bound_vao != null && buf != null){\r\n                let vao_info = this.bound_vao.get('_info');\r\n                const buffer_uid = buf.get('uid');\r\n                let binding_info = vao_info.bindings.find((element:any)=>{return element.buffer_uid == buffer_uid});\r\n                if (binding_info == undefined){\r\n                  binding_info = {buffer_uid : buffer_uid, attributes : []};\r\n                  vao_info.bindings.push(binding_info);\r\n                }\r\n                binding_info.attributes.push({pointer:\"vertexAttribPointer\", index:index, size:command.size, type:command.type, normalized:command.normalized, stride:command.stride, offset:command.offset})\r\n                this.bound_vao.set('_info', vao_info);\r\n                this.bound_vao.save_changes();\r\n              }\r\n            }\r\n            else if (command.cmd == \"enableVertexAttribArray\"){\r\n              gl.enableVertexAttribArray(index);\r\n            }\r\n            else if (command.cmd == \"disableVertexAttribArray\"){\r\n              gl.disableVertexAttribArray(index);\r\n            }\r\n            else if (command.cmd == \"vertexAttrib[1234]fv\"){\r\n              if (command.buffer_metadata.shape[0] == 1){\r\n                gl.vertexAttrib1fv(index, converted_buffers[command.buffer_metadata.index]);\r\n              } else if (command.buffer_metadata.shape[0] == 2){\r\n                gl.vertexAttrib2fv(index, converted_buffers[command.buffer_metadata.index]);\r\n              } if (command.buffer_metadata.shape[0] == 3){\r\n                gl.vertexAttrib3fv(index, converted_buffers[command.buffer_metadata.index]);\r\n              }if (command.buffer_metadata.shape[0] == 4){\r\n                gl.vertexAttrib4fv(index, converted_buffers[command.buffer_metadata.index]);\r\n              }\r\n            }\r\n            else if (command.cmd == \"vertexAttribI4[u]iv\"){\r\n              if(command.buffer_metadata.dtype == \"uint32\"){\r\n                gl.vertexAttribI4uiv(index, converted_buffers[command.buffer_metadata.index]);\r\n              } else if(command.buffer_metadata.dtype == \"int32\"){\r\n                gl.vertexAttribI4iv(index, converted_buffers[command.buffer_metadata.index]);\r\n              }\r\n            }\r\n            else if (command.cmd == \"vertexAttribDivisor\"){\r\n              gl.vertexAttribDivisor(index, command.divisor);\r\n            }\r\n          }\r\n          else{\r\n            console.error(`attribute ${command.index} location not found`);\r\n          }\r\n        }\r\n        break;\r\n\r\n        // ------------------------------- RENDER --------------------------------------\r\n        case 'drawArrays':{\r\n          gl.drawArrays((gl as any)[command.mode], command.first, command.count);\r\n        }\r\n        break;\r\n        case 'drawArraysInstanced':{\r\n          gl.drawArraysInstanced((gl as any)[command.mode], command.first, command.count, command.instance_count);\r\n        }\r\n        break;\r\n        case 'drawElements':{\r\n          gl.drawElements((gl as any)[command.mode], command.count, (gl as any)[command.type], command.offset);\r\n        }\r\n        break;\r\n        case 'drawElementsInstanced':{\r\n          gl.drawElementsInstanced((gl as any)[command.mode], command.count, (gl as any)[command.type], command.offset, command.instance_count);\r\n        }\r\n        break;\r\n\r\n        // ------------------------------- FRAMEBUFFER --------------------------------------\r\n        case 'createFramebuffer':{\r\n          let res = this.get_resource(command.resource);\r\n          const ptr = gl.createFramebuffer();\r\n          res.set('_gl_ptr', ptr);\r\n          res.set('_info', {type:'Framebuffer'});\r\n          res.save_changes();\r\n        }\r\n        break;\r\n        case 'bindFramebuffer':{\r\n          if (command.framebuffer >= 0){\r\n            let res = this.get_resource(command.framebuffer);\r\n            gl.bindFramebuffer((gl as any)[command.target], res.get('_gl_ptr'));\r\n          }\r\n          else{\r\n            gl.bindFramebuffer((gl as any)[command.target], null);\r\n          }\r\n        }\r\n        break;\r\n        case 'framebufferTexture2D':{\r\n          let res = this.get_resource(command.texture);\r\n          gl.framebufferTexture2D((gl as any)[command.target], (gl as any)[command.attachement], (gl as any)[command.textarget], res.get('_gl_ptr'), command.level);\r\n        }\r\n        break;\r\n        case 'drawBuffers' :{\r\n          const buffers = command.buffers.map((element:any)=>{return (gl as any)[element]; });\r\n          gl.drawBuffers(buffers);\r\n        }\r\n        break;\r\n        \r\n    }\r\n  }\r\n\r\n  register_resource(resource:GLResource){\r\n    if(resource.get('uid') != this.resources.length){\r\n      console.error('uid not matching what we have internally');\r\n    }\r\n    this.resources.push(resource);\r\n  }\r\n\r\n  get_resource(index:number){\r\n    return this.resources[index];\r\n  }\r\n\r\n  canvas: HTMLCanvasElement;\r\n  ctx: WebGL2RenderingContext | null;\r\n  view_block: WebGLBuffer | null;\r\n\r\n  resources : GLResource[] = [];\r\n  bound_program: GLResource | null;\r\n  bound_buffers = {};\r\n  bound_vao: GLResource | null;\r\n  commands : any[] = [];\r\n  buffers : any[] = [];\r\n\r\n  projection_matrix:number[];\r\n  camera_matrix:number[];\r\n  view_matrix:number[];\r\n  view_proj_matrix:number[];\r\n}\r\n\r\nexport class GLViewer extends DOMWidgetView {\r\n\r\n  render() {\r\n    this.el.appendChild(this.model.canvas);\r\n\r\n    this.resizeCanvas();\r\n    this.model.on_some_change(['width', 'height'], this.resizeCanvas, this);\r\n\r\n    this.el.addEventListener('mousemove', {\r\n      handleEvent: this.onMouseMove.bind(this)\r\n    });\r\n    this.el.addEventListener('mousedown', {\r\n      handleEvent: this.onMouseDown.bind(this)\r\n    });\r\n    this.el.addEventListener('mouseup', {\r\n      handleEvent: this.onMouseUp.bind(this)\r\n    });\r\n    this.el.addEventListener('mouseout', {\r\n      handleEvent: this.onMouseOut.bind(this)\r\n    });\r\n    this.el.addEventListener('keydown', {\r\n      handleEvent: this.onKeyDown.bind(this)\r\n    });\r\n    this.el.addEventListener('keyup', {\r\n      handleEvent: this.onKeyUp.bind(this)\r\n    });\r\n    this.el.setAttribute('tabindex', '0');\r\n  }\r\n \r\n  private resizeCanvas() {\r\n    this.el.setAttribute('width', this.model.get('width'));\r\n    this.el.setAttribute('height', this.model.get('height'));\r\n    this.model.resizeCanvas();\r\n  }\r\n\r\n  private redraw(){\r\n    this.will_redraw = false;\r\n\r\n    // update movement if needed\r\n    if (this.move_direction[0] || this.move_direction[1] || this.move_direction[2] || this.move_direction[3])\r\n    {\r\n      let speed = this.model.get('move_speed');\r\n      let forward_axis = m4getColumnK(this.model.camera_matrix);\r\n      let side_axis = m4getColumnI(this.model.camera_matrix);\r\n      let camera_pos = this.model.get('camera_pos');\r\n      if (this.move_direction[0]){\r\n        camera_pos = vec3Add(camera_pos, vec3Scale(forward_axis, -speed));\r\n      }\r\n      if (this.move_direction[2]){\r\n        camera_pos = vec3Add(camera_pos, vec3Scale(forward_axis, speed));\r\n      }\r\n      if (this.move_direction[1]){\r\n        camera_pos = vec3Add(camera_pos, vec3Scale(side_axis, -speed));\r\n      }\r\n      if (this.move_direction[3]){\r\n        camera_pos = vec3Add(camera_pos, vec3Scale(side_axis, speed));\r\n      }\r\n      this.model.set('camera_pos', camera_pos);\r\n      this.touch();\r\n      // request a new frame if we are moving\r\n      this.requestRedraw();\r\n    }\r\n\r\n    // re draw\r\n    this.model.run_commands();\r\n  }\r\n\r\n  private requestRedraw(){\r\n    if (this.will_redraw == false){\r\n      this.will_redraw = true;\r\n      requestAnimationFrame(this.redraw.bind(this));\r\n    }\r\n  }\r\n\r\n  private onMouseMove(event: MouseEvent) {\r\n    //this.model.send({ event: 'mouse_move', ...this.getCoordinates(event) }, {});\r\n    if(this.is_mouse_down){\r\n      let speed = this.model.get('mouse_speed');\r\n      this.model.set('camera_yaw', this.model.get('camera_yaw')-(event.movementX)*0.2*speed);\r\n      this.model.set('camera_pitch', this.model.get('camera_pitch')-(event.movementY)*0.2*speed);\r\n      this.touch();\r\n      this.requestRedraw();\r\n    }\r\n  }\r\n\r\n  private onMouseDown(event: MouseEvent) {\r\n    this.is_mouse_down = true;\r\n    this.model.canvas.focus();\r\n  }\r\n\r\n  private onMouseUp(event: MouseEvent) {\r\n    this.is_mouse_down = false;\r\n  }\r\n\r\n  private onMouseOut(event: MouseEvent) {\r\n    this.is_mouse_down = false;\r\n    this.move_direction = [false, false, false, false];\r\n  }\r\n\r\n  private onKeyDown(event: KeyboardEvent) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    let keys = this.model.get('move_keys');\r\n\r\n    if(event.repeat == false){\r\n      if(event.key == keys[0]){\r\n        this.move_direction[0] = true;\r\n        this.requestRedraw();\r\n      }\r\n      else if(event.key == keys[1]){\r\n        this.move_direction[1] = true;\r\n        this.requestRedraw();\r\n      }\r\n      else if(event.key == keys[2]){\r\n        this.move_direction[2] = true;\r\n        this.requestRedraw();\r\n      }\r\n      else if(event.key == keys[3]){\r\n        this.move_direction[3] = true;\r\n        this.requestRedraw();\r\n      }\r\n    }\r\n  }\r\n\r\n  private onKeyUp(event: KeyboardEvent) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    let keys = this.model.get('move_keys');\r\n\r\n    if(event.key == keys[0]){\r\n      this.move_direction[0] = false;\r\n    }\r\n    else if(event.key == keys[1]){\r\n      this.move_direction[1] = false;\r\n    }\r\n    else if(event.key == keys[2]){\r\n      this.move_direction[2] = false;\r\n    }\r\n    else if(event.key == keys[3]){\r\n      this.move_direction[3] = false;\r\n    }\r\n  }\r\n\r\n  protected getCoordinates(event: MouseEvent | Touch) {\r\n    const rect = this.el.getBoundingClientRect();\r\n\r\n    const x = (this.model.get('width') * (event.clientX - rect.left)) / rect.width;\r\n    const y = (this.model.get('height') * (event.clientY - rect.top)) / rect.height;\r\n\r\n    return { x, y };\r\n  }\r\n\r\n  model : GLModel;\r\n  is_mouse_down : boolean = false;\r\n  move_direction : boolean[] = [false, false, false, false];\r\n  will_redraw = false;\r\n}\r\n",
         "// Copyright (c) Jerome Eippers\r\n// Distributed under the terms of the Modified BSD License.\r\n\r\nexport * from './version';\r\nexport * from './widgets';\r\n",
         "export function m4ProjectionMatrix(fov_y: number, aspect_ratio: number, near: number, far: number){\r\n    const ymax = near * Math.tan(fov_y * Math.PI / 360.0)\r\n    const xmax = ymax * aspect_ratio\r\n\r\n    return frustrum(-xmax, xmax, -ymax, ymax, near, far)\r\n}\r\n\r\nfunction frustrum(left: number, right: number, bottom: number, top: number, near: number, far: number) {\r\n    const A = (right + left) / (right - left)\r\n    const B = (top + bottom) / (top - bottom)\r\n    const C = -(far + near) / (far - near)\r\n    const D = -2. * far * near / (far - near)\r\n    const E = 2. * near / (right - left)\r\n    const F = 2. * near / (top - bottom)\r\n\r\n    return [\r\n        E, 0, A, 0,\r\n        0, F, B, 0,\r\n        0, 0, C, D,\r\n        0, 0, -1, 0\r\n    ]\r\n}\r\n\r\nexport function m4OrthographicProjectionMatrix(width: number, height: number, near: number, far: number) {\r\n    const A = 1. / width;\r\n    const B = 1. / height;\r\n    const C = -(far + near) / (far - near)\r\n    const D = -2. / (far - near)\r\n\r\n    return [\r\n        A, 0, 0, 0,\r\n        0, B, 0, 0,\r\n        0, 0, D, C,\r\n        0, 0, 0, 1\r\n    ]\r\n}\r\n\r\nexport function m4Transpose(m:number[]){\r\n    return [\r\n        m[0], m[4], m[8], m[12],\r\n        m[1], m[5], m[9], m[13],\r\n        m[2], m[6], m[10], m[14],\r\n        m[3], m[7], m[11], m[15],\r\n    ];\r\n}\r\n\r\nexport function m4getTranslation(m:number[]){\r\n    return [\r\n        m[3], m[7], m[11]\r\n    ];\r\n}\r\n\r\nexport function m4getColumnI(m:number[]){\r\n    return [\r\n        m[0], m[4], m[8]\r\n    ];\r\n}\r\n\r\nexport function m4getColumnJ(m:number[]){\r\n    return [\r\n        m[1], m[5], m[9]\r\n    ];\r\n}\r\n\r\nexport function m4getColumnK(m:number[]){\r\n    return [\r\n        m[2], m[6], m[10]\r\n    ];\r\n}\r\n\r\nexport function vec3Add(a:number[], b:number[]){\r\n    return[\r\n        a[0] + b[0],\r\n        a[1] + b[1],\r\n        a[2] + b[2]\r\n    ]\r\n}\r\n\r\nexport function vec3Scale(a:number[], scale:number){\r\n    return[\r\n        a[0] * scale,\r\n        a[1] * scale,\r\n        a[2] * scale\r\n    ]\r\n}\r\n\r\nexport function m4Translation(tx:number, ty:number, tz:number) {\r\n    return [\r\n        1, 0, 0, tx,\r\n        0, 1, 0, ty,\r\n        0, 0, 1, tz,\r\n        0, 0, 0, 1,\r\n    ];\r\n}\r\n\r\nexport function m4Xrotation(angleInRadians:number) {\r\n    var c = Math.cos(angleInRadians);\r\n    var s = Math.sin(angleInRadians);\r\n\r\n    return [\r\n        1, 0, 0, 0,\r\n        0, c, -s, 0,\r\n        0, s, c, 0,\r\n        0, 0, 0, 1,\r\n    ];\r\n}\r\n\r\nexport function m4Yrotation(angleInRadians:number) {\r\n    var c = Math.cos(angleInRadians);\r\n    var s = Math.sin(angleInRadians);\r\n\r\n    return [\r\n        c, 0, s, 0,\r\n        0, 1, 0, 0,\r\n        -s, 0, c, 0,\r\n        0, 0, 0, 1,\r\n    ];\r\n}\r\n\r\nexport function m4Zrotation(angleInRadians:number) {\r\n    var c = Math.cos(angleInRadians);\r\n    var s = Math.sin(angleInRadians);\r\n\r\n    return [\r\n        c, -s, 0, 0,\r\n        s, c, 0, 0,\r\n        0, 0, 1, 0,\r\n        0, 0, 0, 1,\r\n    ];\r\n}\r\n\r\nexport function m4Scale(sx:number, sy:number, sz:number) {\r\n    return [\r\n        sx, 0,  0,  0,\r\n        0, sy,  0,  0,\r\n        0,  0, sz,  0,\r\n        0,  0,  0,  1,\r\n    ];\r\n}\r\n\r\nexport function m4dot(b:number[], a:number[]) {\r\n    return [\r\n        b[0] * a[0] + b[1] * a[4] + b[2] * a[8] + b[3] * a[12],\r\n        b[0] * a[1] + b[1] * a[5] + b[2] * a[9] + b[3] * a[13],\r\n        b[0] * a[2] + b[1] * a[6] + b[2] * a[10] + b[3] * a[14],\r\n        b[0] * a[3] + b[1] * a[7] + b[2] * a[11] + b[3] * a[15],\r\n        b[4] * a[0] + b[5] * a[4] + b[6] * a[8] + b[7] * a[12],\r\n        b[4] * a[1] + b[5] * a[5] + b[6] * a[9] + b[7] * a[13],\r\n        b[4] * a[2] + b[5] * a[6] + b[6] * a[10] + b[7] * a[14],\r\n        b[4] * a[3] + b[5] * a[7] + b[6] * a[11] + b[7] * a[15],\r\n        b[8] * a[0] + b[9] * a[4] + b[10] * a[8] + b[11] * a[12],\r\n        b[8] * a[1] + b[9] * a[5] + b[10] * a[9] + b[11] * a[13],\r\n        b[8] * a[2] + b[9] * a[6] + b[10] * a[10] + b[11] * a[14],\r\n        b[8] * a[3] + b[9] * a[7] + b[10] * a[11] + b[11] * a[15],\r\n        b[12] * a[0] + b[13] * a[4] + b[14] * a[8] + b[15] * a[12],\r\n        b[12] * a[1] + b[13] * a[5] + b[14] * a[9] + b[15] * a[13],\r\n        b[12] * a[2] + b[13] * a[6] + b[14] * a[10] + b[15] * a[14],\r\n        b[12] * a[3] + b[13] * a[7] + b[14] * a[11] + b[15] * a[15],\r\n    ];\r\n}\r\n\r\nexport function m4inverse(m:number[]) {\r\n    var tmp_0  = m[10] * m[15];\r\n    var tmp_1  = m[14] * m[11];\r\n    var tmp_2  = m[6] * m[15];\r\n    var tmp_3  = m[14] * m[7];\r\n    var tmp_4  = m[6] * m[11];\r\n    var tmp_5  = m[10] * m[7];\r\n    var tmp_6  = m[2] * m[15];\r\n    var tmp_7  = m[14] * m[3];\r\n    var tmp_8  = m[2] * m[11];\r\n    var tmp_9  = m[10] * m[3];\r\n    var tmp_10 = m[2] * m[7];\r\n    var tmp_11 = m[6] * m[3];\r\n    var tmp_12 = m[8] * m[13];\r\n    var tmp_13 = m[12] * m[9];\r\n    var tmp_14 = m[4] * m[13];\r\n    var tmp_15 = m[12] * m[5];\r\n    var tmp_16 = m[4] * m[9];\r\n    var tmp_17 = m[8] * m[5];\r\n    var tmp_18 = m[0] * m[13];\r\n    var tmp_19 = m[12] * m[1];\r\n    var tmp_20 = m[0] * m[9];\r\n    var tmp_21 = m[8] * m[1];\r\n    var tmp_22 = m[0] * m[5];\r\n    var tmp_23 = m[4] * m[1];\r\n\r\n    var t0 = (tmp_0 * m[5] + tmp_3 * m[9] + tmp_4 * m[13]) -\r\n             (tmp_1 * m[5] + tmp_2 * m[9] + tmp_5 * m[13]);\r\n    var t1 = (tmp_1 * m[1] + tmp_6 * m[9] + tmp_9 * m[13]) -\r\n             (tmp_0 * m[1] + tmp_7 * m[9] + tmp_8 * m[13]);\r\n    var t2 = (tmp_2 * m[1] + tmp_7 * m[5] + tmp_10 * m[13]) -\r\n             (tmp_3 * m[1] + tmp_6 * m[5] + tmp_11 * m[13]);\r\n    var t3 = (tmp_5 * m[1] + tmp_8 * m[5] + tmp_11 * m[9]) -\r\n             (tmp_4 * m[1] + tmp_9 * m[5] + tmp_10 * m[9]);\r\n\r\n    var d = 1.0 / (m[0] * t0 + m[4] * t1 + m[8] * t2 + m[12] * t3);\r\n\r\n    return [\r\n      d * t0,\r\n      d * t1,\r\n      d * t2,\r\n      d * t3,\r\n      d * ((tmp_1 * m[4] + tmp_2 * m[8] + tmp_5 * m[12]) -\r\n           (tmp_0 * m[4] + tmp_3 * m[8] + tmp_4 * m[12])),\r\n      d * ((tmp_0 * m[0] + tmp_7 * m[8] + tmp_8 * m[12]) -\r\n           (tmp_1 * m[0] + tmp_6 * m[8] + tmp_9 * m[12])),\r\n      d * ((tmp_3 * m[0] + tmp_6 * m[4] + tmp_11 * m[12]) -\r\n           (tmp_2 * m[0] + tmp_7 * m[4] + tmp_10 * m[12])),\r\n      d * ((tmp_4 * m[0] + tmp_9 * m[4] + tmp_10 * m[8]) -\r\n           (tmp_5 * m[0] + tmp_8 * m[4] + tmp_11 * m[8])),\r\n      d * ((tmp_12 * m[7] + tmp_15 * m[11] + tmp_16 * m[15]) -\r\n           (tmp_13 * m[7] + tmp_14 * m[11] + tmp_17 * m[15])),\r\n      d * ((tmp_13 * m[3] + tmp_18 * m[11] + tmp_21 * m[15]) -\r\n           (tmp_12 * m[3] + tmp_19 * m[11] + tmp_20 * m[15])),\r\n      d * ((tmp_14 * m[3] + tmp_19 * m[7] + tmp_22 * m[15]) -\r\n           (tmp_15 * m[3] + tmp_18 * m[7] + tmp_23 * m[15])),\r\n      d * ((tmp_17 * m[3] + tmp_20 * m[7] + tmp_23 * m[11]) -\r\n           (tmp_16 * m[3] + tmp_21 * m[7] + tmp_22 * m[11])),\r\n      d * ((tmp_14 * m[10] + tmp_17 * m[14] + tmp_13 * m[6]) -\r\n           (tmp_16 * m[14] + tmp_12 * m[6] + tmp_15 * m[10])),\r\n      d * ((tmp_20 * m[14] + tmp_12 * m[2] + tmp_19 * m[10]) -\r\n           (tmp_18 * m[10] + tmp_21 * m[14] + tmp_13 * m[2])),\r\n      d * ((tmp_18 * m[6] + tmp_23 * m[14] + tmp_15 * m[2]) -\r\n           (tmp_22 * m[14] + tmp_14 * m[2] + tmp_19 * m[6])),\r\n      d * ((tmp_22 * m[10] + tmp_16 * m[2] + tmp_21 * m[6]) -\r\n           (tmp_20 * m[6] + tmp_23 * m[10] + tmp_17 * m[2])),\r\n    ];\r\n  }\r\n",
         "// Copyright (c) Jerome Eippers\r\n// Distributed under the terms of the Modified BSD License.\r\n\r\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n// @ts-ignore\r\n// eslint-disable-next-line @typescript-eslint/no-var-requires\r\nconst data = require('../package.json');\r\n\r\n/**\r\n * The _model_module_version/_view_module_version this package implements.\r\n *\r\n * The html widget manager assumes that this is the same as the npm package\r\n * version number.\r\n */\r\nexport const MODULE_VERSION = data.version;\r\n\r\n/*\r\n * The current package name.\r\n */\r\nexport const MODULE_NAME = data.name;\r\n",
         "export * from './glviewer';\r\nexport * from './glresource';\r\n\r\n",
         "module.exports = __WEBPACK_EXTERNAL_MODULE__146__;",
         "// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n",
         "__webpack_require__.nc = undefined;",
```

### Comparing `ipywebgl-0.2.2/src/arraybuffer.ts` & `ipywebgl-0.3.0/src/arraybuffer.ts`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/src/extension.ts` & `ipywebgl-0.3.0/src/extension.ts`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/src/glresource.ts` & `ipywebgl-0.3.0/src/glresource.ts`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/src/glviewer.ts` & `ipywebgl-0.3.0/src/glviewer.ts`

 * *Files 0% similar despite different names*

```diff
@@ -29,14 +29,15 @@
       camera_pitch:0,
       camera_fov:50.0,
       camera_near:1.0,
       camera_far:5000.0,
       mouse_speed:1,
       move_speed:1,
       move_keys:'wasd',
+      verbose:0,
     };
   }
 
   static serializers: ISerializers = {
     ...DOMWidgetModel.serializers,
   };
 
@@ -160,15 +161,23 @@
         keys.push(key);
       }
     }
     return keys.length ? keys.join(' | ') : `0x${value.toString(16)}`;
   }
 
   execute_command(gl:WebGL2RenderingContext, command:any, converted_buffers:any[]){
-    console.log(command);
+    
+    if (this.get('verbose') > 0){
+      console.log(command);
+      if (command.hasOwnProperty('buffer_metadata')){
+        console.log('data');
+        console.log(converted_buffers[command.buffer_metadata.index]);
+      }
+    }
+    
     //console.log(this.bound_buffers);
     switch(command.cmd){
       case 'viewport':
           gl.viewport(command.x, command.y, command.width, command.height);
         break;
       case 'enable':
       case 'disable':
```

### Comparing `ipywebgl-0.2.2/src/matrix.ts` & `ipywebgl-0.3.0/src/matrix.ts`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/src/plugin.ts` & `ipywebgl-0.3.0/src/plugin.ts`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/src/version.ts` & `ipywebgl-0.3.0/src/version.ts`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/.gitignore` & `ipywebgl-0.3.0/.gitignore`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/LICENSE.txt` & `ipywebgl-0.3.0/LICENSE.txt`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/README.md` & `ipywebgl-0.3.0/README.md`

 * *Files identical despite different names*

### Comparing `ipywebgl-0.2.2/pyproject.toml` & `ipywebgl-0.3.0/pyproject.toml`

 * *Files 7% similar despite different names*

```diff
@@ -31,15 +31,15 @@
     "Programming Language :: Python :: 3.9",
     "Programming Language :: Python :: 3.10",
 ]
 dependencies = [
     "ipywidgets>=7.0.0",
     "numpy",
 ]
-version = "0.2.2"
+version = "0.3.0"
 
 [project.optional-dependencies]
 docs = [
     "jupyter_sphinx",
     "nbsphinx",
     "nbsphinx-link",
     "pypandoc",
```

### Comparing `ipywebgl-0.2.2/PKG-INFO` & `ipywebgl-0.3.0/PKG-INFO`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: ipywebgl
-Version: 0.2.2
+Version: 0.3.0
 Summary: WebGL2 jupyter widget
 Project-URL: Homepage, https://github.com/JeromeEippers/ipywebgl
 Project-URL: Documentation, https://ipywebgl.readthedocs.io/en/latest/index.html
 Author-email: Jerome Eippers <jerome@eippers.be>
 License: Copyright (c) 2023 Jerome Eippers
         All rights reserved.
```

