# Comparing `tmp/osais-1.0.32.tar.gz` & `tmp/osais-1.0.33.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "D:\Websites\opensourceais\python\lib_osais\dist\.tmp-zl2fuawc\osais-1.0.32.tar", last modified: Thu Apr 13 11:32:02 2023, max compression
+gzip compressed data, was "D:\Websites\opensourceais\python\lib_osais\dist\.tmp-qf3oh497\osais-1.0.33.tar", last modified: Thu Apr 13 12:42:09 2023, max compression
```

## Comparing `osais-1.0.32.tar` & `osais-1.0.33.tar`

### file list

```diff
@@ -1,16 +1,16 @@
-drwxrwxrwx   0        0        0        0 2023-04-13 11:32:02.967855 osais-1.0.32/
--rw-rw-rw-   0        0        0    33041 2023-04-05 11:19:20.000000 osais-1.0.32/LICENSE
--rw-rw-rw-   0        0        0     1113 2023-04-13 11:32:02.967855 osais-1.0.32/PKG-INFO
--rw-rw-rw-   0        0        0      339 2023-04-05 15:00:45.000000 osais-1.0.32/README.md
-drwxrwxrwx   0        0        0        0 2023-04-13 11:32:02.962857 osais-1.0.32/osais/
--rw-rw-rw-   0        0        0      652 2023-04-13 11:30:35.000000 osais-1.0.32/osais/__init__.py
--rw-rw-rw-   0        0        0    41138 2023-04-13 11:30:45.000000 osais-1.0.32/osais/osais.py
-drwxrwxrwx   0        0        0        0 2023-04-13 11:32:02.966856 osais-1.0.32/osais.egg-info/
--rw-rw-rw-   0        0        0     1113 2023-04-13 11:32:02.000000 osais-1.0.32/osais.egg-info/PKG-INFO
--rw-rw-rw-   0        0        0      218 2023-04-13 11:32:02.000000 osais-1.0.32/osais.egg-info/SOURCES.txt
--rw-rw-rw-   0        0        0        1 2023-04-13 11:32:02.000000 osais-1.0.32/osais.egg-info/dependency_links.txt
--rw-rw-rw-   0        0        0       65 2023-04-13 11:32:02.000000 osais-1.0.32/osais.egg-info/requires.txt
--rw-rw-rw-   0        0        0        6 2023-04-13 11:32:02.000000 osais-1.0.32/osais.egg-info/top_level.txt
--rw-rw-rw-   0        0        0       95 2023-04-05 18:53:17.000000 osais-1.0.32/pyproject.toml
--rw-rw-rw-   0        0        0       42 2023-04-13 11:32:02.967855 osais-1.0.32/setup.cfg
--rw-rw-rw-   0        0        0     1124 2023-04-13 11:31:14.000000 osais-1.0.32/setup.py
+drwxrwxrwx   0        0        0        0 2023-04-13 12:42:09.218988 osais-1.0.33/
+-rw-rw-rw-   0        0        0    33041 2023-04-05 11:19:20.000000 osais-1.0.33/LICENSE
+-rw-rw-rw-   0        0        0     1113 2023-04-13 12:42:09.218988 osais-1.0.33/PKG-INFO
+-rw-rw-rw-   0        0        0      339 2023-04-05 15:00:45.000000 osais-1.0.33/README.md
+drwxrwxrwx   0        0        0        0 2023-04-13 12:42:09.213987 osais-1.0.33/osais/
+-rw-rw-rw-   0        0        0      652 2023-04-13 12:41:09.000000 osais-1.0.33/osais/__init__.py
+-rw-rw-rw-   0        0        0    41183 2023-04-13 12:41:18.000000 osais-1.0.33/osais/osais.py
+drwxrwxrwx   0        0        0        0 2023-04-13 12:42:09.216988 osais-1.0.33/osais.egg-info/
+-rw-rw-rw-   0        0        0     1113 2023-04-13 12:42:09.000000 osais-1.0.33/osais.egg-info/PKG-INFO
+-rw-rw-rw-   0        0        0      218 2023-04-13 12:42:09.000000 osais-1.0.33/osais.egg-info/SOURCES.txt
+-rw-rw-rw-   0        0        0        1 2023-04-13 12:42:09.000000 osais-1.0.33/osais.egg-info/dependency_links.txt
+-rw-rw-rw-   0        0        0       65 2023-04-13 12:42:09.000000 osais-1.0.33/osais.egg-info/requires.txt
+-rw-rw-rw-   0        0        0        6 2023-04-13 12:42:09.000000 osais-1.0.33/osais.egg-info/top_level.txt
+-rw-rw-rw-   0        0        0       95 2023-04-05 18:53:17.000000 osais-1.0.33/pyproject.toml
+-rw-rw-rw-   0        0        0       42 2023-04-13 12:42:09.218988 osais-1.0.33/setup.cfg
+-rw-rw-rw-   0        0        0     1124 2023-04-13 12:41:27.000000 osais-1.0.33/setup.py
```

### Comparing `osais-1.0.32/LICENSE` & `osais-1.0.33/LICENSE`

 * *Files identical despite different names*

### Comparing `osais-1.0.32/PKG-INFO` & `osais-1.0.33/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: osais
-Version: 1.0.32
+Version: 1.0.33
 Summary: The osais Python lib for connecting AIs to OSAIS cloud
 Home-page: https://github.com/incubiq/osais
 Author: incubiq
 Author-email: eric@incubiq.com
 Keywords: osais,opensourceais
 Classifier: Development Status :: 3 - Alpha
 Classifier: Intended Audience :: Developers
```

### Comparing `osais-1.0.32/osais/__init__.py` & `osais-1.0.33/osais/__init__.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,11 +1,11 @@
 """
 A package for OSAIS virtual AI.
 """
-__version__="1.0.32"
+__version__="1.0.33"
 __author__ = "incubiq"
 __email__ = "eric@incubiq.com"
 
 from .osais import osais_isLocal
 from .osais import osais_loadConfig
 from .osais import osais_getEnv
 from .osais import osais_getHarwareInfo
```

### Comparing `osais-1.0.32/osais/osais.py` & `osais-1.0.33/osais/osais.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,9 +1,9 @@
 00000000: 0d0a 5f5f 7665 7273 696f 6e5f 5f3d 2231  ..__version__="1
-00000010: 2e30 2e33 3222 0d0a 0d0a 2323 203d 3d3d  .0.32"....## ===
+00000010: 2e30 2e33 3322 0d0a 0d0a 2323 203d 3d3d  .0.33"....## ===
 00000020: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
 00000030: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
 00000040: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
 00000050: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
 00000060: 3d3d 3d3d 3d0d 0a23 2320 0d0a 2323 2020  =====..## ..##  
 00000070: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00000080: 2020 2020 5574 696c 6974 6965 7320 7374      Utilities st
@@ -923,1650 +923,1652 @@
 000039a0: 6172 6d75 7020 6f6e 6520 286e 6f74 2061  armup one (not a
 000039b0: 2074 7275 6520 6f6e 6520 6672 6f6d 2063   true one from c
 000039c0: 6c69 656e 7429 0d0a 6749 7342 7573 793d  lient)..gIsBusy=
 000039d0: 4661 6c73 6520 2020 2020 2020 2020 2020  False           
 000039e0: 2020 2020 2020 2020 2323 2054 7275 6520          ## True 
 000039f0: 6966 2041 4920 6275 7379 2070 726f 6365  if AI busy proce
 00003a00: 7373 696e 670d 0a67 4465 6661 756c 7443  ssing..gDefaultC
-00003a10: 6f73 743d 666c 6f61 7428 3129 2020 2020  ost=float(1)    
+00003a10: 6f73 743d 3130 3030 2020 2020 2020 2020  ost=1000        
 00003a20: 2020 2020 2020 2023 2320 6465 6661 756c         ## defaul
 00003a30: 7420 636f 7374 2076 616c 7565 2069 6e20  t cost value in 
-00003a40: 7365 6373 2028 7769 6c6c 2067 6574 206f  secs (will get o
-00003a50: 7665 7272 6964 656e 2066 6173 742c 2074  verriden fast, t
-00003a60: 6869 7320 7661 6c75 6520 6973 206e 6f20  his value is no 
-00003a70: 6269 6720 6465 616c 290d 0a67 6150 726f  big deal)..gaPro
-00003a80: 6365 7373 5469 6d65 3d5b 5d20 2020 2020  cessTime=[]     
-00003a90: 2020 2020 2020 2020 2020 2023 2320 4172             ## Ar
-00003aa0: 7261 7920 6f66 206c 6173 7420 7820 2831  ray of last x (1
-00003ab0: 302f 3230 3f29 2074 696d 6520 7370 656e  0/20?) time spen
-00003ac0: 7420 666f 7220 7072 6f63 6573 7365 6420  t for processed 
-00003ad0: 7265 7175 6573 7473 200d 0a0d 0a23 2320  requests ....## 
-00003ae0: 7072 6f63 6573 7369 6e67 2073 7065 6369  processing speci
-00003af0: 6669 6373 0d0a 6741 7267 734f 5341 4953  fics..gArgsOSAIS
-00003b00: 3d4e 6f6e 6520 2020 2020 2020 2020 2020  =None           
-00003b10: 2020 2020 2020 2323 2074 6865 2061 7267        ## the arg
-00003b20: 7320 7061 7373 6564 2074 6f20 7468 6520  s passed to the 
-00003b30: 4149 2077 6869 6368 2061 7265 2073 7065  AI which are spe
-00003b40: 6369 6669 6320 746f 204f 5341 4953 2066  cific to OSAIS f
-00003b50: 6f72 2073 656e 6469 6e67 206e 6f74 6966  or sending notif
-00003b60: 6963 6174 696f 6e73 0d0a 0d0a 2323 2077  ications....## w
-00003b70: 6865 6e20 7275 6e6e 696e 6720 6173 2076  hen running as v
-00003b80: 4149 0d0a 6749 6e70 7574 4469 723d 222e  AI..gInputDir=".
-00003b90: 2f5f 696e 7075 742f 220d 0a67 4f75 7470  /_input/"..gOutp
-00003ba0: 7574 4469 723d 222e 2f5f 6f75 7470 7574  utDir="./_output
-00003bb0: 2f22 0d0a 0d0a 4149 5f50 524f 4752 4553  /"....AI_PROGRES
-00003bc0: 535f 4552 524f 523d 2d31 0d0a 4149 5f50  S_ERROR=-1..AI_P
-00003bd0: 524f 4752 4553 535f 4944 4c45 3d30 2020  ROGRESS_IDLE=0  
-00003be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003bf0: 2320 756e 7573 6564 0d0a 4149 5f50 524f  # unused..AI_PRO
-00003c00: 4752 4553 535f 4152 4753 3d31 2020 2020  GRESS_ARGS=1    
-00003c10: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00003c20: 756e 7573 6564 0d0a 4149 5f50 524f 4752  unused..AI_PROGR
-00003c30: 4553 535f 4149 5f53 5441 5254 4544 3d32  ESS_AI_STARTED=2
-00003c40: 0d0a 4149 5f50 524f 4752 4553 535f 494e  ..AI_PROGRESS_IN
-00003c50: 4954 5f49 4d41 4745 3d33 0d0a 4149 5f50  IT_IMAGE=3..AI_P
-00003c60: 524f 4752 4553 535f 444f 4e45 5f49 4d41  ROGRESS_DONE_IMA
-00003c70: 4745 3d34 0d0a 4149 5f50 524f 4752 4553  GE=4..AI_PROGRES
-00003c80: 535f 4149 5f53 544f 5050 4544 3d35 0d0a  S_AI_STOPPED=5..
-00003c90: 0d0a 2323 202d 2d2d 2d2d 2d2d 2d2d 2d2d  ..## -----------
+00003a40: 6d73 2028 7769 6c6c 2067 6574 206f 7665  ms (will get ove
+00003a50: 7272 6964 656e 2066 6173 742c 2074 6869  rriden fast, thi
+00003a60: 7320 7661 6c75 6520 6973 206e 6f20 6269  s value is no bi
+00003a70: 6720 6465 616c 290d 0a67 6150 726f 6365  g deal)..gaProce
+00003a80: 7373 5469 6d65 3d5b 5d20 2020 2020 2020  ssTime=[]       
+00003a90: 2020 2020 2020 2020 2023 2320 4172 7261           ## Arra
+00003aa0: 7920 6f66 206c 6173 7420 7820 2831 302f  y of last x (10/
+00003ab0: 3230 3f29 2074 696d 6520 7370 656e 7420  20?) time spent 
+00003ac0: 666f 7220 7072 6f63 6573 7365 6420 7265  for processed re
+00003ad0: 7175 6573 7473 200d 0a0d 0a23 2320 7072  quests ....## pr
+00003ae0: 6f63 6573 7369 6e67 2073 7065 6369 6669  ocessing specifi
+00003af0: 6373 0d0a 6741 7267 734f 5341 4953 3d4e  cs..gArgsOSAIS=N
+00003b00: 6f6e 6520 2020 2020 2020 2020 2020 2020  one             
+00003b10: 2020 2020 2323 2074 6865 2061 7267 7320      ## the args 
+00003b20: 7061 7373 6564 2074 6f20 7468 6520 4149  passed to the AI
+00003b30: 2077 6869 6368 2061 7265 2073 7065 6369   which are speci
+00003b40: 6669 6320 746f 204f 5341 4953 2066 6f72  fic to OSAIS for
+00003b50: 2073 656e 6469 6e67 206e 6f74 6966 6963   sending notific
+00003b60: 6174 696f 6e73 0d0a 0d0a 2323 2077 6865  ations....## whe
+00003b70: 6e20 7275 6e6e 696e 6720 6173 2076 4149  n running as vAI
+00003b80: 0d0a 6749 6e70 7574 4469 723d 222e 2f5f  ..gInputDir="./_
+00003b90: 696e 7075 742f 220d 0a67 4f75 7470 7574  input/"..gOutput
+00003ba0: 4469 723d 222e 2f5f 6f75 7470 7574 2f22  Dir="./_output/"
+00003bb0: 0d0a 0d0a 4149 5f50 524f 4752 4553 535f  ....AI_PROGRESS_
+00003bc0: 4552 524f 523d 2d31 0d0a 4149 5f50 524f  ERROR=-1..AI_PRO
+00003bd0: 4752 4553 535f 4944 4c45 3d30 2020 2020  GRESS_IDLE=0    
+00003be0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00003bf0: 756e 7573 6564 0d0a 4149 5f50 524f 4752  unused..AI_PROGR
+00003c00: 4553 535f 4152 4753 3d31 2020 2020 2020  ESS_ARGS=1      
+00003c10: 2020 2020 2020 2020 2020 2020 2320 756e              # un
+00003c20: 7573 6564 0d0a 4149 5f50 524f 4752 4553  used..AI_PROGRES
+00003c30: 535f 4149 5f53 5441 5254 4544 3d32 0d0a  S_AI_STARTED=2..
+00003c40: 4149 5f50 524f 4752 4553 535f 494e 4954  AI_PROGRESS_INIT
+00003c50: 5f49 4d41 4745 3d33 0d0a 4149 5f50 524f  _IMAGE=3..AI_PRO
+00003c60: 4752 4553 535f 444f 4e45 5f49 4d41 4745  GRESS_DONE_IMAGE
+00003c70: 3d34 0d0a 4149 5f50 524f 4752 4553 535f  =4..AI_PROGRESS_
+00003c80: 4149 5f53 544f 5050 4544 3d35 0d0a 0d0a  AI_STOPPED=5....
+00003c90: 2323 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ## -------------
 00003ca0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00003cb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00003cc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003cd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a23  -------------..#
-00003ce0: 2020 2020 2020 204c 6f61 6420 636f 6e66         Load conf
-00003cf0: 6967 0d0a 2323 202d 2d2d 2d2d 2d2d 2d2d  ig..## ---------
+00003cd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a23 2020  -----------..#  
+00003ce0: 2020 2020 204c 6f61 6420 636f 6e66 6967       Load config
+00003cf0: 0d0a 2323 202d 2d2d 2d2d 2d2d 2d2d 2d2d  ..## -----------
 00003d00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00003d10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00003d20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003d30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
-00003d40: 0a0d 0a23 206c 6f61 6420 7468 6520 636f  ...# load the co
-00003d50: 6e66 6967 2066 696c 6520 696e 746f 2061  nfig file into a
-00003d60: 204a 534f 4e0d 0a64 6566 205f 6c6f 6164   JSON..def _load
-00003d70: 436f 6e66 6967 285f 6e61 6d65 293a 200d  Config(_name): .
-00003d80: 0a20 2020 2067 6c6f 6261 6c20 6756 6572  .    global gVer
-00003d90: 7369 6f6e 0d0a 2020 2020 676c 6f62 616c  sion..    global
-00003da0: 2067 4465 7363 7269 7074 696f 6e0d 0a20   gDescription.. 
-00003db0: 2020 2067 6c6f 6261 6c20 674f 7269 6769     global gOrigi
-00003dc0: 6e0d 0a20 2020 2067 6c6f 6261 6c20 6744  n..    global gD
-00003dd0: 6566 6175 6c74 436f 7374 0d0a 0d0a 2020  efaultCost....  
-00003de0: 2020 5f6a 736f 6e20 3d20 4e6f 6e65 0d0a    _json = None..
-00003df0: 2020 2020 5f64 6972 4669 6c65 3d4e 6f6e      _dirFile=Non
-00003e00: 650d 0a20 2020 2074 7279 3a0d 0a20 2020  e..    try:..   
-00003e10: 2020 2020 2066 726f 6d20 7061 7468 6c69       from pathli
-00003e20: 6220 696d 706f 7274 2050 6174 680d 0a20  b import Path.. 
-00003e30: 2020 2020 2020 2063 7572 7265 6e74 5f77         current_w
-00003e40: 6f72 6b69 6e67 5f64 6972 6563 746f 7279  orking_directory
-00003e50: 203d 2050 6174 682e 6377 6428 290d 0a20   = Path.cwd().. 
-00003e60: 2020 2020 2020 205f 6469 7246 696c 653d         _dirFile=
-00003e70: 6627 7b63 7572 7265 6e74 5f77 6f72 6b69  f'{current_worki
-00003e80: 6e67 5f64 6972 6563 746f 7279 7d2f 7b5f  ng_directory}/{_
-00003e90: 6e61 6d65 7d2e 6a73 6f6e 270d 0a20 2020  name}.json'..   
-00003ea0: 2020 2020 2066 4a53 4f4e 203d 206f 7065       fJSON = ope
-00003eb0: 6e28 5f64 6972 4669 6c65 290d 0a20 2020  n(_dirFile)..   
-00003ec0: 2020 2020 205f 6a73 6f6e 203d 206a 736f       _json = jso
-00003ed0: 6e2e 6c6f 6164 2866 4a53 4f4e 290d 0a20  n.load(fJSON).. 
-00003ee0: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
-00003ef0: 696f 6e20 6173 2065 7272 3a0d 0a20 2020  ion as err:..   
-00003f00: 2020 2020 2070 7269 6e74 2866 2743 5249       print(f'CRI
-00003f10: 5449 4341 4c3a 204e 6f20 636f 6e66 6967  TICAL: No config
-00003f20: 2066 696c 6520 7b5f 6469 7246 696c 657d   file {_dirFile}
-00003f30: 2729 0d0a 2020 2020 2020 2020 7379 732e  ')..        sys.
-00003f40: 6578 6974 2829 0d0a 0d0a 2020 2020 6756  exit()....    gV
-00003f50: 6572 7369 6f6e 3d5f 6a73 6f6e 5b22 7665  ersion=_json["ve
-00003f60: 7273 696f 6e22 5d0d 0a20 2020 2067 4465  rsion"]..    gDe
-00003f70: 7363 7269 7074 696f 6e3d 5f6a 736f 6e5b  scription=_json[
-00003f80: 2264 6573 6372 6970 7469 6f6e 225d 0d0a  "description"]..
-00003f90: 2020 2020 674f 7269 6769 6e3d 5f6a 736f      gOrigin=_jso
-00003fa0: 6e5b 226f 7269 6769 6e22 5d0d 0a20 2020  n["origin"]..   
-00003fb0: 205f 636f 7374 3d5f 6a73 6f6e 5b22 6465   _cost=_json["de
-00003fc0: 6661 756c 745f 636f 7374 225d 0d0a 2020  fault_cost"]..  
-00003fd0: 2020 6966 205f 636f 7374 213d 4e6f 6e65    if _cost!=None
-00003fe0: 3a0d 0a20 2020 2020 2020 2067 4465 6661  :..        gDefa
-00003ff0: 756c 7443 6f73 743d 666c 6f61 7428 5f63  ultCost=float(_c
-00004000: 6f73 7429 0d0a 0d0a 2020 2020 7265 7475  ost)....    retu
-00004010: 726e 205f 6a73 6f6e 0d0a 0d0a 2320 6765  rn _json....# ge
-00004020: 7420 7468 6520 6675 6c6c 2041 4920 636f  t the full AI co
-00004030: 6e66 6967 2c20 696e 636c 7564 696e 6720  nfig, including 
-00004040: 4a53 4f4e 2070 6172 616d 7320 616e 6420  JSON params and 
-00004050: 6861 7264 7761 7265 2069 6e66 6f0d 0a64  hardware info..d
-00004060: 6566 205f 6765 7446 756c 6c43 6f6e 6669  ef _getFullConfi
-00004070: 6728 5f6e 616d 6529 203a 0d0a 2020 2020  g(_name) :..    
-00004080: 676c 6f62 616c 2067 5573 6572 6e61 6d65  global gUsername
-00004090: 0d0a 2020 2020 676c 6f62 616c 2067 506f  ..    global gPo
-000040a0: 7274 4149 0d0a 2020 2020 676c 6f62 616c  rtAI..    global
-000040b0: 2067 4e61 6d65 0d0a 2020 2020 676c 6f62   gName..    glob
-000040c0: 616c 2067 546f 6b65 6e0d 0a20 2020 2067  al gToken..    g
-000040d0: 6c6f 6261 6c20 6753 6563 7265 740d 0a20  lobal gSecret.. 
-000040e0: 2020 2067 6c6f 6261 6c20 674f 7269 6769     global gOrigi
-000040f0: 6e4f 5341 4953 0d0a 2020 2020 676c 6f62  nOSAIS..    glob
-00004100: 616c 2067 546f 6b65 6e4c 6f63 616c 0d0a  al gTokenLocal..
-00004110: 2020 2020 676c 6f62 616c 2067 5365 6372      global gSecr
-00004120: 6574 4c6f 6361 6c0d 0a20 2020 2067 6c6f  etLocal..    glo
-00004130: 6261 6c20 674f 7269 6769 6e4c 6f63 616c  bal gOriginLocal
-00004140: 4f53 4149 530d 0a20 2020 2067 6c6f 6261  OSAIS..    globa
-00004150: 6c20 6749 7356 6972 7475 616c 4149 0d0a  l gIsVirtualAI..
-00004160: 2020 2020 676c 6f62 616c 2067 4950 4c6f      global gIPLo
-00004170: 6361 6c0d 0a20 2020 2067 6c6f 6261 6c20  cal..    global 
-00004180: 6745 7874 4950 0d0a 200d 0a20 2020 205f  gExtIP.. ..    _
-00004190: 6970 3d67 4578 7449 500d 0a20 2020 2069  ip=gExtIP..    i
-000041a0: 6620 6749 7356 6972 7475 616c 4149 3d3d  f gIsVirtualAI==
-000041b0: 4661 6c73 653a 0d0a 2020 2020 2020 2020  False:..        
-000041c0: 5f69 703d 6749 504c 6f63 616c 2020 2020  _ip=gIPLocal    
-000041d0: 2020 2020 2020 2020 2020 2020 2323 2077              ## w
-000041e0: 6520 7265 6769 7374 6572 2077 6974 6820  e register with 
-000041f0: 6c6f 6361 6c20 6970 2069 6620 7765 2061  local ip if we a
-00004200: 7265 2069 6e20 6c6f 6361 6c20 6761 7465  re in local gate
-00004210: 7761 7920 6d6f 6465 0d0a 0d0a 2020 2020  way mode....    
-00004220: 5f6a 736f 6e3d 5f6c 6f61 6443 6f6e 6669  _json=_loadConfi
-00004230: 6728 5f6e 616d 6529 0d0a 0d0a 2020 2020  g(_name)....    
-00004240: 6f62 6a43 7564 6149 6e66 6f3d 6765 7443  objCudaInfo=getC
-00004250: 7564 6149 6e66 6f28 290d 0a20 2020 2067  udaInfo()..    g
-00004260: 7075 4e61 6d65 3d22 6e6f 2047 5055 220d  puName="no GPU".
-00004270: 0a20 2020 2069 6620 6f62 6a43 7564 6149  .    if objCudaI
-00004280: 6e66 6f20 213d 2030 2061 6e64 2022 6e61  nfo != 0 and "na
-00004290: 6d65 2220 696e 206f 626a 4375 6461 496e  me" in objCudaIn
-000042a0: 666f 2061 6e64 206f 626a 4375 6461 496e  fo and objCudaIn
-000042b0: 666f 5b22 6e61 6d65 225d 3a0d 0a20 2020  fo["name"]:..   
-000042c0: 2020 2020 2067 7075 4e61 6d65 3d6f 626a       gpuName=obj
-000042d0: 4375 6461 496e 666f 5b22 6e61 6d65 225d  CudaInfo["name"]
-000042e0: 0d0a 0d0a 2020 2020 7265 7475 726e 207b  ....    return {
-000042f0: 0d0a 2020 2020 2020 2020 2275 7365 726e  ..        "usern
-00004300: 616d 6522 3a20 6755 7365 726e 616d 652c  ame": gUsername,
-00004310: 0d0a 2020 2020 2020 2020 226f 7322 3a20  ..        "os": 
-00004320: 6765 745f 6f73 5f6e 616d 6528 292c 0d0a  get_os_name(),..
-00004330: 2020 2020 2020 2020 2267 7075 223a 2067          "gpu": g
-00004340: 7075 4e61 6d65 2c0d 0a20 2020 2020 2020  puName,..       
-00004350: 2022 6d61 6368 696e 6522 3a20 6765 745f   "machine": get_
-00004360: 6d61 6368 696e 655f 6e61 6d65 2829 2c0d  machine_name(),.
-00004370: 0a20 2020 2020 2020 2022 6970 223a 205f  .        "ip": _
-00004380: 6970 2c0d 0a20 2020 2020 2020 2022 706f  ip,..        "po
-00004390: 7274 223a 2067 506f 7274 4149 2c0d 0a20  rt": gPortAI,.. 
-000043a0: 2020 2020 2020 2022 656e 6769 6e65 223a         "engine":
-000043b0: 205f 6a73 6f6e 0d0a 2020 2020 7d0d 0a0d   _json..    }...
-000043c0: 0a23 2320 5055 424c 4943 202d 2061 7265  .## PUBLIC - are
-000043d0: 2077 6520 7275 6e6e 696e 6720 6c6f 6361   we running loca
-000043e0: 6c6c 793f 0d0a 6465 6620 6f73 6169 735f  lly?..def osais_
-000043f0: 6973 4c6f 6361 6c28 293a 0d0a 2020 2020  isLocal():..    
-00004400: 676c 6f62 616c 2067 4973 4c6f 6361 6c0d  global gIsLocal.
-00004410: 0a20 2020 2072 6574 7572 6e20 6749 734c  .    return gIsL
-00004420: 6f63 616c 0d0a 0d0a 2323 2050 5542 4c49  ocal....## PUBLI
-00004430: 4320 2d20 6c6f 6164 2074 6865 2063 6f6e  C - load the con
-00004440: 6669 6720 6f66 2074 6869 7320 4149 0d0a  fig of this AI..
-00004450: 6465 6620 6f73 6169 735f 6c6f 6164 436f  def osais_loadCo
-00004460: 6e66 6967 285f 6e61 6d65 293a 200d 0a20  nfig(_name): .. 
-00004470: 2020 2072 6574 7572 6e20 5f6c 6f61 6443     return _loadC
-00004480: 6f6e 6669 6728 5f6e 616d 6529 0d0a 0d0a  onfig(_name)....
-00004490: 2323 2050 5542 4c49 4320 2d20 4765 7420  ## PUBLIC - Get 
-000044a0: 656e 7620 6672 6f6d 2066 696c 6520 286c  env from file (l
-000044b0: 6f63 616c 206f 7220 646f 636b 6572 290d  ocal or docker).
-000044c0: 0a64 6566 206f 7361 6973 5f67 6574 456e  .def osais_getEn
-000044d0: 7628 5f66 696c 656e 616d 6529 3a0d 0a20  v(_filename):.. 
-000044e0: 2020 2067 6c6f 6261 6c20 6755 7365 726e     global gUsern
-000044f0: 616d 650d 0a20 2020 2067 6c6f 6261 6c20  ame..    global 
-00004500: 6749 7356 6972 7475 616c 4149 0d0a 2020  gIsVirtualAI..  
-00004510: 2020 676c 6f62 616c 2067 4973 4c6f 6361    global gIsLoca
-00004520: 6c0d 0a20 2020 2067 6c6f 6261 6c20 674e  l..    global gN
-00004530: 616d 650d 0a0d 0a20 2020 2023 2320 7265  ame....    ## re
-00004540: 6164 2065 6e76 2066 726f 6d20 636f 6e66  ad env from conf
-00004550: 6967 2066 696c 650d 0a20 2020 2077 6974  ig file..    wit
-00004560: 6820 6f70 656e 285f 6669 6c65 6e61 6d65  h open(_filename
-00004570: 2c20 2272 2229 2061 7320 663a 0d0a 2020  , "r") as f:..  
-00004580: 2020 2020 2020 636f 6e74 656e 7420 3d20        content = 
-00004590: 662e 7265 6164 2829 0d0a 2020 2020 7661  f.read()..    va
-000045a0: 7269 6162 6c65 7320 3d20 636f 6e74 656e  riables = conten
-000045b0: 742e 7370 6c69 7428 225c 6e22 290d 0a20  t.split("\n").. 
-000045c0: 2020 2066 6f72 2076 6172 2069 6e20 7661     for var in va
-000045d0: 7269 6162 6c65 733a 0d0a 2020 2020 2020  riables:..      
-000045e0: 2020 6966 2076 6172 213d 2222 3a0d 0a20    if var!="":.. 
-000045f0: 2020 2020 2020 2020 2020 206b 6579 2c20             key, 
-00004600: 7661 6c75 6520 3d20 7661 722e 7370 6c69  value = var.spli
-00004610: 7428 223d 2229 0d0a 2020 2020 2020 2020  t("=")..        
-00004620: 2020 2020 6966 206b 6579 203d 3d20 2255      if key == "U
-00004630: 5345 524e 414d 4522 3a0d 0a20 2020 2020  SERNAME":..     
-00004640: 2020 2020 2020 2020 2020 2067 5573 6572             gUser
-00004650: 6e61 6d65 203d 2076 616c 7565 0d0a 2020  name = value..  
-00004660: 2020 2020 2020 2020 2020 656c 6966 206b            elif k
-00004670: 6579 203d 3d20 2249 535f 4c4f 4341 4c22  ey == "IS_LOCAL"
-00004680: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00004690: 2020 2067 4973 4c6f 6361 6c20 3d20 2876     gIsLocal = (v
-000046a0: 616c 7565 3d3d 2254 7275 6522 290d 0a20  alue=="True").. 
-000046b0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-000046c0: 6b65 7920 3d3d 2022 4953 5f56 4952 5455  key == "IS_VIRTU
-000046d0: 414c 4149 223a 0d0a 2020 2020 2020 2020  ALAI":..        
-000046e0: 2020 2020 2020 2020 6749 7356 6972 7475          gIsVirtu
-000046f0: 616c 4149 203d 2028 7661 6c75 653d 3d22  alAI = (value=="
-00004700: 5472 7565 2229 0d0a 2020 2020 2020 2020  True")..        
-00004710: 2020 2020 656c 6966 206b 6579 203d 3d20      elif key == 
-00004720: 2245 4e47 494e 4522 3a0d 0a20 2020 2020  "ENGINE":..     
-00004730: 2020 2020 2020 2020 2020 2067 4e61 6d65             gName
-00004740: 203d 2076 616c 7565 0d0a 2020 2020 7265   = value..    re
-00004750: 7475 726e 207b 0d0a 2020 2020 2020 2020  turn {..        
-00004760: 2275 7365 726e 616d 6522 3a20 6755 7365  "username": gUse
-00004770: 726e 616d 652c 0d0a 2020 2020 2020 2020  rname,..        
-00004780: 2269 734c 6f63 616c 223a 2067 4973 4c6f  "isLocal": gIsLo
-00004790: 6361 6c2c 0d0a 2020 2020 2020 2020 2269  cal,..        "i
-000047a0: 7356 6972 7475 616c 4149 223a 2067 4973  sVirtualAI": gIs
-000047b0: 5669 7274 7561 6c41 492c 0d0a 2020 2020  VirtualAI,..    
-000047c0: 2020 2020 226e 616d 6522 3a20 674e 616d      "name": gNam
-000047d0: 650d 0a20 2020 207d 0d0a 0d0a 2323 202d  e..    }....## -
+00003d30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a0d  -------------...
+00003d40: 0a23 206c 6f61 6420 7468 6520 636f 6e66  .# load the conf
+00003d50: 6967 2066 696c 6520 696e 746f 2061 204a  ig file into a J
+00003d60: 534f 4e0d 0a64 6566 205f 6c6f 6164 436f  SON..def _loadCo
+00003d70: 6e66 6967 285f 6e61 6d65 293a 200d 0a20  nfig(_name): .. 
+00003d80: 2020 2067 6c6f 6261 6c20 6756 6572 7369     global gVersi
+00003d90: 6f6e 0d0a 2020 2020 676c 6f62 616c 2067  on..    global g
+00003da0: 4465 7363 7269 7074 696f 6e0d 0a20 2020  Description..   
+00003db0: 2067 6c6f 6261 6c20 674f 7269 6769 6e0d   global gOrigin.
+00003dc0: 0a20 2020 2067 6c6f 6261 6c20 6744 6566  .    global gDef
+00003dd0: 6175 6c74 436f 7374 0d0a 0d0a 2020 2020  aultCost....    
+00003de0: 5f6a 736f 6e20 3d20 4e6f 6e65 0d0a 2020  _json = None..  
+00003df0: 2020 5f64 6972 4669 6c65 3d4e 6f6e 650d    _dirFile=None.
+00003e00: 0a20 2020 2074 7279 3a0d 0a20 2020 2020  .    try:..     
+00003e10: 2020 2066 726f 6d20 7061 7468 6c69 6220     from pathlib 
+00003e20: 696d 706f 7274 2050 6174 680d 0a20 2020  import Path..   
+00003e30: 2020 2020 2063 7572 7265 6e74 5f77 6f72       current_wor
+00003e40: 6b69 6e67 5f64 6972 6563 746f 7279 203d  king_directory =
+00003e50: 2050 6174 682e 6377 6428 290d 0a20 2020   Path.cwd()..   
+00003e60: 2020 2020 205f 6469 7246 696c 653d 6627       _dirFile=f'
+00003e70: 7b63 7572 7265 6e74 5f77 6f72 6b69 6e67  {current_working
+00003e80: 5f64 6972 6563 746f 7279 7d2f 7b5f 6e61  _directory}/{_na
+00003e90: 6d65 7d2e 6a73 6f6e 270d 0a20 2020 2020  me}.json'..     
+00003ea0: 2020 2066 4a53 4f4e 203d 206f 7065 6e28     fJSON = open(
+00003eb0: 5f64 6972 4669 6c65 290d 0a20 2020 2020  _dirFile)..     
+00003ec0: 2020 205f 6a73 6f6e 203d 206a 736f 6e2e     _json = json.
+00003ed0: 6c6f 6164 2866 4a53 4f4e 290d 0a20 2020  load(fJSON)..   
+00003ee0: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
+00003ef0: 6e20 6173 2065 7272 3a0d 0a20 2020 2020  n as err:..     
+00003f00: 2020 2070 7269 6e74 2866 2743 5249 5449     print(f'CRITI
+00003f10: 4341 4c3a 204e 6f20 636f 6e66 6967 2066  CAL: No config f
+00003f20: 696c 6520 7b5f 6469 7246 696c 657d 2729  ile {_dirFile}')
+00003f30: 0d0a 2020 2020 2020 2020 7379 732e 6578  ..        sys.ex
+00003f40: 6974 2829 0d0a 0d0a 2020 2020 6756 6572  it()....    gVer
+00003f50: 7369 6f6e 3d5f 6a73 6f6e 5b22 7665 7273  sion=_json["vers
+00003f60: 696f 6e22 5d0d 0a20 2020 2067 4465 7363  ion"]..    gDesc
+00003f70: 7269 7074 696f 6e3d 5f6a 736f 6e5b 2264  ription=_json["d
+00003f80: 6573 6372 6970 7469 6f6e 225d 0d0a 2020  escription"]..  
+00003f90: 2020 674f 7269 6769 6e3d 5f6a 736f 6e5b    gOrigin=_json[
+00003fa0: 226f 7269 6769 6e22 5d0d 0a20 2020 205f  "origin"]..    _
+00003fb0: 636f 7374 3d5f 6a73 6f6e 5b22 6465 6661  cost=_json["defa
+00003fc0: 756c 745f 636f 7374 225d 0d0a 2020 2020  ult_cost"]..    
+00003fd0: 6966 205f 636f 7374 213d 4e6f 6e65 3a0d  if _cost!=None:.
+00003fe0: 0a20 2020 2020 2020 2067 4465 6661 756c  .        gDefaul
+00003ff0: 7443 6f73 743d 5f63 6f73 740d 0a0d 0a20  tCost=_cost.... 
+00004000: 2020 2072 6574 7572 6e20 5f6a 736f 6e0d     return _json.
+00004010: 0a0d 0a23 2067 6574 2074 6865 2066 756c  ...# get the ful
+00004020: 6c20 4149 2063 6f6e 6669 672c 2069 6e63  l AI config, inc
+00004030: 6c75 6469 6e67 204a 534f 4e20 7061 7261  luding JSON para
+00004040: 6d73 2061 6e64 2068 6172 6477 6172 6520  ms and hardware 
+00004050: 696e 666f 0d0a 6465 6620 5f67 6574 4675  info..def _getFu
+00004060: 6c6c 436f 6e66 6967 285f 6e61 6d65 2920  llConfig(_name) 
+00004070: 3a0d 0a20 2020 2067 6c6f 6261 6c20 6755  :..    global gU
+00004080: 7365 726e 616d 650d 0a20 2020 2067 6c6f  sername..    glo
+00004090: 6261 6c20 6750 6f72 7441 490d 0a20 2020  bal gPortAI..   
+000040a0: 2067 6c6f 6261 6c20 674e 616d 650d 0a20   global gName.. 
+000040b0: 2020 2067 6c6f 6261 6c20 6754 6f6b 656e     global gToken
+000040c0: 0d0a 2020 2020 676c 6f62 616c 2067 5365  ..    global gSe
+000040d0: 6372 6574 0d0a 2020 2020 676c 6f62 616c  cret..    global
+000040e0: 2067 4f72 6967 696e 4f53 4149 530d 0a20   gOriginOSAIS.. 
+000040f0: 2020 2067 6c6f 6261 6c20 6754 6f6b 656e     global gToken
+00004100: 4c6f 6361 6c0d 0a20 2020 2067 6c6f 6261  Local..    globa
+00004110: 6c20 6753 6563 7265 744c 6f63 616c 0d0a  l gSecretLocal..
+00004120: 2020 2020 676c 6f62 616c 2067 4f72 6967      global gOrig
+00004130: 696e 4c6f 6361 6c4f 5341 4953 0d0a 2020  inLocalOSAIS..  
+00004140: 2020 676c 6f62 616c 2067 4973 5669 7274    global gIsVirt
+00004150: 7561 6c41 490d 0a20 2020 2067 6c6f 6261  ualAI..    globa
+00004160: 6c20 6749 504c 6f63 616c 0d0a 2020 2020  l gIPLocal..    
+00004170: 676c 6f62 616c 2067 4578 7449 500d 0a20  global gExtIP.. 
+00004180: 0d0a 2020 2020 5f69 703d 6745 7874 4950  ..    _ip=gExtIP
+00004190: 0d0a 2020 2020 6966 2067 4973 5669 7274  ..    if gIsVirt
+000041a0: 7561 6c41 493d 3d46 616c 7365 3a0d 0a20  ualAI==False:.. 
+000041b0: 2020 2020 2020 205f 6970 3d67 4950 4c6f         _ip=gIPLo
+000041c0: 6361 6c20 2020 2020 2020 2020 2020 2020  cal             
+000041d0: 2020 2023 2320 7765 2072 6567 6973 7465     ## we registe
+000041e0: 7220 7769 7468 206c 6f63 616c 2069 7020  r with local ip 
+000041f0: 6966 2077 6520 6172 6520 696e 206c 6f63  if we are in loc
+00004200: 616c 2067 6174 6577 6179 206d 6f64 650d  al gateway mode.
+00004210: 0a0d 0a20 2020 205f 6a73 6f6e 3d5f 6c6f  ...    _json=_lo
+00004220: 6164 436f 6e66 6967 285f 6e61 6d65 290d  adConfig(_name).
+00004230: 0a0d 0a20 2020 206f 626a 4375 6461 496e  ...    objCudaIn
+00004240: 666f 3d67 6574 4375 6461 496e 666f 2829  fo=getCudaInfo()
+00004250: 0d0a 2020 2020 6770 754e 616d 653d 226e  ..    gpuName="n
+00004260: 6f20 4750 5522 0d0a 2020 2020 6966 206f  o GPU"..    if o
+00004270: 626a 4375 6461 496e 666f 2021 3d20 3020  bjCudaInfo != 0 
+00004280: 616e 6420 226e 616d 6522 2069 6e20 6f62  and "name" in ob
+00004290: 6a43 7564 6149 6e66 6f20 616e 6420 6f62  jCudaInfo and ob
+000042a0: 6a43 7564 6149 6e66 6f5b 226e 616d 6522  jCudaInfo["name"
+000042b0: 5d3a 0d0a 2020 2020 2020 2020 6770 754e  ]:..        gpuN
+000042c0: 616d 653d 6f62 6a43 7564 6149 6e66 6f5b  ame=objCudaInfo[
+000042d0: 226e 616d 6522 5d0d 0a0d 0a20 2020 2072  "name"]....    r
+000042e0: 6574 7572 6e20 7b0d 0a20 2020 2020 2020  eturn {..       
+000042f0: 2022 7573 6572 6e61 6d65 223a 2067 5573   "username": gUs
+00004300: 6572 6e61 6d65 2c0d 0a20 2020 2020 2020  ername,..       
+00004310: 2022 6f73 223a 2067 6574 5f6f 735f 6e61   "os": get_os_na
+00004320: 6d65 2829 2c0d 0a20 2020 2020 2020 2022  me(),..        "
+00004330: 6770 7522 3a20 6770 754e 616d 652c 0d0a  gpu": gpuName,..
+00004340: 2020 2020 2020 2020 226d 6163 6869 6e65          "machine
+00004350: 223a 2067 6574 5f6d 6163 6869 6e65 5f6e  ": get_machine_n
+00004360: 616d 6528 292c 0d0a 2020 2020 2020 2020  ame(),..        
+00004370: 2269 7022 3a20 5f69 702c 0d0a 2020 2020  "ip": _ip,..    
+00004380: 2020 2020 2270 6f72 7422 3a20 6750 6f72      "port": gPor
+00004390: 7441 492c 0d0a 2020 2020 2020 2020 2265  tAI,..        "e
+000043a0: 6e67 696e 6522 3a20 5f6a 736f 6e0d 0a20  ngine": _json.. 
+000043b0: 2020 207d 0d0a 0d0a 2323 2050 5542 4c49     }....## PUBLI
+000043c0: 4320 2d20 6172 6520 7765 2072 756e 6e69  C - are we runni
+000043d0: 6e67 206c 6f63 616c 6c79 3f0d 0a64 6566  ng locally?..def
+000043e0: 206f 7361 6973 5f69 734c 6f63 616c 2829   osais_isLocal()
+000043f0: 3a0d 0a20 2020 2067 6c6f 6261 6c20 6749  :..    global gI
+00004400: 734c 6f63 616c 0d0a 2020 2020 7265 7475  sLocal..    retu
+00004410: 726e 2067 4973 4c6f 6361 6c0d 0a0d 0a23  rn gIsLocal....#
+00004420: 2320 5055 424c 4943 202d 206c 6f61 6420  # PUBLIC - load 
+00004430: 7468 6520 636f 6e66 6967 206f 6620 7468  the config of th
+00004440: 6973 2041 490d 0a64 6566 206f 7361 6973  is AI..def osais
+00004450: 5f6c 6f61 6443 6f6e 6669 6728 5f6e 616d  _loadConfig(_nam
+00004460: 6529 3a20 0d0a 2020 2020 7265 7475 726e  e): ..    return
+00004470: 205f 6c6f 6164 436f 6e66 6967 285f 6e61   _loadConfig(_na
+00004480: 6d65 290d 0a0d 0a23 2320 5055 424c 4943  me)....## PUBLIC
+00004490: 202d 2047 6574 2065 6e76 2066 726f 6d20   - Get env from 
+000044a0: 6669 6c65 2028 6c6f 6361 6c20 6f72 2064  file (local or d
+000044b0: 6f63 6b65 7229 0d0a 6465 6620 6f73 6169  ocker)..def osai
+000044c0: 735f 6765 7445 6e76 285f 6669 6c65 6e61  s_getEnv(_filena
+000044d0: 6d65 293a 0d0a 2020 2020 676c 6f62 616c  me):..    global
+000044e0: 2067 5573 6572 6e61 6d65 0d0a 2020 2020   gUsername..    
+000044f0: 676c 6f62 616c 2067 4973 5669 7274 7561  global gIsVirtua
+00004500: 6c41 490d 0a20 2020 2067 6c6f 6261 6c20  lAI..    global 
+00004510: 6749 734c 6f63 616c 0d0a 2020 2020 676c  gIsLocal..    gl
+00004520: 6f62 616c 2067 4e61 6d65 0d0a 0d0a 2020  obal gName....  
+00004530: 2020 2323 2072 6561 6420 656e 7620 6672    ## read env fr
+00004540: 6f6d 2063 6f6e 6669 6720 6669 6c65 0d0a  om config file..
+00004550: 2020 2020 7769 7468 206f 7065 6e28 5f66      with open(_f
+00004560: 696c 656e 616d 652c 2022 7222 2920 6173  ilename, "r") as
+00004570: 2066 3a0d 0a20 2020 2020 2020 2063 6f6e   f:..        con
+00004580: 7465 6e74 203d 2066 2e72 6561 6428 290d  tent = f.read().
+00004590: 0a20 2020 2076 6172 6961 626c 6573 203d  .    variables =
+000045a0: 2063 6f6e 7465 6e74 2e73 706c 6974 2822   content.split("
+000045b0: 5c6e 2229 0d0a 2020 2020 666f 7220 7661  \n")..    for va
+000045c0: 7220 696e 2076 6172 6961 626c 6573 3a0d  r in variables:.
+000045d0: 0a20 2020 2020 2020 2069 6620 7661 7221  .        if var!
+000045e0: 3d22 223a 0d0a 2020 2020 2020 2020 2020  ="":..          
+000045f0: 2020 6b65 792c 2076 616c 7565 203d 2076    key, value = v
+00004600: 6172 2e73 706c 6974 2822 3d22 290d 0a20  ar.split("=").. 
+00004610: 2020 2020 2020 2020 2020 2069 6620 6b65             if ke
+00004620: 7920 3d3d 2022 5553 4552 4e41 4d45 223a  y == "USERNAME":
+00004630: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00004640: 2020 6755 7365 726e 616d 6520 3d20 7661    gUsername = va
+00004650: 6c75 650d 0a20 2020 2020 2020 2020 2020  lue..           
+00004660: 2065 6c69 6620 6b65 7920 3d3d 2022 4953   elif key == "IS
+00004670: 5f4c 4f43 414c 223a 0d0a 2020 2020 2020  _LOCAL":..      
+00004680: 2020 2020 2020 2020 2020 6749 734c 6f63            gIsLoc
+00004690: 616c 203d 2028 7661 6c75 653d 3d22 5472  al = (value=="Tr
+000046a0: 7565 2229 0d0a 2020 2020 2020 2020 2020  ue")..          
+000046b0: 2020 656c 6966 206b 6579 203d 3d20 2249    elif key == "I
+000046c0: 535f 5649 5254 5541 4c41 4922 3a0d 0a20  S_VIRTUALAI":.. 
+000046d0: 2020 2020 2020 2020 2020 2020 2020 2067                 g
+000046e0: 4973 5669 7274 7561 6c41 4920 3d20 2876  IsVirtualAI = (v
+000046f0: 616c 7565 3d3d 2254 7275 6522 290d 0a20  alue=="True").. 
+00004700: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00004710: 6b65 7920 3d3d 2022 454e 4749 4e45 223a  key == "ENGINE":
+00004720: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00004730: 2020 674e 616d 6520 3d20 7661 6c75 650d    gName = value.
+00004740: 0a20 2020 2072 6574 7572 6e20 7b0d 0a20  .    return {.. 
+00004750: 2020 2020 2020 2022 7573 6572 6e61 6d65         "username
+00004760: 223a 2067 5573 6572 6e61 6d65 2c0d 0a20  ": gUsername,.. 
+00004770: 2020 2020 2020 2022 6973 4c6f 6361 6c22         "isLocal"
+00004780: 3a20 6749 734c 6f63 616c 2c0d 0a20 2020  : gIsLocal,..   
+00004790: 2020 2020 2022 6973 5669 7274 7561 6c41       "isVirtualA
+000047a0: 4922 3a20 6749 7356 6972 7475 616c 4149  I": gIsVirtualAI
+000047b0: 2c0d 0a20 2020 2020 2020 2022 6e61 6d65  ,..        "name
+000047c0: 223a 2067 4e61 6d65 0d0a 2020 2020 7d0d  ": gName..    }.
+000047d0: 0a0d 0a23 2320 2d2d 2d2d 2d2d 2d2d 2d2d  ...## ----------
 000047e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000047f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00004800: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004810: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004820: 2d2d 2d2d 2d2d 2d0d 0a23 2020 2020 2020  -------..#      
-00004830: 2063 6f73 7420 6361 6c63 756c 6174 696f   cost calculatio
-00004840: 6e0d 0a23 2320 2d2d 2d2d 2d2d 2d2d 2d2d  n..## ----------
+00004810: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+00004820: 2320 2020 2020 2020 636f 7374 2063 616c  #       cost cal
+00004830: 6375 6c61 7469 6f6e 0d0a 2323 202d 2d2d  culation..## ---
+00004840: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00004850: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00004860: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00004870: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
-00004890: 0d0a 2320 696e 6974 2074 6865 2064 6166  ..# init the daf
-000048a0: 6175 6c74 2063 6f73 7420 6172 7261 790d  ault cost array.
-000048b0: 0a64 6566 205f 696e 6974 6961 6c69 7a65  .def _initialize
-000048c0: 436f 7374 2829 203a 0d0a 2020 2020 676c  Cost() :..    gl
-000048d0: 6f62 616c 2067 4465 6661 756c 7443 6f73  obal gDefaultCos
-000048e0: 740d 0a20 2020 2067 6c6f 6261 6c20 6761  t..    global ga
-000048f0: 5072 6f63 6573 7354 696d 650d 0a20 2020  ProcessTime..   
-00004900: 2066 726f 6d20 6172 7261 7920 696d 706f   from array impo
-00004910: 7274 2061 7272 6179 0d0a 2020 2020 6761  rt array..    ga
-00004920: 5072 6f63 6573 7354 696d 653d 6172 7261  ProcessTime=arra
-00004930: 7928 2766 272c 205b 6744 6566 6175 6c74  y('f', [gDefault
-00004940: 436f 7374 2c67 4465 6661 756c 7443 6f73  Cost,gDefaultCos
-00004950: 742c 6744 6566 6175 6c74 436f 7374 2c67  t,gDefaultCost,g
-00004960: 4465 6661 756c 7443 6f73 742c 6744 6566  DefaultCost,gDef
-00004970: 6175 6c74 436f 7374 2c67 4465 6661 756c  aultCost,gDefaul
-00004980: 7443 6f73 742c 6744 6566 6175 6c74 436f  tCost,gDefaultCo
-00004990: 7374 2c67 4465 6661 756c 7443 6f73 742c  st,gDefaultCost,
-000049a0: 6744 6566 6175 6c74 436f 7374 2c67 4465  gDefaultCost,gDe
-000049b0: 6661 756c 7443 6f73 745d 290d 0a0d 0a23  faultCost])....#
-000049c0: 2069 6e69 7420 7468 6520 6461 6661 756c   init the dafaul
-000049d0: 7420 636f 7374 2061 7272 6179 0d0a 6465  t cost array..de
-000049e0: 6620 5f61 6464 436f 7374 285f 636f 7374  f _addCost(_cost
-000049f0: 2920 3a0d 0a20 2020 2067 6c6f 6261 6c20  ) :..    global 
-00004a00: 6749 7357 6172 6d75 700d 0a20 2020 2067  gIsWarmup..    g
-00004a10: 6c6f 6261 6c20 6761 5072 6f63 6573 7354  lobal gaProcessT
-00004a20: 696d 650d 0a20 2020 2069 6620 6749 7357  ime..    if gIsW
-00004a30: 6172 6d75 703d 3d46 616c 7365 3a0d 0a20  armup==False:.. 
-00004a40: 2020 2020 2020 2067 6150 726f 6365 7373         gaProcess
-00004a50: 5469 6d65 2e69 6e73 6572 7428 302c 205f  Time.insert(0, _
-00004a60: 636f 7374 290d 0a20 2020 2020 2020 2067  cost)..        g
-00004a70: 6150 726f 6365 7373 5469 6d65 2e70 6f70  aProcessTime.pop
-00004a80: 2829 0d0a 0d0a 2320 696e 6974 2074 6865  ()....# init the
-00004a90: 2064 6166 6175 6c74 2063 6f73 7420 6172   dafault cost ar
-00004aa0: 7261 790d 0a64 6566 205f 6765 7441 7665  ray..def _getAve
-00004ab0: 7261 6765 436f 7374 2829 203a 0d0a 2020  rageCost() :..  
-00004ac0: 2020 676c 6f62 616c 2067 6150 726f 6365    global gaProce
-00004ad0: 7373 5469 6d65 0d0a 2020 2020 6176 6572  ssTime..    aver
-00004ae0: 6167 6520 3d20 7375 6d28 6761 5072 6f63  age = sum(gaProc
-00004af0: 6573 7354 696d 6529 202f 206c 656e 2867  essTime) / len(g
-00004b00: 6150 726f 6365 7373 5469 6d65 290d 0a20  aProcessTime).. 
-00004b10: 2020 2072 6574 7572 6e20 6176 6572 6167     return averag
-00004b20: 650d 0a0d 0a23 2320 2d2d 2d2d 2d2d 2d2d  e....## --------
+00004880: 2d2d 2d2d 2d0d 0a0d 0a23 2069 6e69 7420  -----....# init 
+00004890: 7468 6520 6461 6661 756c 7420 636f 7374  the dafault cost
+000048a0: 2061 7272 6179 0d0a 6465 6620 5f69 6e69   array..def _ini
+000048b0: 7469 616c 697a 6543 6f73 7428 2920 3a0d  tializeCost() :.
+000048c0: 0a20 2020 2067 6c6f 6261 6c20 6744 6566  .    global gDef
+000048d0: 6175 6c74 436f 7374 0d0a 2020 2020 676c  aultCost..    gl
+000048e0: 6f62 616c 2067 6150 726f 6365 7373 5469  obal gaProcessTi
+000048f0: 6d65 0d0a 2020 2020 6672 6f6d 2061 7272  me..    from arr
+00004900: 6179 2069 6d70 6f72 7420 6172 7261 790d  ay import array.
+00004910: 0a20 2020 2067 6150 726f 6365 7373 5469  .    gaProcessTi
+00004920: 6d65 3d61 7272 6179 2827 6627 2c20 5b67  me=array('f', [g
+00004930: 4465 6661 756c 7443 6f73 742c 6744 6566  DefaultCost,gDef
+00004940: 6175 6c74 436f 7374 2c67 4465 6661 756c  aultCost,gDefaul
+00004950: 7443 6f73 742c 6744 6566 6175 6c74 436f  tCost,gDefaultCo
+00004960: 7374 2c67 4465 6661 756c 7443 6f73 742c  st,gDefaultCost,
+00004970: 6744 6566 6175 6c74 436f 7374 2c67 4465  gDefaultCost,gDe
+00004980: 6661 756c 7443 6f73 742c 6744 6566 6175  faultCost,gDefau
+00004990: 6c74 436f 7374 2c67 4465 6661 756c 7443  ltCost,gDefaultC
+000049a0: 6f73 742c 6744 6566 6175 6c74 436f 7374  ost,gDefaultCost
+000049b0: 5d29 0d0a 0d0a 2320 696e 6974 2074 6865  ])....# init the
+000049c0: 2064 6166 6175 6c74 2063 6f73 7420 6172   dafault cost ar
+000049d0: 7261 790d 0a64 6566 205f 6164 6443 6f73  ray..def _addCos
+000049e0: 7428 5f63 6f73 7429 203a 0d0a 2020 2020  t(_cost) :..    
+000049f0: 676c 6f62 616c 2067 4973 5761 726d 7570  global gIsWarmup
+00004a00: 0d0a 2020 2020 676c 6f62 616c 2067 6150  ..    global gaP
+00004a10: 726f 6365 7373 5469 6d65 0d0a 2020 2020  rocessTime..    
+00004a20: 6966 2067 4973 5761 726d 7570 3d3d 4661  if gIsWarmup==Fa
+00004a30: 6c73 653a 0d0a 2020 2020 2020 2020 6761  lse:..        ga
+00004a40: 5072 6f63 6573 7354 696d 652e 696e 7365  ProcessTime.inse
+00004a50: 7274 2830 2c20 5f63 6f73 7429 0d0a 2020  rt(0, _cost)..  
+00004a60: 2020 2020 2020 6761 5072 6f63 6573 7354        gaProcessT
+00004a70: 696d 652e 706f 7028 290d 0a0d 0a23 2069  ime.pop()....# i
+00004a80: 6e69 7420 7468 6520 6461 6661 756c 7420  nit the dafault 
+00004a90: 636f 7374 2061 7272 6179 0d0a 6465 6620  cost array..def 
+00004aa0: 5f67 6574 4176 6572 6167 6543 6f73 7428  _getAverageCost(
+00004ab0: 2920 3a0d 0a20 2020 2067 6c6f 6261 6c20  ) :..    global 
+00004ac0: 6761 5072 6f63 6573 7354 696d 650d 0a20  gaProcessTime.. 
+00004ad0: 2020 2061 7665 7261 6765 203d 2073 756d     average = sum
+00004ae0: 2867 6150 726f 6365 7373 5469 6d65 2920  (gaProcessTime) 
+00004af0: 2f20 6c65 6e28 6761 5072 6f63 6573 7354  / len(gaProcessT
+00004b00: 696d 6529 0d0a 2020 2020 7265 7475 726e  ime)..    return
+00004b10: 2061 7665 7261 6765 0d0a 0d0a 2323 202d   average....## -
+00004b20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00004b30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00004b40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00004b50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004b60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004b70: 0d0a 2320 2020 2020 2020 6172 6773 2070  ..#       args p
-00004b80: 726f 6365 7373 696e 670d 0a23 2320 2d2d  rocessing..## --
+00004b60: 2d2d 2d2d 2d2d 2d0d 0a23 2020 2020 2020  -------..#      
+00004b70: 2061 7267 7320 7072 6f63 6573 7369 6e67   args processing
+00004b80: 0d0a 2323 202d 2d2d 2d2d 2d2d 2d2d 2d2d  ..## -----------
 00004b90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00004ba0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00004bb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004bc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004bd0: 2d2d 2d2d 2d2d 0d0a 0d0a 2320 7768 6572  ------....# wher
-00004be0: 6520 6973 2074 6865 206f 7574 7075 7420  e is the output 
-00004bf0: 6469 723f 0d0a 6465 6620 5f67 6574 4f75  dir?..def _getOu
-00004c00: 7470 7574 4469 7228 293a 0d0a 2020 2020  tputDir():..    
-00004c10: 676c 6f62 616c 2067 4172 6773 4f53 4149  global gArgsOSAI
-00004c20: 530d 0a20 2020 2067 6c6f 6261 6c20 674f  S..    global gO
-00004c30: 7574 7075 7444 6972 0d0a 0d0a 2020 2020  utputDir....    
-00004c40: 6966 2067 4172 6773 4f53 4149 5321 3d4e  if gArgsOSAIS!=N
-00004c50: 6f6e 653a 0d0a 2020 2020 2020 2020 7265  one:..        re
-00004c60: 7475 726e 2067 4172 6773 4f53 4149 532e  turn gArgsOSAIS.
-00004c70: 6f75 7464 6972 0d0a 2020 2020 7265 7475  outdir..    retu
-00004c80: 726e 2067 4f75 7470 7574 4469 720d 0a0d  rn gOutputDir...
-00004c90: 0a23 2072 6563 6569 7665 7320 6172 6773  .# receives args
-00004ca0: 2066 726f 6d20 7265 7175 6573 7420 616e   from request an
-00004cb0: 6420 7075 7420 7468 656d 2069 6e20 6120  d put them in a 
-00004cc0: 6172 7261 7920 666f 7220 7072 6f63 6573  array for proces
-00004cd0: 7369 6e67 0d0a 6465 6620 5f67 6574 4172  sing..def _getAr
-00004ce0: 6773 285f 6172 6773 293a 0d0a 2020 2020  gs(_args):..    
-00004cf0: 6152 6573 756c 7420 3d20 5b5d 0d0a 2020  aResult = []..  
-00004d00: 2020 666f 7220 6b65 792c 2076 616c 7565    for key, value
-00004d10: 2069 6e20 5f61 7267 732e 6974 656d 7328   in _args.items(
-00004d20: 293a 0d0a 2020 2020 2020 2020 6966 206b  ):..        if k
-00004d30: 6579 2e73 7461 7274 7377 6974 6828 222d  ey.startswith("-
-00004d40: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
-00004d50: 2061 5265 7375 6c74 2e61 7070 656e 6428   aResult.append(
-00004d60: 6b65 7929 0d0a 2020 2020 2020 2020 2020  key)..          
-00004d70: 2020 6152 6573 756c 742e 6170 7065 6e64    aResult.append
-00004d80: 2876 616c 7565 290d 0a20 2020 2072 6574  (value)..    ret
-00004d90: 7572 6e20 6152 6573 756c 740d 0a0d 0a23  urn aResult....#
-00004da0: 2067 6976 6520 6e65 7720 6172 6773 200d   give new args .
-00004db0: 0a64 6566 205f 6172 6773 4672 6f6d 4669  .def _argsFromFi
-00004dc0: 6c74 6572 285f 6f72 6967 696e 616c 4172  lter(_originalAr
-00004dd0: 6773 2c20 5f61 4669 6c74 6572 2c20 5f62  gs, _aFilter, _b
-00004de0: 4b65 6570 293a 0d0a 2020 2020 6672 6f6d  Keep):..    from
-00004df0: 2077 6572 6b7a 6575 672e 6461 7461 7374   werkzeug.datast
-00004e00: 7275 6374 7572 6573 2069 6d70 6f72 7420  ructures import 
-00004e10: 4d75 6c74 6944 6963 740d 0a20 2020 205f  MultiDict..    _
-00004e20: 6469 6374 203d 204d 756c 7469 4469 6374  dict = MultiDict
-00004e30: 285b 5d29 0d0a 2020 2020 666f 7220 692c  ([])..    for i,
-00004e40: 2061 7267 2069 6e20 656e 756d 6572 6174   arg in enumerat
-00004e50: 6528 5f6f 7269 6769 6e61 6c41 7267 7329  e(_originalArgs)
-00004e60: 3a0d 0a20 2020 2020 2020 2069 6620 5f62  :..        if _b
-00004e70: 4b65 6570 3a0d 0a20 2020 2020 2020 2020  Keep:..         
-00004e80: 2020 2069 6620 6172 6720 696e 205f 6146     if arg in _aF
-00004e90: 696c 7465 7220 616e 6420 6920 3c20 6c65  ilter and i < le
-00004ea0: 6e28 5f6f 7269 6769 6e61 6c41 7267 7329  n(_originalArgs)
-00004eb0: 202d 2031 3a0d 0a20 2020 2020 2020 2020   - 1:..         
-00004ec0: 2020 2020 2020 205f 6469 6374 2e61 6464         _dict.add
-00004ed0: 2861 7267 2c20 5f6f 7269 6769 6e61 6c41  (arg, _originalA
-00004ee0: 7267 735b 692b 315d 290d 0a20 2020 2020  rgs[i+1])..     
-00004ef0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-00004f00: 2020 2020 2020 6966 2061 7267 206e 6f74        if arg not
-00004f10: 2069 6e20 5f61 4669 6c74 6572 2061 6e64   in _aFilter and
-00004f20: 2069 203c 206c 656e 285f 6f72 6967 696e   i < len(_origin
-00004f30: 616c 4172 6773 2920 2d20 313a 0d0a 2020  alArgs) - 1:..  
-00004f40: 2020 2020 2020 2020 2020 2020 2020 5f64                _d
-00004f50: 6963 742e 6164 6428 6172 672c 205f 6f72  ict.add(arg, _or
-00004f60: 6967 696e 616c 4172 6773 5b69 2b31 5d29  iginalArgs[i+1])
-00004f70: 0d0a 2020 2020 0d0a 2020 2020 5f61 7267  ..    ..    _arg
-00004f80: 733d 5f67 6574 4172 6773 285f 6469 6374  s=_getArgs(_dict
-00004f90: 290d 0a20 2020 2072 6574 7572 6e20 5f61  )..    return _a
-00004fa0: 7267 730d 0a0d 0a23 2320 2d2d 2d2d 2d2d  rgs....## ------
+00004bc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a0d  -------------...
+00004bd0: 0a23 2077 6865 7265 2069 7320 7468 6520  .# where is the 
+00004be0: 6f75 7470 7574 2064 6972 3f0d 0a64 6566  output dir?..def
+00004bf0: 205f 6765 744f 7574 7075 7444 6972 2829   _getOutputDir()
+00004c00: 3a0d 0a20 2020 2067 6c6f 6261 6c20 6741  :..    global gA
+00004c10: 7267 734f 5341 4953 0d0a 2020 2020 676c  rgsOSAIS..    gl
+00004c20: 6f62 616c 2067 4f75 7470 7574 4469 720d  obal gOutputDir.
+00004c30: 0a0d 0a20 2020 2069 6620 6741 7267 734f  ...    if gArgsO
+00004c40: 5341 4953 213d 4e6f 6e65 3a0d 0a20 2020  SAIS!=None:..   
+00004c50: 2020 2020 2072 6574 7572 6e20 6741 7267       return gArg
+00004c60: 734f 5341 4953 2e6f 7574 6469 720d 0a20  sOSAIS.outdir.. 
+00004c70: 2020 2072 6574 7572 6e20 674f 7574 7075     return gOutpu
+00004c80: 7444 6972 0d0a 0d0a 2320 7265 6365 6976  tDir....# receiv
+00004c90: 6573 2061 7267 7320 6672 6f6d 2072 6571  es args from req
+00004ca0: 7565 7374 2061 6e64 2070 7574 2074 6865  uest and put the
+00004cb0: 6d20 696e 2061 2061 7272 6179 2066 6f72  m in a array for
+00004cc0: 2070 726f 6365 7373 696e 670d 0a64 6566   processing..def
+00004cd0: 205f 6765 7441 7267 7328 5f61 7267 7329   _getArgs(_args)
+00004ce0: 3a0d 0a20 2020 2061 5265 7375 6c74 203d  :..    aResult =
+00004cf0: 205b 5d0d 0a20 2020 2066 6f72 206b 6579   []..    for key
+00004d00: 2c20 7661 6c75 6520 696e 205f 6172 6773  , value in _args
+00004d10: 2e69 7465 6d73 2829 3a0d 0a20 2020 2020  .items():..     
+00004d20: 2020 2069 6620 6b65 792e 7374 6172 7473     if key.starts
+00004d30: 7769 7468 2822 2d22 293a 0d0a 2020 2020  with("-"):..    
+00004d40: 2020 2020 2020 2020 6152 6573 756c 742e          aResult.
+00004d50: 6170 7065 6e64 286b 6579 290d 0a20 2020  append(key)..   
+00004d60: 2020 2020 2020 2020 2061 5265 7375 6c74           aResult
+00004d70: 2e61 7070 656e 6428 7661 6c75 6529 0d0a  .append(value)..
+00004d80: 2020 2020 7265 7475 726e 2061 5265 7375      return aResu
+00004d90: 6c74 0d0a 0d0a 2320 6769 7665 206e 6577  lt....# give new
+00004da0: 2061 7267 7320 0d0a 6465 6620 5f61 7267   args ..def _arg
+00004db0: 7346 726f 6d46 696c 7465 7228 5f6f 7269  sFromFilter(_ori
+00004dc0: 6769 6e61 6c41 7267 732c 205f 6146 696c  ginalArgs, _aFil
+00004dd0: 7465 722c 205f 624b 6565 7029 3a0d 0a20  ter, _bKeep):.. 
+00004de0: 2020 2066 726f 6d20 7765 726b 7a65 7567     from werkzeug
+00004df0: 2e64 6174 6173 7472 7563 7475 7265 7320  .datastructures 
+00004e00: 696d 706f 7274 204d 756c 7469 4469 6374  import MultiDict
+00004e10: 0d0a 2020 2020 5f64 6963 7420 3d20 4d75  ..    _dict = Mu
+00004e20: 6c74 6944 6963 7428 5b5d 290d 0a20 2020  ltiDict([])..   
+00004e30: 2066 6f72 2069 2c20 6172 6720 696e 2065   for i, arg in e
+00004e40: 6e75 6d65 7261 7465 285f 6f72 6967 696e  numerate(_origin
+00004e50: 616c 4172 6773 293a 0d0a 2020 2020 2020  alArgs):..      
+00004e60: 2020 6966 205f 624b 6565 703a 0d0a 2020    if _bKeep:..  
+00004e70: 2020 2020 2020 2020 2020 6966 2061 7267            if arg
+00004e80: 2069 6e20 5f61 4669 6c74 6572 2061 6e64   in _aFilter and
+00004e90: 2069 203c 206c 656e 285f 6f72 6967 696e   i < len(_origin
+00004ea0: 616c 4172 6773 2920 2d20 313a 0d0a 2020  alArgs) - 1:..  
+00004eb0: 2020 2020 2020 2020 2020 2020 2020 5f64                _d
+00004ec0: 6963 742e 6164 6428 6172 672c 205f 6f72  ict.add(arg, _or
+00004ed0: 6967 696e 616c 4172 6773 5b69 2b31 5d29  iginalArgs[i+1])
+00004ee0: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
+00004ef0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00004f00: 6172 6720 6e6f 7420 696e 205f 6146 696c  arg not in _aFil
+00004f10: 7465 7220 616e 6420 6920 3c20 6c65 6e28  ter and i < len(
+00004f20: 5f6f 7269 6769 6e61 6c41 7267 7329 202d  _originalArgs) -
+00004f30: 2031 3a0d 0a20 2020 2020 2020 2020 2020   1:..           
+00004f40: 2020 2020 205f 6469 6374 2e61 6464 2861       _dict.add(a
+00004f50: 7267 2c20 5f6f 7269 6769 6e61 6c41 7267  rg, _originalArg
+00004f60: 735b 692b 315d 290d 0a20 2020 200d 0a20  s[i+1])..    .. 
+00004f70: 2020 205f 6172 6773 3d5f 6765 7441 7267     _args=_getArg
+00004f80: 7328 5f64 6963 7429 0d0a 2020 2020 7265  s(_dict)..    re
+00004f90: 7475 726e 205f 6172 6773 0d0a 0d0a 2323  turn _args....##
+00004fa0: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
 00004fb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00004fc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00004fd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004fe0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004ff0: 2d2d 0d0a 2320 2020 2020 2020 5379 7374  --..#       Syst
-00005000: 656d 2069 6e66 6f0d 0a23 2320 2d2d 2d2d  em info..## ----
+00004fe0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a23 2020 2020  ---------..#    
+00004ff0: 2020 2053 7973 7465 6d20 696e 666f 0d0a     System info..
+00005000: 2323 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ## -------------
 00005010: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00005020: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00005030: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005040: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005050: 2d2d 2d2d 0d0a 0d0a 6465 6620 5f63 6c65  ----....def _cle
-00005060: 6172 4469 7228 293a 0d0a 2020 2020 636c  arDir():..    cl
-00005070: 6561 724f 6c64 4669 6c65 7328 6749 6e70  earOldFiles(gInp
-00005080: 7574 4469 7229 0d0a 2020 2020 636c 6561  utDir)..    clea
-00005090: 724f 6c64 4669 6c65 7328 674f 7574 7075  rOldFiles(gOutpu
-000050a0: 7444 6972 290d 0a0d 0a23 2320 5055 424c  tDir)....## PUBL
-000050b0: 4943 202d 2069 6e66 6f20 6162 6f75 7420  IC - info about 
-000050c0: 6861 7277 6172 6520 7468 6973 2041 4920  harware this AI 
-000050d0: 6973 2072 756e 6e69 6e67 206f 6e0d 0a64  is running on..d
-000050e0: 6566 206f 7361 6973 5f67 6574 4861 7277  ef osais_getHarw
-000050f0: 6172 6549 6e66 6f28 2920 3a0d 0a20 2020  areInfo() :..   
-00005100: 2067 6c6f 6261 6c20 674e 616d 650d 0a20   global gName.. 
-00005110: 2020 2072 6574 7572 6e20 6765 7448 6f73     return getHos
-00005120: 7449 6e66 6f28 674e 616d 6529 0d0a 0d0a  tInfo(gName)....
-00005130: 2323 2050 5542 4c49 4320 2d20 6765 7420  ## PUBLIC - get 
-00005140: 6c69 7374 206f 6620 6669 6c65 7320 696e  list of files in
-00005150: 2061 2064 6972 2028 6368 6563 6b20 7768   a dir (check wh
-00005160: 6174 2077 6173 2067 656e 6572 6174 6564  at was generated
-00005170: 290d 0a64 6566 206f 7361 6973 5f67 6574  )..def osais_get
-00005180: 4469 7265 6374 6f72 794c 6973 7469 6e67  DirectoryListing
-00005190: 285f 6469 7229 203a 0d0a 2020 2020 7265  (_dir) :..    re
-000051a0: 7475 726e 206c 6973 7444 6972 436f 6e74  turn listDirCont
-000051b0: 656e 7428 5f64 6972 290d 0a0d 0a23 2320  ent(_dir)....## 
-000051c0: 5055 424c 4943 202d 2069 6e66 6f20 6162  PUBLIC - info ab
-000051d0: 6f75 7420 7468 6973 2041 490d 0a64 6566  out this AI..def
-000051e0: 206f 7361 6973 5f67 6574 496e 666f 2829   osais_getInfo()
-000051f0: 203a 0d0a 2020 2020 676c 6f62 616c 2067   :..    global g
-00005200: 4578 7449 500d 0a20 2020 2067 6c6f 6261  ExtIP..    globa
-00005210: 6c20 6750 6f72 7441 490d 0a20 2020 2067  l gPortAI..    g
-00005220: 6c6f 6261 6c20 674e 616d 650d 0a20 2020  lobal gName..   
-00005230: 2067 6c6f 6261 6c20 6756 6572 7369 6f6e   global gVersion
-00005240: 0d0a 2020 2020 676c 6f62 616c 2067 4973  ..    global gIs
-00005250: 446f 636b 6572 0d0a 2020 2020 676c 6f62  Docker..    glob
-00005260: 616c 2067 4d61 6368 696e 654e 616d 650d  al gMachineName.
-00005270: 0a20 2020 2067 6c6f 6261 6c20 6755 7365  .    global gUse
-00005280: 726e 616d 650d 0a20 2020 2067 6c6f 6261  rname..    globa
-00005290: 6c20 6749 7342 7573 790d 0a20 2020 2067  l gIsBusy..    g
-000052a0: 6c6f 6261 6c20 674c 6173 7450 726f 6365  lobal gLastProce
-000052b0: 7373 5374 6172 745f 6174 0d0a 2020 2020  ssStart_at..    
-000052c0: 676c 6f62 616c 2067 4c61 7374 4368 6563  global gLastChec
-000052d0: 6b65 645f 6174 0d0a 0d0a 2020 2020 6f62  ked_at....    ob
-000052e0: 6a43 6f6e 663d 5f67 6574 4675 6c6c 436f  jConf=_getFullCo
-000052f0: 6e66 6967 2867 4e61 6d65 290d 0a0d 0a20  nfig(gName).... 
-00005300: 2020 2072 6574 7572 6e20 7b0d 0a20 2020     return {..   
-00005310: 2020 2020 2022 6e61 6d65 223a 2067 4e61       "name": gNa
-00005320: 6d65 2c0d 0a20 2020 2020 2020 2022 7665  me,..        "ve
-00005330: 7273 696f 6e22 3a20 6756 6572 7369 6f6e  rsion": gVersion
-00005340: 2c0d 0a20 2020 2020 2020 2022 6c6f 6361  ,..        "loca
-00005350: 7469 6f6e 223a 2066 227b 6745 7874 4950  tion": f"{gExtIP
-00005360: 7d3a 7b67 506f 7274 4149 7d2f 222c 0d0a  }:{gPortAI}/",..
-00005370: 2020 2020 2020 2020 2269 7352 756e 6e69          "isRunni
-00005380: 6e67 223a 2054 7275 652c 2020 2020 0d0a  ng": True,    ..
-00005390: 2020 2020 2020 2020 2269 7344 6f63 6b65          "isDocke
-000053a0: 7222 3a20 6749 7344 6f63 6b65 722c 2020  r": gIsDocker,  
-000053b0: 2020 0d0a 2020 2020 2020 2020 226c 6173    ..        "las
-000053c0: 7441 6374 6976 655f 6174 223a 2067 4c61  tActive_at": gLa
-000053d0: 7374 4368 6563 6b65 645f 6174 2c0d 0a20  stChecked_at,.. 
-000053e0: 2020 2020 2020 2022 6c61 7374 5072 6f63         "lastProc
-000053f0: 6573 7353 7461 7274 5f61 7422 3a20 674c  essStart_at": gL
-00005400: 6173 7450 726f 6365 7373 5374 6172 745f  astProcessStart_
-00005410: 6174 2c0d 0a20 2020 2020 2020 2022 6d61  at,..        "ma
-00005420: 6368 696e 6522 3a20 674d 6163 6869 6e65  chine": gMachine
-00005430: 4e61 6d65 2c0d 0a20 2020 2020 2020 2022  Name,..        "
-00005440: 6f77 6e65 7222 3a20 6755 7365 726e 616d  owner": gUsernam
-00005450: 652c 200d 0a20 2020 2020 2020 2022 6973  e, ..        "is
-00005460: 4176 6169 6c61 626c 6522 3a20 2867 4973  Available": (gIs
-00005470: 4275 7379 3d3d 4661 6c73 6529 2c0d 0a20  Busy==False),.. 
-00005480: 2020 2020 2020 2022 6176 6572 6167 6552         "averageR
-00005490: 6573 706f 6e73 6554 696d 6522 3a20 5f67  esponseTime": _g
-000054a0: 6574 4176 6572 6167 6543 6f73 7428 292c  etAverageCost(),
-000054b0: 200d 0a20 2020 2020 2020 2022 6a73 6f6e   ..        "json
-000054c0: 223a 206f 626a 436f 6e66 5b22 656e 6769  ": objConf["engi
-000054d0: 6e65 225d 0d0a 2020 2020 7d0d 0a0d 0a23  ne"]..    }....#
-000054e0: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
+00005040: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a0d 0a64  -----------....d
+00005050: 6566 205f 636c 6561 7244 6972 2829 3a0d  ef _clearDir():.
+00005060: 0a20 2020 2063 6c65 6172 4f6c 6446 696c  .    clearOldFil
+00005070: 6573 2867 496e 7075 7444 6972 290d 0a20  es(gInputDir).. 
+00005080: 2020 2063 6c65 6172 4f6c 6446 696c 6573     clearOldFiles
+00005090: 2867 4f75 7470 7574 4469 7229 0d0a 0d0a  (gOutputDir)....
+000050a0: 2323 2050 5542 4c49 4320 2d20 696e 666f  ## PUBLIC - info
+000050b0: 2061 626f 7574 2068 6172 7761 7265 2074   about harware t
+000050c0: 6869 7320 4149 2069 7320 7275 6e6e 696e  his AI is runnin
+000050d0: 6720 6f6e 0d0a 6465 6620 6f73 6169 735f  g on..def osais_
+000050e0: 6765 7448 6172 7761 7265 496e 666f 2829  getHarwareInfo()
+000050f0: 203a 0d0a 2020 2020 676c 6f62 616c 2067   :..    global g
+00005100: 4e61 6d65 0d0a 2020 2020 7265 7475 726e  Name..    return
+00005110: 2067 6574 486f 7374 496e 666f 2867 4e61   getHostInfo(gNa
+00005120: 6d65 290d 0a0d 0a23 2320 5055 424c 4943  me)....## PUBLIC
+00005130: 202d 2067 6574 206c 6973 7420 6f66 2066   - get list of f
+00005140: 696c 6573 2069 6e20 6120 6469 7220 2863  iles in a dir (c
+00005150: 6865 636b 2077 6861 7420 7761 7320 6765  heck what was ge
+00005160: 6e65 7261 7465 6429 0d0a 6465 6620 6f73  nerated)..def os
+00005170: 6169 735f 6765 7444 6972 6563 746f 7279  ais_getDirectory
+00005180: 4c69 7374 696e 6728 5f64 6972 2920 3a0d  Listing(_dir) :.
+00005190: 0a20 2020 2072 6574 7572 6e20 6c69 7374  .    return list
+000051a0: 4469 7243 6f6e 7465 6e74 285f 6469 7229  DirContent(_dir)
+000051b0: 0d0a 0d0a 2323 2050 5542 4c49 4320 2d20  ....## PUBLIC - 
+000051c0: 696e 666f 2061 626f 7574 2074 6869 7320  info about this 
+000051d0: 4149 0d0a 6465 6620 6f73 6169 735f 6765  AI..def osais_ge
+000051e0: 7449 6e66 6f28 2920 3a0d 0a20 2020 2067  tInfo() :..    g
+000051f0: 6c6f 6261 6c20 6745 7874 4950 0d0a 2020  lobal gExtIP..  
+00005200: 2020 676c 6f62 616c 2067 506f 7274 4149    global gPortAI
+00005210: 0d0a 2020 2020 676c 6f62 616c 2067 4e61  ..    global gNa
+00005220: 6d65 0d0a 2020 2020 676c 6f62 616c 2067  me..    global g
+00005230: 5665 7273 696f 6e0d 0a20 2020 2067 6c6f  Version..    glo
+00005240: 6261 6c20 6749 7344 6f63 6b65 720d 0a20  bal gIsDocker.. 
+00005250: 2020 2067 6c6f 6261 6c20 674d 6163 6869     global gMachi
+00005260: 6e65 4e61 6d65 0d0a 2020 2020 676c 6f62  neName..    glob
+00005270: 616c 2067 5573 6572 6e61 6d65 0d0a 2020  al gUsername..  
+00005280: 2020 676c 6f62 616c 2067 4973 4275 7379    global gIsBusy
+00005290: 0d0a 2020 2020 676c 6f62 616c 2067 4c61  ..    global gLa
+000052a0: 7374 5072 6f63 6573 7353 7461 7274 5f61  stProcessStart_a
+000052b0: 740d 0a20 2020 2067 6c6f 6261 6c20 674c  t..    global gL
+000052c0: 6173 7443 6865 636b 6564 5f61 740d 0a0d  astChecked_at...
+000052d0: 0a20 2020 206f 626a 436f 6e66 3d5f 6765  .    objConf=_ge
+000052e0: 7446 756c 6c43 6f6e 6669 6728 674e 616d  tFullConfig(gNam
+000052f0: 6529 0d0a 0d0a 2020 2020 7265 7475 726e  e)....    return
+00005300: 207b 0d0a 2020 2020 2020 2020 226e 616d   {..        "nam
+00005310: 6522 3a20 674e 616d 652c 0d0a 2020 2020  e": gName,..    
+00005320: 2020 2020 2276 6572 7369 6f6e 223a 2067      "version": g
+00005330: 5665 7273 696f 6e2c 0d0a 2020 2020 2020  Version,..      
+00005340: 2020 226c 6f63 6174 696f 6e22 3a20 6622    "location": f"
+00005350: 7b67 4578 7449 507d 3a7b 6750 6f72 7441  {gExtIP}:{gPortA
+00005360: 497d 2f22 2c0d 0a20 2020 2020 2020 2022  I}/",..        "
+00005370: 6973 5275 6e6e 696e 6722 3a20 5472 7565  isRunning": True
+00005380: 2c20 2020 200d 0a20 2020 2020 2020 2022  ,    ..        "
+00005390: 6973 446f 636b 6572 223a 2067 4973 446f  isDocker": gIsDo
+000053a0: 636b 6572 2c20 2020 200d 0a20 2020 2020  cker,    ..     
+000053b0: 2020 2022 6c61 7374 4163 7469 7665 5f61     "lastActive_a
+000053c0: 7422 3a20 674c 6173 7443 6865 636b 6564  t": gLastChecked
+000053d0: 5f61 742c 0d0a 2020 2020 2020 2020 226c  _at,..        "l
+000053e0: 6173 7450 726f 6365 7373 5374 6172 745f  astProcessStart_
+000053f0: 6174 223a 2067 4c61 7374 5072 6f63 6573  at": gLastProces
+00005400: 7353 7461 7274 5f61 742c 0d0a 2020 2020  sStart_at,..    
+00005410: 2020 2020 226d 6163 6869 6e65 223a 2067      "machine": g
+00005420: 4d61 6368 696e 654e 616d 652c 0d0a 2020  MachineName,..  
+00005430: 2020 2020 2020 226f 776e 6572 223a 2067        "owner": g
+00005440: 5573 6572 6e61 6d65 2c20 0d0a 2020 2020  Username, ..    
+00005450: 2020 2020 2269 7341 7661 696c 6162 6c65      "isAvailable
+00005460: 223a 2028 6749 7342 7573 793d 3d46 616c  ": (gIsBusy==Fal
+00005470: 7365 292c 0d0a 2020 2020 2020 2020 2261  se),..        "a
+00005480: 7665 7261 6765 5265 7370 6f6e 7365 5469  verageResponseTi
+00005490: 6d65 223a 205f 6765 7441 7665 7261 6765  me": _getAverage
+000054a0: 436f 7374 2829 2c20 0d0a 2020 2020 2020  Cost(), ..      
+000054b0: 2020 226a 736f 6e22 3a20 6f62 6a43 6f6e    "json": objCon
+000054c0: 665b 2265 6e67 696e 6522 5d0d 0a20 2020  f["engine"]..   
+000054d0: 207d 0d0a 0d0a 2323 202d 2d2d 2d2d 2d2d   }....## -------
+000054e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000054f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00005500: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00005510: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005520: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2320 2020  ----------..#   
-00005530: 2020 2020 636f 6e6e 6563 7420 746f 2047      connect to G
-00005540: 6174 6577 6179 0d0a 2323 202d 2d2d 2d2d  ateway..## -----
+00005520: 2d0d 0a23 2020 2020 2020 2063 6f6e 6e65  -..#       conne
+00005530: 6374 2074 6f20 4761 7465 7761 790d 0a23  ct to Gateway..#
+00005540: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
 00005550: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00005560: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00005570: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005580: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005590: 2d2d 2d0d 0a0d 0a23 206e 6f74 6966 7920  ---....# notify 
-000055a0: 7468 6520 6761 7465 7761 7920 6f66 206f  the gateway of o
-000055b0: 7572 2041 4920 636f 6e66 6967 2066 696c  ur AI config fil
-000055c0: 650d 0a64 6566 205f 6e6f 7469 6679 4761  e..def _notifyGa
-000055d0: 7465 7761 7928 2920 3a20 0d0a 2020 2020  teway() : ..    
-000055e0: 676c 6f62 616c 2067 4e61 6d65 0d0a 2020  global gName..  
-000055f0: 2020 676c 6f62 616c 2067 4f72 6967 696e    global gOrigin
-00005600: 4761 7465 7761 790d 0a0d 0a20 2020 2068  Gateway....    h
-00005610: 6561 6465 7273 203d 207b 0d0a 2020 2020  eaders = {..    
-00005620: 2020 2020 2243 6f6e 7465 6e74 2d54 7970      "Content-Typ
-00005630: 6522 3a20 2761 7070 6c69 6361 7469 6f6e  e": 'application
-00005640: 2f6a 736f 6e27 2c20 0d0a 2020 2020 2020  /json', ..      
-00005650: 2020 2741 6363 6570 7427 3a20 2774 6578    'Accept': 'tex
-00005660: 742f 706c 6169 6e27 2c0d 0a20 2020 207d  t/plain',..    }
-00005670: 0d0a 2020 2020 6f62 6a50 6172 616d 3d5f  ..    objParam=_
-00005680: 6765 7446 756c 6c43 6f6e 6669 6728 674e  getFullConfig(gN
-00005690: 616d 6529 0d0a 0d0a 2020 2020 2323 206e  ame)....    ## n
-000056a0: 6f74 6966 7920 6761 7465 7761 790d 0a20  otify gateway.. 
-000056b0: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
-000056c0: 2072 6573 706f 6e73 6520 3d20 7265 7175   response = requ
-000056d0: 6573 7473 2e70 6f73 7428 6622 7b67 4f72  ests.post(f"{gOr
-000056e0: 6967 696e 4761 7465 7761 797d 6170 692f  iginGateway}api/
-000056f0: 7631 2f70 7562 6c69 632f 6169 2f63 6f6e  v1/public/ai/con
-00005700: 6669 6722 2c20 6865 6164 6572 733d 6865  fig", headers=he
-00005710: 6164 6572 732c 2064 6174 613d 6a73 6f6e  aders, data=json
-00005720: 2e64 756d 7073 286f 626a 5061 7261 6d29  .dumps(objParam)
-00005730: 290d 0a20 2020 2020 2020 206f 626a 5265  )..        objRe
-00005740: 733d 7265 7370 6f6e 7365 2e6a 736f 6e28  s=response.json(
-00005750: 295b 2264 6174 6122 5d0d 0a20 2020 2020  )["data"]..     
-00005760: 2020 2069 6620 6f62 6a52 6573 2069 7320     if objRes is 
-00005770: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
-00005780: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
-00005790: 726f 7228 2243 5249 5449 4341 4c3a 2063  ror("CRITICAL: c
-000057a0: 6f75 6c64 206e 6f74 206e 6f74 6966 7920  ould not notify 
-000057b0: 4761 7465 7761 7922 290d 0a0d 0a20 2020  Gateway")....   
-000057c0: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
-000057d0: 6e20 6173 2065 7272 3a0d 0a20 2020 2020  n as err:..     
-000057e0: 2020 2070 7269 6e74 2822 4352 4954 4943     print("CRITIC
-000057f0: 414c 3a20 222b 6572 722e 6d73 6729 0d0a  AL: "+err.msg)..
-00005800: 2020 2020 2020 2020 7261 6973 6520 6572          raise er
-00005810: 720d 0a20 2020 2072 6574 7572 6e20 5472  r..    return Tr
-00005820: 7565 0d0a 0d0a 2323 2050 5542 4c49 4320  ue....## PUBLIC 
-00005830: 2d20 5265 7365 7420 636f 6e6e 6563 7469  - Reset connecti
-00005840: 6f6e 2074 6f20 6c6f 6361 6c20 6761 7465  on to local gate
-00005850: 7761 790d 0a64 6566 206f 7361 6973 5f72  way..def osais_r
-00005860: 6573 6574 4761 7465 7761 7928 5f6c 6f63  esetGateway(_loc
-00005870: 616c 4761 7465 7761 7929 3a0d 0a20 2020  alGateway):..   
-00005880: 2067 6c6f 6261 6c20 674f 7269 6769 6e47   global gOriginG
-00005890: 6174 6577 6179 0d0a 2020 2020 674f 7269  ateway..    gOri
-000058a0: 6769 6e47 6174 6577 6179 3d5f 6c6f 6361  ginGateway=_loca
-000058b0: 6c47 6174 6577 6179 0d0a 2020 2020 7472  lGateway..    tr
-000058c0: 793a 0d0a 2020 2020 2020 2020 5f6e 6f74  y:..        _not
-000058d0: 6966 7947 6174 6577 6179 2829 0d0a 2020  ifyGateway()..  
-000058e0: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
-000058f0: 6f6e 2061 7320 6572 723a 0d0a 2020 2020  on as err:..    
-00005900: 2020 2020 7072 696e 7428 2243 5249 5449      print("CRITI
-00005910: 4341 4c3a 2022 2b65 7272 2e6d 7367 290d  CAL: "+err.msg).
-00005920: 0a20 2020 2020 2020 2072 6169 7365 2065  .        raise e
-00005930: 7272 0d0a 2020 2020 0d0a 2020 2020 7072  rr..    ..    pr
-00005940: 696e 7428 223d 3e20 5468 6973 2041 4920  int("=> This AI 
-00005950: 6973 2072 6573 6574 2074 6f20 7461 6c6b  is reset to talk
-00005960: 2074 6f20 4761 7465 7761 7920 222b 5f6c   to Gateway "+_l
-00005970: 6f63 616c 4761 7465 7761 7929 0d0a 2020  ocalGateway)..  
-00005980: 2020 7265 7475 726e 2054 7275 650d 0a0d    return True...
-00005990: 0a23 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .## ------------
+00005580: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 0d0a 2320  ----------....# 
+00005590: 6e6f 7469 6679 2074 6865 2067 6174 6577  notify the gatew
+000055a0: 6179 206f 6620 6f75 7220 4149 2063 6f6e  ay of our AI con
+000055b0: 6669 6720 6669 6c65 0d0a 6465 6620 5f6e  fig file..def _n
+000055c0: 6f74 6966 7947 6174 6577 6179 2829 203a  otifyGateway() :
+000055d0: 200d 0a20 2020 2067 6c6f 6261 6c20 674e   ..    global gN
+000055e0: 616d 650d 0a20 2020 2067 6c6f 6261 6c20  ame..    global 
+000055f0: 674f 7269 6769 6e47 6174 6577 6179 0d0a  gOriginGateway..
+00005600: 0d0a 2020 2020 6865 6164 6572 7320 3d20  ..    headers = 
+00005610: 7b0d 0a20 2020 2020 2020 2022 436f 6e74  {..        "Cont
+00005620: 656e 742d 5479 7065 223a 2027 6170 706c  ent-Type": 'appl
+00005630: 6963 6174 696f 6e2f 6a73 6f6e 272c 200d  ication/json', .
+00005640: 0a20 2020 2020 2020 2027 4163 6365 7074  .        'Accept
+00005650: 273a 2027 7465 7874 2f70 6c61 696e 272c  ': 'text/plain',
+00005660: 0d0a 2020 2020 7d0d 0a20 2020 206f 626a  ..    }..    obj
+00005670: 5061 7261 6d3d 5f67 6574 4675 6c6c 436f  Param=_getFullCo
+00005680: 6e66 6967 2867 4e61 6d65 290d 0a0d 0a20  nfig(gName).... 
+00005690: 2020 2023 2320 6e6f 7469 6679 2067 6174     ## notify gat
+000056a0: 6577 6179 0d0a 2020 2020 7472 793a 0d0a  eway..    try:..
+000056b0: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
+000056c0: 203d 2072 6571 7565 7374 732e 706f 7374   = requests.post
+000056d0: 2866 227b 674f 7269 6769 6e47 6174 6577  (f"{gOriginGatew
+000056e0: 6179 7d61 7069 2f76 312f 7075 626c 6963  ay}api/v1/public
+000056f0: 2f61 692f 636f 6e66 6967 222c 2068 6561  /ai/config", hea
+00005700: 6465 7273 3d68 6561 6465 7273 2c20 6461  ders=headers, da
+00005710: 7461 3d6a 736f 6e2e 6475 6d70 7328 6f62  ta=json.dumps(ob
+00005720: 6a50 6172 616d 2929 0d0a 2020 2020 2020  jParam))..      
+00005730: 2020 6f62 6a52 6573 3d72 6573 706f 6e73    objRes=respons
+00005740: 652e 6a73 6f6e 2829 5b22 6461 7461 225d  e.json()["data"]
+00005750: 0d0a 2020 2020 2020 2020 6966 206f 626a  ..        if obj
+00005760: 5265 7320 6973 204e 6f6e 653a 0d0a 2020  Res is None:..  
+00005770: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00005780: 5661 6c75 6545 7272 6f72 2822 4352 4954  ValueError("CRIT
+00005790: 4943 414c 3a20 636f 756c 6420 6e6f 7420  ICAL: could not 
+000057a0: 6e6f 7469 6679 2047 6174 6577 6179 2229  notify Gateway")
+000057b0: 0d0a 0d0a 2020 2020 6578 6365 7074 2045  ....    except E
+000057c0: 7863 6570 7469 6f6e 2061 7320 6572 723a  xception as err:
+000057d0: 0d0a 2020 2020 2020 2020 7072 696e 7428  ..        print(
+000057e0: 2243 5249 5449 4341 4c3a 2022 2b65 7272  "CRITICAL: "+err
+000057f0: 2e6d 7367 290d 0a20 2020 2020 2020 2072  .msg)..        r
+00005800: 6169 7365 2065 7272 0d0a 2020 2020 7265  aise err..    re
+00005810: 7475 726e 2054 7275 650d 0a0d 0a23 2320  turn True....## 
+00005820: 5055 424c 4943 202d 2052 6573 6574 2063  PUBLIC - Reset c
+00005830: 6f6e 6e65 6374 696f 6e20 746f 206c 6f63  onnection to loc
+00005840: 616c 2067 6174 6577 6179 0d0a 6465 6620  al gateway..def 
+00005850: 6f73 6169 735f 7265 7365 7447 6174 6577  osais_resetGatew
+00005860: 6179 285f 6c6f 6361 6c47 6174 6577 6179  ay(_localGateway
+00005870: 293a 0d0a 2020 2020 676c 6f62 616c 2067  ):..    global g
+00005880: 4f72 6967 696e 4761 7465 7761 790d 0a20  OriginGateway.. 
+00005890: 2020 2067 4f72 6967 696e 4761 7465 7761     gOriginGatewa
+000058a0: 793d 5f6c 6f63 616c 4761 7465 7761 790d  y=_localGateway.
+000058b0: 0a20 2020 2074 7279 3a0d 0a20 2020 2020  .    try:..     
+000058c0: 2020 205f 6e6f 7469 6679 4761 7465 7761     _notifyGatewa
+000058d0: 7928 290d 0a20 2020 2065 7863 6570 7420  y()..    except 
+000058e0: 4578 6365 7074 696f 6e20 6173 2065 7272  Exception as err
+000058f0: 3a0d 0a20 2020 2020 2020 2070 7269 6e74  :..        print
+00005900: 2822 4352 4954 4943 414c 3a20 222b 6572  ("CRITICAL: "+er
+00005910: 722e 6d73 6729 0d0a 2020 2020 2020 2020  r.msg)..        
+00005920: 7261 6973 6520 6572 720d 0a20 2020 200d  raise err..    .
+00005930: 0a20 2020 2070 7269 6e74 2822 3d3e 2054  .    print("=> T
+00005940: 6869 7320 4149 2069 7320 7265 7365 7420  his AI is reset 
+00005950: 746f 2074 616c 6b20 746f 2047 6174 6577  to talk to Gatew
+00005960: 6179 2022 2b5f 6c6f 6361 6c47 6174 6577  ay "+_localGatew
+00005970: 6179 290d 0a20 2020 2072 6574 7572 6e20  ay)..    return 
+00005980: 5472 7565 0d0a 0d0a 2323 202d 2d2d 2d2d  True....## -----
+00005990: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000059a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000059b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000059c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000059d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2320  ------------..# 
-000059e0: 2020 2020 2020 6175 7468 656e 7469 6361        authentica
-000059f0: 7465 2069 6e74 6f20 4f53 4149 5320 6173  te into OSAIS as
-00005a00: 2076 6972 7475 616c 2041 490d 0a23 2320   virtual AI..## 
+000059d0: 2d2d 2d0d 0a23 2020 2020 2020 2061 7574  ---..#       aut
+000059e0: 6865 6e74 6963 6174 6520 696e 746f 204f  henticate into O
+000059f0: 5341 4953 2061 7320 7669 7274 7561 6c20  SAIS as virtual 
+00005a00: 4149 0d0a 2323 202d 2d2d 2d2d 2d2d 2d2d  AI..## ---------
 00005a10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00005a20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00005a30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005a40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005a50: 2d2d 2d2d 2d2d 2d2d 0d0a 0d0a 2320 5265  --------....# Re
-00005a60: 6769 7374 6572 206f 7572 2056 4149 2069  gister our VAI i
-00005a70: 6e74 6f20 4f53 4149 530d 0a64 6566 205f  nto OSAIS..def _
-00005a80: 7265 6769 7374 6572 5641 4928 293a 0d0a  registerVAI():..
-00005a90: 2020 2020 676c 6f62 616c 2067 4e61 6d65      global gName
-00005aa0: 0d0a 2020 2020 676c 6f62 616c 2067 546f  ..    global gTo
-00005ab0: 6b65 6e0d 0a20 2020 2067 6c6f 6261 6c20  ken..    global 
-00005ac0: 6753 6563 7265 740d 0a20 2020 2067 6c6f  gSecret..    glo
-00005ad0: 6261 6c20 674f 7269 6769 6e4f 5341 4953  bal gOriginOSAIS
-00005ae0: 0d0a 2020 2020 676c 6f62 616c 2067 546f  ..    global gTo
-00005af0: 6b65 6e4c 6f63 616c 0d0a 2020 2020 676c  kenLocal..    gl
-00005b00: 6f62 616c 2067 5365 6372 6574 4c6f 6361  obal gSecretLoca
-00005b10: 6c0d 0a20 2020 2067 6c6f 6261 6c20 674f  l..    global gO
-00005b20: 7269 6769 6e4c 6f63 616c 4f53 4149 530d  riginLocalOSAIS.
-00005b30: 0a20 2020 2067 6c6f 6261 6c20 6749 734c  .    global gIsL
-00005b40: 6f63 616c 0d0a 0d0a 2020 2020 6865 6164  ocal....    head
-00005b50: 6572 7320 3d20 7b0d 0a20 2020 2020 2020  ers = {..       
-00005b60: 2022 436f 6e74 656e 742d 5479 7065 223a   "Content-Type":
-00005b70: 2027 6170 706c 6963 6174 696f 6e2f 6a73   'application/js
-00005b80: 6f6e 272c 200d 0a20 2020 2020 2020 2027  on', ..        '
-00005b90: 4163 6365 7074 273a 2027 7465 7874 2f70  Accept': 'text/p
-00005ba0: 6c61 696e 272c 0d0a 2020 2020 7d0d 0a20  lain',..    }.. 
-00005bb0: 2020 206f 626a 5061 7261 6d3d 5f67 6574     objParam=_get
-00005bc0: 4675 6c6c 436f 6e66 6967 2867 4e61 6d65  FullConfig(gName
-00005bd0: 290d 0a0d 0a20 2020 2023 2320 7265 6720  )....    ## reg 
-00005be0: 7769 7468 2050 726f 640d 0a20 2020 2069  with Prod..    i
-00005bf0: 6620 6749 734c 6f63 616c 3d3d 4661 6c73  f gIsLocal==Fals
-00005c00: 653a 0d0a 2020 2020 2020 2020 7472 793a  e:..        try:
-00005c10: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-00005c20: 7370 6f6e 7365 203d 2072 6571 7565 7374  sponse = request
-00005c30: 732e 706f 7374 2866 227b 674f 7269 6769  s.post(f"{gOrigi
-00005c40: 6e4f 5341 4953 7d61 7069 2f76 312f 7075  nOSAIS}api/v1/pu
-00005c50: 626c 6963 2f76 6972 7475 616c 6169 2f72  blic/virtualai/r
-00005c60: 6567 6973 7465 7222 2c20 6865 6164 6572  egister", header
-00005c70: 733d 6865 6164 6572 732c 2064 6174 613d  s=headers, data=
-00005c80: 6a73 6f6e 2e64 756d 7073 286f 626a 5061  json.dumps(objPa
-00005c90: 7261 6d29 290d 0a20 2020 2020 2020 2020  ram))..         
-00005ca0: 2020 206f 626a 5265 733d 7265 7370 6f6e     objRes=respon
-00005cb0: 7365 2e6a 736f 6e28 295b 2264 6174 6122  se.json()["data"
-00005cc0: 5d0d 0a20 2020 2020 2020 2020 2020 2069  ]..            i
-00005cd0: 6620 6f62 6a52 6573 2069 7320 4e6f 6e65  f objRes is None
-00005ce0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00005cf0: 2020 2070 7269 6e74 2822 434f 554c 4420     print("COULD 
-00005d00: 4e4f 5420 5245 4749 5354 4552 2c20 7374  NOT REGISTER, st
-00005d10: 6f70 7069 6e67 2069 7420 6865 7265 2229  opping it here")
-00005d20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00005d30: 2020 7379 732e 6578 6974 2829 0d0a 0d0a    sys.exit()....
-00005d40: 2020 2020 2020 2020 2020 2020 6754 6f6b              gTok
-00005d50: 656e 3d6f 626a 5265 735b 2274 6f6b 656e  en=objRes["token
-00005d60: 225d 0d0a 2020 2020 2020 2020 2020 2020  "]..            
-00005d70: 6753 6563 7265 743d 6f62 6a52 6573 5b22  gSecret=objRes["
-00005d80: 7365 6372 6574 225d 0d0a 2020 2020 2020  secret"]..      
-00005d90: 2020 2020 2020 7072 696e 7428 2257 6520        print("We 
-00005da0: 6172 6520 5245 4749 5354 4552 4544 2077  are REGISTERED w
-00005db0: 6974 6820 4f53 4149 5320 5072 6f64 2229  ith OSAIS Prod")
-00005dc0: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
-00005dd0: 2045 7863 6570 7469 6f6e 2061 7320 6572   Exception as er
-00005de0: 723a 0d0a 2020 2020 2020 2020 2020 2020  r:..            
-00005df0: 7072 696e 7428 2243 5249 5449 4341 4c3a  print("CRITICAL:
-00005e00: 2022 2b65 7272 2e6d 7367 290d 0a20 2020   "+err.msg)..   
-00005e10: 2020 2020 2020 2020 2072 6169 7365 2065           raise e
-00005e20: 7272 0d0a 0d0a 2020 2020 2323 2072 6567  rr....    ## reg
-00005e30: 2077 6974 6820 4c6f 6361 6c20 4f53 4149   with Local OSAI
-00005e40: 5320 2864 6562 7567 290d 0a20 2020 2065  S (debug)..    e
-00005e50: 6c73 653a 0d0a 2020 2020 2020 2020 7472  lse:..        tr
-00005e60: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-00005e70: 7265 7370 6f6e 7365 203d 2072 6571 7565  response = reque
-00005e80: 7374 732e 706f 7374 2866 227b 674f 7269  sts.post(f"{gOri
-00005e90: 6769 6e4c 6f63 616c 4f53 4149 537d 6170  ginLocalOSAIS}ap
-00005ea0: 692f 7631 2f70 7562 6c69 632f 7669 7274  i/v1/public/virt
-00005eb0: 7561 6c61 692f 7265 6769 7374 6572 222c  ualai/register",
-00005ec0: 2068 6561 6465 7273 3d68 6561 6465 7273   headers=headers
-00005ed0: 2c20 6461 7461 3d6a 736f 6e2e 6475 6d70  , data=json.dump
-00005ee0: 7328 6f62 6a50 6172 616d 2929 0d0a 2020  s(objParam))..  
-00005ef0: 2020 2020 2020 2020 2020 6f62 6a52 6573            objRes
-00005f00: 3d72 6573 706f 6e73 652e 6a73 6f6e 2829  =response.json()
-00005f10: 5b22 6461 7461 225d 0d0a 2020 2020 2020  ["data"]..      
-00005f20: 2020 2020 2020 6966 206f 626a 5265 7320        if objRes 
-00005f30: 6973 204e 6f6e 653a 0d0a 2020 2020 2020  is None:..      
-00005f40: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-00005f50: 2243 4f55 4c44 204e 4f54 2052 4547 4953  "COULD NOT REGIS
-00005f60: 5445 5220 7769 7468 2064 6562 7567 2229  TER with debug")
-00005f70: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00005f80: 6754 6f6b 656e 4c6f 6361 6c3d 6f62 6a52  gTokenLocal=objR
-00005f90: 6573 5b22 746f 6b65 6e22 5d0d 0a20 2020  es["token"]..   
-00005fa0: 2020 2020 2020 2020 2067 5365 6372 6574           gSecret
-00005fb0: 4c6f 6361 6c3d 6f62 6a52 6573 5b22 7365  Local=objRes["se
-00005fc0: 6372 6574 225d 0d0a 2020 2020 2020 2020  cret"]..        
-00005fd0: 2020 2020 7072 696e 7428 2257 6520 6172      print("We ar
-00005fe0: 6520 5245 4749 5354 4552 4544 2077 6974  e REGISTERED wit
-00005ff0: 6820 4f53 4149 5320 4c6f 6361 6c20 2864  h OSAIS Local (d
-00006000: 6562 7567 2922 290d 0a20 2020 2020 2020  ebug)")..       
-00006010: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
-00006020: 6e20 6173 2065 7272 3a0d 0a20 2020 2020  n as err:..     
-00006030: 2020 2020 2020 2070 7269 6e74 2822 4352         print("CR
-00006040: 4954 4943 414c 3a20 222b 6572 722e 6d73  ITICAL: "+err.ms
-00006050: 6729 0d0a 2020 2020 2020 2020 2020 2020  g)..            
-00006060: 7261 6973 6520 6572 720d 0a0d 0a20 2020  raise err....   
-00006070: 2072 6574 7572 6e20 5472 7565 0d0a 0d0a   return True....
-00006080: 2320 4175 7468 656e 7469 6361 7465 2069  # Authenticate i
-00006090: 6e74 6f20 4f53 4149 530d 0a64 6566 205f  nto OSAIS..def _
-000060a0: 6c6f 6769 6e56 4149 2829 3a0d 0a20 2020  loginVAI():..   
-000060b0: 2067 6c6f 6261 6c20 6754 6f6b 656e 0d0a   global gToken..
-000060c0: 2020 2020 676c 6f62 616c 2067 5365 6372      global gSecr
-000060d0: 6574 0d0a 2020 2020 676c 6f62 616c 2067  et..    global g
-000060e0: 4175 7468 546f 6b65 6e0d 0a20 2020 2067  AuthToken..    g
-000060f0: 6c6f 6261 6c20 6754 6f6b 656e 4c6f 6361  lobal gTokenLoca
-00006100: 6c0d 0a20 2020 2067 6c6f 6261 6c20 6753  l..    global gS
-00006110: 6563 7265 744c 6f63 616c 0d0a 2020 2020  ecretLocal..    
-00006120: 676c 6f62 616c 2067 4175 7468 546f 6b65  global gAuthToke
-00006130: 6e4c 6f63 616c 0d0a 0d0a 2020 2020 6865  nLocal....    he
-00006140: 6164 6572 7320 3d20 7b0d 0a20 2020 2020  aders = {..     
-00006150: 2020 2022 436f 6e74 656e 742d 5479 7065     "Content-Type
-00006160: 223a 2022 6170 706c 6963 6174 696f 6e2f  ": "application/
-00006170: 6a73 6f6e 220d 0a20 2020 207d 0d0a 0d0a  json"..    }....
-00006180: 2020 2020 6966 2067 546f 6b65 6e21 3d20      if gToken!= 
-00006190: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2074  None:..        t
-000061a0: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
-000061b0: 2072 6573 706f 6e73 6520 3d20 7265 7175   response = requ
-000061c0: 6573 7473 2e70 6f73 7428 6622 7b67 4f72  ests.post(f"{gOr
-000061d0: 6967 696e 4f53 4149 537d 6170 692f 7631  iginOSAIS}api/v1
-000061e0: 2f70 7562 6c69 632f 7669 7274 7561 6c61  /public/virtuala
-000061f0: 692f 6c6f 6769 6e22 2c20 6865 6164 6572  i/login", header
-00006200: 733d 6865 6164 6572 732c 2064 6174 613d  s=headers, data=
-00006210: 6a73 6f6e 2e64 756d 7073 287b 0d0a 2020  json.dumps({..  
-00006220: 2020 2020 2020 2020 2020 2020 2020 2274                "t
-00006230: 6f6b 656e 223a 2067 546f 6b65 6e2c 0d0a  oken": gToken,..
-00006240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006250: 2273 6563 7265 7422 3a20 6753 6563 7265  "secret": gSecre
-00006260: 740d 0a20 2020 2020 2020 2020 2020 207d  t..            }
-00006270: 2929 0d0a 0d0a 2020 2020 2020 2020 2020  ))....          
-00006280: 2020 6f62 6a52 6573 3d72 6573 706f 6e73    objRes=respons
-00006290: 652e 6a73 6f6e 2829 5b22 6461 7461 225d  e.json()["data"]
-000062a0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-000062b0: 206f 626a 5265 7320 6973 204e 6f6e 653a   objRes is None:
-000062c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000062d0: 2020 7072 696e 7428 2243 4f55 4c44 204e    print("COULD N
-000062e0: 4f54 204c 4f47 494e 2c20 7374 6f70 7069  OT LOGIN, stoppi
-000062f0: 6e67 2069 7420 6865 7265 2229 0d0a 2020  ng it here")..  
-00006300: 2020 2020 2020 2020 2020 2020 2020 7379                sy
-00006310: 732e 6578 6974 2829 0d0a 2020 2020 2020  s.exit()..      
-00006320: 2020 2020 2020 7072 696e 7428 2257 6520        print("We 
-00006330: 676f 7420 616e 2061 7574 6865 6e74 6963  got an authentic
-00006340: 6174 696f 6e20 746f 6b65 6e20 696e 746f  ation token into
-00006350: 204f 5341 4953 2229 0d0a 2020 2020 2020   OSAIS")..      
-00006360: 2020 2020 2020 6741 7574 6854 6f6b 656e        gAuthToken
-00006370: 3d6f 626a 5265 735b 2261 7574 6854 6f6b  =objRes["authTok
-00006380: 656e 225d 2020 2020 0d0a 2020 2020 2020  en"]    ..      
-00006390: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
-000063a0: 6f6e 2061 7320 6572 723a 0d0a 2020 2020  on as err:..    
-000063b0: 2020 2020 2020 2020 7072 696e 7428 2243          print("C
-000063c0: 5249 5449 4341 4c3a 2022 2b65 7272 2e6d  RITICAL: "+err.m
-000063d0: 7367 290d 0a20 2020 2020 2020 2020 2020  sg)..           
-000063e0: 2072 6169 7365 2065 7272 0d0a 0d0a 2020   raise err....  
-000063f0: 2020 6966 2067 546f 6b65 6e4c 6f63 616c    if gTokenLocal
-00006400: 213d 204e 6f6e 653a 0d0a 2020 2020 2020  != None:..      
-00006410: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
-00006420: 2020 2020 7265 7370 6f6e 7365 203d 2072      response = r
-00006430: 6571 7565 7374 732e 706f 7374 2866 227b  equests.post(f"{
-00006440: 674f 7269 6769 6e4c 6f63 616c 4f53 4149  gOriginLocalOSAI
-00006450: 537d 6170 692f 7631 2f70 7562 6c69 632f  S}api/v1/public/
-00006460: 7669 7274 7561 6c61 692f 6c6f 6769 6e22  virtualai/login"
-00006470: 2c20 6865 6164 6572 733d 6865 6164 6572  , headers=header
-00006480: 732c 2064 6174 613d 6a73 6f6e 2e64 756d  s, data=json.dum
-00006490: 7073 287b 0d0a 2020 2020 2020 2020 2020  ps({..          
-000064a0: 2020 2020 2020 2274 6f6b 656e 223a 2067        "token": g
-000064b0: 546f 6b65 6e4c 6f63 616c 2c0d 0a20 2020  TokenLocal,..   
-000064c0: 2020 2020 2020 2020 2020 2020 2022 7365               "se
-000064d0: 6372 6574 223a 2067 5365 6372 6574 4c6f  cret": gSecretLo
-000064e0: 6361 6c0d 0a20 2020 2020 2020 2020 2020  cal..           
-000064f0: 207d 2929 0d0a 0d0a 2020 2020 2020 2020   }))....        
-00006500: 2020 2020 6f62 6a52 6573 3d72 6573 706f      objRes=respo
-00006510: 6e73 652e 6a73 6f6e 2829 5b22 6461 7461  nse.json()["data
-00006520: 225d 0d0a 2020 2020 2020 2020 2020 2020  "]..            
-00006530: 6966 206f 626a 5265 7320 6973 204e 6f6e  if objRes is Non
-00006540: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00006550: 2020 2020 7072 696e 7428 2243 4f55 4c44      print("COULD
-00006560: 204e 4f54 204c 4f47 494e 2069 6e74 6f20   NOT LOGIN into 
-00006570: 4f53 4149 5320 4c6f 6361 6c22 290d 0a20  OSAIS Local").. 
-00006580: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00006590: 2822 5765 2067 6f74 2061 6e20 6175 7468  ("We got an auth
-000065a0: 656e 7469 6361 7469 6f6e 2074 6f6b 656e  entication token
-000065b0: 2069 6e74 6f20 4f53 4149 5320 4c6f 6361   into OSAIS Loca
-000065c0: 6c20 2864 6562 7567 2922 290d 0a20 2020  l (debug)")..   
-000065d0: 2020 2020 2020 2020 2067 4175 7468 546f           gAuthTo
-000065e0: 6b65 6e4c 6f63 616c 3d6f 626a 5265 735b  kenLocal=objRes[
-000065f0: 2261 7574 6854 6f6b 656e 225d 2020 2020  "authToken"]    
-00006600: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
-00006610: 2045 7863 6570 7469 6f6e 2061 7320 6572   Exception as er
-00006620: 723a 0d0a 2020 2020 2020 2020 2020 2020  r:..            
-00006630: 7265 7475 726e 2054 7275 650d 0a0d 0a20  return True.... 
-00006640: 2020 2072 6574 7572 6e20 5472 7565 0d0a     return True..
-00006650: 0d0a 0d0a 2323 2050 5542 4c49 4320 2d20  ....## PUBLIC - 
-00006660: 4175 7468 656e 7469 6361 7465 2074 6865  Authenticate the
-00006670: 2056 6972 7475 616c 2041 4920 696e 746f   Virtual AI into
-00006680: 204f 5341 4953 0d0a 6465 6620 6f73 6169   OSAIS..def osai
-00006690: 735f 6175 7468 656e 7469 6361 7465 4149  s_authenticateAI
-000066a0: 2829 3a0d 0a20 2020 2067 6c6f 6261 6c20  ():..    global 
-000066b0: 6749 7356 6972 7475 616c 4149 0d0a 2020  gIsVirtualAI..  
-000066c0: 2020 676c 6f62 616c 2067 4f72 6967 696e    global gOrigin
-000066d0: 4f53 4149 530d 0a20 2020 2067 6c6f 6261  OSAIS..    globa
-000066e0: 6c20 6749 7353 6368 6564 756c 6564 0d0a  l gIsScheduled..
-000066f0: 2020 2020 0d0a 2020 2020 5265 7370 3d7b      ..    Resp={
-00006700: 2264 6174 6122 3a20 4e6f 6e65 7d0d 0a20  "data": None}.. 
-00006710: 2020 2069 6620 6749 7356 6972 7475 616c     if gIsVirtual
-00006720: 4149 3a0d 0a0d 0a20 2020 2020 2020 2074  AI:....        t
-00006730: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
-00006740: 2072 6573 703d 205f 7265 6769 7374 6572   resp= _register
-00006750: 5641 4928 290d 0a20 2020 2020 2020 2020  VAI()..         
-00006760: 2020 2072 6573 703d 5f6c 6f67 696e 5641     resp=_loginVA
-00006770: 4928 290d 0a20 2020 2020 2020 2065 7863  I()..        exc
-00006780: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
-00006790: 2065 7272 3a0d 0a20 2020 2020 2020 2020   err:..         
-000067a0: 2020 2070 7269 6e74 2822 4352 4954 4943     print("CRITIC
-000067b0: 414c 3a20 222b 6572 722e 6d73 6729 0d0a  AL: "+err.msg)..
-000067c0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-000067d0: 6520 6572 720d 0a20 2020 2020 2020 200d  e err..        .
-000067e0: 0a20 2020 2020 2020 2023 2052 756e 2074  .        # Run t
-000067f0: 6865 2073 6368 6564 756c 6572 0d0a 2020  he scheduler..  
-00006800: 2020 2020 2020 6966 2067 4973 5363 6865        if gIsSche
-00006810: 6475 6c65 643d 3d46 616c 7365 3a0d 0a20  duled==False:.. 
-00006820: 2020 2020 2020 2020 2020 2067 4973 5363             gIsSc
-00006830: 6865 6475 6c65 643d 5472 7565 0d0a 2020  heduled=True..  
-00006840: 2020 2020 2020 2020 2020 7363 6865 6475            schedu
-00006850: 6c65 2e65 7665 7279 2829 2e64 6179 2e61  le.every().day.a
-00006860: 7428 2231 303a 3330 2229 2e64 6f28 5f6c  t("10:30").do(_l
-00006870: 6f67 696e 5641 4929 0d0a 0d0a 2020 2020  oginVAI)....    
-00006880: 7265 7475 726e 2072 6573 700d 0a0d 0a23  return resp....#
-00006890: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
+00005a40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
+00005a50: 0a0d 0a23 2052 6567 6973 7465 7220 6f75  ...# Register ou
+00005a60: 7220 5641 4920 696e 746f 204f 5341 4953  r VAI into OSAIS
+00005a70: 0d0a 6465 6620 5f72 6567 6973 7465 7256  ..def _registerV
+00005a80: 4149 2829 3a0d 0a20 2020 2067 6c6f 6261  AI():..    globa
+00005a90: 6c20 674e 616d 650d 0a20 2020 2067 6c6f  l gName..    glo
+00005aa0: 6261 6c20 6754 6f6b 656e 0d0a 2020 2020  bal gToken..    
+00005ab0: 676c 6f62 616c 2067 5365 6372 6574 0d0a  global gSecret..
+00005ac0: 2020 2020 676c 6f62 616c 2067 4f72 6967      global gOrig
+00005ad0: 696e 4f53 4149 530d 0a20 2020 2067 6c6f  inOSAIS..    glo
+00005ae0: 6261 6c20 6754 6f6b 656e 4c6f 6361 6c0d  bal gTokenLocal.
+00005af0: 0a20 2020 2067 6c6f 6261 6c20 6753 6563  .    global gSec
+00005b00: 7265 744c 6f63 616c 0d0a 2020 2020 676c  retLocal..    gl
+00005b10: 6f62 616c 2067 4f72 6967 696e 4c6f 6361  obal gOriginLoca
+00005b20: 6c4f 5341 4953 0d0a 2020 2020 676c 6f62  lOSAIS..    glob
+00005b30: 616c 2067 4973 4c6f 6361 6c0d 0a0d 0a20  al gIsLocal.... 
+00005b40: 2020 2068 6561 6465 7273 203d 207b 0d0a     headers = {..
+00005b50: 2020 2020 2020 2020 2243 6f6e 7465 6e74          "Content
+00005b60: 2d54 7970 6522 3a20 2761 7070 6c69 6361  -Type": 'applica
+00005b70: 7469 6f6e 2f6a 736f 6e27 2c20 0d0a 2020  tion/json', ..  
+00005b80: 2020 2020 2020 2741 6363 6570 7427 3a20        'Accept': 
+00005b90: 2774 6578 742f 706c 6169 6e27 2c0d 0a20  'text/plain',.. 
+00005ba0: 2020 207d 0d0a 2020 2020 6f62 6a50 6172     }..    objPar
+00005bb0: 616d 3d5f 6765 7446 756c 6c43 6f6e 6669  am=_getFullConfi
+00005bc0: 6728 674e 616d 6529 0d0a 0d0a 2020 2020  g(gName)....    
+00005bd0: 2323 2072 6567 2077 6974 6820 5072 6f64  ## reg with Prod
+00005be0: 0d0a 2020 2020 6966 2067 4973 4c6f 6361  ..    if gIsLoca
+00005bf0: 6c3d 3d46 616c 7365 3a0d 0a20 2020 2020  l==False:..     
+00005c00: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
+00005c10: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
+00005c20: 7265 7175 6573 7473 2e70 6f73 7428 6622  requests.post(f"
+00005c30: 7b67 4f72 6967 696e 4f53 4149 537d 6170  {gOriginOSAIS}ap
+00005c40: 692f 7631 2f70 7562 6c69 632f 7669 7274  i/v1/public/virt
+00005c50: 7561 6c61 692f 7265 6769 7374 6572 222c  ualai/register",
+00005c60: 2068 6561 6465 7273 3d68 6561 6465 7273   headers=headers
+00005c70: 2c20 6461 7461 3d6a 736f 6e2e 6475 6d70  , data=json.dump
+00005c80: 7328 6f62 6a50 6172 616d 2929 0d0a 2020  s(objParam))..  
+00005c90: 2020 2020 2020 2020 2020 6f62 6a52 6573            objRes
+00005ca0: 3d72 6573 706f 6e73 652e 6a73 6f6e 2829  =response.json()
+00005cb0: 5b22 6461 7461 225d 0d0a 2020 2020 2020  ["data"]..      
+00005cc0: 2020 2020 2020 6966 206f 626a 5265 7320        if objRes 
+00005cd0: 6973 204e 6f6e 653a 0d0a 2020 2020 2020  is None:..      
+00005ce0: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+00005cf0: 2243 4f55 4c44 204e 4f54 2052 4547 4953  "COULD NOT REGIS
+00005d00: 5445 522c 2073 746f 7070 696e 6720 6974  TER, stopping it
+00005d10: 2068 6572 6522 290d 0a20 2020 2020 2020   here")..       
+00005d20: 2020 2020 2020 2020 2073 7973 2e65 7869           sys.exi
+00005d30: 7428 290d 0a0d 0a20 2020 2020 2020 2020  t()....         
+00005d40: 2020 2067 546f 6b65 6e3d 6f62 6a52 6573     gToken=objRes
+00005d50: 5b22 746f 6b65 6e22 5d0d 0a20 2020 2020  ["token"]..     
+00005d60: 2020 2020 2020 2067 5365 6372 6574 3d6f         gSecret=o
+00005d70: 626a 5265 735b 2273 6563 7265 7422 5d0d  bjRes["secret"].
+00005d80: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
+00005d90: 6e74 2822 5765 2061 7265 2052 4547 4953  nt("We are REGIS
+00005da0: 5445 5245 4420 7769 7468 204f 5341 4953  TERED with OSAIS
+00005db0: 2050 726f 6422 290d 0a20 2020 2020 2020   Prod")..       
+00005dc0: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
+00005dd0: 6e20 6173 2065 7272 3a0d 0a20 2020 2020  n as err:..     
+00005de0: 2020 2020 2020 2070 7269 6e74 2822 4352         print("CR
+00005df0: 4954 4943 414c 3a20 222b 6572 722e 6d73  ITICAL: "+err.ms
+00005e00: 6729 0d0a 2020 2020 2020 2020 2020 2020  g)..            
+00005e10: 7261 6973 6520 6572 720d 0a0d 0a20 2020  raise err....   
+00005e20: 2023 2320 7265 6720 7769 7468 204c 6f63   ## reg with Loc
+00005e30: 616c 204f 5341 4953 2028 6465 6275 6729  al OSAIS (debug)
+00005e40: 0d0a 2020 2020 656c 7365 3a0d 0a20 2020  ..    else:..   
+00005e50: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
+00005e60: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+00005e70: 3d20 7265 7175 6573 7473 2e70 6f73 7428  = requests.post(
+00005e80: 6622 7b67 4f72 6967 696e 4c6f 6361 6c4f  f"{gOriginLocalO
+00005e90: 5341 4953 7d61 7069 2f76 312f 7075 626c  SAIS}api/v1/publ
+00005ea0: 6963 2f76 6972 7475 616c 6169 2f72 6567  ic/virtualai/reg
+00005eb0: 6973 7465 7222 2c20 6865 6164 6572 733d  ister", headers=
+00005ec0: 6865 6164 6572 732c 2064 6174 613d 6a73  headers, data=js
+00005ed0: 6f6e 2e64 756d 7073 286f 626a 5061 7261  on.dumps(objPara
+00005ee0: 6d29 290d 0a20 2020 2020 2020 2020 2020  m))..           
+00005ef0: 206f 626a 5265 733d 7265 7370 6f6e 7365   objRes=response
+00005f00: 2e6a 736f 6e28 295b 2264 6174 6122 5d0d  .json()["data"].
+00005f10: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00005f20: 6f62 6a52 6573 2069 7320 4e6f 6e65 3a0d  objRes is None:.
+00005f30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005f40: 2070 7269 6e74 2822 434f 554c 4420 4e4f   print("COULD NO
+00005f50: 5420 5245 4749 5354 4552 2077 6974 6820  T REGISTER with 
+00005f60: 6465 6275 6722 290d 0a0d 0a20 2020 2020  debug")....     
+00005f70: 2020 2020 2020 2067 546f 6b65 6e4c 6f63         gTokenLoc
+00005f80: 616c 3d6f 626a 5265 735b 2274 6f6b 656e  al=objRes["token
+00005f90: 225d 0d0a 2020 2020 2020 2020 2020 2020  "]..            
+00005fa0: 6753 6563 7265 744c 6f63 616c 3d6f 626a  gSecretLocal=obj
+00005fb0: 5265 735b 2273 6563 7265 7422 5d0d 0a20  Res["secret"].. 
+00005fc0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00005fd0: 2822 5765 2061 7265 2052 4547 4953 5445  ("We are REGISTE
+00005fe0: 5245 4420 7769 7468 204f 5341 4953 204c  RED with OSAIS L
+00005ff0: 6f63 616c 2028 6465 6275 6729 2229 0d0a  ocal (debug)")..
+00006000: 2020 2020 2020 2020 6578 6365 7074 2045          except E
+00006010: 7863 6570 7469 6f6e 2061 7320 6572 723a  xception as err:
+00006020: 0d0a 2020 2020 2020 2020 2020 2020 7072  ..            pr
+00006030: 696e 7428 2243 5249 5449 4341 4c3a 2022  int("CRITICAL: "
+00006040: 2b65 7272 2e6d 7367 290d 0a20 2020 2020  +err.msg)..     
+00006050: 2020 2020 2020 2072 6169 7365 2065 7272         raise err
+00006060: 0d0a 0d0a 2020 2020 7265 7475 726e 2054  ....    return T
+00006070: 7275 650d 0a0d 0a23 2041 7574 6865 6e74  rue....# Authent
+00006080: 6963 6174 6520 696e 746f 204f 5341 4953  icate into OSAIS
+00006090: 0d0a 6465 6620 5f6c 6f67 696e 5641 4928  ..def _loginVAI(
+000060a0: 293a 0d0a 2020 2020 676c 6f62 616c 2067  ):..    global g
+000060b0: 546f 6b65 6e0d 0a20 2020 2067 6c6f 6261  Token..    globa
+000060c0: 6c20 6753 6563 7265 740d 0a20 2020 2067  l gSecret..    g
+000060d0: 6c6f 6261 6c20 6741 7574 6854 6f6b 656e  lobal gAuthToken
+000060e0: 0d0a 2020 2020 676c 6f62 616c 2067 546f  ..    global gTo
+000060f0: 6b65 6e4c 6f63 616c 0d0a 2020 2020 676c  kenLocal..    gl
+00006100: 6f62 616c 2067 5365 6372 6574 4c6f 6361  obal gSecretLoca
+00006110: 6c0d 0a20 2020 2067 6c6f 6261 6c20 6741  l..    global gA
+00006120: 7574 6854 6f6b 656e 4c6f 6361 6c0d 0a0d  uthTokenLocal...
+00006130: 0a20 2020 2068 6561 6465 7273 203d 207b  .    headers = {
+00006140: 0d0a 2020 2020 2020 2020 2243 6f6e 7465  ..        "Conte
+00006150: 6e74 2d54 7970 6522 3a20 2261 7070 6c69  nt-Type": "appli
+00006160: 6361 7469 6f6e 2f6a 736f 6e22 0d0a 2020  cation/json"..  
+00006170: 2020 7d0d 0a0d 0a20 2020 2069 6620 6754    }....    if gT
+00006180: 6f6b 656e 213d 204e 6f6e 653a 0d0a 2020  oken!= None:..  
+00006190: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
+000061a0: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
+000061b0: 203d 2072 6571 7565 7374 732e 706f 7374   = requests.post
+000061c0: 2866 227b 674f 7269 6769 6e4f 5341 4953  (f"{gOriginOSAIS
+000061d0: 7d61 7069 2f76 312f 7075 626c 6963 2f76  }api/v1/public/v
+000061e0: 6972 7475 616c 6169 2f6c 6f67 696e 222c  irtualai/login",
+000061f0: 2068 6561 6465 7273 3d68 6561 6465 7273   headers=headers
+00006200: 2c20 6461 7461 3d6a 736f 6e2e 6475 6d70  , data=json.dump
+00006210: 7328 7b0d 0a20 2020 2020 2020 2020 2020  s({..           
+00006220: 2020 2020 2022 746f 6b65 6e22 3a20 6754       "token": gT
+00006230: 6f6b 656e 2c0d 0a20 2020 2020 2020 2020  oken,..         
+00006240: 2020 2020 2020 2022 7365 6372 6574 223a         "secret":
+00006250: 2067 5365 6372 6574 0d0a 2020 2020 2020   gSecret..      
+00006260: 2020 2020 2020 7d29 290d 0a0d 0a20 2020        }))....   
+00006270: 2020 2020 2020 2020 206f 626a 5265 733d           objRes=
+00006280: 7265 7370 6f6e 7365 2e6a 736f 6e28 295b  response.json()[
+00006290: 2264 6174 6122 5d0d 0a20 2020 2020 2020  "data"]..       
+000062a0: 2020 2020 2069 6620 6f62 6a52 6573 2069       if objRes i
+000062b0: 7320 4e6f 6e65 3a0d 0a20 2020 2020 2020  s None:..       
+000062c0: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
+000062d0: 434f 554c 4420 4e4f 5420 4c4f 4749 4e2c  COULD NOT LOGIN,
+000062e0: 2073 746f 7070 696e 6720 6974 2068 6572   stopping it her
+000062f0: 6522 290d 0a20 2020 2020 2020 2020 2020  e")..           
+00006300: 2020 2020 2073 7973 2e65 7869 7428 290d       sys.exit().
+00006310: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
+00006320: 6e74 2822 5765 2067 6f74 2061 6e20 6175  nt("We got an au
+00006330: 7468 656e 7469 6361 7469 6f6e 2074 6f6b  thentication tok
+00006340: 656e 2069 6e74 6f20 4f53 4149 5322 290d  en into OSAIS").
+00006350: 0a20 2020 2020 2020 2020 2020 2067 4175  .            gAu
+00006360: 7468 546f 6b65 6e3d 6f62 6a52 6573 5b22  thToken=objRes["
+00006370: 6175 7468 546f 6b65 6e22 5d20 2020 200d  authToken"]    .
+00006380: 0a20 2020 2020 2020 2065 7863 6570 7420  .        except 
+00006390: 4578 6365 7074 696f 6e20 6173 2065 7272  Exception as err
+000063a0: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
+000063b0: 7269 6e74 2822 4352 4954 4943 414c 3a20  rint("CRITICAL: 
+000063c0: 222b 6572 722e 6d73 6729 0d0a 2020 2020  "+err.msg)..    
+000063d0: 2020 2020 2020 2020 7261 6973 6520 6572          raise er
+000063e0: 720d 0a0d 0a20 2020 2069 6620 6754 6f6b  r....    if gTok
+000063f0: 656e 4c6f 6361 6c21 3d20 4e6f 6e65 3a0d  enLocal!= None:.
+00006400: 0a20 2020 2020 2020 2074 7279 3a0d 0a20  .        try:.. 
+00006410: 2020 2020 2020 2020 2020 2072 6573 706f             respo
+00006420: 6e73 6520 3d20 7265 7175 6573 7473 2e70  nse = requests.p
+00006430: 6f73 7428 6622 7b67 4f72 6967 696e 4c6f  ost(f"{gOriginLo
+00006440: 6361 6c4f 5341 4953 7d61 7069 2f76 312f  calOSAIS}api/v1/
+00006450: 7075 626c 6963 2f76 6972 7475 616c 6169  public/virtualai
+00006460: 2f6c 6f67 696e 222c 2068 6561 6465 7273  /login", headers
+00006470: 3d68 6561 6465 7273 2c20 6461 7461 3d6a  =headers, data=j
+00006480: 736f 6e2e 6475 6d70 7328 7b0d 0a20 2020  son.dumps({..   
+00006490: 2020 2020 2020 2020 2020 2020 2022 746f               "to
+000064a0: 6b65 6e22 3a20 6754 6f6b 656e 4c6f 6361  ken": gTokenLoca
+000064b0: 6c2c 0d0a 2020 2020 2020 2020 2020 2020  l,..            
+000064c0: 2020 2020 2273 6563 7265 7422 3a20 6753      "secret": gS
+000064d0: 6563 7265 744c 6f63 616c 0d0a 2020 2020  ecretLocal..    
+000064e0: 2020 2020 2020 2020 7d29 290d 0a0d 0a20          })).... 
+000064f0: 2020 2020 2020 2020 2020 206f 626a 5265             objRe
+00006500: 733d 7265 7370 6f6e 7365 2e6a 736f 6e28  s=response.json(
+00006510: 295b 2264 6174 6122 5d0d 0a20 2020 2020  )["data"]..     
+00006520: 2020 2020 2020 2069 6620 6f62 6a52 6573         if objRes
+00006530: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
+00006540: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00006550: 2822 434f 554c 4420 4e4f 5420 4c4f 4749  ("COULD NOT LOGI
+00006560: 4e20 696e 746f 204f 5341 4953 204c 6f63  N into OSAIS Loc
+00006570: 616c 2229 0d0a 2020 2020 2020 2020 2020  al")..          
+00006580: 2020 7072 696e 7428 2257 6520 676f 7420    print("We got 
+00006590: 616e 2061 7574 6865 6e74 6963 6174 696f  an authenticatio
+000065a0: 6e20 746f 6b65 6e20 696e 746f 204f 5341  n token into OSA
+000065b0: 4953 204c 6f63 616c 2028 6465 6275 6729  IS Local (debug)
+000065c0: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
+000065d0: 6741 7574 6854 6f6b 656e 4c6f 6361 6c3d  gAuthTokenLocal=
+000065e0: 6f62 6a52 6573 5b22 6175 7468 546f 6b65  objRes["authToke
+000065f0: 6e22 5d20 2020 200d 0a20 2020 2020 2020  n"]    ..       
+00006600: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
+00006610: 6e20 6173 2065 7272 3a0d 0a20 2020 2020  n as err:..     
+00006620: 2020 2020 2020 2072 6574 7572 6e20 5472         return Tr
+00006630: 7565 0d0a 0d0a 2020 2020 7265 7475 726e  ue....    return
+00006640: 2054 7275 650d 0a0d 0a0d 0a23 2320 5055   True......## PU
+00006650: 424c 4943 202d 2041 7574 6865 6e74 6963  BLIC - Authentic
+00006660: 6174 6520 7468 6520 5669 7274 7561 6c20  ate the Virtual 
+00006670: 4149 2069 6e74 6f20 4f53 4149 530d 0a64  AI into OSAIS..d
+00006680: 6566 206f 7361 6973 5f61 7574 6865 6e74  ef osais_authent
+00006690: 6963 6174 6541 4928 293a 0d0a 2020 2020  icateAI():..    
+000066a0: 676c 6f62 616c 2067 4973 5669 7274 7561  global gIsVirtua
+000066b0: 6c41 490d 0a20 2020 2067 6c6f 6261 6c20  lAI..    global 
+000066c0: 674f 7269 6769 6e4f 5341 4953 0d0a 2020  gOriginOSAIS..  
+000066d0: 2020 676c 6f62 616c 2067 4973 5363 6865    global gIsSche
+000066e0: 6475 6c65 640d 0a20 2020 200d 0a20 2020  duled..    ..   
+000066f0: 2052 6573 703d 7b22 6461 7461 223a 204e   Resp={"data": N
+00006700: 6f6e 657d 0d0a 2020 2020 6966 2067 4973  one}..    if gIs
+00006710: 5669 7274 7561 6c41 493a 0d0a 0d0a 2020  VirtualAI:....  
+00006720: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
+00006730: 2020 2020 2020 2020 7265 7370 3d20 5f72          resp= _r
+00006740: 6567 6973 7465 7256 4149 2829 0d0a 2020  egisterVAI()..  
+00006750: 2020 2020 2020 2020 2020 7265 7370 3d5f            resp=_
+00006760: 6c6f 6769 6e56 4149 2829 0d0a 2020 2020  loginVAI()..    
+00006770: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
+00006780: 7469 6f6e 2061 7320 6572 723a 0d0a 2020  tion as err:..  
+00006790: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+000067a0: 2243 5249 5449 4341 4c3a 2022 2b65 7272  "CRITICAL: "+err
+000067b0: 2e6d 7367 290d 0a20 2020 2020 2020 2020  .msg)..         
+000067c0: 2020 2072 6169 7365 2065 7272 0d0a 2020     raise err..  
+000067d0: 2020 2020 2020 0d0a 2020 2020 2020 2020        ..        
+000067e0: 2320 5275 6e20 7468 6520 7363 6865 6475  # Run the schedu
+000067f0: 6c65 720d 0a20 2020 2020 2020 2069 6620  ler..        if 
+00006800: 6749 7353 6368 6564 756c 6564 3d3d 4661  gIsScheduled==Fa
+00006810: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
+00006820: 2020 6749 7353 6368 6564 756c 6564 3d54    gIsScheduled=T
+00006830: 7275 650d 0a20 2020 2020 2020 2020 2020  rue..           
+00006840: 2073 6368 6564 756c 652e 6576 6572 7928   schedule.every(
+00006850: 292e 6461 792e 6174 2822 3130 3a33 3022  ).day.at("10:30"
+00006860: 292e 646f 285f 6c6f 6769 6e56 4149 290d  ).do(_loginVAI).
+00006870: 0a0d 0a20 2020 2072 6574 7572 6e20 7265  ...    return re
+00006880: 7370 0d0a 0d0a 2323 202d 2d2d 2d2d 2d2d  sp....## -------
+00006890: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000068a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000068b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000068c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000068d0: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2320 2020  ----------..#   
-000068e0: 2020 2020 5275 6e20 7468 6520 4149 0d0a      Run the AI..
-000068f0: 2323 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ## -------------
+000068d0: 2d0d 0a23 2020 2020 2020 2052 756e 2074  -..#       Run t
+000068e0: 6865 2041 490d 0a23 2320 2d2d 2d2d 2d2d  he AI..## ------
+000068f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00006900: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00006910: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00006920: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006930: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a0d 0a23  -----------....#
-00006940: 2320 5055 424c 4943 202d 2070 6172 7365  # PUBLIC - parse
-00006950: 2061 7267 7320 666f 7220 4f53 4149 5320   args for OSAIS 
-00006960: 286e 6f74 2074 686f 7365 2066 6f72 2041  (not those for A
-00006970: 4929 0d0a 6465 6620 6f73 6169 735f 696e  I)..def osais_in
-00006980: 6974 5061 7273 6572 2861 4172 6729 3a0d  itParser(aArg):.
-00006990: 0a20 2020 2067 6c6f 6261 6c20 6741 7267  .    global gArg
-000069a0: 734f 5341 4953 0d0a 2020 2020 676c 6f62  sOSAIS..    glob
-000069b0: 616c 2067 496e 7075 7444 6972 0d0a 2020  al gInputDir..  
-000069c0: 2020 676c 6f62 616c 2067 4f75 7470 7574    global gOutput
-000069d0: 4469 720d 0a20 2020 2067 6c6f 6261 6c20  Dir..    global 
-000069e0: 6749 7357 6172 6d75 700d 0a0d 0a20 2020  gIsWarmup....   
-000069f0: 2023 2043 7265 6174 6520 7468 6520 7061   # Create the pa
-00006a00: 7273 6572 0d0a 2020 2020 7671 5f70 6172  rser..    vq_par
-00006a10: 7365 7220 3d20 6172 6770 6172 7365 2e41  ser = argparse.A
-00006a20: 7267 756d 656e 7450 6172 7365 7228 6465  rgumentParser(de
-00006a30: 7363 7269 7074 696f 6e3d 2741 7267 2070  scription='Arg p
-00006a40: 6172 7365 7220 696e 6974 2062 7920 4f53  arser init by OS
-00006a50: 4149 5327 290d 0a0d 0a20 2020 2023 2041  AIS')....    # A
-00006a60: 6464 2074 6865 2041 4920 4761 7465 7761  dd the AI Gatewa
-00006a70: 7920 2f20 4f70 656e 536f 7572 6365 4149  y / OpenSourceAI
-00006a80: 7320 6172 6775 6d65 6e74 730d 0a20 2020  s arguments..   
-00006a90: 2076 715f 7061 7273 6572 2e61 6464 5f61   vq_parser.add_a
-00006aa0: 7267 756d 656e 7428 222d 6f72 6967 222c  rgument("-orig",
-00006ab0: 2020 222d 2d6f 7269 6769 6e22 2c20 7479    "--origin", ty
-00006ac0: 7065 3d73 7472 2c20 6865 6c70 3d22 4149  pe=str, help="AI
-00006ad0: 2047 6174 6577 6179 2073 6572 7665 7220   Gateway server 
-00006ae0: 6f72 6967 696e 222c 2064 6566 6175 6c74  origin", default
-00006af0: 3d66 2268 7474 703a 2f2f 7b67 4950 4c6f  =f"http://{gIPLo
-00006b00: 6361 6c7d 3a7b 6750 6f72 7447 6174 6577  cal}:{gPortGatew
-00006b10: 6179 7d2f 2220 2c20 6465 7374 3d27 4f53  ay}/" , dest='OS
-00006b20: 4149 535f 6f72 6967 696e 2729 2020 2020  AIS_origin')    
-00006b30: 2023 2320 2074 6869 7320 6973 2066 6f72   ##  this is for
-00006b40: 2063 6f6d 6d73 2077 6974 6820 4149 2047   comms with AI G
-00006b50: 6174 6577 6179 0d0a 2020 2020 7671 5f70  ateway..    vq_p
-00006b60: 6172 7365 722e 6164 645f 6172 6775 6d65  arser.add_argume
-00006b70: 6e74 2822 2d74 222c 2020 222d 2d74 6f6b  nt("-t",  "--tok
-00006b80: 656e 222c 2074 7970 653d 7374 722c 2068  en", type=str, h
-00006b90: 656c 703d 224f 7065 6e53 6f75 7263 6541  elp="OpenSourceA
-00006ba0: 4973 2074 6f6b 656e 222c 2064 6566 6175  Is token", defau
-00006bb0: 6c74 3d22 3022 2c20 6465 7374 3d27 746f  lt="0", dest='to
-00006bc0: 6b65 6e41 4927 2920 2020 2020 2020 2020  kenAI')         
-00006bd0: 2020 2020 2020 2323 2020 7468 6973 2069        ##  this i
-00006be0: 7320 666f 7220 636f 6d6d 7320 7769 7468  s for comms with
-00006bf0: 204f 7065 6e53 6f75 7263 6541 4973 0d0a   OpenSourceAIs..
-00006c00: 2020 2020 7671 5f70 6172 7365 722e 6164      vq_parser.ad
-00006c10: 645f 6172 6775 6d65 6e74 2822 2d75 222c  d_argument("-u",
-00006c20: 2020 222d 2d75 7365 726e 616d 6522 2c20    "--username", 
-00006c30: 7479 7065 3d73 7472 2c20 6865 6c70 3d22  type=str, help="
-00006c40: 4f70 656e 536f 7572 6365 4149 7320 7573  OpenSourceAIs us
-00006c50: 6572 6e61 6d65 222c 2064 6566 6175 6c74  ername", default
-00006c60: 3d22 222c 2064 6573 743d 2775 7365 726e  ="", dest='usern
-00006c70: 616d 6527 2920 2020 2020 2020 2323 2020  ame')       ##  
-00006c80: 7468 6973 2069 7320 666f 7220 636f 6d6d  this is for comm
-00006c90: 7320 7769 7468 204f 7065 6e53 6f75 7263  s with OpenSourc
-00006ca0: 6541 4973 0d0a 2020 2020 7671 5f70 6172  eAIs..    vq_par
-00006cb0: 7365 722e 6164 645f 6172 6775 6d65 6e74  ser.add_argument
-00006cc0: 2822 2d75 6964 222c 2020 222d 2d75 6e69  ("-uid",  "--uni
-00006cd0: 7175 655f 6964 222c 2074 7970 653d 696e  que_id", type=in
-00006ce0: 742c 2068 656c 703d 2255 6e69 7175 6520  t, help="Unique 
-00006cf0: 4944 206f 6620 7468 6973 2041 4920 7365  ID of this AI se
-00006d00: 7373 696f 6e22 2c20 6465 6661 756c 743d  ssion", default=
-00006d10: 302c 2064 6573 743d 2775 6964 2729 2020  0, dest='uid')  
-00006d20: 2020 2323 2020 7468 6973 2069 7320 666f    ##  this is fo
-00006d30: 7220 636f 6d6d 7320 7769 7468 204f 7065  r comms with Ope
-00006d40: 6e53 6f75 7263 6541 4973 0d0a 2020 2020  nSourceAIs..    
-00006d50: 7671 5f70 6172 7365 722e 6164 645f 6172  vq_parser.add_ar
-00006d60: 6775 6d65 6e74 2822 2d6f 6469 7222 2c20  gument("-odir", 
-00006d70: 222d 2d6f 7574 6469 7222 2c20 7479 7065  "--outdir", type
-00006d80: 3d73 7472 2c20 6865 6c70 3d22 4f75 7470  =str, help="Outp
-00006d90: 7574 2064 6972 6563 746f 7279 222c 2064  ut directory", d
-00006da0: 6566 6175 6c74 3d67 4f75 7470 7574 4469  efault=gOutputDi
-00006db0: 722c 2064 6573 743d 276f 7574 6469 7227  r, dest='outdir'
-00006dc0: 290d 0a20 2020 2076 715f 7061 7273 6572  )..    vq_parser
-00006dd0: 2e61 6464 5f61 7267 756d 656e 7428 222d  .add_argument("-
-00006de0: 6964 6972 222c 2022 2d2d 696e 6469 7222  idir", "--indir"
-00006df0: 2c20 7479 7065 3d73 7472 2c20 6865 6c70  , type=str, help
-00006e00: 3d22 696e 7075 7420 6469 7265 6374 6f72  ="input director
-00006e10: 7922 2c20 6465 6661 756c 743d 6749 6e70  y", default=gInp
-00006e20: 7574 4469 722c 2064 6573 743d 2769 6e64  utDir, dest='ind
-00006e30: 6972 2729 0d0a 2020 2020 7671 5f70 6172  ir')..    vq_par
-00006e40: 7365 722e 6164 645f 6172 6775 6d65 6e74  ser.add_argument
-00006e50: 2822 2d6c 6f63 616c 222c 2022 2d2d 6973  ("-local", "--is
-00006e60: 6c6f 6361 6c22 2c20 7479 7065 3d62 6f6f  local", type=boo
-00006e70: 6c2c 2068 656c 703d 2269 7320 6c6f 6361  l, help="is loca
-00006e80: 6c20 6f72 2070 726f 643f 222c 2064 6566  l or prod?", def
-00006e90: 6175 6c74 3d46 616c 7365 2c20 6465 7374  ault=False, dest
-00006ea0: 3d27 6973 4c6f 6361 6c27 290d 0a20 2020  ='isLocal')..   
-00006eb0: 2076 715f 7061 7273 6572 2e61 6464 5f61   vq_parser.add_a
-00006ec0: 7267 756d 656e 7428 222d 6379 636c 6522  rgument("-cycle"
-00006ed0: 2c20 222d 2d63 7963 6c65 222c 2074 7970  , "--cycle", typ
-00006ee0: 653d 696e 742c 2068 656c 703d 2263 7963  e=int, help="cyc
-00006ef0: 6c65 222c 2064 6566 6175 6c74 3d30 2c20  le", default=0, 
-00006f00: 6465 7374 3d27 6379 636c 6527 290d 0a20  dest='cycle').. 
-00006f10: 2020 2076 715f 7061 7273 6572 2e61 6464     vq_parser.add
-00006f20: 5f61 7267 756d 656e 7428 222d 6669 6c65  _argument("-file
-00006f30: 6e61 6d65 222c 2022 2d2d 6669 6c65 6e61  name", "--filena
-00006f40: 6d65 222c 2074 7970 653d 7374 722c 2068  me", type=str, h
-00006f50: 656c 703d 2266 696c 656e 616d 6522 2c20  elp="filename", 
-00006f60: 6465 6661 756c 743d 2264 6566 6175 6c74  default="default
-00006f70: 222c 2064 6573 743d 2766 696c 656e 616d  ", dest='filenam
-00006f80: 6527 290d 0a20 2020 2076 715f 7061 7273  e')..    vq_pars
-00006f90: 6572 2e61 6464 5f61 7267 756d 656e 7428  er.add_argument(
-00006fa0: 222d 7761 726d 7570 222c 2022 2d2d 7761  "-warmup", "--wa
-00006fb0: 726d 7570 222c 2074 7970 653d 626f 6f6c  rmup", type=bool
-00006fc0: 2c20 6865 6c70 3d22 7761 726d 7570 222c  , help="warmup",
-00006fd0: 2064 6566 6175 6c74 3d46 616c 7365 2c20   default=False, 
-00006fe0: 6465 7374 3d27 7761 726d 7570 2729 0d0a  dest='warmup')..
-00006ff0: 0d0a 2020 2020 6741 7267 734f 5341 4953  ..    gArgsOSAIS
-00007000: 203d 2076 715f 7061 7273 6572 2e70 6172   = vq_parser.par
-00007010: 7365 5f61 7267 7328 6141 7267 290d 0a20  se_args(aArg).. 
-00007020: 2020 2067 4973 5761 726d 7570 3d67 4172     gIsWarmup=gAr
-00007030: 6773 4f53 4149 532e 7761 726d 7570 0d0a  gsOSAIS.warmup..
-00007040: 2020 2020 7265 7475 726e 2054 7275 650d      return True.
-00007050: 0a0d 0a23 2320 5055 424c 4943 202d 2072  ...## PUBLIC - r
-00007060: 756e 2074 6865 2041 4920 2861 7420 6c65  un the AI (at le
-00007070: 6173 7420 7472 7929 0d0a 6465 6620 6f73  ast try)..def os
-00007080: 6169 735f 7275 6e41 4928 2a61 7267 7329  ais_runAI(*args)
-00007090: 3a0d 0a20 2020 2067 6c6f 6261 6c20 6749  :..    global gI
-000070a0: 7342 7573 790d 0a20 2020 2067 6c6f 6261  sBusy..    globa
-000070b0: 6c20 6741 5072 6f63 6573 7365 640d 0a20  l gAProcessed.. 
-000070c0: 2020 2067 6c6f 6261 6c20 674e 616d 6520     global gName 
-000070d0: 0d0a 2020 2020 676c 6f62 616c 2067 4c61  ..    global gLa
-000070e0: 7374 5072 6f63 6573 7353 7461 7274 5f61  stProcessStart_a
-000070f0: 740d 0a0d 0a20 2020 2023 2320 6765 7420  t....    ## get 
-00007100: 6172 6773 0d0a 2020 2020 666e 5f72 756e  args..    fn_run
-00007110: 3d61 7267 735b 305d 0d0a 2020 2020 5f61  =args[0]..    _a
-00007120: 7267 733d 6172 6773 5b31 5d0d 0a0d 0a20  rgs=args[1].... 
-00007130: 2020 2023 2320 646f 206e 6f74 2070 726f     ## do not pro
-00007140: 6365 7373 2074 7769 6365 2073 616d 6520  cess twice same 
-00007150: 7569 640d 0a20 2020 205f 7569 643d 5f61  uid..    _uid=_a
-00007160: 7267 732e 6765 7428 272d 7569 6427 290d  rgs.get('-uid').
-00007170: 0a20 2020 2069 6620 5f75 6964 2069 6e20  .    if _uid in 
-00007180: 6741 5072 6f63 6573 7365 643a 0d0a 2020  gAProcessed:..  
-00007190: 2020 2020 2020 7265 7475 726e 2020 226e        return  "n
-000071a0: 6f74 2070 726f 6365 7373 696e 672c 2061  ot processing, a
-000071b0: 6c72 6561 6479 2074 7269 6564 2e2e 2e22  lready tried..."
-000071c0: 0d0a 0d0a 2020 2020 2323 2073 7461 7274  ....    ## start
-000071d0: 2074 696d 650d 0a20 2020 2067 4973 4275   time..    gIsBu
-000071e0: 7379 3d54 7275 650d 0a20 2020 2062 6567  sy=True..    beg
-000071f0: 5f64 6174 6520 3d20 6461 7465 7469 6d65  _date = datetime
-00007200: 2e75 7463 6e6f 7728 290d 0a0d 0a20 2020  .utcnow()....   
-00007210: 2023 2320 7265 7072 6f63 6573 7320 4149   ## reprocess AI
-00007220: 2061 7267 730d 0a20 2020 2061 4172 6746   args..    aArgF
-00007230: 6f72 7061 7273 6572 4149 3d5f 6765 7441  orparserAI=_getA
-00007240: 7267 7328 5f61 7267 7329 0d0a 2020 2020  rgs(_args)..    
-00007250: 6172 6773 5f45 7863 6c75 7369 7665 4f53  args_ExclusiveOS
-00007260: 4149 533d 5b27 2d6f 7269 6727 2c20 272d  AIS=['-orig', '-
-00007270: 7427 2c20 272d 7527 2c20 272d 7569 6427  t', '-u', '-uid'
-00007280: 2c20 272d 6c6f 6361 6c27 2c20 272d 6379  , '-local', '-cy
-00007290: 636c 6527 2c20 272d 7761 726d 7570 275d  cle', '-warmup']
-000072a0: 0d0a 2020 2020 6141 7267 466f 7270 6172  ..    aArgForpar
-000072b0: 7365 7241 493d 5f61 7267 7346 726f 6d46  serAI=_argsFromF
-000072c0: 696c 7465 7228 6141 7267 466f 7270 6172  ilter(aArgForpar
-000072d0: 7365 7241 492c 2061 7267 735f 4578 636c  serAI, args_Excl
-000072e0: 7573 6976 654f 5341 4953 2c20 4661 6c73  usiveOSAIS, Fals
-000072f0: 6529 0d0a 0d0a 2020 2020 2323 2070 726f  e)....    ## pro
-00007300: 6365 7373 2074 6865 2066 696c 656e 616d  cess the filenam
-00007310: 6520 7061 7373 6564 2069 6e20 6469 7220  e passed in dir 
-00007320: 2863 6173 6520 6c6f 6361 6c68 6f73 7420  (case localhost 
-00007330: 2f20 4149 2047 6174 6577 6179 292c 206f  / AI Gateway), o
-00007340: 7220 646f 776e 6c6f 6164 2066 696c 6520  r download file 
-00007350: 6672 6f6d 2055 524c 2028 6361 7365 2041  from URL (case A
-00007360: 4920 7275 6e6e 696e 6720 6173 2056 6972  I running as Vir
-00007370: 7475 616c 2041 4929 0d0a 2020 2020 5f69  tual AI)..    _i
-00007380: 6e70 7574 3d4e 6f6e 650d 0a20 2020 205f  nput=None..    _
-00007390: 6669 6c65 6e61 6d65 3d5f 6172 6773 2e67  filename=_args.g
-000073a0: 6574 2827 2d66 696c 656e 616d 6527 290d  et('-filename').
-000073b0: 0a20 2020 205f 7572 6c55 706c 6f61 643d  .    _urlUpload=
-000073c0: 5f61 7267 732e 6765 7428 2775 726c 5f75  _args.get('url_u
-000073d0: 706c 6f61 6427 290d 0a20 2020 2069 6620  pload')..    if 
-000073e0: 6e6f 7420 5f66 696c 656e 616d 6520 616e  not _filename an
-000073f0: 6420 5f75 726c 5570 6c6f 6164 3a0d 0a20  d _urlUpload:.. 
-00007400: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
-00007410: 2020 2020 2020 2020 205f 696e 7075 743d           _input=
-00007420: 646f 776e 6c6f 6164 496d 6167 6528 5f75  downloadImage(_u
-00007430: 726c 5570 6c6f 6164 290d 0a20 2020 2020  rlUpload)..     
-00007440: 2020 2020 2020 2069 6620 5f69 6e70 7574         if _input
-00007450: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00007460: 2020 2061 4172 6746 6f72 7061 7273 6572     aArgForparser
-00007470: 4149 2e61 7070 656e 6428 222d 6669 6c65  AI.append("-file
-00007480: 6e61 6d65 2229 0d0a 2020 2020 2020 2020  name")..        
-00007490: 2020 2020 2020 2020 6141 7267 466f 7270          aArgForp
-000074a0: 6172 7365 7241 492e 6170 7065 6e64 285f  arserAI.append(_
-000074b0: 696e 7075 7429 0d0a 2020 2020 2020 2020  input)..        
-000074c0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-000074d0: 2020 2020 2020 2020 2020 2023 2320 6d69             ## mi
-000074e0: 6e20 7265 7175 6972 656d 656e 7473 0d0a  n requirements..
-000074f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007500: 7072 696e 7428 226e 6f20 696d 6167 6520  print("no image 
-00007510: 746f 2070 726f 6365 7373 2229 0d0a 2020  to process")..  
-00007520: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00007530: 7475 726e 2022 696e 7075 7420 7265 7175  turn "input requ
-00007540: 6972 6564 220d 0a20 2020 2020 2020 2065  ired"..        e
-00007550: 7863 6570 7420 4578 6365 7074 696f 6e20  xcept Exception 
-00007560: 6173 2065 7272 3a0d 0a20 2020 2020 2020  as err:..       
-00007570: 2020 2020 2070 7269 6e74 2822 4352 4954       print("CRIT
-00007580: 4943 414c 3a20 222b 6572 722e 6d73 6729  ICAL: "+err.msg)
-00007590: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
-000075a0: 6973 6520 6572 720d 0a20 2020 200d 0a20  ise err..    .. 
-000075b0: 2020 2023 2320 496e 6974 204f 5341 4953     ## Init OSAIS
-000075c0: 2050 6172 616d 7320 2866 726f 6d20 616c   Params (from al
-000075d0: 6c20 6172 6773 2c20 6b65 6570 206f 6e6c  l args, keep onl
-000075e0: 7920 7468 6f73 6520 666f 7220 4f53 4149  y those for OSAI
-000075f0: 5329 0d0a 2020 2020 6141 7267 466f 7250  S)..    aArgForP
-00007600: 6172 7365 724f 5341 4953 3d5f 6765 7441  arserOSAIS=_getA
-00007610: 7267 7328 5f61 7267 7329 0d0a 2020 2020  rgs(_args)..    
-00007620: 6172 6773 5f45 7863 6c75 7369 7665 4f53  args_ExclusiveOS
-00007630: 4149 532e 6170 7065 6e64 2827 2d6f 6469  AIS.append('-odi
-00007640: 7227 290d 0a20 2020 2061 7267 735f 4578  r')..    args_Ex
-00007650: 636c 7573 6976 654f 5341 4953 2e61 7070  clusiveOSAIS.app
-00007660: 656e 6428 272d 6964 6972 2729 0d0a 2020  end('-idir')..  
-00007670: 2020 6141 7267 466f 7250 6172 7365 724f    aArgForParserO
-00007680: 5341 4953 3d5f 6172 6773 4672 6f6d 4669  SAIS=_argsFromFi
-00007690: 6c74 6572 2861 4172 6746 6f72 5061 7273  lter(aArgForPars
-000076a0: 6572 4f53 4149 532c 2061 7267 735f 4578  erOSAIS, args_Ex
-000076b0: 636c 7573 6976 654f 5341 4953 2c20 5472  clusiveOSAIS, Tr
-000076c0: 7565 290d 0a20 2020 206f 7361 6973 5f69  ue)..    osais_i
-000076d0: 6e69 7450 6172 7365 7228 6141 7267 466f  nitParser(aArgFo
-000076e0: 7250 6172 7365 724f 5341 4953 290d 0a0d  rParserOSAIS)...
-000076f0: 0a20 2020 2069 6620 6749 7357 6172 6d75  .    if gIsWarmu
-00007700: 703a 0d0a 2020 2020 2020 2020 7072 696e  p:..        prin
-00007710: 7428 225c 725c 6e3d 3e20 5761 726d 696e  t("\r\n=> Warmin
-00007720: 6720 7570 2e2e 2e20 5c72 5c6e 2229 0d0a  g up... \r\n")..
-00007730: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-00007740: 2020 2070 7269 6e74 2822 5c72 5c6e 3d3e     print("\r\n=>
-00007750: 2062 6566 6f72 6520 7275 6e3a 2070 726f   before run: pro
-00007760: 6365 7373 6564 2061 7267 7320 6672 6f6d  cessed args from
-00007770: 2075 726c 3a20 222b 7374 7228 6141 7267   url: "+str(aArg
-00007780: 466f 7270 6172 7365 7241 4929 2b22 5c72  ForparserAI)+"\r
-00007790: 5c6e 2229 0d0a 0d0a 2020 2020 2323 c2a0  \n")....    ##..
-000077a0: 7072 6f63 6573 7369 6e67 2061 6363 6570  processing accep
-000077b0: 7465 640d 0a20 2020 2067 4c61 7374 5072  ted..    gLastPr
-000077c0: 6f63 6573 7353 7461 7274 5f61 743d 6461  ocessStart_at=da
-000077d0: 7465 7469 6d65 2e75 7463 6e6f 7728 290d  tetime.utcnow().
-000077e0: 0a20 2020 2067 4150 726f 6365 7373 6564  .    gAProcessed
-000077f0: 2e61 7070 656e 6428 5f75 6964 290d 0a0d  .append(_uid)...
-00007800: 0a20 2020 2023 2320 6e6f 7469 6679 204f  .    ## notify O
-00007810: 5341 4953 2028 7374 6172 7429 0d0a 2020  SAIS (start)..  
-00007820: 2020 4372 6564 7350 6172 616d 3d67 6574    CredsParam=get
-00007830: 4372 6564 7350 6172 616d 7328 290d 0a20  CredsParams().. 
-00007840: 2020 204d 6f72 7068 696e 6750 6172 616d     MorphingParam
-00007850: 3d67 6574 4d6f 7270 6869 6e67 5061 7261  =getMorphingPara
-00007860: 6d73 2829 0d0a 2020 2020 5374 6167 6550  ms()..    StageP
-00007870: 6172 616d 3d67 6574 5374 6167 6550 6172  aram=getStagePar
-00007880: 616d 7328 4149 5f50 524f 4752 4553 535f  ams(AI_PROGRESS_
-00007890: 4149 5f53 5441 5254 4544 2c20 3029 0d0a  AI_STARTED, 0)..
-000078a0: 2020 2020 6f73 6169 735f 6e6f 7469 6679      osais_notify
-000078b0: 2843 7265 6473 5061 7261 6d2c 204d 6f72  (CredsParam, Mor
-000078c0: 7068 696e 6750 6172 616d 202c 2053 7461  phingParam , Sta
-000078d0: 6765 5061 7261 6d29 0d0a 0d0a 2020 2020  geParam)....    
-000078e0: 2323 2073 7461 7274 2077 6174 6368 2066  ## start watch f
-000078f0: 696c 6520 6372 6561 7469 6f6e 0d0a 2020  ile creation..  
-00007900: 2020 5f6f 7574 7075 743d 5f67 6574 4f75    _output=_getOu
-00007910: 7470 7574 4469 7228 290d 0a20 2020 2077  tputDir()..    w
-00007920: 6174 6368 5f64 6972 6563 746f 7279 285f  atch_directory(_
-00007930: 6f75 7470 7574 2c20 6f73 6169 735f 6f6e  output, osais_on
-00007940: 4e6f 7469 6679 4669 6c65 4372 6561 7465  NotifyFileCreate
-00007950: 642c 205f 6172 6773 290d 0a0d 0a20 2020  d, _args)....   
-00007960: 2023 2320 4e6f 7469 6620 4f53 4149 530d   ## Notif OSAIS.
-00007970: 0a20 2020 2053 7461 6765 5061 7261 6d3d  .    StageParam=
-00007980: 6765 7453 7461 6765 5061 7261 6d73 2841  getStageParams(A
-00007990: 495f 5052 4f47 5245 5353 5f49 4e49 545f  I_PROGRESS_INIT_
-000079a0: 494d 4147 452c 2030 290d 0a20 2020 206f  IMAGE, 0)..    o
-000079b0: 7361 6973 5f6e 6f74 6966 7928 4372 6564  sais_notify(Cred
-000079c0: 7350 6172 616d 2c20 4d6f 7270 6869 6e67  sParam, Morphing
-000079d0: 5061 7261 6d20 2c20 5374 6167 6550 6172  Param , StagePar
-000079e0: 616d 290d 0a0d 0a20 2020 2023 2320 7275  am)....    ## ru
-000079f0: 6e20 4149 0d0a 2020 2020 7265 7370 6f6e  n AI..    respon
-00007a00: 7365 3d4e 6f6e 650d 0a20 2020 2074 7279  se=None..    try
-00007a10: 3a0d 0a20 2020 2020 2020 2069 6620 6c65  :..        if le
-00007a20: 6e28 6172 6773 293d 3d32 3a0d 0a20 2020  n(args)==2:..   
-00007a30: 2020 2020 2020 2020 2072 6573 706f 6e73           respons
-00007a40: 653d 666e 5f72 756e 2861 4172 6746 6f72  e=fn_run(aArgFor
-00007a50: 7061 7273 6572 4149 290d 0a20 2020 2020  parserAI)..     
-00007a60: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-00007a70: 2020 2020 2020 6966 206c 656e 2861 7267        if len(arg
-00007a80: 7329 3d3d 333a 0d0a 2020 2020 2020 2020  s)==3:..        
-00007a90: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
-00007aa0: 3d66 6e5f 7275 6e28 6141 7267 466f 7270  =fn_run(aArgForp
-00007ab0: 6172 7365 7241 492c 2061 7267 735b 325d  arserAI, args[2]
-00007ac0: 290d 0a20 2020 2020 2020 2020 2020 2065  )..            e
-00007ad0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-00007ae0: 2020 2020 2020 7265 7370 6f6e 7365 3d66        response=f
-00007af0: 6e5f 7275 6e28 6141 7267 466f 7270 6172  n_run(aArgForpar
-00007b00: 7365 7241 492c 2061 7267 735b 325d 2c20  serAI, args[2], 
-00007b10: 6172 6773 5b33 5d29 0d0a 2020 2020 6578  args[3])..    ex
-00007b20: 6365 7074 2045 7863 6570 7469 6f6e 2061  cept Exception a
-00007b30: 7320 6572 723a 0d0a 2020 2020 2020 2020  s err:..        
-00007b40: 7072 696e 7428 2243 5249 5449 4341 4c3a  print("CRITICAL:
-00007b50: 2022 2b65 7272 2e6d 7367 290d 0a20 2020   "+err.msg)..   
-00007b60: 2020 2020 2072 6169 7365 2065 7272 0d0a       raise err..
-00007b70: 0d0a 2020 2020 2323 2063 616c 6375 6c61  ..    ## calcula
-00007b80: 7465 2063 6f73 740d 0a20 2020 2067 4973  te cost..    gIs
-00007b90: 4275 7379 3d46 616c 7365 0d0a 2020 2020  Busy=False..    
-00007ba0: 656e 645f 6461 7465 203d 2064 6174 6574  end_date = datet
-00007bb0: 696d 652e 7574 636e 6f77 2829 0d0a 2020  ime.utcnow()..  
-00007bc0: 2020 636f 7374 203d 2028 656e 645f 6461    cost = (end_da
-00007bd0: 7465 202d 2062 6567 5f64 6174 6529 2e74  te - beg_date).t
-00007be0: 6f74 616c 5f73 6563 6f6e 6473 2829 0d0a  otal_seconds()..
-00007bf0: 2020 2020 5f61 6464 436f 7374 2863 6f73      _addCost(cos
-00007c00: 7429 0d0a 0d0a 2020 2020 2323 206e 6f74  t)....    ## not
-00007c10: 6966 7920 656e 640d 0a20 2020 2053 7461  ify end..    Sta
-00007c20: 6765 5061 7261 6d3d 6765 7453 7461 6765  geParam=getStage
-00007c30: 5061 7261 6d73 2841 495f 5052 4f47 5245  Params(AI_PROGRE
-00007c40: 5353 5f41 495f 5354 4f50 5045 442c 2063  SS_AI_STOPPED, c
-00007c50: 6f73 7429 0d0a 2020 2020 6f73 6169 735f  ost)..    osais_
-00007c60: 6e6f 7469 6679 2843 7265 6473 5061 7261  notify(CredsPara
-00007c70: 6d2c 204d 6f72 7068 696e 6750 6172 616d  m, MorphingParam
-00007c80: 202c 2053 7461 6765 5061 7261 6d29 0d0a   , StageParam)..
-00007c90: 0d0a 2020 2020 2323 2064 6566 6175 6c74  ..    ## default
-00007ca0: 204f 4b20 7265 7370 6f6e 7365 2069 6620   OK response if 
-00007cb0: 7468 6520 4149 2064 6f65 7320 6e6f 7420  the AI does not 
-00007cc0: 7365 6e64 2061 6e79 0d0a 2020 2020 6966  send any..    if
-00007cd0: 2072 6573 706f 6e73 653d 3d4e 6f6e 653a   response==None:
-00007ce0: 0d0a 2020 2020 2020 2020 7265 7370 6f6e  ..        respon
-00007cf0: 7365 3d54 7275 650d 0a20 2020 2072 6574  se=True..    ret
-00007d00: 7572 6e20 7265 7370 6f6e 7365 0d0a 0d0a  urn response....
-00007d10: 2323 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ## -------------
-00007d20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007d30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006930: 2d2d 0d0a 0d0a 2323 2050 5542 4c49 4320  --....## PUBLIC 
+00006940: 2d20 7061 7273 6520 6172 6773 2066 6f72  - parse args for
+00006950: 204f 5341 4953 2028 6e6f 7420 7468 6f73   OSAIS (not thos
+00006960: 6520 666f 7220 4149 290d 0a64 6566 206f  e for AI)..def o
+00006970: 7361 6973 5f69 6e69 7450 6172 7365 7228  sais_initParser(
+00006980: 6141 7267 293a 0d0a 2020 2020 676c 6f62  aArg):..    glob
+00006990: 616c 2067 4172 6773 4f53 4149 530d 0a20  al gArgsOSAIS.. 
+000069a0: 2020 2067 6c6f 6261 6c20 6749 6e70 7574     global gInput
+000069b0: 4469 720d 0a20 2020 2067 6c6f 6261 6c20  Dir..    global 
+000069c0: 674f 7574 7075 7444 6972 0d0a 2020 2020  gOutputDir..    
+000069d0: 676c 6f62 616c 2067 4973 5761 726d 7570  global gIsWarmup
+000069e0: 0d0a 0d0a 2020 2020 2320 4372 6561 7465  ....    # Create
+000069f0: 2074 6865 2070 6172 7365 720d 0a20 2020   the parser..   
+00006a00: 2076 715f 7061 7273 6572 203d 2061 7267   vq_parser = arg
+00006a10: 7061 7273 652e 4172 6775 6d65 6e74 5061  parse.ArgumentPa
+00006a20: 7273 6572 2864 6573 6372 6970 7469 6f6e  rser(description
+00006a30: 3d27 4172 6720 7061 7273 6572 2069 6e69  ='Arg parser ini
+00006a40: 7420 6279 204f 5341 4953 2729 0d0a 0d0a  t by OSAIS')....
+00006a50: 2020 2020 2320 4164 6420 7468 6520 4149      # Add the AI
+00006a60: 2047 6174 6577 6179 202f 204f 7065 6e53   Gateway / OpenS
+00006a70: 6f75 7263 6541 4973 2061 7267 756d 656e  ourceAIs argumen
+00006a80: 7473 0d0a 2020 2020 7671 5f70 6172 7365  ts..    vq_parse
+00006a90: 722e 6164 645f 6172 6775 6d65 6e74 2822  r.add_argument("
+00006aa0: 2d6f 7269 6722 2c20 2022 2d2d 6f72 6967  -orig",  "--orig
+00006ab0: 696e 222c 2074 7970 653d 7374 722c 2068  in", type=str, h
+00006ac0: 656c 703d 2241 4920 4761 7465 7761 7920  elp="AI Gateway 
+00006ad0: 7365 7276 6572 206f 7269 6769 6e22 2c20  server origin", 
+00006ae0: 6465 6661 756c 743d 6622 6874 7470 3a2f  default=f"http:/
+00006af0: 2f7b 6749 504c 6f63 616c 7d3a 7b67 506f  /{gIPLocal}:{gPo
+00006b00: 7274 4761 7465 7761 797d 2f22 202c 2064  rtGateway}/" , d
+00006b10: 6573 743d 274f 5341 4953 5f6f 7269 6769  est='OSAIS_origi
+00006b20: 6e27 2920 2020 2020 2323 2020 7468 6973  n')     ##  this
+00006b30: 2069 7320 666f 7220 636f 6d6d 7320 7769   is for comms wi
+00006b40: 7468 2041 4920 4761 7465 7761 790d 0a20  th AI Gateway.. 
+00006b50: 2020 2076 715f 7061 7273 6572 2e61 6464     vq_parser.add
+00006b60: 5f61 7267 756d 656e 7428 222d 7422 2c20  _argument("-t", 
+00006b70: 2022 2d2d 746f 6b65 6e22 2c20 7479 7065   "--token", type
+00006b80: 3d73 7472 2c20 6865 6c70 3d22 4f70 656e  =str, help="Open
+00006b90: 536f 7572 6365 4149 7320 746f 6b65 6e22  SourceAIs token"
+00006ba0: 2c20 6465 6661 756c 743d 2230 222c 2064  , default="0", d
+00006bb0: 6573 743d 2774 6f6b 656e 4149 2729 2020  est='tokenAI')  
+00006bc0: 2020 2020 2020 2020 2020 2020 2023 2320               ## 
+00006bd0: 2074 6869 7320 6973 2066 6f72 2063 6f6d   this is for com
+00006be0: 6d73 2077 6974 6820 4f70 656e 536f 7572  ms with OpenSour
+00006bf0: 6365 4149 730d 0a20 2020 2076 715f 7061  ceAIs..    vq_pa
+00006c00: 7273 6572 2e61 6464 5f61 7267 756d 656e  rser.add_argumen
+00006c10: 7428 222d 7522 2c20 2022 2d2d 7573 6572  t("-u",  "--user
+00006c20: 6e61 6d65 222c 2074 7970 653d 7374 722c  name", type=str,
+00006c30: 2068 656c 703d 224f 7065 6e53 6f75 7263   help="OpenSourc
+00006c40: 6541 4973 2075 7365 726e 616d 6522 2c20  eAIs username", 
+00006c50: 6465 6661 756c 743d 2222 2c20 6465 7374  default="", dest
+00006c60: 3d27 7573 6572 6e61 6d65 2729 2020 2020  ='username')    
+00006c70: 2020 2023 2320 2074 6869 7320 6973 2066     ##  this is f
+00006c80: 6f72 2063 6f6d 6d73 2077 6974 6820 4f70  or comms with Op
+00006c90: 656e 536f 7572 6365 4149 730d 0a20 2020  enSourceAIs..   
+00006ca0: 2076 715f 7061 7273 6572 2e61 6464 5f61   vq_parser.add_a
+00006cb0: 7267 756d 656e 7428 222d 7569 6422 2c20  rgument("-uid", 
+00006cc0: 2022 2d2d 756e 6971 7565 5f69 6422 2c20   "--unique_id", 
+00006cd0: 7479 7065 3d69 6e74 2c20 6865 6c70 3d22  type=int, help="
+00006ce0: 556e 6971 7565 2049 4420 6f66 2074 6869  Unique ID of thi
+00006cf0: 7320 4149 2073 6573 7369 6f6e 222c 2064  s AI session", d
+00006d00: 6566 6175 6c74 3d30 2c20 6465 7374 3d27  efault=0, dest='
+00006d10: 7569 6427 2920 2020 2023 2320 2074 6869  uid')    ##  thi
+00006d20: 7320 6973 2066 6f72 2063 6f6d 6d73 2077  s is for comms w
+00006d30: 6974 6820 4f70 656e 536f 7572 6365 4149  ith OpenSourceAI
+00006d40: 730d 0a20 2020 2076 715f 7061 7273 6572  s..    vq_parser
+00006d50: 2e61 6464 5f61 7267 756d 656e 7428 222d  .add_argument("-
+00006d60: 6f64 6972 222c 2022 2d2d 6f75 7464 6972  odir", "--outdir
+00006d70: 222c 2074 7970 653d 7374 722c 2068 656c  ", type=str, hel
+00006d80: 703d 224f 7574 7075 7420 6469 7265 6374  p="Output direct
+00006d90: 6f72 7922 2c20 6465 6661 756c 743d 674f  ory", default=gO
+00006da0: 7574 7075 7444 6972 2c20 6465 7374 3d27  utputDir, dest='
+00006db0: 6f75 7464 6972 2729 0d0a 2020 2020 7671  outdir')..    vq
+00006dc0: 5f70 6172 7365 722e 6164 645f 6172 6775  _parser.add_argu
+00006dd0: 6d65 6e74 2822 2d69 6469 7222 2c20 222d  ment("-idir", "-
+00006de0: 2d69 6e64 6972 222c 2074 7970 653d 7374  -indir", type=st
+00006df0: 722c 2068 656c 703d 2269 6e70 7574 2064  r, help="input d
+00006e00: 6972 6563 746f 7279 222c 2064 6566 6175  irectory", defau
+00006e10: 6c74 3d67 496e 7075 7444 6972 2c20 6465  lt=gInputDir, de
+00006e20: 7374 3d27 696e 6469 7227 290d 0a20 2020  st='indir')..   
+00006e30: 2076 715f 7061 7273 6572 2e61 6464 5f61   vq_parser.add_a
+00006e40: 7267 756d 656e 7428 222d 6c6f 6361 6c22  rgument("-local"
+00006e50: 2c20 222d 2d69 736c 6f63 616c 222c 2074  , "--islocal", t
+00006e60: 7970 653d 626f 6f6c 2c20 6865 6c70 3d22  ype=bool, help="
+00006e70: 6973 206c 6f63 616c 206f 7220 7072 6f64  is local or prod
+00006e80: 3f22 2c20 6465 6661 756c 743d 4661 6c73  ?", default=Fals
+00006e90: 652c 2064 6573 743d 2769 734c 6f63 616c  e, dest='isLocal
+00006ea0: 2729 0d0a 2020 2020 7671 5f70 6172 7365  ')..    vq_parse
+00006eb0: 722e 6164 645f 6172 6775 6d65 6e74 2822  r.add_argument("
+00006ec0: 2d63 7963 6c65 222c 2022 2d2d 6379 636c  -cycle", "--cycl
+00006ed0: 6522 2c20 7479 7065 3d69 6e74 2c20 6865  e", type=int, he
+00006ee0: 6c70 3d22 6379 636c 6522 2c20 6465 6661  lp="cycle", defa
+00006ef0: 756c 743d 302c 2064 6573 743d 2763 7963  ult=0, dest='cyc
+00006f00: 6c65 2729 0d0a 2020 2020 7671 5f70 6172  le')..    vq_par
+00006f10: 7365 722e 6164 645f 6172 6775 6d65 6e74  ser.add_argument
+00006f20: 2822 2d66 696c 656e 616d 6522 2c20 222d  ("-filename", "-
+00006f30: 2d66 696c 656e 616d 6522 2c20 7479 7065  -filename", type
+00006f40: 3d73 7472 2c20 6865 6c70 3d22 6669 6c65  =str, help="file
+00006f50: 6e61 6d65 222c 2064 6566 6175 6c74 3d22  name", default="
+00006f60: 6465 6661 756c 7422 2c20 6465 7374 3d27  default", dest='
+00006f70: 6669 6c65 6e61 6d65 2729 0d0a 2020 2020  filename')..    
+00006f80: 7671 5f70 6172 7365 722e 6164 645f 6172  vq_parser.add_ar
+00006f90: 6775 6d65 6e74 2822 2d77 6172 6d75 7022  gument("-warmup"
+00006fa0: 2c20 222d 2d77 6172 6d75 7022 2c20 7479  , "--warmup", ty
+00006fb0: 7065 3d62 6f6f 6c2c 2068 656c 703d 2277  pe=bool, help="w
+00006fc0: 6172 6d75 7022 2c20 6465 6661 756c 743d  armup", default=
+00006fd0: 4661 6c73 652c 2064 6573 743d 2777 6172  False, dest='war
+00006fe0: 6d75 7027 290d 0a0d 0a20 2020 2067 4172  mup')....    gAr
+00006ff0: 6773 4f53 4149 5320 3d20 7671 5f70 6172  gsOSAIS = vq_par
+00007000: 7365 722e 7061 7273 655f 6172 6773 2861  ser.parse_args(a
+00007010: 4172 6729 0d0a 2020 2020 6749 7357 6172  Arg)..    gIsWar
+00007020: 6d75 703d 6741 7267 734f 5341 4953 2e77  mup=gArgsOSAIS.w
+00007030: 6172 6d75 700d 0a20 2020 2072 6574 7572  armup..    retur
+00007040: 6e20 5472 7565 0d0a 0d0a 2323 2050 5542  n True....## PUB
+00007050: 4c49 4320 2d20 7275 6e20 7468 6520 4149  LIC - run the AI
+00007060: 2028 6174 206c 6561 7374 2074 7279 290d   (at least try).
+00007070: 0a64 6566 206f 7361 6973 5f72 756e 4149  .def osais_runAI
+00007080: 282a 6172 6773 293a 0d0a 2020 2020 676c  (*args):..    gl
+00007090: 6f62 616c 2067 4973 4275 7379 0d0a 2020  obal gIsBusy..  
+000070a0: 2020 676c 6f62 616c 2067 4150 726f 6365    global gAProce
+000070b0: 7373 6564 0d0a 2020 2020 676c 6f62 616c  ssed..    global
+000070c0: 2067 4e61 6d65 200d 0a20 2020 2067 6c6f   gName ..    glo
+000070d0: 6261 6c20 674c 6173 7450 726f 6365 7373  bal gLastProcess
+000070e0: 5374 6172 745f 6174 0d0a 0d0a 2020 2020  Start_at....    
+000070f0: 2323 2067 6574 2061 7267 730d 0a20 2020  ## get args..   
+00007100: 2066 6e5f 7275 6e3d 6172 6773 5b30 5d0d   fn_run=args[0].
+00007110: 0a20 2020 205f 6172 6773 3d61 7267 735b  .    _args=args[
+00007120: 315d 0d0a 0d0a 2020 2020 2323 2064 6f20  1]....    ## do 
+00007130: 6e6f 7420 7072 6f63 6573 7320 7477 6963  not process twic
+00007140: 6520 7361 6d65 2075 6964 0d0a 2020 2020  e same uid..    
+00007150: 5f75 6964 3d5f 6172 6773 2e67 6574 2827  _uid=_args.get('
+00007160: 2d75 6964 2729 0d0a 2020 2020 6966 205f  -uid')..    if _
+00007170: 7569 6420 696e 2067 4150 726f 6365 7373  uid in gAProcess
+00007180: 6564 3a0d 0a20 2020 2020 2020 2072 6574  ed:..        ret
+00007190: 7572 6e20 2022 6e6f 7420 7072 6f63 6573  urn  "not proces
+000071a0: 7369 6e67 2c20 616c 7265 6164 7920 7472  sing, already tr
+000071b0: 6965 642e 2e2e 220d 0a0d 0a20 2020 2023  ied..."....    #
+000071c0: 2320 7374 6172 7420 7469 6d65 0d0a 2020  # start time..  
+000071d0: 2020 6749 7342 7573 793d 5472 7565 0d0a    gIsBusy=True..
+000071e0: 2020 2020 6265 675f 6461 7465 203d 2064      beg_date = d
+000071f0: 6174 6574 696d 652e 7574 636e 6f77 2829  atetime.utcnow()
+00007200: 0d0a 0d0a 2020 2020 2323 2072 6570 726f  ....    ## repro
+00007210: 6365 7373 2041 4920 6172 6773 0d0a 2020  cess AI args..  
+00007220: 2020 6141 7267 466f 7270 6172 7365 7241    aArgForparserA
+00007230: 493d 5f67 6574 4172 6773 285f 6172 6773  I=_getArgs(_args
+00007240: 290d 0a20 2020 2061 7267 735f 4578 636c  )..    args_Excl
+00007250: 7573 6976 654f 5341 4953 3d5b 272d 6f72  usiveOSAIS=['-or
+00007260: 6967 272c 2027 2d74 272c 2027 2d75 272c  ig', '-t', '-u',
+00007270: 2027 2d75 6964 272c 2027 2d6c 6f63 616c   '-uid', '-local
+00007280: 272c 2027 2d63 7963 6c65 272c 2027 2d77  ', '-cycle', '-w
+00007290: 6172 6d75 7027 5d0d 0a20 2020 2061 4172  armup']..    aAr
+000072a0: 6746 6f72 7061 7273 6572 4149 3d5f 6172  gForparserAI=_ar
+000072b0: 6773 4672 6f6d 4669 6c74 6572 2861 4172  gsFromFilter(aAr
+000072c0: 6746 6f72 7061 7273 6572 4149 2c20 6172  gForparserAI, ar
+000072d0: 6773 5f45 7863 6c75 7369 7665 4f53 4149  gs_ExclusiveOSAI
+000072e0: 532c 2046 616c 7365 290d 0a0d 0a20 2020  S, False)....   
+000072f0: 2023 2320 7072 6f63 6573 7320 7468 6520   ## process the 
+00007300: 6669 6c65 6e61 6d65 2070 6173 7365 6420  filename passed 
+00007310: 696e 2064 6972 2028 6361 7365 206c 6f63  in dir (case loc
+00007320: 616c 686f 7374 202f 2041 4920 4761 7465  alhost / AI Gate
+00007330: 7761 7929 2c20 6f72 2064 6f77 6e6c 6f61  way), or downloa
+00007340: 6420 6669 6c65 2066 726f 6d20 5552 4c20  d file from URL 
+00007350: 2863 6173 6520 4149 2072 756e 6e69 6e67  (case AI running
+00007360: 2061 7320 5669 7274 7561 6c20 4149 290d   as Virtual AI).
+00007370: 0a20 2020 205f 696e 7075 743d 4e6f 6e65  .    _input=None
+00007380: 0d0a 2020 2020 5f66 696c 656e 616d 653d  ..    _filename=
+00007390: 5f61 7267 732e 6765 7428 272d 6669 6c65  _args.get('-file
+000073a0: 6e61 6d65 2729 0d0a 2020 2020 5f75 726c  name')..    _url
+000073b0: 5570 6c6f 6164 3d5f 6172 6773 2e67 6574  Upload=_args.get
+000073c0: 2827 7572 6c5f 7570 6c6f 6164 2729 0d0a  ('url_upload')..
+000073d0: 2020 2020 6966 206e 6f74 205f 6669 6c65      if not _file
+000073e0: 6e61 6d65 2061 6e64 205f 7572 6c55 706c  name and _urlUpl
+000073f0: 6f61 643a 0d0a 2020 2020 2020 2020 7472  oad:..        tr
+00007400: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
+00007410: 5f69 6e70 7574 3d64 6f77 6e6c 6f61 6449  _input=downloadI
+00007420: 6d61 6765 285f 7572 6c55 706c 6f61 6429  mage(_urlUpload)
+00007430: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+00007440: 205f 696e 7075 743a 0d0a 2020 2020 2020   _input:..      
+00007450: 2020 2020 2020 2020 2020 6141 7267 466f            aArgFo
+00007460: 7270 6172 7365 7241 492e 6170 7065 6e64  rparserAI.append
+00007470: 2822 2d66 696c 656e 616d 6522 290d 0a20  ("-filename").. 
+00007480: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00007490: 4172 6746 6f72 7061 7273 6572 4149 2e61  ArgForparserAI.a
+000074a0: 7070 656e 6428 5f69 6e70 7574 290d 0a20  ppend(_input).. 
+000074b0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+000074c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000074d0: 2020 2323 206d 696e 2072 6571 7569 7265    ## min require
+000074e0: 6d65 6e74 730d 0a20 2020 2020 2020 2020  ments..         
+000074f0: 2020 2020 2020 2070 7269 6e74 2822 6e6f         print("no
+00007500: 2069 6d61 6765 2074 6f20 7072 6f63 6573   image to proces
+00007510: 7322 290d 0a20 2020 2020 2020 2020 2020  s")..           
+00007520: 2020 2020 2072 6574 7572 6e20 2269 6e70       return "inp
+00007530: 7574 2072 6571 7569 7265 6422 0d0a 2020  ut required"..  
+00007540: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
+00007550: 6570 7469 6f6e 2061 7320 6572 723a 0d0a  eption as err:..
+00007560: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00007570: 7428 2243 5249 5449 4341 4c3a 2022 2b65  t("CRITICAL: "+e
+00007580: 7272 2e6d 7367 290d 0a20 2020 2020 2020  rr.msg)..       
+00007590: 2020 2020 2072 6169 7365 2065 7272 0d0a       raise err..
+000075a0: 2020 2020 0d0a 2020 2020 2323 2049 6e69      ..    ## Ini
+000075b0: 7420 4f53 4149 5320 5061 7261 6d73 2028  t OSAIS Params (
+000075c0: 6672 6f6d 2061 6c6c 2061 7267 732c 206b  from all args, k
+000075d0: 6565 7020 6f6e 6c79 2074 686f 7365 2066  eep only those f
+000075e0: 6f72 204f 5341 4953 290d 0a20 2020 2061  or OSAIS)..    a
+000075f0: 4172 6746 6f72 5061 7273 6572 4f53 4149  ArgForParserOSAI
+00007600: 533d 5f67 6574 4172 6773 285f 6172 6773  S=_getArgs(_args
+00007610: 290d 0a20 2020 2061 7267 735f 4578 636c  )..    args_Excl
+00007620: 7573 6976 654f 5341 4953 2e61 7070 656e  usiveOSAIS.appen
+00007630: 6428 272d 6f64 6972 2729 0d0a 2020 2020  d('-odir')..    
+00007640: 6172 6773 5f45 7863 6c75 7369 7665 4f53  args_ExclusiveOS
+00007650: 4149 532e 6170 7065 6e64 2827 2d69 6469  AIS.append('-idi
+00007660: 7227 290d 0a20 2020 2061 4172 6746 6f72  r')..    aArgFor
+00007670: 5061 7273 6572 4f53 4149 533d 5f61 7267  ParserOSAIS=_arg
+00007680: 7346 726f 6d46 696c 7465 7228 6141 7267  sFromFilter(aArg
+00007690: 466f 7250 6172 7365 724f 5341 4953 2c20  ForParserOSAIS, 
+000076a0: 6172 6773 5f45 7863 6c75 7369 7665 4f53  args_ExclusiveOS
+000076b0: 4149 532c 2054 7275 6529 0d0a 2020 2020  AIS, True)..    
+000076c0: 6f73 6169 735f 696e 6974 5061 7273 6572  osais_initParser
+000076d0: 2861 4172 6746 6f72 5061 7273 6572 4f53  (aArgForParserOS
+000076e0: 4149 5329 0d0a 0d0a 2020 2020 6966 2067  AIS)....    if g
+000076f0: 4973 5761 726d 7570 3a0d 0a20 2020 2020  IsWarmup:..     
+00007700: 2020 2070 7269 6e74 2822 5c72 5c6e 3d3e     print("\r\n=>
+00007710: 2057 6172 6d69 6e67 2075 702e 2e2e 205c   Warming up... \
+00007720: 725c 6e22 290d 0a20 2020 2065 6c73 653a  r\n")..    else:
+00007730: 0d0a 2020 2020 2020 2020 7072 696e 7428  ..        print(
+00007740: 225c 725c 6e3d 3e20 6265 666f 7265 2072  "\r\n=> before r
+00007750: 756e 3a20 7072 6f63 6573 7365 6420 6172  un: processed ar
+00007760: 6773 2066 726f 6d20 7572 6c3a 2022 2b73  gs from url: "+s
+00007770: 7472 2861 4172 6746 6f72 7061 7273 6572  tr(aArgForparser
+00007780: 4149 292b 225c 725c 6e22 290d 0a0d 0a20  AI)+"\r\n").... 
+00007790: 2020 2023 23c2 a070 726f 6365 7373 696e     ##..processin
+000077a0: 6720 6163 6365 7074 6564 0d0a 2020 2020  g accepted..    
+000077b0: 674c 6173 7450 726f 6365 7373 5374 6172  gLastProcessStar
+000077c0: 745f 6174 3d64 6174 6574 696d 652e 7574  t_at=datetime.ut
+000077d0: 636e 6f77 2829 0d0a 2020 2020 6741 5072  cnow()..    gAPr
+000077e0: 6f63 6573 7365 642e 6170 7065 6e64 285f  ocessed.append(_
+000077f0: 7569 6429 0d0a 0d0a 2020 2020 2323 206e  uid)....    ## n
+00007800: 6f74 6966 7920 4f53 4149 5320 2873 7461  otify OSAIS (sta
+00007810: 7274 290d 0a20 2020 2043 7265 6473 5061  rt)..    CredsPa
+00007820: 7261 6d3d 6765 7443 7265 6473 5061 7261  ram=getCredsPara
+00007830: 6d73 2829 0d0a 2020 2020 4d6f 7270 6869  ms()..    Morphi
+00007840: 6e67 5061 7261 6d3d 6765 744d 6f72 7068  ngParam=getMorph
+00007850: 696e 6750 6172 616d 7328 290d 0a20 2020  ingParams()..   
+00007860: 2053 7461 6765 5061 7261 6d3d 6765 7453   StageParam=getS
+00007870: 7461 6765 5061 7261 6d73 2841 495f 5052  tageParams(AI_PR
+00007880: 4f47 5245 5353 5f41 495f 5354 4152 5445  OGRESS_AI_STARTE
+00007890: 442c 2030 290d 0a20 2020 206f 7361 6973  D, 0)..    osais
+000078a0: 5f6e 6f74 6966 7928 4372 6564 7350 6172  _notify(CredsPar
+000078b0: 616d 2c20 4d6f 7270 6869 6e67 5061 7261  am, MorphingPara
+000078c0: 6d20 2c20 5374 6167 6550 6172 616d 290d  m , StageParam).
+000078d0: 0a0d 0a20 2020 2023 2320 7374 6172 7420  ...    ## start 
+000078e0: 7761 7463 6820 6669 6c65 2063 7265 6174  watch file creat
+000078f0: 696f 6e0d 0a20 2020 205f 6f75 7470 7574  ion..    _output
+00007900: 3d5f 6765 744f 7574 7075 7444 6972 2829  =_getOutputDir()
+00007910: 0d0a 2020 2020 7761 7463 685f 6469 7265  ..    watch_dire
+00007920: 6374 6f72 7928 5f6f 7574 7075 742c 206f  ctory(_output, o
+00007930: 7361 6973 5f6f 6e4e 6f74 6966 7946 696c  sais_onNotifyFil
+00007940: 6543 7265 6174 6564 2c20 5f61 7267 7329  eCreated, _args)
+00007950: 0d0a 0d0a 2020 2020 2323 204e 6f74 6966  ....    ## Notif
+00007960: 204f 5341 4953 0d0a 2020 2020 5374 6167   OSAIS..    Stag
+00007970: 6550 6172 616d 3d67 6574 5374 6167 6550  eParam=getStageP
+00007980: 6172 616d 7328 4149 5f50 524f 4752 4553  arams(AI_PROGRES
+00007990: 535f 494e 4954 5f49 4d41 4745 2c20 3029  S_INIT_IMAGE, 0)
+000079a0: 0d0a 2020 2020 6f73 6169 735f 6e6f 7469  ..    osais_noti
+000079b0: 6679 2843 7265 6473 5061 7261 6d2c 204d  fy(CredsParam, M
+000079c0: 6f72 7068 696e 6750 6172 616d 202c 2053  orphingParam , S
+000079d0: 7461 6765 5061 7261 6d29 0d0a 0d0a 2020  tageParam)....  
+000079e0: 2020 2323 2072 756e 2041 490d 0a20 2020    ## run AI..   
+000079f0: 2072 6573 706f 6e73 653d 4e6f 6e65 0d0a   response=None..
+00007a00: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
+00007a10: 2020 6966 206c 656e 2861 7267 7329 3d3d    if len(args)==
+00007a20: 323a 0d0a 2020 2020 2020 2020 2020 2020  2:..            
+00007a30: 7265 7370 6f6e 7365 3d66 6e5f 7275 6e28  response=fn_run(
+00007a40: 6141 7267 466f 7270 6172 7365 7241 4929  aArgForparserAI)
+00007a50: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
+00007a60: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00007a70: 6c65 6e28 6172 6773 293d 3d33 3a0d 0a20  len(args)==3:.. 
+00007a80: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00007a90: 6573 706f 6e73 653d 666e 5f72 756e 2861  esponse=fn_run(a
+00007aa0: 4172 6746 6f72 7061 7273 6572 4149 2c20  ArgForparserAI, 
+00007ab0: 6172 6773 5b32 5d29 0d0a 2020 2020 2020  args[2])..      
+00007ac0: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+00007ad0: 2020 2020 2020 2020 2020 2020 2072 6573               res
+00007ae0: 706f 6e73 653d 666e 5f72 756e 2861 4172  ponse=fn_run(aAr
+00007af0: 6746 6f72 7061 7273 6572 4149 2c20 6172  gForparserAI, ar
+00007b00: 6773 5b32 5d2c 2061 7267 735b 335d 290d  gs[2], args[3]).
+00007b10: 0a20 2020 2065 7863 6570 7420 4578 6365  .    except Exce
+00007b20: 7074 696f 6e20 6173 2065 7272 3a0d 0a20  ption as err:.. 
+00007b30: 2020 2020 2020 2070 7269 6e74 2822 4352         print("CR
+00007b40: 4954 4943 414c 3a20 222b 6572 722e 6d73  ITICAL: "+err.ms
+00007b50: 6729 0d0a 2020 2020 2020 2020 7261 6973  g)..        rais
+00007b60: 6520 6572 720d 0a0d 0a20 2020 2023 2320  e err....    ## 
+00007b70: 6361 6c63 756c 6174 6520 636f 7374 0d0a  calculate cost..
+00007b80: 2020 2020 6749 7342 7573 793d 4661 6c73      gIsBusy=Fals
+00007b90: 650d 0a20 2020 2065 6e64 5f64 6174 6520  e..    end_date 
+00007ba0: 3d20 6461 7465 7469 6d65 2e75 7463 6e6f  = datetime.utcno
+00007bb0: 7728 290d 0a20 2020 2064 656c 7461 3d65  w()..    delta=e
+00007bc0: 6e64 5f64 6174 6520 2d20 6265 675f 6461  nd_date - beg_da
+00007bd0: 7465 0d0a 2020 2020 636f 7374 203d 2069  te..    cost = i
+00007be0: 6e74 2864 656c 7461 2e74 6f74 616c 5f73  nt(delta.total_s
+00007bf0: 6563 6f6e 6473 2829 2a20 3130 3030 202b  econds()* 1000 +
+00007c00: 2064 656c 7461 2e6d 6963 726f 7365 636f   delta.microseco
+00007c10: 6e64 7320 2f20 3130 3030 290d 0a20 2020  nds / 1000)..   
+00007c20: 205f 6164 6443 6f73 7428 636f 7374 290d   _addCost(cost).
+00007c30: 0a0d 0a20 2020 2023 2320 6e6f 7469 6679  ...    ## notify
+00007c40: 2065 6e64 0d0a 2020 2020 5374 6167 6550   end..    StageP
+00007c50: 6172 616d 3d67 6574 5374 6167 6550 6172  aram=getStagePar
+00007c60: 616d 7328 4149 5f50 524f 4752 4553 535f  ams(AI_PROGRESS_
+00007c70: 4149 5f53 544f 5050 4544 2c20 636f 7374  AI_STOPPED, cost
+00007c80: 290d 0a20 2020 206f 7361 6973 5f6e 6f74  )..    osais_not
+00007c90: 6966 7928 4372 6564 7350 6172 616d 2c20  ify(CredsParam, 
+00007ca0: 4d6f 7270 6869 6e67 5061 7261 6d20 2c20  MorphingParam , 
+00007cb0: 5374 6167 6550 6172 616d 290d 0a0d 0a20  StageParam).... 
+00007cc0: 2020 2023 2320 6465 6661 756c 7420 4f4b     ## default OK
+00007cd0: 2072 6573 706f 6e73 6520 6966 2074 6865   response if the
+00007ce0: 2041 4920 646f 6573 206e 6f74 2073 656e   AI does not sen
+00007cf0: 6420 616e 790d 0a20 2020 2069 6620 7265  d any..    if re
+00007d00: 7370 6f6e 7365 3d3d 4e6f 6e65 3a0d 0a20  sponse==None:.. 
+00007d10: 2020 2020 2020 2072 6573 706f 6e73 653d         response=
+00007d20: 5472 7565 0d0a 2020 2020 7265 7475 726e  True..    return
+00007d30: 2072 6573 706f 6e73 650d 0a0d 0a23 2320   response....## 
 00007d40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007d50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a23 2020  -----------..#  
-00007d60: 2020 2020 2067 6574 2066 6f72 6d61 7474       get formatt
-00007d70: 6564 2070 6172 616d 7320 6672 6f6d 2041  ed params from A
-00007d80: 4920 6375 7272 656e 7420 7374 6174 650d  I current state.
-00007d90: 0a23 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .## ------------
-00007da0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007db0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007dc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007dd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 0d0a  ------------....
-00007de0: 6465 6620 6765 7443 7265 6473 5061 7261  def getCredsPara
-00007df0: 6d73 2829 203a 0d0a 2020 2020 676c 6f62  ms() :..    glob
-00007e00: 616c 2067 4e61 6d65 0d0a 2020 2020 676c  al gName..    gl
-00007e10: 6f62 616c 2067 4172 6773 4f53 4149 530d  obal gArgsOSAIS.
-00007e20: 0a20 2020 2072 6574 7572 6e20 7b0d 0a20  .    return {.. 
-00007e30: 2020 2020 2020 2022 656e 6769 6e65 223a         "engine":
-00007e40: 2067 4e61 6d65 2c20 0d0a 2020 2020 2020   gName, ..      
-00007e50: 2020 2276 6572 7369 6f6e 223a 2067 5665    "version": gVe
-00007e60: 7273 696f 6e2c 200d 0a20 2020 2020 2020  rsion, ..       
-00007e70: 2022 746f 6b65 6e41 4922 3a20 6741 7267   "tokenAI": gArg
-00007e80: 734f 5341 4953 2e74 6f6b 656e 4149 2c0d  sOSAIS.tokenAI,.
-00007e90: 0a20 2020 2020 2020 2022 7573 6572 6e61  .        "userna
-00007ea0: 6d65 223a 2067 4172 6773 4f53 4149 532e  me": gArgsOSAIS.
-00007eb0: 7573 6572 6e61 6d65 2c0d 0a20 2020 2020  username,..     
-00007ec0: 2020 2022 6973 4c6f 6361 6c22 3a20 6741     "isLocal": gA
-00007ed0: 7267 734f 5341 4953 2e69 734c 6f63 616c  rgsOSAIS.isLocal
-00007ee0: 0d0a 2020 2020 7d20 0d0a 0d0a 6465 6620  ..    } ....def 
-00007ef0: 6765 744d 6f72 7068 696e 6750 6172 616d  getMorphingParam
-00007f00: 7328 2920 3a0d 0a20 2020 2067 6c6f 6261  s() :..    globa
-00007f10: 6c20 6741 7267 734f 5341 4953 0d0a 2020  l gArgsOSAIS..  
-00007f20: 2020 7265 7475 726e 207b 0d0a 2020 2020    return {..    
-00007f30: 2020 2020 2275 6964 223a 2067 4172 6773      "uid": gArgs
-00007f40: 4f53 4149 532e 7569 642c 0d0a 2020 2020  OSAIS.uid,..    
-00007f50: 2020 2020 2263 7963 6c65 223a 2067 4172      "cycle": gAr
-00007f60: 6773 4f53 4149 532e 6379 636c 652c 0d0a  gsOSAIS.cycle,..
-00007f70: 2020 2020 2020 2020 2266 696c 656e 616d          "filenam
-00007f80: 6522 3a20 6741 7267 734f 5341 4953 2e66  e": gArgsOSAIS.f
-00007f90: 696c 656e 616d 652c 200d 0a20 2020 2020  ilename, ..     
-00007fa0: 2020 2022 6f64 6972 223a 205f 6765 744f     "odir": _getO
-00007fb0: 7574 7075 7444 6972 2829 0d0a 2020 2020  utputDir()..    
-00007fc0: 7d0d 0a0d 0a64 6566 2067 6574 5374 6167  }....def getStag
-00007fd0: 6550 6172 616d 7328 5f73 7461 6765 2c20  eParams(_stage, 
-00007fe0: 5f63 6f73 7429 203a 0d0a 2020 2020 676c  _cost) :..    gl
-00007ff0: 6f62 616c 2067 4172 6773 4f53 4149 530d  obal gArgsOSAIS.
-00008000: 0a20 2020 2069 6620 5f73 7461 6765 3d3d  .    if _stage==
-00008010: 4149 5f50 524f 4752 4553 535f 4152 4753  AI_PROGRESS_ARGS
-00008020: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
-00008030: 6e20 7b22 7374 6167 6522 3a20 4149 5f50  n {"stage": AI_P
-00008040: 524f 4752 4553 535f 4149 5f53 5441 5254  ROGRESS_AI_START
-00008050: 4544 2c20 2264 6573 6372 223a 224a 7573  ED, "descr":"Jus
-00008060: 7420 7061 7273 6564 2041 4920 7061 7261  t parsed AI para
-00008070: 6d73 227d 0d0a 2020 2020 6966 205f 7374  ms"}..    if _st
-00008080: 6167 653d 3d41 495f 5052 4f47 5245 5353  age==AI_PROGRESS
-00008090: 5f45 5252 4f52 3a0d 0a20 2020 2020 2020  _ERROR:..       
-000080a0: 2072 6574 7572 6e20 7b22 7374 6167 6522   return {"stage"
-000080b0: 3a20 4149 5f50 524f 4752 4553 535f 4149  : AI_PROGRESS_AI
-000080c0: 5f53 544f 5050 4544 2c20 2264 6573 6372  _STOPPED, "descr
-000080d0: 223a 2241 4920 7374 6f70 7065 6420 7769  ":"AI stopped wi
-000080e0: 7468 2065 7272 6f72 227d 0d0a 2020 2020  th error"}..    
-000080f0: 6966 205f 7374 6167 653d 3d41 495f 5052  if _stage==AI_PR
-00008100: 4f47 5245 5353 5f41 495f 5354 4152 5445  OGRESS_AI_STARTE
-00008110: 443a 0d0a 2020 2020 2020 2020 7265 7475  D:..        retu
-00008120: 726e 207b 2273 7461 6765 223a 2041 495f  rn {"stage": AI_
-00008130: 5052 4f47 5245 5353 5f41 495f 5354 4152  PROGRESS_AI_STAR
-00008140: 5445 442c 2022 6465 7363 7222 3a22 4149  TED, "descr":"AI
-00008150: 2073 7461 7274 6564 227d 0d0a 2020 2020   started"}..    
-00008160: 6966 205f 7374 6167 653d 3d41 495f 5052  if _stage==AI_PR
-00008170: 4f47 5245 5353 5f41 495f 5354 4f50 5045  OGRESS_AI_STOPPE
-00008180: 443a 0d0a 2020 2020 2020 2020 7265 7475  D:..        retu
-00008190: 726e 207b 2273 7461 6765 223a 2041 495f  rn {"stage": AI_
-000081a0: 5052 4f47 5245 5353 5f41 495f 5354 4f50  PROGRESS_AI_STOP
-000081b0: 5045 442c 2022 6465 7363 7222 3a22 4149  PED, "descr":"AI
-000081c0: 2073 746f 7070 6564 222c 2022 636f 7374   stopped", "cost
-000081d0: 223a 205f 636f 7374 7d0d 0a20 2020 2069  ": _cost}..    i
-000081e0: 6620 5f73 7461 6765 3d3d 4149 5f50 524f  f _stage==AI_PRO
-000081f0: 4752 4553 535f 494e 4954 5f49 4d41 4745  GRESS_INIT_IMAGE
-00008200: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
-00008210: 6e20 7b22 7374 6167 6522 3a20 4149 5f50  n {"stage": AI_P
-00008220: 524f 4752 4553 535f 494e 4954 5f49 4d41  ROGRESS_INIT_IMA
-00008230: 4745 2c20 2264 6573 6372 223a 2264 6573  GE, "descr":"des
-00008240: 7469 6e61 7469 6f6e 2069 6d61 6765 203d  tination image =
-00008250: 2022 2b67 4172 6773 4f53 4149 532e 6669   "+gArgsOSAIS.fi
-00008260: 6c65 6e61 6d65 7d0d 0a20 2020 2069 6620  lename}..    if 
-00008270: 5f73 7461 6765 3d3d 4149 5f50 524f 4752  _stage==AI_PROGR
-00008280: 4553 535f 444f 4e45 5f49 4d41 4745 3a0d  ESS_DONE_IMAGE:.
-00008290: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000082a0: 7b22 7374 6167 6522 3a20 4149 5f50 524f  {"stage": AI_PRO
-000082b0: 4752 4553 535f 444f 4e45 5f49 4d41 4745  GRESS_DONE_IMAGE
-000082c0: 2c20 2264 6573 6372 223a 2263 6f70 6965  , "descr":"copie
-000082d0: 6420 696e 7075 7420 696d 6167 6520 746f  d input image to
-000082e0: 2064 6573 7469 6e61 7469 6f6e 2069 6d61   destination ima
-000082f0: 6765 227d 0d0a 2020 2020 7265 7475 726e  ge"}..    return
-00008300: 207b 2273 7461 6765 223a 2041 495f 5052   {"stage": AI_PR
-00008310: 4f47 5245 5353 5f45 5252 4f52 2c20 2264  OGRESS_ERROR, "d
-00008320: 6573 6372 223a 2265 7272 6f72 227d 0d0a  escr":"error"}..
-00008330: 0d0a 2323 202d 2d2d 2d2d 2d2d 2d2d 2d2d  ..## -----------
-00008340: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00008350: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00008360: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00008370: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a23  -------------..#
-00008380: 2020 2020 2020 204e 6f74 6966 6963 6174         Notificat
-00008390: 696f 6e73 2074 6f20 4761 7465 7761 7920  ions to Gateway 
-000083a0: 2f20 4f53 4149 530d 0a23 2320 2d2d 2d2d  / OSAIS..## ----
-000083b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000083c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000083d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007d50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007d60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007d70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007d80: 2d2d 2d2d 2d2d 2d2d 0d0a 2320 2020 2020  --------..#     
+00007d90: 2020 6765 7420 666f 726d 6174 7465 6420    get formatted 
+00007da0: 7061 7261 6d73 2066 726f 6d20 4149 2063  params from AI c
+00007db0: 7572 7265 6e74 2073 7461 7465 0d0a 2323  urrent state..##
+00007dc0: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
+00007dd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007de0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007df0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007e00: 2d2d 2d2d 2d2d 2d2d 2d0d 0a0d 0a64 6566  ---------....def
+00007e10: 2067 6574 4372 6564 7350 6172 616d 7328   getCredsParams(
+00007e20: 2920 3a0d 0a20 2020 2067 6c6f 6261 6c20  ) :..    global 
+00007e30: 674e 616d 650d 0a20 2020 2067 6c6f 6261  gName..    globa
+00007e40: 6c20 6741 7267 734f 5341 4953 0d0a 2020  l gArgsOSAIS..  
+00007e50: 2020 7265 7475 726e 207b 0d0a 2020 2020    return {..    
+00007e60: 2020 2020 2265 6e67 696e 6522 3a20 674e      "engine": gN
+00007e70: 616d 652c 200d 0a20 2020 2020 2020 2022  ame, ..        "
+00007e80: 7665 7273 696f 6e22 3a20 6756 6572 7369  version": gVersi
+00007e90: 6f6e 2c20 0d0a 2020 2020 2020 2020 2274  on, ..        "t
+00007ea0: 6f6b 656e 4149 223a 2067 4172 6773 4f53  okenAI": gArgsOS
+00007eb0: 4149 532e 746f 6b65 6e41 492c 0d0a 2020  AIS.tokenAI,..  
+00007ec0: 2020 2020 2020 2275 7365 726e 616d 6522        "username"
+00007ed0: 3a20 6741 7267 734f 5341 4953 2e75 7365  : gArgsOSAIS.use
+00007ee0: 726e 616d 652c 0d0a 2020 2020 2020 2020  rname,..        
+00007ef0: 2269 734c 6f63 616c 223a 2067 4172 6773  "isLocal": gArgs
+00007f00: 4f53 4149 532e 6973 4c6f 6361 6c0d 0a20  OSAIS.isLocal.. 
+00007f10: 2020 207d 200d 0a0d 0a64 6566 2067 6574     } ....def get
+00007f20: 4d6f 7270 6869 6e67 5061 7261 6d73 2829  MorphingParams()
+00007f30: 203a 0d0a 2020 2020 676c 6f62 616c 2067   :..    global g
+00007f40: 4172 6773 4f53 4149 530d 0a20 2020 2072  ArgsOSAIS..    r
+00007f50: 6574 7572 6e20 7b0d 0a20 2020 2020 2020  eturn {..       
+00007f60: 2022 7569 6422 3a20 6741 7267 734f 5341   "uid": gArgsOSA
+00007f70: 4953 2e75 6964 2c0d 0a20 2020 2020 2020  IS.uid,..       
+00007f80: 2022 6379 636c 6522 3a20 6741 7267 734f   "cycle": gArgsO
+00007f90: 5341 4953 2e63 7963 6c65 2c0d 0a20 2020  SAIS.cycle,..   
+00007fa0: 2020 2020 2022 6669 6c65 6e61 6d65 223a       "filename":
+00007fb0: 2067 4172 6773 4f53 4149 532e 6669 6c65   gArgsOSAIS.file
+00007fc0: 6e61 6d65 2c20 0d0a 2020 2020 2020 2020  name, ..        
+00007fd0: 226f 6469 7222 3a20 5f67 6574 4f75 7470  "odir": _getOutp
+00007fe0: 7574 4469 7228 290d 0a20 2020 207d 0d0a  utDir()..    }..
+00007ff0: 0d0a 6465 6620 6765 7453 7461 6765 5061  ..def getStagePa
+00008000: 7261 6d73 285f 7374 6167 652c 205f 636f  rams(_stage, _co
+00008010: 7374 2920 3a0d 0a20 2020 2067 6c6f 6261  st) :..    globa
+00008020: 6c20 6741 7267 734f 5341 4953 0d0a 2020  l gArgsOSAIS..  
+00008030: 2020 6966 205f 7374 6167 653d 3d41 495f    if _stage==AI_
+00008040: 5052 4f47 5245 5353 5f41 5247 533a 0d0a  PROGRESS_ARGS:..
+00008050: 2020 2020 2020 2020 7265 7475 726e 207b          return {
+00008060: 2273 7461 6765 223a 2041 495f 5052 4f47  "stage": AI_PROG
+00008070: 5245 5353 5f41 495f 5354 4152 5445 442c  RESS_AI_STARTED,
+00008080: 2022 6465 7363 7222 3a22 4a75 7374 2070   "descr":"Just p
+00008090: 6172 7365 6420 4149 2070 6172 616d 7322  arsed AI params"
+000080a0: 7d0d 0a20 2020 2069 6620 5f73 7461 6765  }..    if _stage
+000080b0: 3d3d 4149 5f50 524f 4752 4553 535f 4552  ==AI_PROGRESS_ER
+000080c0: 524f 523a 0d0a 2020 2020 2020 2020 7265  ROR:..        re
+000080d0: 7475 726e 207b 2273 7461 6765 223a 2041  turn {"stage": A
+000080e0: 495f 5052 4f47 5245 5353 5f41 495f 5354  I_PROGRESS_AI_ST
+000080f0: 4f50 5045 442c 2022 6465 7363 7222 3a22  OPPED, "descr":"
+00008100: 4149 2073 746f 7070 6564 2077 6974 6820  AI stopped with 
+00008110: 6572 726f 7222 7d0d 0a20 2020 2069 6620  error"}..    if 
+00008120: 5f73 7461 6765 3d3d 4149 5f50 524f 4752  _stage==AI_PROGR
+00008130: 4553 535f 4149 5f53 5441 5254 4544 3a0d  ESS_AI_STARTED:.
+00008140: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00008150: 7b22 7374 6167 6522 3a20 4149 5f50 524f  {"stage": AI_PRO
+00008160: 4752 4553 535f 4149 5f53 5441 5254 4544  GRESS_AI_STARTED
+00008170: 2c20 2264 6573 6372 223a 2241 4920 7374  , "descr":"AI st
+00008180: 6172 7465 6422 7d0d 0a20 2020 2069 6620  arted"}..    if 
+00008190: 5f73 7461 6765 3d3d 4149 5f50 524f 4752  _stage==AI_PROGR
+000081a0: 4553 535f 4149 5f53 544f 5050 4544 3a0d  ESS_AI_STOPPED:.
+000081b0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000081c0: 7b22 7374 6167 6522 3a20 4149 5f50 524f  {"stage": AI_PRO
+000081d0: 4752 4553 535f 4149 5f53 544f 5050 4544  GRESS_AI_STOPPED
+000081e0: 2c20 2264 6573 6372 223a 2241 4920 7374  , "descr":"AI st
+000081f0: 6f70 7065 6422 2c20 2263 6f73 7422 3a20  opped", "cost": 
+00008200: 5f63 6f73 747d 0d0a 2020 2020 6966 205f  _cost}..    if _
+00008210: 7374 6167 653d 3d41 495f 5052 4f47 5245  stage==AI_PROGRE
+00008220: 5353 5f49 4e49 545f 494d 4147 453a 0d0a  SS_INIT_IMAGE:..
+00008230: 2020 2020 2020 2020 7265 7475 726e 207b          return {
+00008240: 2273 7461 6765 223a 2041 495f 5052 4f47  "stage": AI_PROG
+00008250: 5245 5353 5f49 4e49 545f 494d 4147 452c  RESS_INIT_IMAGE,
+00008260: 2022 6465 7363 7222 3a22 6465 7374 696e   "descr":"destin
+00008270: 6174 696f 6e20 696d 6167 6520 3d20 222b  ation image = "+
+00008280: 6741 7267 734f 5341 4953 2e66 696c 656e  gArgsOSAIS.filen
+00008290: 616d 657d 0d0a 2020 2020 6966 205f 7374  ame}..    if _st
+000082a0: 6167 653d 3d41 495f 5052 4f47 5245 5353  age==AI_PROGRESS
+000082b0: 5f44 4f4e 455f 494d 4147 453a 0d0a 2020  _DONE_IMAGE:..  
+000082c0: 2020 2020 2020 7265 7475 726e 207b 2273        return {"s
+000082d0: 7461 6765 223a 2041 495f 5052 4f47 5245  tage": AI_PROGRE
+000082e0: 5353 5f44 4f4e 455f 494d 4147 452c 2022  SS_DONE_IMAGE, "
+000082f0: 6465 7363 7222 3a22 636f 7069 6564 2069  descr":"copied i
+00008300: 6e70 7574 2069 6d61 6765 2074 6f20 6465  nput image to de
+00008310: 7374 696e 6174 696f 6e20 696d 6167 6522  stination image"
+00008320: 7d0d 0a20 2020 2072 6574 7572 6e20 7b22  }..    return {"
+00008330: 7374 6167 6522 3a20 4149 5f50 524f 4752  stage": AI_PROGR
+00008340: 4553 535f 4552 524f 522c 2022 6465 7363  ESS_ERROR, "desc
+00008350: 7222 3a22 6572 726f 7222 7d0d 0a0d 0a23  r":"error"}....#
+00008360: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
+00008370: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008380: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008390: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000083a0: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2320 2020  ----------..#   
+000083b0: 2020 2020 4e6f 7469 6669 6361 7469 6f6e      Notification
+000083c0: 7320 746f 2047 6174 6577 6179 202f 204f  s to Gateway / O
+000083d0: 5341 4953 0d0a 2323 202d 2d2d 2d2d 2d2d  SAIS..## -------
 000083e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000083f0: 2d2d 2d2d 0d0a 0d0a 2320 5570 6c6f 6164  ----....# Upload
-00008400: 2069 6d61 6765 2074 6f20 4f53 4149 5320   image to OSAIS 
-00008410: 0d0a 6465 6620 5f75 706c 6f61 6449 6d61  ..def _uploadIma
-00008420: 6765 546f 4f53 4149 5328 6f62 6a50 6172  geToOSAIS(objPar
-00008430: 616d 2c20 6973 4c6f 6361 6c29 3a0d 0a20  am, isLocal):.. 
-00008440: 2020 2069 6620 6749 7356 6972 7475 616c     if gIsVirtual
-00008450: 4149 3d3d 4661 6c73 653a 0d0a 2020 2020  AI==False:..    
-00008460: 2020 2020 7265 7475 726e 204e 6f6e 650d      return None.
-00008470: 0a20 2020 200d 0a20 2020 2067 6c6f 6261  .    ..    globa
-00008480: 6c20 6741 7574 6854 6f6b 656e 0d0a 2020  l gAuthToken..  
-00008490: 2020 676c 6f62 616c 2067 4f72 6967 696e    global gOrigin
-000084a0: 4f53 4149 530d 0a20 2020 2067 6c6f 6261  OSAIS..    globa
-000084b0: 6c20 6741 7574 6854 6f6b 656e 4c6f 6361  l gAuthTokenLoca
-000084c0: 6c0d 0a20 2020 2067 6c6f 6261 6c20 674f  l..    global gO
-000084d0: 7269 6769 6e4c 6f63 616c 4f53 4149 530d  riginLocalOSAIS.
-000084e0: 0a0d 0a20 2020 205f 6175 7468 3d67 4175  ...    _auth=gAu
-000084f0: 7468 546f 6b65 6e0d 0a20 2020 2069 6620  thToken..    if 
-00008500: 6973 4c6f 6361 6c3a 0d0a 2020 2020 2020  isLocal:..      
-00008510: 2020 5f61 7574 683d 6741 7574 6854 6f6b    _auth=gAuthTok
-00008520: 656e 4c6f 6361 6c0d 0a20 2020 205f 6f73  enLocal..    _os
-00008530: 6169 733d 674f 7269 6769 6e4f 5341 4953  ais=gOriginOSAIS
-00008540: 0d0a 2020 2020 6966 2069 734c 6f63 616c  ..    if isLocal
-00008550: 3a0d 0a20 2020 2020 2020 205f 6f73 6169  :..        _osai
-00008560: 733d 674f 7269 6769 6e4c 6f63 616c 4f53  s=gOriginLocalOS
-00008570: 4149 530d 0a0d 0a20 2020 2023 206c 6574  AIS....    # let
-00008580: 7320 676f 2063 616c 6c20 4f53 4149 5320  s go call OSAIS 
-00008590: 4149 2047 6174 6577 6179 202f 206f 7220  AI Gateway / or 
-000085a0: 4f53 4149 5320 6974 7365 6c66 0d0a 2020  OSAIS itself..  
-000085b0: 2020 6865 6164 6572 7320 3d20 7b0d 0a20    headers = {.. 
-000085c0: 2020 2020 2020 2022 436f 6e74 656e 742d         "Content-
-000085d0: 5479 7065 223a 2027 6170 706c 6963 6174  Type": 'applicat
-000085e0: 696f 6e2f 6a73 6f6e 272c 200d 0a20 2020  ion/json', ..   
-000085f0: 2020 2020 2027 4163 6365 7074 273a 2027       'Accept': '
-00008600: 7465 7874 2f70 6c61 696e 272c 0d0a 2020  text/plain',..  
-00008610: 2020 2020 2020 2241 7574 686f 7269 7a61        "Authoriza
-00008620: 7469 6f6e 223a 2066 2242 6561 7265 7220  tion": f"Bearer 
-00008630: 7b5f 6175 7468 7d22 0d0a 2020 2020 7d0d  {_auth}"..    }.
-00008640: 0a0d 0a20 2020 2061 7069 5f75 726c 3d66  ...    api_url=f
-00008650: 227b 5f6f 7361 6973 7d61 7069 2f76 312f  "{_osais}api/v1/
-00008660: 7072 6976 6174 652f 7570 6c6f 6164 2220  private/upload" 
-00008670: 2020 2020 2020 200d 0a20 2020 2070 6179         ..    pay
-00008680: 6c6f 6164 203d 206a 736f 6e2e 6475 6d70  load = json.dump
-00008690: 7328 6f62 6a50 6172 616d 290d 0a20 2020  s(objParam)..   
-000086a0: 2072 6573 706f 6e73 6520 3d20 7265 7175   response = requ
-000086b0: 6573 7473 2e70 6f73 7428 6170 695f 7572  ests.post(api_ur
-000086c0: 6c2c 2068 6561 6465 7273 3d68 6561 6465  l, headers=heade
-000086d0: 7273 2c20 6461 7461 3d70 6179 6c6f 6164  rs, data=payload
-000086e0: 2029 0d0a 2020 2020 6f62 6a52 6573 3d72   )..    objRes=r
-000086f0: 6573 706f 6e73 652e 6a73 6f6e 2829 0d0a  esponse.json()..
-00008700: 2020 2020 7265 7475 726e 206f 626a 5265      return objRe
-00008710: 7320 2020 200d 0a0d 0a64 6566 206f 7361  s    ....def osa
-00008720: 6973 5f6f 6e4e 6f74 6966 7946 696c 6543  is_onNotifyFileC
-00008730: 7265 6174 6564 285f 6469 722c 205f 6669  reated(_dir, _fi
-00008740: 6c65 6e61 6d65 2c20 5f61 7267 7329 3a0d  lename, _args):.
-00008750: 0a20 2020 2067 4172 6773 4f53 4149 532e  .    gArgsOSAIS.
-00008760: 6669 6c65 6e61 6d65 3d5f 6669 6c65 6e61  filename=_filena
-00008770: 6d65 0d0a 2020 2020 5f73 7461 6765 5061  me..    _stagePa
-00008780: 7261 6d3d 6765 7453 7461 6765 5061 7261  ram=getStagePara
-00008790: 6d73 2841 495f 5052 4f47 5245 5353 5f44  ms(AI_PROGRESS_D
-000087a0: 4f4e 455f 494d 4147 452c 2030 290d 0a20  ONE_IMAGE, 0).. 
-000087b0: 2020 205f 6d6f 7270 6869 6e67 5061 7261     _morphingPara
-000087c0: 6d3d 6765 744d 6f72 7068 696e 6750 6172  m=getMorphingPar
-000087d0: 616d 7328 290d 0a20 2020 205f 6372 6564  ams()..    _cred
-000087e0: 7350 6172 616d 3d67 6574 4372 6564 7350  sParam=getCredsP
-000087f0: 6172 616d 7328 290d 0a20 2020 206f 7361  arams()..    osa
-00008800: 6973 5f6e 6f74 6966 7928 5f63 7265 6473  is_notify(_creds
-00008810: 5061 7261 6d2c 205f 6d6f 7270 6869 6e67  Param, _morphing
-00008820: 5061 7261 6d2c 205f 7374 6167 6550 6172  Param, _stagePar
-00008830: 616d 2920 2020 2020 2020 2020 2020 2023  am)            #
-00008840: 204f 5341 4953 204e 6f74 6966 6963 6174   OSAIS Notificat
-00008850: 696f 6e0d 0a20 2020 2072 6574 7572 6e20  ion..    return 
-00008860: 5472 7565 0d0a 0d0a 2320 4469 7265 6374  True....# Direct
-00008870: 204e 6f74 6966 7920 4f53 4149 5320 0d0a   Notify OSAIS ..
-00008880: 6465 6620 6f73 6169 735f 6e6f 7469 6679  def osais_notify
-00008890: 2843 7265 6450 6172 616d 2c20 4d6f 7270  (CredParam, Morp
-000088a0: 6869 6e67 5061 7261 6d2c 2053 7461 6765  hingParam, Stage
-000088b0: 5061 7261 6d29 3a0d 0a20 2020 2067 6c6f  Param):..    glo
-000088c0: 6261 6c20 6749 504c 6f63 616c 0d0a 2020  bal gIPLocal..  
-000088d0: 2020 676c 6f62 616c 2067 506f 7274 4761    global gPortGa
-000088e0: 7465 7761 790d 0a20 2020 2067 6c6f 6261  teway..    globa
-000088f0: 6c20 674f 7269 6769 6e4f 5341 4953 0d0a  l gOriginOSAIS..
-00008900: 2020 2020 676c 6f62 616c 2067 4f72 6967      global gOrig
-00008910: 696e 4c6f 6361 6c4f 5341 4953 0d0a 2020  inLocalOSAIS..  
-00008920: 2020 676c 6f62 616c 2067 4973 5669 7274    global gIsVirt
-00008930: 7561 6c41 490d 0a20 2020 2067 6c6f 6261  ualAI..    globa
-00008940: 6c20 6741 7574 6854 6f6b 656e 0d0a 2020  l gAuthToken..  
-00008950: 2020 676c 6f62 616c 2067 4175 7468 546f    global gAuthTo
-00008960: 6b65 6e4c 6f63 616c 0d0a 2020 2020 676c  kenLocal..    gl
-00008970: 6f62 616c 2067 4c61 7374 4368 6563 6b65  obal gLastChecke
-00008980: 645f 6174 0d0a 2020 2020 676c 6f62 616c  d_at..    global
-00008990: 2067 4973 5761 726d 7570 0d0a 0d0a 2020   gIsWarmup....  
-000089a0: 2020 2323 206e 6f20 6e6f 7469 6669 6361    ## no notifica
-000089b0: 7469 6f6e 206f 6620 7761 726d 7570 0d0a  tion of warmup..
-000089c0: 2020 2020 6966 2067 4973 5761 726d 7570      if gIsWarmup
-000089d0: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
-000089e0: 6e20 4e6f 6e65 0d0a 2020 2020 0d0a 2020  n None..    ..  
-000089f0: 2020 674c 6173 7443 6865 636b 6564 5f61    gLastChecked_a
-00008a00: 7420 3d20 6461 7465 7469 6d65 2e75 7463  t = datetime.utc
-00008a10: 6e6f 7728 290d 0a0d 0a20 2020 2023 206e  now()....    # n
-00008a20: 6f74 6966 6963 6174 696f 6e20 636f 6e73  otification cons
-00008a30: 6f6c 6520 6c6f 670d 0a20 2020 206d 6572  ole log..    mer
-00008a40: 6765 6420 3d20 6469 6374 2829 0d0a 2020  ged = dict()..  
-00008a50: 2020 6d65 7267 6564 2e75 7064 6174 6528    merged.update(
-00008a60: 4372 6564 5061 7261 6d29 0d0a 2020 2020  CredParam)..    
-00008a70: 6d65 7267 6564 2e75 7064 6174 6528 4d6f  merged.update(Mo
-00008a80: 7270 6869 6e67 5061 7261 6d29 0d0a 2020  rphingParam)..  
-00008a90: 2020 7072 696e 7428 224e 6f74 6966 794f    print("NotifyO
-00008aa0: 5341 4953 2028 222b 7374 7228 5374 6167  SAIS ("+str(Stag
-00008ab0: 6550 6172 616d 5b22 7374 6167 6522 5d29  eParam["stage"])
-00008ac0: 2b22 2f20 222b 5374 6167 6550 6172 616d  +"/ "+StageParam
-00008ad0: 5b22 6465 7363 7222 5d2b 2229 3a20 222b  ["descr"]+"): "+
-00008ae0: 7374 7228 6d65 7267 6564 2929 0d0a 2020  str(merged))..  
-00008af0: 2020 7072 696e 7428 225c 725c 6e22 290d    print("\r\n").
-00008b00: 0a0d 0a20 2020 205f 6669 6c65 6e61 6d65  ...    _filename
-00008b10: 3d22 220d 0a20 2020 2069 6620 4d6f 7270  =""..    if Morp
-00008b20: 6869 6e67 5061 7261 6d5b 2266 696c 656e  hingParam["filen
-00008b30: 616d 6522 5d21 3d22 223a 0d0a 2020 2020  ame"]!="":..    
-00008b40: 2020 2020 5f66 696c 656e 616d 653d 4d6f      _filename=Mo
-00008b50: 7270 6869 6e67 5061 7261 6d5b 2266 696c  rphingParam["fil
-00008b60: 656e 616d 6522 5d0d 0a0d 0a20 2020 2023  ename"]....    #
-00008b70: 206c 6574 7320 676f 2063 616c 6c20 4f53   lets go call OS
-00008b80: 4149 5320 4149 2047 6174 6577 6179 202f  AIS AI Gateway /
-00008b90: 206f 7220 4f53 4149 5320 6974 7365 6c66   or OSAIS itself
-00008ba0: 0d0a 2020 2020 6865 6164 6572 7320 3d20  ..    headers = 
-00008bb0: 7b0d 0a20 2020 2020 2020 2022 436f 6e74  {..        "Cont
-00008bc0: 656e 742d 5479 7065 223a 2022 6170 706c  ent-Type": "appl
-00008bd0: 6963 6174 696f 6e2f 6a73 6f6e 220d 0a20  ication/json".. 
-00008be0: 2020 207d 0d0a 0d0a 2020 2020 2323 2063     }....    ## c
-00008bf0: 6f6e 6669 6720 666f 7220 6361 6c6c 696e  onfig for callin
-00008c00: 6720 6761 7465 7761 790d 0a20 2020 2061  g gateway..    a
-00008c10: 7069 5f75 726c 203d 2066 227b 674f 7269  pi_url = f"{gOri
-00008c20: 6769 6e47 6174 6577 6179 7d61 7069 2f76  ginGateway}api/v
-00008c30: 312f 7075 626c 6963 2f6e 6f74 6966 7922  1/public/notify"
-00008c40: 0d0a 0d0a 2020 2020 2323 2063 6f6e 6669  ....    ## confi
-00008c50: 6720 666f 7220 6361 6c6c 696e 6720 4f53  g for calling OS
-00008c60: 4149 5320 286e 6f20 6761 7465 7761 7929  AIS (no gateway)
-00008c70: 0d0a 2020 2020 6966 2067 4973 5669 7274  ..    if gIsVirt
-00008c80: 7561 6c41 493a 0d0a 2020 2020 2020 2020  ualAI:..        
-00008c90: 5f6f 7361 6973 3d67 4f72 6967 696e 4f53  _osais=gOriginOS
-00008ca0: 4149 530d 0a20 2020 2020 2020 205f 6175  AIS..        _au
-00008cb0: 7468 3d67 4175 7468 546f 6b65 6e0d 0a0d  th=gAuthToken...
-00008cc0: 0a20 2020 2020 2020 2069 6620 4372 6564  .        if Cred
-00008cd0: 5061 7261 6d5b 2269 734c 6f63 616c 225d  Param["isLocal"]
-00008ce0: 3a0d 0a20 2020 2020 2020 2020 2020 205f  :..            _
-00008cf0: 6f73 6169 733d 674f 7269 6769 6e4c 6f63  osais=gOriginLoc
-00008d00: 616c 4f53 4149 530d 0a20 2020 2020 2020  alOSAIS..       
-00008d10: 2020 2020 205f 6175 7468 3d67 4175 7468       _auth=gAuth
-00008d20: 546f 6b65 6e4c 6f63 616c 0d0a 0d0a 2020  TokenLocal....  
-00008d30: 2020 2020 2020 6966 2067 4973 5669 7274        if gIsVirt
-00008d40: 7561 6c41 493d 3d54 7275 653a 0d0a 2020  ualAI==True:..  
-00008d50: 2020 2020 2020 2020 2020 6865 6164 6572            header
-00008d60: 735b 2241 7574 686f 7269 7a61 7469 6f6e  s["Authorization
-00008d70: 225d 3d20 6622 4265 6172 6572 207b 5f61  "]= f"Bearer {_a
-00008d80: 7574 687d 220d 0a20 2020 2020 2020 2020  uth}"..         
-00008d90: 2020 2061 7069 5f75 726c 3d66 227b 5f6f     api_url=f"{_o
-00008da0: 7361 6973 7d61 7069 2f76 312f 7072 6976  sais}api/v1/priv
-00008db0: 6174 652f 6e6f 7469 6679 220d 0a0d 0a20  ate/notify".... 
-00008dc0: 2020 206f 626a 5061 7261 6d3d 7b0d 0a20     objParam={.. 
-00008dd0: 2020 2020 2020 2022 7265 7370 6f6e 7365         "response
-00008de0: 223a 207b 0d0a 2020 2020 2020 2020 2020  ": {..          
-00008df0: 2020 2274 6f6b 656e 223a 2043 7265 6450    "token": CredP
-00008e00: 6172 616d 5b22 746f 6b65 6e41 4922 5d2c  aram["tokenAI"],
-00008e10: 0d0a 2020 2020 2020 2020 2020 2020 2275  ..            "u
-00008e20: 6964 223a 2073 7472 284d 6f72 7068 696e  id": str(Morphin
-00008e30: 6750 6172 616d 5b22 7569 6422 5d29 2c0d  gParam["uid"]),.
-00008e40: 0a20 2020 2020 2020 2020 2020 2022 7374  .            "st
-00008e50: 6167 6522 3a20 7374 7228 5374 6167 6550  age": str(StageP
-00008e60: 6172 616d 5b22 7374 6167 6522 5d29 2c0d  aram["stage"]),.
-00008e70: 0a20 2020 2020 2020 2020 2020 2022 6379  .            "cy
-00008e80: 636c 6522 3a20 7374 7228 4d6f 7270 6869  cle": str(Morphi
-00008e90: 6e67 5061 7261 6d5b 2263 7963 6c65 225d  ngParam["cycle"]
-00008ea0: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
-00008eb0: 2265 6e67 696e 6522 3a20 4372 6564 5061  "engine": CredPa
-00008ec0: 7261 6d5b 2265 6e67 696e 6522 5d2c 0d0a  ram["engine"],..
-00008ed0: 2020 2020 2020 2020 2020 2020 2275 7365              "use
-00008ee0: 726e 616d 6522 3a20 4372 6564 5061 7261  rname": CredPara
-00008ef0: 6d5b 2275 7365 726e 616d 6522 5d2c 0d0a  m["username"],..
-00008f00: 2020 2020 2020 2020 2020 2020 2264 6573              "des
-00008f10: 6372 223a 2053 7461 6765 5061 7261 6d5b  cr": StageParam[
-00008f20: 2264 6573 6372 225d 2c0d 0a20 2020 2020  "descr"],..     
-00008f30: 2020 2020 2020 2022 6669 6c65 6e61 6d65         "filename
-00008f40: 223a 205f 6669 6c65 6e61 6d65 0d0a 2020  ": _filename..  
-00008f50: 2020 2020 2020 7d0d 0a20 2020 207d 0d0a        }..    }..
-00008f60: 0d0a 2020 2020 6966 2022 636f 7374 2220  ..    if "cost" 
-00008f70: 696e 2053 7461 6765 5061 7261 6d3a 0d0a  in StageParam:..
-00008f80: 2020 2020 2020 2020 6f62 6a50 6172 616d          objParam
-00008f90: 5b22 7265 7370 6f6e 7365 225d 5b22 636f  ["response"]["co
-00008fa0: 7374 225d 3d20 7374 7228 5374 6167 6550  st"]= str(StageP
-00008fb0: 6172 616d 5b22 636f 7374 225d 290d 0a20  aram["cost"]).. 
-00008fc0: 2020 200d 0a20 2020 2072 6573 706f 6e73     ..    respons
-00008fd0: 6520 3d20 7265 7175 6573 7473 2e70 6f73  e = requests.pos
-00008fe0: 7428 6170 695f 7572 6c2c 2068 6561 6465  t(api_url, heade
-00008ff0: 7273 3d68 6561 6465 7273 2c20 6461 7461  rs=headers, data
-00009000: 3d6a 736f 6e2e 6475 6d70 7328 6f62 6a50  =json.dumps(objP
-00009010: 6172 616d 2920 290d 0a20 2020 206f 626a  aram) )..    obj
-00009020: 5265 733d 7265 7370 6f6e 7365 2e6a 736f  Res=response.jso
-00009030: 6e28 290d 0a0d 0a20 2020 2069 6620 5374  n()....    if St
-00009040: 6167 6550 6172 616d 5b22 7374 6167 6522  ageParam["stage"
-00009050: 5d3d 3d41 495f 5052 4f47 5245 5353 5f44  ]==AI_PROGRESS_D
-00009060: 4f4e 455f 494d 4147 453a 0d0a 2020 2020  ONE_IMAGE:..    
-00009070: 2020 2020 6966 2067 4973 5669 7274 7561      if gIsVirtua
-00009080: 6c41 493d 3d54 7275 653a 0d0a 2020 2020  lAI==True:..    
-00009090: 2020 2020 2020 2020 5f64 6972 3d4d 6f72          _dir=Mor
-000090a0: 7068 696e 6750 6172 616d 5b22 6f64 6972  phingParam["odir
-000090b0: 225d 0d0a 2020 2020 2020 2020 2020 2020  "]..            
-000090c0: 6966 205f 6469 723d 3d4e 6f6e 653a 0d0a  if _dir==None:..
-000090d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000090e0: 5f64 6972 3d67 4f75 7470 7574 4469 720d  _dir=gOutputDir.
-000090f0: 0a20 2020 2020 2020 2020 2020 205f 6469  .            _di
-00009100: 7249 6d61 6765 3d5f 6469 722b 5f66 696c  rImage=_dir+_fil
-00009110: 656e 616d 650d 0a0d 0a20 2020 2020 2020  ename....       
-00009120: 2020 2020 2077 6974 6820 6f70 656e 285f       with open(_
-00009130: 6469 7249 6d61 6765 2c20 2272 6222 2920  dirImage, "rb") 
-00009140: 6173 2069 6d61 6765 5f66 696c 653a 0d0a  as image_file:..
-00009150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009160: 696d 6167 655f 6461 7461 203d 2069 6d61  image_data = ima
-00009170: 6765 5f66 696c 652e 7265 6164 2829 0d0a  ge_file.read()..
-00009180: 0d0a 2020 2020 2020 2020 2020 2020 696d  ..            im
-00009190: 5f62 3634 203d 2062 6173 6536 342e 6236  _b64 = base64.b6
-000091a0: 3465 6e63 6f64 6528 696d 6167 655f 6461  4encode(image_da
-000091b0: 7461 292e 6465 636f 6465 2822 7574 6638  ta).decode("utf8
-000091c0: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
-000091d0: 7061 7261 6d3d 7b0d 0a20 2020 2020 2020  param={..       
-000091e0: 2020 2020 2020 2020 2022 696d 6167 6522           "image"
-000091f0: 3a20 696d 5f62 3634 2c0d 0a20 2020 2020  : im_b64,..     
-00009200: 2020 2020 2020 2020 2020 2022 7569 6422             "uid"
-00009210: 3a20 7374 7228 4d6f 7270 6869 6e67 5061  : str(MorphingPa
-00009220: 7261 6d5b 2275 6964 225d 292c 0d0a 2020  ram["uid"]),..  
-00009230: 2020 2020 2020 2020 2020 2020 2020 2263                "c
-00009240: 7963 6c65 223a 2073 7472 284d 6f72 7068  ycle": str(Morph
-00009250: 696e 6750 6172 616d 5b22 6379 636c 6522  ingParam["cycle"
-00009260: 5d29 2c0d 0a20 2020 2020 2020 2020 2020  ]),..           
-00009270: 2020 2020 2022 656e 6769 6e65 223a 2043       "engine": C
-00009280: 7265 6450 6172 616d 5b22 656e 6769 6e65  redParam["engine
-00009290: 225d 2c0d 0a20 2020 2020 2020 2020 2020  "],..           
-000092a0: 207d 2020 2020 2020 2020 2020 2020 0d0a   }            ..
-000092b0: 2020 2020 2020 2020 2020 2020 5f75 706c              _upl
-000092c0: 6f61 6449 6d61 6765 546f 4f53 4149 5328  oadImageToOSAIS(
-000092d0: 7061 7261 6d2c 2043 7265 6450 6172 616d  param, CredParam
-000092e0: 5b22 6973 4c6f 6361 6c22 5d29 0d0a 2020  ["isLocal"])..  
-000092f0: 2020 7265 7475 726e 206f 626a 5265 730d    return objRes.
-00009300: 0a0d 0a23 2320 2d2d 2d2d 2d2d 2d2d 2d2d  ...## ----------
-00009310: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009320: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009330: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009340: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
-00009350: 2320 2020 2020 2020 496e 6974 2070 726f  #       Init pro
-00009360: 6365 7373 696e 670d 0a23 2320 2d2d 2d2d  cessing..## ----
-00009370: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009380: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009390: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000083f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008400: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008410: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008420: 2d0d 0a0d 0a23 2055 706c 6f61 6420 696d  -....# Upload im
+00008430: 6167 6520 746f 204f 5341 4953 200d 0a64  age to OSAIS ..d
+00008440: 6566 205f 7570 6c6f 6164 496d 6167 6554  ef _uploadImageT
+00008450: 6f4f 5341 4953 286f 626a 5061 7261 6d2c  oOSAIS(objParam,
+00008460: 2069 734c 6f63 616c 293a 0d0a 2020 2020   isLocal):..    
+00008470: 6966 2067 4973 5669 7274 7561 6c41 493d  if gIsVirtualAI=
+00008480: 3d46 616c 7365 3a0d 0a20 2020 2020 2020  =False:..       
+00008490: 2072 6574 7572 6e20 4e6f 6e65 0d0a 2020   return None..  
+000084a0: 2020 0d0a 2020 2020 676c 6f62 616c 2067    ..    global g
+000084b0: 4175 7468 546f 6b65 6e0d 0a20 2020 2067  AuthToken..    g
+000084c0: 6c6f 6261 6c20 674f 7269 6769 6e4f 5341  lobal gOriginOSA
+000084d0: 4953 0d0a 2020 2020 676c 6f62 616c 2067  IS..    global g
+000084e0: 4175 7468 546f 6b65 6e4c 6f63 616c 0d0a  AuthTokenLocal..
+000084f0: 2020 2020 676c 6f62 616c 2067 4f72 6967      global gOrig
+00008500: 696e 4c6f 6361 6c4f 5341 4953 0d0a 0d0a  inLocalOSAIS....
+00008510: 2020 2020 5f61 7574 683d 6741 7574 6854      _auth=gAuthT
+00008520: 6f6b 656e 0d0a 2020 2020 6966 2069 734c  oken..    if isL
+00008530: 6f63 616c 3a0d 0a20 2020 2020 2020 205f  ocal:..        _
+00008540: 6175 7468 3d67 4175 7468 546f 6b65 6e4c  auth=gAuthTokenL
+00008550: 6f63 616c 0d0a 2020 2020 5f6f 7361 6973  ocal..    _osais
+00008560: 3d67 4f72 6967 696e 4f53 4149 530d 0a20  =gOriginOSAIS.. 
+00008570: 2020 2069 6620 6973 4c6f 6361 6c3a 0d0a     if isLocal:..
+00008580: 2020 2020 2020 2020 5f6f 7361 6973 3d67          _osais=g
+00008590: 4f72 6967 696e 4c6f 6361 6c4f 5341 4953  OriginLocalOSAIS
+000085a0: 0d0a 0d0a 2020 2020 2320 6c65 7473 2067  ....    # lets g
+000085b0: 6f20 6361 6c6c 204f 5341 4953 2041 4920  o call OSAIS AI 
+000085c0: 4761 7465 7761 7920 2f20 6f72 204f 5341  Gateway / or OSA
+000085d0: 4953 2069 7473 656c 660d 0a20 2020 2068  IS itself..    h
+000085e0: 6561 6465 7273 203d 207b 0d0a 2020 2020  eaders = {..    
+000085f0: 2020 2020 2243 6f6e 7465 6e74 2d54 7970      "Content-Typ
+00008600: 6522 3a20 2761 7070 6c69 6361 7469 6f6e  e": 'application
+00008610: 2f6a 736f 6e27 2c20 0d0a 2020 2020 2020  /json', ..      
+00008620: 2020 2741 6363 6570 7427 3a20 2774 6578    'Accept': 'tex
+00008630: 742f 706c 6169 6e27 2c0d 0a20 2020 2020  t/plain',..     
+00008640: 2020 2022 4175 7468 6f72 697a 6174 696f     "Authorizatio
+00008650: 6e22 3a20 6622 4265 6172 6572 207b 5f61  n": f"Bearer {_a
+00008660: 7574 687d 220d 0a20 2020 207d 0d0a 0d0a  uth}"..    }....
+00008670: 2020 2020 6170 695f 7572 6c3d 6622 7b5f      api_url=f"{_
+00008680: 6f73 6169 737d 6170 692f 7631 2f70 7269  osais}api/v1/pri
+00008690: 7661 7465 2f75 706c 6f61 6422 2020 2020  vate/upload"    
+000086a0: 2020 2020 0d0a 2020 2020 7061 796c 6f61      ..    payloa
+000086b0: 6420 3d20 6a73 6f6e 2e64 756d 7073 286f  d = json.dumps(o
+000086c0: 626a 5061 7261 6d29 0d0a 2020 2020 7265  bjParam)..    re
+000086d0: 7370 6f6e 7365 203d 2072 6571 7565 7374  sponse = request
+000086e0: 732e 706f 7374 2861 7069 5f75 726c 2c20  s.post(api_url, 
+000086f0: 6865 6164 6572 733d 6865 6164 6572 732c  headers=headers,
+00008700: 2064 6174 613d 7061 796c 6f61 6420 290d   data=payload ).
+00008710: 0a20 2020 206f 626a 5265 733d 7265 7370  .    objRes=resp
+00008720: 6f6e 7365 2e6a 736f 6e28 290d 0a20 2020  onse.json()..   
+00008730: 2072 6574 7572 6e20 6f62 6a52 6573 2020   return objRes  
+00008740: 2020 0d0a 0d0a 6465 6620 6f73 6169 735f    ....def osais_
+00008750: 6f6e 4e6f 7469 6679 4669 6c65 4372 6561  onNotifyFileCrea
+00008760: 7465 6428 5f64 6972 2c20 5f66 696c 656e  ted(_dir, _filen
+00008770: 616d 652c 205f 6172 6773 293a 0d0a 2020  ame, _args):..  
+00008780: 2020 6741 7267 734f 5341 4953 2e66 696c    gArgsOSAIS.fil
+00008790: 656e 616d 653d 5f66 696c 656e 616d 650d  ename=_filename.
+000087a0: 0a20 2020 205f 7374 6167 6550 6172 616d  .    _stageParam
+000087b0: 3d67 6574 5374 6167 6550 6172 616d 7328  =getStageParams(
+000087c0: 4149 5f50 524f 4752 4553 535f 444f 4e45  AI_PROGRESS_DONE
+000087d0: 5f49 4d41 4745 2c20 3029 0d0a 2020 2020  _IMAGE, 0)..    
+000087e0: 5f6d 6f72 7068 696e 6750 6172 616d 3d67  _morphingParam=g
+000087f0: 6574 4d6f 7270 6869 6e67 5061 7261 6d73  etMorphingParams
+00008800: 2829 0d0a 2020 2020 5f63 7265 6473 5061  ()..    _credsPa
+00008810: 7261 6d3d 6765 7443 7265 6473 5061 7261  ram=getCredsPara
+00008820: 6d73 2829 0d0a 2020 2020 6f73 6169 735f  ms()..    osais_
+00008830: 6e6f 7469 6679 285f 6372 6564 7350 6172  notify(_credsPar
+00008840: 616d 2c20 5f6d 6f72 7068 696e 6750 6172  am, _morphingPar
+00008850: 616d 2c20 5f73 7461 6765 5061 7261 6d29  am, _stageParam)
+00008860: 2020 2020 2020 2020 2020 2020 2320 4f53              # OS
+00008870: 4149 5320 4e6f 7469 6669 6361 7469 6f6e  AIS Notification
+00008880: 0d0a 2020 2020 7265 7475 726e 2054 7275  ..    return Tru
+00008890: 650d 0a0d 0a23 2044 6972 6563 7420 4e6f  e....# Direct No
+000088a0: 7469 6679 204f 5341 4953 200d 0a64 6566  tify OSAIS ..def
+000088b0: 206f 7361 6973 5f6e 6f74 6966 7928 4372   osais_notify(Cr
+000088c0: 6564 5061 7261 6d2c 204d 6f72 7068 696e  edParam, Morphin
+000088d0: 6750 6172 616d 2c20 5374 6167 6550 6172  gParam, StagePar
+000088e0: 616d 293a 0d0a 2020 2020 676c 6f62 616c  am):..    global
+000088f0: 2067 4950 4c6f 6361 6c0d 0a20 2020 2067   gIPLocal..    g
+00008900: 6c6f 6261 6c20 6750 6f72 7447 6174 6577  lobal gPortGatew
+00008910: 6179 0d0a 2020 2020 676c 6f62 616c 2067  ay..    global g
+00008920: 4f72 6967 696e 4f53 4149 530d 0a20 2020  OriginOSAIS..   
+00008930: 2067 6c6f 6261 6c20 674f 7269 6769 6e4c   global gOriginL
+00008940: 6f63 616c 4f53 4149 530d 0a20 2020 2067  ocalOSAIS..    g
+00008950: 6c6f 6261 6c20 6749 7356 6972 7475 616c  lobal gIsVirtual
+00008960: 4149 0d0a 2020 2020 676c 6f62 616c 2067  AI..    global g
+00008970: 4175 7468 546f 6b65 6e0d 0a20 2020 2067  AuthToken..    g
+00008980: 6c6f 6261 6c20 6741 7574 6854 6f6b 656e  lobal gAuthToken
+00008990: 4c6f 6361 6c0d 0a20 2020 2067 6c6f 6261  Local..    globa
+000089a0: 6c20 674c 6173 7443 6865 636b 6564 5f61  l gLastChecked_a
+000089b0: 740d 0a20 2020 2067 6c6f 6261 6c20 6749  t..    global gI
+000089c0: 7357 6172 6d75 700d 0a0d 0a20 2020 2023  sWarmup....    #
+000089d0: 2320 6e6f 206e 6f74 6966 6963 6174 696f  # no notificatio
+000089e0: 6e20 6f66 2077 6172 6d75 700d 0a20 2020  n of warmup..   
+000089f0: 2069 6620 6749 7357 6172 6d75 703a 0d0a   if gIsWarmup:..
+00008a00: 2020 2020 2020 2020 7265 7475 726e 204e          return N
+00008a10: 6f6e 650d 0a20 2020 200d 0a20 2020 2067  one..    ..    g
+00008a20: 4c61 7374 4368 6563 6b65 645f 6174 203d  LastChecked_at =
+00008a30: 2064 6174 6574 696d 652e 7574 636e 6f77   datetime.utcnow
+00008a40: 2829 0d0a 0d0a 2020 2020 2320 6e6f 7469  ()....    # noti
+00008a50: 6669 6361 7469 6f6e 2063 6f6e 736f 6c65  fication console
+00008a60: 206c 6f67 0d0a 2020 2020 6d65 7267 6564   log..    merged
+00008a70: 203d 2064 6963 7428 290d 0a20 2020 206d   = dict()..    m
+00008a80: 6572 6765 642e 7570 6461 7465 2843 7265  erged.update(Cre
+00008a90: 6450 6172 616d 290d 0a20 2020 206d 6572  dParam)..    mer
+00008aa0: 6765 642e 7570 6461 7465 284d 6f72 7068  ged.update(Morph
+00008ab0: 696e 6750 6172 616d 290d 0a20 2020 2070  ingParam)..    p
+00008ac0: 7269 6e74 2822 4e6f 7469 6679 4f53 4149  rint("NotifyOSAI
+00008ad0: 5320 2822 2b73 7472 2853 7461 6765 5061  S ("+str(StagePa
+00008ae0: 7261 6d5b 2273 7461 6765 225d 292b 222f  ram["stage"])+"/
+00008af0: 2022 2b53 7461 6765 5061 7261 6d5b 2264   "+StageParam["d
+00008b00: 6573 6372 225d 2b22 293a 2022 2b73 7472  escr"]+"): "+str
+00008b10: 286d 6572 6765 6429 290d 0a20 2020 2070  (merged))..    p
+00008b20: 7269 6e74 2822 5c72 5c6e 2229 0d0a 0d0a  rint("\r\n")....
+00008b30: 2020 2020 5f66 696c 656e 616d 653d 2222      _filename=""
+00008b40: 0d0a 2020 2020 6966 204d 6f72 7068 696e  ..    if Morphin
+00008b50: 6750 6172 616d 5b22 6669 6c65 6e61 6d65  gParam["filename
+00008b60: 225d 213d 2222 3a0d 0a20 2020 2020 2020  "]!="":..       
+00008b70: 205f 6669 6c65 6e61 6d65 3d4d 6f72 7068   _filename=Morph
+00008b80: 696e 6750 6172 616d 5b22 6669 6c65 6e61  ingParam["filena
+00008b90: 6d65 225d 0d0a 0d0a 2020 2020 2320 6c65  me"]....    # le
+00008ba0: 7473 2067 6f20 6361 6c6c 204f 5341 4953  ts go call OSAIS
+00008bb0: 2041 4920 4761 7465 7761 7920 2f20 6f72   AI Gateway / or
+00008bc0: 204f 5341 4953 2069 7473 656c 660d 0a20   OSAIS itself.. 
+00008bd0: 2020 2068 6561 6465 7273 203d 207b 0d0a     headers = {..
+00008be0: 2020 2020 2020 2020 2243 6f6e 7465 6e74          "Content
+00008bf0: 2d54 7970 6522 3a20 2261 7070 6c69 6361  -Type": "applica
+00008c00: 7469 6f6e 2f6a 736f 6e22 0d0a 2020 2020  tion/json"..    
+00008c10: 7d0d 0a0d 0a20 2020 2023 2320 636f 6e66  }....    ## conf
+00008c20: 6967 2066 6f72 2063 616c 6c69 6e67 2067  ig for calling g
+00008c30: 6174 6577 6179 0d0a 2020 2020 6170 695f  ateway..    api_
+00008c40: 7572 6c20 3d20 6622 7b67 4f72 6967 696e  url = f"{gOrigin
+00008c50: 4761 7465 7761 797d 6170 692f 7631 2f70  Gateway}api/v1/p
+00008c60: 7562 6c69 632f 6e6f 7469 6679 220d 0a0d  ublic/notify"...
+00008c70: 0a20 2020 2023 2320 636f 6e66 6967 2066  .    ## config f
+00008c80: 6f72 2063 616c 6c69 6e67 204f 5341 4953  or calling OSAIS
+00008c90: 2028 6e6f 2067 6174 6577 6179 290d 0a20   (no gateway).. 
+00008ca0: 2020 2069 6620 6749 7356 6972 7475 616c     if gIsVirtual
+00008cb0: 4149 3a0d 0a20 2020 2020 2020 205f 6f73  AI:..        _os
+00008cc0: 6169 733d 674f 7269 6769 6e4f 5341 4953  ais=gOriginOSAIS
+00008cd0: 0d0a 2020 2020 2020 2020 5f61 7574 683d  ..        _auth=
+00008ce0: 6741 7574 6854 6f6b 656e 0d0a 0d0a 2020  gAuthToken....  
+00008cf0: 2020 2020 2020 6966 2043 7265 6450 6172        if CredPar
+00008d00: 616d 5b22 6973 4c6f 6361 6c22 5d3a 0d0a  am["isLocal"]:..
+00008d10: 2020 2020 2020 2020 2020 2020 5f6f 7361              _osa
+00008d20: 6973 3d67 4f72 6967 696e 4c6f 6361 6c4f  is=gOriginLocalO
+00008d30: 5341 4953 0d0a 2020 2020 2020 2020 2020  SAIS..          
+00008d40: 2020 5f61 7574 683d 6741 7574 6854 6f6b    _auth=gAuthTok
+00008d50: 656e 4c6f 6361 6c0d 0a0d 0a20 2020 2020  enLocal....     
+00008d60: 2020 2069 6620 6749 7356 6972 7475 616c     if gIsVirtual
+00008d70: 4149 3d3d 5472 7565 3a0d 0a20 2020 2020  AI==True:..     
+00008d80: 2020 2020 2020 2068 6561 6465 7273 5b22         headers["
+00008d90: 4175 7468 6f72 697a 6174 696f 6e22 5d3d  Authorization"]=
+00008da0: 2066 2242 6561 7265 7220 7b5f 6175 7468   f"Bearer {_auth
+00008db0: 7d22 0d0a 2020 2020 2020 2020 2020 2020  }"..            
+00008dc0: 6170 695f 7572 6c3d 6622 7b5f 6f73 6169  api_url=f"{_osai
+00008dd0: 737d 6170 692f 7631 2f70 7269 7661 7465  s}api/v1/private
+00008de0: 2f6e 6f74 6966 7922 0d0a 0d0a 2020 2020  /notify"....    
+00008df0: 6f62 6a50 6172 616d 3d7b 0d0a 2020 2020  objParam={..    
+00008e00: 2020 2020 2272 6573 706f 6e73 6522 3a20      "response": 
+00008e10: 7b0d 0a20 2020 2020 2020 2020 2020 2022  {..            "
+00008e20: 746f 6b65 6e22 3a20 4372 6564 5061 7261  token": CredPara
+00008e30: 6d5b 2274 6f6b 656e 4149 225d 2c0d 0a20  m["tokenAI"],.. 
+00008e40: 2020 2020 2020 2020 2020 2022 7569 6422             "uid"
+00008e50: 3a20 7374 7228 4d6f 7270 6869 6e67 5061  : str(MorphingPa
+00008e60: 7261 6d5b 2275 6964 225d 292c 0d0a 2020  ram["uid"]),..  
+00008e70: 2020 2020 2020 2020 2020 2273 7461 6765            "stage
+00008e80: 223a 2073 7472 2853 7461 6765 5061 7261  ": str(StagePara
+00008e90: 6d5b 2273 7461 6765 225d 292c 0d0a 2020  m["stage"]),..  
+00008ea0: 2020 2020 2020 2020 2020 2263 7963 6c65            "cycle
+00008eb0: 223a 2073 7472 284d 6f72 7068 696e 6750  ": str(MorphingP
+00008ec0: 6172 616d 5b22 6379 636c 6522 5d29 2c0d  aram["cycle"]),.
+00008ed0: 0a20 2020 2020 2020 2020 2020 2022 656e  .            "en
+00008ee0: 6769 6e65 223a 2043 7265 6450 6172 616d  gine": CredParam
+00008ef0: 5b22 656e 6769 6e65 225d 2c0d 0a20 2020  ["engine"],..   
+00008f00: 2020 2020 2020 2020 2022 7573 6572 6e61           "userna
+00008f10: 6d65 223a 2043 7265 6450 6172 616d 5b22  me": CredParam["
+00008f20: 7573 6572 6e61 6d65 225d 2c0d 0a20 2020  username"],..   
+00008f30: 2020 2020 2020 2020 2022 6465 7363 7222           "descr"
+00008f40: 3a20 5374 6167 6550 6172 616d 5b22 6465  : StageParam["de
+00008f50: 7363 7222 5d2c 0d0a 2020 2020 2020 2020  scr"],..        
+00008f60: 2020 2020 2266 696c 656e 616d 6522 3a20      "filename": 
+00008f70: 5f66 696c 656e 616d 650d 0a20 2020 2020  _filename..     
+00008f80: 2020 207d 0d0a 2020 2020 7d0d 0a0d 0a20     }..    }.... 
+00008f90: 2020 2069 6620 2263 6f73 7422 2069 6e20     if "cost" in 
+00008fa0: 5374 6167 6550 6172 616d 3a0d 0a20 2020  StageParam:..   
+00008fb0: 2020 2020 206f 626a 5061 7261 6d5b 2272       objParam["r
+00008fc0: 6573 706f 6e73 6522 5d5b 2263 6f73 7422  esponse"]["cost"
+00008fd0: 5d3d 2073 7472 2853 7461 6765 5061 7261  ]= str(StagePara
+00008fe0: 6d5b 2263 6f73 7422 5d29 0d0a 2020 2020  m["cost"])..    
+00008ff0: 0d0a 2020 2020 7265 7370 6f6e 7365 203d  ..    response =
+00009000: 2072 6571 7565 7374 732e 706f 7374 2861   requests.post(a
+00009010: 7069 5f75 726c 2c20 6865 6164 6572 733d  pi_url, headers=
+00009020: 6865 6164 6572 732c 2064 6174 613d 6a73  headers, data=js
+00009030: 6f6e 2e64 756d 7073 286f 626a 5061 7261  on.dumps(objPara
+00009040: 6d29 2029 0d0a 2020 2020 6f62 6a52 6573  m) )..    objRes
+00009050: 3d72 6573 706f 6e73 652e 6a73 6f6e 2829  =response.json()
+00009060: 0d0a 0d0a 2020 2020 6966 2053 7461 6765  ....    if Stage
+00009070: 5061 7261 6d5b 2273 7461 6765 225d 3d3d  Param["stage"]==
+00009080: 4149 5f50 524f 4752 4553 535f 444f 4e45  AI_PROGRESS_DONE
+00009090: 5f49 4d41 4745 3a0d 0a20 2020 2020 2020  _IMAGE:..       
+000090a0: 2069 6620 6749 7356 6972 7475 616c 4149   if gIsVirtualAI
+000090b0: 3d3d 5472 7565 3a0d 0a20 2020 2020 2020  ==True:..       
+000090c0: 2020 2020 205f 6469 723d 4d6f 7270 6869       _dir=Morphi
+000090d0: 6e67 5061 7261 6d5b 226f 6469 7222 5d0d  ngParam["odir"].
+000090e0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000090f0: 5f64 6972 3d3d 4e6f 6e65 3a0d 0a20 2020  _dir==None:..   
+00009100: 2020 2020 2020 2020 2020 2020 205f 6469               _di
+00009110: 723d 674f 7574 7075 7444 6972 0d0a 2020  r=gOutputDir..  
+00009120: 2020 2020 2020 2020 2020 5f64 6972 496d            _dirIm
+00009130: 6167 653d 5f64 6972 2b5f 6669 6c65 6e61  age=_dir+_filena
+00009140: 6d65 0d0a 0d0a 2020 2020 2020 2020 2020  me....          
+00009150: 2020 7769 7468 206f 7065 6e28 5f64 6972    with open(_dir
+00009160: 496d 6167 652c 2022 7262 2229 2061 7320  Image, "rb") as 
+00009170: 696d 6167 655f 6669 6c65 3a0d 0a20 2020  image_file:..   
+00009180: 2020 2020 2020 2020 2020 2020 2069 6d61               ima
+00009190: 6765 5f64 6174 6120 3d20 696d 6167 655f  ge_data = image_
+000091a0: 6669 6c65 2e72 6561 6428 290d 0a0d 0a20  file.read().... 
+000091b0: 2020 2020 2020 2020 2020 2069 6d5f 6236             im_b6
+000091c0: 3420 3d20 6261 7365 3634 2e62 3634 656e  4 = base64.b64en
+000091d0: 636f 6465 2869 6d61 6765 5f64 6174 6129  code(image_data)
+000091e0: 2e64 6563 6f64 6528 2275 7466 3822 290d  .decode("utf8").
+000091f0: 0a20 2020 2020 2020 2020 2020 2070 6172  .            par
+00009200: 616d 3d7b 0d0a 2020 2020 2020 2020 2020  am={..          
+00009210: 2020 2020 2020 2269 6d61 6765 223a 2069        "image": i
+00009220: 6d5f 6236 342c 0d0a 2020 2020 2020 2020  m_b64,..        
+00009230: 2020 2020 2020 2020 2275 6964 223a 2073          "uid": s
+00009240: 7472 284d 6f72 7068 696e 6750 6172 616d  tr(MorphingParam
+00009250: 5b22 7569 6422 5d29 2c0d 0a20 2020 2020  ["uid"]),..     
+00009260: 2020 2020 2020 2020 2020 2022 6379 636c             "cycl
+00009270: 6522 3a20 7374 7228 4d6f 7270 6869 6e67  e": str(Morphing
+00009280: 5061 7261 6d5b 2263 7963 6c65 225d 292c  Param["cycle"]),
+00009290: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000092a0: 2020 2265 6e67 696e 6522 3a20 4372 6564    "engine": Cred
+000092b0: 5061 7261 6d5b 2265 6e67 696e 6522 5d2c  Param["engine"],
+000092c0: 0d0a 2020 2020 2020 2020 2020 2020 7d20  ..            } 
+000092d0: 2020 2020 2020 2020 2020 200d 0a20 2020             ..   
+000092e0: 2020 2020 2020 2020 205f 7570 6c6f 6164           _upload
+000092f0: 496d 6167 6554 6f4f 5341 4953 2870 6172  ImageToOSAIS(par
+00009300: 616d 2c20 4372 6564 5061 7261 6d5b 2269  am, CredParam["i
+00009310: 734c 6f63 616c 225d 290d 0a20 2020 2072  sLocal"])..    r
+00009320: 6574 7572 6e20 6f62 6a52 6573 0d0a 0d0a  eturn objRes....
+00009330: 2323 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ## -------------
+00009340: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009350: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009360: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009370: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a23 2020  -----------..#  
+00009380: 2020 2020 2049 6e69 7420 7072 6f63 6573       Init proces
+00009390: 7369 6e67 0d0a 2323 202d 2d2d 2d2d 2d2d  sing..## -------
 000093a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000093b0: 2d2d 2d2d 0d0a 0d0a 2323 2050 5542 4c49  ----....## PUBLI
-000093c0: 4320 2d20 7265 7365 7474 696e 6720 7768  C - resetting wh
-000093d0: 6f20 7468 6973 2041 4920 6973 2074 616c  o this AI is tal
-000093e0: 6b69 6e67 2074 6f20 284f 5341 4953 2070  king to (OSAIS p
-000093f0: 726f 6420 616e 6420 6462 6729 0d0a 6465  rod and dbg)..de
-00009400: 6620 6f73 6169 735f 7265 7365 744f 5341  f osais_resetOSA
-00009410: 4953 285f 6c6f 6361 7469 6f6e 5072 6f64  IS(_locationProd
-00009420: 2c20 5f6c 6f63 616c 7469 6f6e 4465 6275  , _localtionDebu
-00009430: 6729 3a0d 0a20 2020 2067 6c6f 6261 6c20  g):..    global 
-00009440: 674f 7269 6769 6e4f 5341 4953 0d0a 2020  gOriginOSAIS..  
-00009450: 2020 676c 6f62 616c 2067 4f72 6967 696e    global gOrigin
-00009460: 4c6f 6361 6c4f 5341 4953 0d0a 2020 2020  LocalOSAIS..    
-00009470: 674f 7269 6769 6e4f 5341 4953 3d5f 6c6f  gOriginOSAIS=_lo
-00009480: 6361 7469 6f6e 5072 6f64 0d0a 2020 2020  cationProd..    
-00009490: 674f 7269 6769 6e4c 6f63 616c 4f53 4149  gOriginLocalOSAI
-000094a0: 533d 5f6c 6f63 616c 7469 6f6e 4465 6275  S=_localtionDebu
-000094b0: 670d 0a20 2020 2069 6620 5f6c 6f63 6174  g..    if _locat
-000094c0: 696f 6e50 726f 6421 3d4e 6f6e 653a 0d0a  ionProd!=None:..
-000094d0: 2020 2020 2020 2020 7072 696e 7428 223d          print("=
-000094e0: 3e20 5468 6973 2041 4920 6973 2072 6573  > This AI is res
-000094f0: 6574 2074 6f20 7461 6c6b 2074 6f20 5052  et to talk to PR
-00009500: 4f44 2022 2b67 4f72 6967 696e 4f53 4149  OD "+gOriginOSAI
-00009510: 5329 0d0a 2020 2020 6966 205f 6c6f 6361  S)..    if _loca
-00009520: 6c74 696f 6e44 6562 7567 213d 4e6f 6e65  ltionDebug!=None
-00009530: 3a0d 0a20 2020 2020 2020 2070 7269 6e74  :..        print
-00009540: 2822 3d3e 2054 6869 7320 4149 2069 7320  ("=> This AI is 
-00009550: 7265 7365 7420 746f 2074 616c 6b20 746f  reset to talk to
-00009560: 2044 4542 5547 2022 2b67 4f72 6967 696e   DEBUG "+gOrigin
-00009570: 4c6f 6361 6c4f 5341 4953 2b22 5c72 5c6e  LocalOSAIS+"\r\n
-00009580: 2229 0d0a 2020 2020 7265 7475 726e 2054  ")..    return T
-00009590: 7275 650d 0a0d 0a23 2320 5055 424c 4943  rue....## PUBLIC
-000095a0: 202d 2049 6e69 7420 7468 6520 5669 7274   - Init the Virt
-000095b0: 7561 6c20 4149 0d0a 6465 6620 6f73 6169  ual AI..def osai
-000095c0: 735f 696e 6974 6961 6c69 7a65 4149 2829  s_initializeAI()
-000095d0: 3a0d 0a20 2020 2067 6c6f 6261 6c20 6749  :..    global gI
-000095e0: 7344 6f63 6b65 720d 0a20 2020 2067 6c6f  sDocker..    glo
-000095f0: 6261 6c20 6749 734c 6f63 616c 0d0a 2020  bal gIsLocal..  
-00009600: 2020 676c 6f62 616c 2067 4973 5669 7274    global gIsVirt
-00009610: 7561 6c41 490d 0a20 2020 2067 6c6f 6261  ualAI..    globa
-00009620: 6c20 6755 7365 726e 616d 650d 0a20 2020  l gUsername..   
-00009630: 2067 6c6f 6261 6c20 674e 616d 650d 0a20   global gName.. 
-00009640: 2020 2067 6c6f 6261 6c20 6750 6f72 7441     global gPortA
-00009650: 490d 0a20 2020 2067 6c6f 6261 6c20 6756  I..    global gV
-00009660: 6572 7369 6f6e 0d0a 2020 2020 676c 6f62  ersion..    glob
-00009670: 616c 2067 506f 7274 4761 7465 7761 790d  al gPortGateway.
-00009680: 0a20 2020 2067 6c6f 6261 6c20 6750 6f72  .    global gPor
-00009690: 744c 6f63 616c 4f53 4149 530d 0a20 2020  tLocalOSAIS..   
-000096a0: 2067 6c6f 6261 6c20 6749 504c 6f63 616c   global gIPLocal
-000096b0: 0d0a 2020 2020 676c 6f62 616c 2067 4578  ..    global gEx
-000096c0: 7449 500d 0a20 2020 2067 6c6f 6261 6c20  tIP..    global 
-000096d0: 674f 7269 6769 6e47 6174 6577 6179 0d0a  gOriginGateway..
-000096e0: 2020 2020 676c 6f62 616c 2067 4175 7468      global gAuth
-000096f0: 546f 6b65 6e0d 0a20 2020 2067 6c6f 6261  Token..    globa
-00009700: 6c20 6741 7574 6854 6f6b 656e 4c6f 6361  l gAuthTokenLoca
-00009710: 6c0d 0a20 2020 2067 6c6f 6261 6c20 674f  l..    global gO
-00009720: 7269 6769 6e4f 5341 4953 0d0a 2020 2020  riginOSAIS..    
-00009730: 676c 6f62 616c 2067 4f72 6967 696e 4c6f  global gOriginLo
-00009740: 6361 6c4f 5341 4953 0d0a 0d0a 2020 2020  calOSAIS....    
-00009750: 2323 206c 6f61 6420 656e 7620 0d0a 2020  ## load env ..  
-00009760: 2020 5f65 6e76 4669 6c65 3d22 656e 765f    _envFile="env_
-00009770: 6c6f 6361 6c22 0d0a 2020 2020 6966 2067  local"..    if g
-00009780: 4973 446f 636b 6572 3a0d 0a20 2020 2020  IsDocker:..     
-00009790: 2020 205f 656e 7646 696c 653d 2265 6e76     _envFile="env
-000097a0: 5f64 6f63 6b65 7222 0d0a 2020 2020 2020  _docker"..      
-000097b0: 2020 7072 696e 7428 225c 725c 6e3d 3e20    print("\r\n=> 
-000097c0: 696e 2044 6f63 6b65 725c 725c 6e22 290d  in Docker\r\n").
-000097d0: 0a20 2020 2065 6c73 653a 0d0a 2020 2020  .    else:..    
-000097e0: 2020 2020 7072 696e 7428 225c 725c 6e3d      print("\r\n=
-000097f0: 3e20 4e4f 5420 696e 2044 6f63 6b65 725c  > NOT in Docker\
-00009800: 725c 6e22 2920 2020 2020 2020 200d 0a20  r\n")        .. 
-00009810: 2020 206f 626a 3d6f 7361 6973 5f67 6574     obj=osais_get
-00009820: 456e 7628 5f65 6e76 4669 6c65 290d 0a20  Env(_envFile).. 
-00009830: 2020 2067 4973 4c6f 6361 6c3d 6f62 6a5b     gIsLocal=obj[
-00009840: 2269 734c 6f63 616c 225d 0d0a 2020 2020  "isLocal"]..    
-00009850: 6749 7356 6972 7475 616c 4149 3d6f 626a  gIsVirtualAI=obj
-00009860: 5b22 6973 5669 7274 7561 6c41 4922 5d0d  ["isVirtualAI"].
-00009870: 0a20 2020 2067 5573 6572 6e61 6d65 3d6f  .    gUsername=o
-00009880: 626a 5b22 7573 6572 6e61 6d65 225d 0d0a  bj["username"]..
-00009890: 2020 2020 674e 616d 653d 6f62 6a5b 226e      gName=obj["n
-000098a0: 616d 6522 5d0d 0a0d 0a20 2020 2023 2320  ame"]....    ## 
-000098b0: 6672 6f6d 2065 6e76 2c20 6c6f 6164 2041  from env, load A
-000098c0: 4920 636f 6e66 6967 0d0a 2020 2020 6743  I config..    gC
-000098d0: 6f6e 6669 673d 6f73 6169 735f 6c6f 6164  onfig=osais_load
-000098e0: 436f 6e66 6967 2867 4e61 6d65 290d 0a20  Config(gName).. 
-000098f0: 2020 2067 506f 7274 4149 203d 2067 436f     gPortAI = gCo
-00009900: 6e66 6967 5b22 706f 7274 225d 0d0a 2020  nfig["port"]..  
-00009910: 2020 6756 6572 7369 6f6e 203d 2067 436f    gVersion = gCo
-00009920: 6e66 6967 5b22 7665 7273 696f 6e22 5d0d  nfig["version"].
-00009930: 0a0d 0a20 2020 2070 7269 6e74 2822 5c72  ...    print("\r
-00009940: 5c6e 3d3d 3d3d 3d20 436f 6e66 6967 203d  \n===== Config =
-00009950: 3d3d 3d3d 2229 0d0a 2020 2020 7072 696e  ====")..    prin
-00009960: 7428 2269 7320 4c6f 6361 6c3a 2022 2b73  t("is Local: "+s
-00009970: 7472 2867 4973 4c6f 6361 6c29 290d 0a20  tr(gIsLocal)).. 
-00009980: 2020 2070 7269 6e74 2822 6973 2056 6972     print("is Vir
-00009990: 7475 616c 3a20 222b 7374 7228 6749 7356  tual: "+str(gIsV
-000099a0: 6972 7475 616c 4149 2929 0d0a 2020 2020  irtualAI))..    
-000099b0: 7072 696e 7428 226f 776e 6564 2062 7920  print("owned by 
-000099c0: 636c 6965 6e74 3a20 222b 7374 7228 6755  client: "+str(gU
-000099d0: 7365 726e 616d 6529 290d 0a20 2020 2070  sername))..    p
-000099e0: 7269 6e74 2822 3d3d 3d3d 3d20 2f43 6f6e  rint("===== /Con
-000099f0: 6669 6720 3d3d 3d3d 3d5c 725c 6e22 290d  fig =====\r\n").
-00009a00: 0a0d 0a20 2020 2023 2320 6d61 6b65 2073  ...    ## make s
-00009a10: 7572 6520 7765 2068 6176 6520 6120 636f  ure we have a co
-00009a20: 6e66 6967 2066 696c 650d 0a20 2020 205f  nfig file..    _
-00009a30: 6c6f 6164 436f 6e66 6967 2867 4e61 6d65  loadConfig(gName
-00009a40: 290d 0a0d 0a20 2020 2023 2320 7768 6572  )....    ## wher
-00009a50: 6520 6973 204f 5341 4953 2066 6f72 2075  e is OSAIS for u
-00009a60: 7320 7468 656e 3f0d 0a20 2020 2067 4f72  s then?..    gOr
-00009a70: 6967 696e 4761 7465 7761 793d 6622 6874  iginGateway=f"ht
-00009a80: 7470 3a2f 2f7b 6749 504c 6f63 616c 7d3a  tp://{gIPLocal}:
-00009a90: 7b67 506f 7274 4761 7465 7761 797d 2f22  {gPortGateway}/"
-00009aa0: 2020 2020 2020 2020 2023 2320 636f 6e66           ## conf
-00009ab0: 6967 2066 6f72 206c 6f63 616c 2067 6174  ig for local gat
-00009ac0: 6577 6179 2028 6c6f 6361 6c20 616e 6420  eway (local and 
-00009ad0: 6e6f 7420 7669 7274 7561 6c29 0d0a 2020  not virtual)..  
-00009ae0: 2020 6966 2067 4973 5669 7274 7561 6c41    if gIsVirtualA
-00009af0: 493a 0d0a 2020 2020 2020 2020 6966 2067  I:..        if g
-00009b00: 4973 4c6f 6361 6c3a 0d0a 2020 2020 2020  IsLocal:..      
-00009b10: 2020 2020 2020 6f73 6169 735f 7265 7365        osais_rese
-00009b20: 744f 5341 4953 284e 6f6e 652c 2066 2268  tOSAIS(None, f"h
-00009b30: 7474 703a 2f2f 7b67 4950 4c6f 6361 6c7d  ttp://{gIPLocal}
-00009b40: 3a7b 6750 6f72 744c 6f63 616c 4f53 4149  :{gPortLocalOSAI
-00009b50: 537d 2f22 290d 0a20 2020 2020 2020 2065  S}/")..        e
-00009b60: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-00009b70: 2020 6f73 6169 735f 7265 7365 744f 5341    osais_resetOSA
-00009b80: 4953 2822 6874 7470 733a 2f2f 6f70 656e  IS("https://open
-00009b90: 736f 7572 6365 6169 732e 636f 6d2f 222c  sourceais.com/",
-00009ba0: 204e 6f6e 6529 0d0a 2020 2020 2020 2020   None)..        
-00009bb0: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
-00009bc0: 2020 6f73 6169 735f 6175 7468 656e 7469    osais_authenti
-00009bd0: 6361 7465 4149 2829 0d0a 2020 2020 2020  cateAI()..      
-00009be0: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
-00009bf0: 6f6e 2061 7320 6572 723a 0d0a 2020 2020  on as err:..    
-00009c00: 2020 2020 2020 2020 7072 696e 7428 223d          print("=
-00009c10: 3e20 4352 4954 4943 414c 3a20 436f 756c  > CRITICAL: Coul
-00009c20: 6420 6e6f 7420 636f 6e6e 6563 7420 7669  d not connect vi
-00009c30: 7274 7561 6c20 4149 2022 2b67 4e61 6d65  rtual AI "+gName
-00009c40: 2b20 2220 746f 204f 5341 4953 2229 0d0a  + " to OSAIS")..
-00009c50: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00009c60: 726e 204e 6f6e 650d 0a0d 0a20 2020 2020  rn None....     
-00009c70: 2020 2069 6620 6741 7574 6854 6f6b 656e     if gAuthToken
-00009c80: 213d 4e6f 6e65 3a0d 0a20 2020 2020 2020  !=None:..       
-00009c90: 2020 2020 2070 7269 6e74 2822 3d3e 2052       print("=> R
-00009ca0: 756e 6e69 6e67 2022 2b67 4e61 6d65 2b22  unning "+gName+"
-00009cb0: 2041 4920 6173 2061 2076 6972 7475 616c   AI as a virtual
-00009cc0: 2041 4920 636f 6e6e 6563 7465 6420 746f   AI connected to
-00009cd0: 3a20 222b 674f 7269 6769 6e4f 5341 4953  : "+gOriginOSAIS
-00009ce0: 290d 0a20 2020 2020 2020 2069 6620 6741  )..        if gA
-00009cf0: 7574 6854 6f6b 656e 4c6f 6361 6c21 3d4e  uthTokenLocal!=N
-00009d00: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
-00009d10: 2020 7072 696e 7428 223d 3e20 5275 6e6e    print("=> Runn
-00009d20: 696e 6720 222b 674e 616d 652b 2220 4149  ing "+gName+" AI
-00009d30: 2061 7320 6120 7669 7274 7561 6c20 4149   as a virtual AI
-00009d40: 2063 6f6e 6e65 6374 6564 2074 6f3a 2022   connected to: "
-00009d50: 2b67 4f72 6967 696e 4c6f 6361 6c4f 5341  +gOriginLocalOSA
-00009d60: 4953 290d 0a20 2020 2065 6c73 653a 0d0a  IS)..    else:..
-00009d70: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
-00009d80: 2020 2020 2020 2020 2020 6f73 6169 735f            osais_
-00009d90: 7265 7365 7447 6174 6577 6179 2867 4f72  resetGateway(gOr
-00009da0: 6967 696e 4761 7465 7761 7929 0d0a 2020  iginGateway)..  
-00009db0: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-00009dc0: 223d 3e20 5275 6e6e 696e 6720 222b 674e  "=> Running "+gN
-00009dd0: 616d 652b 2220 4149 2061 7320 6120 7365  ame+" AI as a se
-00009de0: 7276 6572 2063 6f6e 6e65 6374 6564 2074  rver connected t
-00009df0: 6f20 6c6f 6361 6c20 4761 7465 7761 7920  o local Gateway 
-00009e00: 222b 674f 7269 6769 6e47 6174 6577 6179  "+gOriginGateway
-00009e10: 290d 0a20 2020 2020 2020 200d 0a20 2020  )..        ..   
-00009e20: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
-00009e30: 7074 696f 6e20 6173 2065 7272 3a0d 0a20  ption as err:.. 
-00009e40: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00009e50: 2822 4352 4954 4943 414c 3a20 636f 756c  ("CRITICAL: coul
-00009e60: 6420 6e6f 7420 6e6f 7469 6679 2047 6174  d not notify Gat
-00009e70: 6577 6179 2061 7420 222b 674f 7269 6769  eway at "+gOrigi
-00009e80: 6e47 6174 6577 6179 290d 0a20 2020 2020  nGateway)..     
-00009e90: 2020 2020 2020 2072 6574 7572 6e20 4e6f         return No
-00009ea0: 6e65 0d0a 0d0a 2020 2020 2323 2069 6e69  ne....    ## ini
-00009eb0: 7420 6465 6661 756c 7420 636f 7374 0d0a  t default cost..
-00009ec0: 2020 2020 5f69 6e69 7469 616c 697a 6543      _initializeC
-00009ed0: 6f73 7428 290d 0a0d 0a20 2020 2070 7269  ost()....    pri
-00009ee0: 6e74 2822 5c72 5c6e 2229 0d0a 2020 2020  nt("\r\n")..    
-00009ef0: 7265 7475 726e 2067 4e61 6d65 0d0a 0d0a  return gName....
-00009f00: 2323 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ## -------------
-00009f10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009f20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000093b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000093c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000093d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000093e0: 2d0d 0a0d 0a23 2320 5055 424c 4943 202d  -....## PUBLIC -
+000093f0: 2072 6573 6574 7469 6e67 2077 686f 2074   resetting who t
+00009400: 6869 7320 4149 2069 7320 7461 6c6b 696e  his AI is talkin
+00009410: 6720 746f 2028 4f53 4149 5320 7072 6f64  g to (OSAIS prod
+00009420: 2061 6e64 2064 6267 290d 0a64 6566 206f   and dbg)..def o
+00009430: 7361 6973 5f72 6573 6574 4f53 4149 5328  sais_resetOSAIS(
+00009440: 5f6c 6f63 6174 696f 6e50 726f 642c 205f  _locationProd, _
+00009450: 6c6f 6361 6c74 696f 6e44 6562 7567 293a  localtionDebug):
+00009460: 0d0a 2020 2020 676c 6f62 616c 2067 4f72  ..    global gOr
+00009470: 6967 696e 4f53 4149 530d 0a20 2020 2067  iginOSAIS..    g
+00009480: 6c6f 6261 6c20 674f 7269 6769 6e4c 6f63  lobal gOriginLoc
+00009490: 616c 4f53 4149 530d 0a20 2020 2067 4f72  alOSAIS..    gOr
+000094a0: 6967 696e 4f53 4149 533d 5f6c 6f63 6174  iginOSAIS=_locat
+000094b0: 696f 6e50 726f 640d 0a20 2020 2067 4f72  ionProd..    gOr
+000094c0: 6967 696e 4c6f 6361 6c4f 5341 4953 3d5f  iginLocalOSAIS=_
+000094d0: 6c6f 6361 6c74 696f 6e44 6562 7567 0d0a  localtionDebug..
+000094e0: 2020 2020 6966 205f 6c6f 6361 7469 6f6e      if _location
+000094f0: 5072 6f64 213d 4e6f 6e65 3a0d 0a20 2020  Prod!=None:..   
+00009500: 2020 2020 2070 7269 6e74 2822 3d3e 2054       print("=> T
+00009510: 6869 7320 4149 2069 7320 7265 7365 7420  his AI is reset 
+00009520: 746f 2074 616c 6b20 746f 2050 524f 4420  to talk to PROD 
+00009530: 222b 674f 7269 6769 6e4f 5341 4953 290d  "+gOriginOSAIS).
+00009540: 0a20 2020 2069 6620 5f6c 6f63 616c 7469  .    if _localti
+00009550: 6f6e 4465 6275 6721 3d4e 6f6e 653a 0d0a  onDebug!=None:..
+00009560: 2020 2020 2020 2020 7072 696e 7428 223d          print("=
+00009570: 3e20 5468 6973 2041 4920 6973 2072 6573  > This AI is res
+00009580: 6574 2074 6f20 7461 6c6b 2074 6f20 4445  et to talk to DE
+00009590: 4255 4720 222b 674f 7269 6769 6e4c 6f63  BUG "+gOriginLoc
+000095a0: 616c 4f53 4149 532b 225c 725c 6e22 290d  alOSAIS+"\r\n").
+000095b0: 0a20 2020 2072 6574 7572 6e20 5472 7565  .    return True
+000095c0: 0d0a 0d0a 2323 2050 5542 4c49 4320 2d20  ....## PUBLIC - 
+000095d0: 496e 6974 2074 6865 2056 6972 7475 616c  Init the Virtual
+000095e0: 2041 490d 0a64 6566 206f 7361 6973 5f69   AI..def osais_i
+000095f0: 6e69 7469 616c 697a 6541 4928 293a 0d0a  nitializeAI():..
+00009600: 2020 2020 676c 6f62 616c 2067 4973 446f      global gIsDo
+00009610: 636b 6572 0d0a 2020 2020 676c 6f62 616c  cker..    global
+00009620: 2067 4973 4c6f 6361 6c0d 0a20 2020 2067   gIsLocal..    g
+00009630: 6c6f 6261 6c20 6749 7356 6972 7475 616c  lobal gIsVirtual
+00009640: 4149 0d0a 2020 2020 676c 6f62 616c 2067  AI..    global g
+00009650: 5573 6572 6e61 6d65 0d0a 2020 2020 676c  Username..    gl
+00009660: 6f62 616c 2067 4e61 6d65 0d0a 2020 2020  obal gName..    
+00009670: 676c 6f62 616c 2067 506f 7274 4149 0d0a  global gPortAI..
+00009680: 2020 2020 676c 6f62 616c 2067 5665 7273      global gVers
+00009690: 696f 6e0d 0a20 2020 2067 6c6f 6261 6c20  ion..    global 
+000096a0: 6750 6f72 7447 6174 6577 6179 0d0a 2020  gPortGateway..  
+000096b0: 2020 676c 6f62 616c 2067 506f 7274 4c6f    global gPortLo
+000096c0: 6361 6c4f 5341 4953 0d0a 2020 2020 676c  calOSAIS..    gl
+000096d0: 6f62 616c 2067 4950 4c6f 6361 6c0d 0a20  obal gIPLocal.. 
+000096e0: 2020 2067 6c6f 6261 6c20 6745 7874 4950     global gExtIP
+000096f0: 0d0a 2020 2020 676c 6f62 616c 2067 4f72  ..    global gOr
+00009700: 6967 696e 4761 7465 7761 790d 0a20 2020  iginGateway..   
+00009710: 2067 6c6f 6261 6c20 6741 7574 6854 6f6b   global gAuthTok
+00009720: 656e 0d0a 2020 2020 676c 6f62 616c 2067  en..    global g
+00009730: 4175 7468 546f 6b65 6e4c 6f63 616c 0d0a  AuthTokenLocal..
+00009740: 2020 2020 676c 6f62 616c 2067 4f72 6967      global gOrig
+00009750: 696e 4f53 4149 530d 0a20 2020 2067 6c6f  inOSAIS..    glo
+00009760: 6261 6c20 674f 7269 6769 6e4c 6f63 616c  bal gOriginLocal
+00009770: 4f53 4149 530d 0a0d 0a20 2020 2023 2320  OSAIS....    ## 
+00009780: 6c6f 6164 2065 6e76 200d 0a20 2020 205f  load env ..    _
+00009790: 656e 7646 696c 653d 2265 6e76 5f6c 6f63  envFile="env_loc
+000097a0: 616c 220d 0a20 2020 2069 6620 6749 7344  al"..    if gIsD
+000097b0: 6f63 6b65 723a 0d0a 2020 2020 2020 2020  ocker:..        
+000097c0: 5f65 6e76 4669 6c65 3d22 656e 765f 646f  _envFile="env_do
+000097d0: 636b 6572 220d 0a20 2020 2020 2020 2070  cker"..        p
+000097e0: 7269 6e74 2822 5c72 5c6e 3d3e 2069 6e20  rint("\r\n=> in 
+000097f0: 446f 636b 6572 5c72 5c6e 2229 0d0a 2020  Docker\r\n")..  
+00009800: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00009810: 2070 7269 6e74 2822 5c72 5c6e 3d3e 204e   print("\r\n=> N
+00009820: 4f54 2069 6e20 446f 636b 6572 5c72 5c6e  OT in Docker\r\n
+00009830: 2229 2020 2020 2020 2020 0d0a 2020 2020  ")        ..    
+00009840: 6f62 6a3d 6f73 6169 735f 6765 7445 6e76  obj=osais_getEnv
+00009850: 285f 656e 7646 696c 6529 0d0a 2020 2020  (_envFile)..    
+00009860: 6749 734c 6f63 616c 3d6f 626a 5b22 6973  gIsLocal=obj["is
+00009870: 4c6f 6361 6c22 5d0d 0a20 2020 2067 4973  Local"]..    gIs
+00009880: 5669 7274 7561 6c41 493d 6f62 6a5b 2269  VirtualAI=obj["i
+00009890: 7356 6972 7475 616c 4149 225d 0d0a 2020  sVirtualAI"]..  
+000098a0: 2020 6755 7365 726e 616d 653d 6f62 6a5b    gUsername=obj[
+000098b0: 2275 7365 726e 616d 6522 5d0d 0a20 2020  "username"]..   
+000098c0: 2067 4e61 6d65 3d6f 626a 5b22 6e61 6d65   gName=obj["name
+000098d0: 225d 0d0a 0d0a 2020 2020 2323 2066 726f  "]....    ## fro
+000098e0: 6d20 656e 762c 206c 6f61 6420 4149 2063  m env, load AI c
+000098f0: 6f6e 6669 670d 0a20 2020 2067 436f 6e66  onfig..    gConf
+00009900: 6967 3d6f 7361 6973 5f6c 6f61 6443 6f6e  ig=osais_loadCon
+00009910: 6669 6728 674e 616d 6529 0d0a 2020 2020  fig(gName)..    
+00009920: 6750 6f72 7441 4920 3d20 6743 6f6e 6669  gPortAI = gConfi
+00009930: 675b 2270 6f72 7422 5d0d 0a20 2020 2067  g["port"]..    g
+00009940: 5665 7273 696f 6e20 3d20 6743 6f6e 6669  Version = gConfi
+00009950: 675b 2276 6572 7369 6f6e 225d 0d0a 0d0a  g["version"]....
+00009960: 2020 2020 7072 696e 7428 225c 725c 6e3d      print("\r\n=
+00009970: 3d3d 3d3d 2043 6f6e 6669 6720 3d3d 3d3d  ==== Config ====
+00009980: 3d22 290d 0a20 2020 2070 7269 6e74 2822  =")..    print("
+00009990: 6973 204c 6f63 616c 3a20 222b 7374 7228  is Local: "+str(
+000099a0: 6749 734c 6f63 616c 2929 0d0a 2020 2020  gIsLocal))..    
+000099b0: 7072 696e 7428 2269 7320 5669 7274 7561  print("is Virtua
+000099c0: 6c3a 2022 2b73 7472 2867 4973 5669 7274  l: "+str(gIsVirt
+000099d0: 7561 6c41 4929 290d 0a20 2020 2070 7269  ualAI))..    pri
+000099e0: 6e74 2822 6f77 6e65 6420 6279 2063 6c69  nt("owned by cli
+000099f0: 656e 743a 2022 2b73 7472 2867 5573 6572  ent: "+str(gUser
+00009a00: 6e61 6d65 2929 0d0a 2020 2020 7072 696e  name))..    prin
+00009a10: 7428 223d 3d3d 3d3d 202f 436f 6e66 6967  t("===== /Config
+00009a20: 203d 3d3d 3d3d 5c72 5c6e 2229 0d0a 0d0a   =====\r\n")....
+00009a30: 2020 2020 2323 206d 616b 6520 7375 7265      ## make sure
+00009a40: 2077 6520 6861 7665 2061 2063 6f6e 6669   we have a confi
+00009a50: 6720 6669 6c65 0d0a 2020 2020 5f6c 6f61  g file..    _loa
+00009a60: 6443 6f6e 6669 6728 674e 616d 6529 0d0a  dConfig(gName)..
+00009a70: 0d0a 2020 2020 2323 2077 6865 7265 2069  ..    ## where i
+00009a80: 7320 4f53 4149 5320 666f 7220 7573 2074  s OSAIS for us t
+00009a90: 6865 6e3f 0d0a 2020 2020 674f 7269 6769  hen?..    gOrigi
+00009aa0: 6e47 6174 6577 6179 3d66 2268 7474 703a  nGateway=f"http:
+00009ab0: 2f2f 7b67 4950 4c6f 6361 6c7d 3a7b 6750  //{gIPLocal}:{gP
+00009ac0: 6f72 7447 6174 6577 6179 7d2f 2220 2020  ortGateway}/"   
+00009ad0: 2020 2020 2020 2323 2063 6f6e 6669 6720        ## config 
+00009ae0: 666f 7220 6c6f 6361 6c20 6761 7465 7761  for local gatewa
+00009af0: 7920 286c 6f63 616c 2061 6e64 206e 6f74  y (local and not
+00009b00: 2076 6972 7475 616c 290d 0a20 2020 2069   virtual)..    i
+00009b10: 6620 6749 7356 6972 7475 616c 4149 3a0d  f gIsVirtualAI:.
+00009b20: 0a20 2020 2020 2020 2069 6620 6749 734c  .        if gIsL
+00009b30: 6f63 616c 3a0d 0a20 2020 2020 2020 2020  ocal:..         
+00009b40: 2020 206f 7361 6973 5f72 6573 6574 4f53     osais_resetOS
+00009b50: 4149 5328 4e6f 6e65 2c20 6622 6874 7470  AIS(None, f"http
+00009b60: 3a2f 2f7b 6749 504c 6f63 616c 7d3a 7b67  ://{gIPLocal}:{g
+00009b70: 506f 7274 4c6f 6361 6c4f 5341 4953 7d2f  PortLocalOSAIS}/
+00009b80: 2229 0d0a 2020 2020 2020 2020 656c 7365  ")..        else
+00009b90: 3a0d 0a20 2020 2020 2020 2020 2020 206f  :..            o
+00009ba0: 7361 6973 5f72 6573 6574 4f53 4149 5328  sais_resetOSAIS(
+00009bb0: 2268 7474 7073 3a2f 2f6f 7065 6e73 6f75  "https://opensou
+00009bc0: 7263 6561 6973 2e63 6f6d 2f22 2c20 4e6f  rceais.com/", No
+00009bd0: 6e65 290d 0a20 2020 2020 2020 2074 7279  ne)..        try
+00009be0: 3a0d 0a20 2020 2020 2020 2020 2020 206f  :..            o
+00009bf0: 7361 6973 5f61 7574 6865 6e74 6963 6174  sais_authenticat
+00009c00: 6541 4928 290d 0a20 2020 2020 2020 2065  eAI()..        e
+00009c10: 7863 6570 7420 4578 6365 7074 696f 6e20  xcept Exception 
+00009c20: 6173 2065 7272 3a0d 0a20 2020 2020 2020  as err:..       
+00009c30: 2020 2020 2070 7269 6e74 2822 3d3e 2043       print("=> C
+00009c40: 5249 5449 4341 4c3a 2043 6f75 6c64 206e  RITICAL: Could n
+00009c50: 6f74 2063 6f6e 6e65 6374 2076 6972 7475  ot connect virtu
+00009c60: 616c 2041 4920 222b 674e 616d 652b 2022  al AI "+gName+ "
+00009c70: 2074 6f20 4f53 4149 5322 290d 0a20 2020   to OSAIS")..   
+00009c80: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00009c90: 4e6f 6e65 0d0a 0d0a 2020 2020 2020 2020  None....        
+00009ca0: 6966 2067 4175 7468 546f 6b65 6e21 3d4e  if gAuthToken!=N
+00009cb0: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+00009cc0: 2020 7072 696e 7428 223d 3e20 5275 6e6e    print("=> Runn
+00009cd0: 696e 6720 222b 674e 616d 652b 2220 4149  ing "+gName+" AI
+00009ce0: 2061 7320 6120 7669 7274 7561 6c20 4149   as a virtual AI
+00009cf0: 2063 6f6e 6e65 6374 6564 2074 6f3a 2022   connected to: "
+00009d00: 2b67 4f72 6967 696e 4f53 4149 5329 0d0a  +gOriginOSAIS)..
+00009d10: 2020 2020 2020 2020 6966 2067 4175 7468          if gAuth
+00009d20: 546f 6b65 6e4c 6f63 616c 213d 4e6f 6e65  TokenLocal!=None
+00009d30: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
+00009d40: 7269 6e74 2822 3d3e 2052 756e 6e69 6e67  rint("=> Running
+00009d50: 2022 2b67 4e61 6d65 2b22 2041 4920 6173   "+gName+" AI as
+00009d60: 2061 2076 6972 7475 616c 2041 4920 636f   a virtual AI co
+00009d70: 6e6e 6563 7465 6420 746f 3a20 222b 674f  nnected to: "+gO
+00009d80: 7269 6769 6e4c 6f63 616c 4f53 4149 5329  riginLocalOSAIS)
+00009d90: 0d0a 2020 2020 656c 7365 3a0d 0a20 2020  ..    else:..   
+00009da0: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
+00009db0: 2020 2020 2020 206f 7361 6973 5f72 6573         osais_res
+00009dc0: 6574 4761 7465 7761 7928 674f 7269 6769  etGateway(gOrigi
+00009dd0: 6e47 6174 6577 6179 290d 0a20 2020 2020  nGateway)..     
+00009de0: 2020 2020 2020 2070 7269 6e74 2822 3d3e         print("=>
+00009df0: 2052 756e 6e69 6e67 2022 2b67 4e61 6d65   Running "+gName
+00009e00: 2b22 2041 4920 6173 2061 2073 6572 7665  +" AI as a serve
+00009e10: 7220 636f 6e6e 6563 7465 6420 746f 206c  r connected to l
+00009e20: 6f63 616c 2047 6174 6577 6179 2022 2b67  ocal Gateway "+g
+00009e30: 4f72 6967 696e 4761 7465 7761 7929 0d0a  OriginGateway)..
+00009e40: 2020 2020 2020 2020 0d0a 2020 2020 2020          ..      
+00009e50: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
+00009e60: 6f6e 2061 7320 6572 723a 0d0a 2020 2020  on as err:..    
+00009e70: 2020 2020 2020 2020 7072 696e 7428 2243          print("C
+00009e80: 5249 5449 4341 4c3a 2063 6f75 6c64 206e  RITICAL: could n
+00009e90: 6f74 206e 6f74 6966 7920 4761 7465 7761  ot notify Gatewa
+00009ea0: 7920 6174 2022 2b67 4f72 6967 696e 4761  y at "+gOriginGa
+00009eb0: 7465 7761 7929 0d0a 2020 2020 2020 2020  teway)..        
+00009ec0: 2020 2020 7265 7475 726e 204e 6f6e 650d      return None.
+00009ed0: 0a0d 0a20 2020 2023 2320 696e 6974 2064  ...    ## init d
+00009ee0: 6566 6175 6c74 2063 6f73 740d 0a20 2020  efault cost..   
+00009ef0: 205f 696e 6974 6961 6c69 7a65 436f 7374   _initializeCost
+00009f00: 2829 0d0a 0d0a 2020 2020 7072 696e 7428  ()....    print(
+00009f10: 225c 725c 6e22 290d 0a20 2020 2072 6574  "\r\n")..    ret
+00009f20: 7572 6e20 674e 616d 650d 0a0d 0a23 2320  urn gName....## 
 00009f30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009f40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a23 2020  -----------..#  
-00009f50: 2020 2020 2053 7461 7274 696e 6720 706f       Starting po
-00009f60: 696e 7420 6f66 204c 6962 0d0a 2323 202d  int of Lib..## -
-00009f70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009f80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009f90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009f40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009f50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009f60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009f70: 2d2d 2d2d 2d2d 2d2d 0d0a 2320 2020 2020  --------..#     
+00009f80: 2020 5374 6172 7469 6e67 2070 6f69 6e74    Starting point
+00009f90: 206f 6620 4c69 620d 0a23 2320 2d2d 2d2d   of Lib..## ----
 00009fa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009fb0: 2d2d 2d2d 2d2d 2d0d 0a0d 0a23 204d 756c  -------....# Mul
-00009fc0: 7469 7468 7265 6164 696e 6720 666f 7220  tithreading for 
-00009fd0: 6f62 7365 7276 6572 730d 0a77 6174 6368  observers..watch
-00009fe0: 5f64 6972 6563 746f 7279 3d73 7461 7274  _directory=start
-00009ff0: 5f6f 6273 6572 7665 725f 7468 7265 6164  _observer_thread
-0000a000: 285f 6765 744f 7574 7075 7444 6972 2829  (_getOutputDir()
-0000a010: 2c20 6f73 6169 735f 6f6e 4e6f 7469 6679  , osais_onNotify
-0000a020: 4669 6c65 4372 6561 7465 642c 204e 6f6e  FileCreated, Non
-0000a030: 6529 2020 2020 200d 0a0d 0a23 636c 6561  e)     ....#clea
-0000a040: 6e69 6e67 2064 6972 2065 7665 7279 2031  ning dir every 1
-0000a050: 306d 696e 0d0a 7363 6865 6475 6c65 2e65  0min..schedule.e
-0000a060: 7665 7279 2831 3029 2e6d 696e 7574 6573  very(10).minutes
-0000a070: 2e64 6f28 5f63 6c65 6172 4469 7229 0d0a  .do(_clearDir)..
-0000a080: 0d0a 7072 696e 7428 225c 725c 6e50 7974  ..print("\r\nPyt
-0000a090: 686f 6e20 4f53 4149 5320 4c69 6220 6973  hon OSAIS Lib is
-0000a0a0: 206c 6f61 6465 642e 2e2e 2229 0d0a 0d0a   loaded...")....
-0000a0b0: 0d0a                                     ..
+00009fb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009fc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009fd0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009fe0: 2d2d 2d2d 0d0a 0d0a 2320 4d75 6c74 6974  ----....# Multit
+00009ff0: 6872 6561 6469 6e67 2066 6f72 206f 6273  hreading for obs
+0000a000: 6572 7665 7273 0d0a 7761 7463 685f 6469  ervers..watch_di
+0000a010: 7265 6374 6f72 793d 7374 6172 745f 6f62  rectory=start_ob
+0000a020: 7365 7276 6572 5f74 6872 6561 6428 5f67  server_thread(_g
+0000a030: 6574 4f75 7470 7574 4469 7228 292c 206f  etOutputDir(), o
+0000a040: 7361 6973 5f6f 6e4e 6f74 6966 7946 696c  sais_onNotifyFil
+0000a050: 6543 7265 6174 6564 2c20 4e6f 6e65 2920  eCreated, None) 
+0000a060: 2020 2020 0d0a 0d0a 2363 6c65 616e 696e      ....#cleanin
+0000a070: 6720 6469 7220 6576 6572 7920 3130 6d69  g dir every 10mi
+0000a080: 6e0d 0a73 6368 6564 756c 652e 6576 6572  n..schedule.ever
+0000a090: 7928 3130 292e 6d69 6e75 7465 732e 646f  y(10).minutes.do
+0000a0a0: 285f 636c 6561 7244 6972 290d 0a0d 0a70  (_clearDir)....p
+0000a0b0: 7269 6e74 2822 5c72 5c6e 5079 7468 6f6e  rint("\r\nPython
+0000a0c0: 204f 5341 4953 204c 6962 2069 7320 6c6f   OSAIS Lib is lo
+0000a0d0: 6164 6564 2e2e 2e22 290d 0a0d 0a0d 0a    aded...")......
```

### Comparing `osais-1.0.32/osais.egg-info/PKG-INFO` & `osais-1.0.33/osais.egg-info/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: osais
-Version: 1.0.32
+Version: 1.0.33
 Summary: The osais Python lib for connecting AIs to OSAIS cloud
 Home-page: https://github.com/incubiq/osais
 Author: incubiq
 Author-email: eric@incubiq.com
 Keywords: osais,opensourceais
 Classifier: Development Status :: 3 - Alpha
 Classifier: Intended Audience :: Developers
```

### Comparing `osais-1.0.32/setup.py` & `osais-1.0.33/setup.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,12 +1,12 @@
 from setuptools import setup, find_packages
 
 setup(
     name='osais',
-    version='1.0.32',
+    version='1.0.33',
     author='incubiq',
     author_email='eric@incubiq.com',
     description='The osais Python lib for connecting AIs to OSAIS cloud',
     long_description=open('README.md').read(),
     long_description_content_type='text/markdown',
     url='https://github.com/incubiq/osais',
     keywords = "osais, opensourceais",
```

