# Comparing `tmp/odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.0.1.dev3-py3-none-any.whl.zip` & `tmp/odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.1.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,24 +1,25 @@
-Zip file size: 28086 bytes, number of entries: 22
--rw-r--r--  2.0 unx     3728 b- defN 22-Aug-08 08:05 odoo/addons/stock_scheduler_assignation_horizon/README.rst
--rw-r--r--  2.0 unx      117 b- defN 22-Aug-08 08:05 odoo/addons/stock_scheduler_assignation_horizon/__init__.py
--rw-r--r--  2.0 unx      566 b- defN 22-Aug-08 08:05 odoo/addons/stock_scheduler_assignation_horizon/__manifest__.py
--rw-r--r--  2.0 unx     4735 b- defN 22-Aug-08 08:05 odoo/addons/stock_scheduler_assignation_horizon/i18n/stock_scheduler_assignation_horizon.pot
--rw-r--r--  2.0 unx      188 b- defN 22-Aug-08 08:05 odoo/addons/stock_scheduler_assignation_horizon/models/__init__.py
--rw-r--r--  2.0 unx     1231 b- defN 22-Aug-08 08:05 odoo/addons/stock_scheduler_assignation_horizon/models/procurement_group.py
--rw-r--r--  2.0 unx      293 b- defN 22-Aug-08 08:05 odoo/addons/stock_scheduler_assignation_horizon/models/res_company.py
--rw-r--r--  2.0 unx     1081 b- defN 22-Aug-08 08:05 odoo/addons/stock_scheduler_assignation_horizon/models/res_config_settings.py
--rw-r--r--  2.0 unx      107 b- defN 22-Aug-08 08:05 odoo/addons/stock_scheduler_assignation_horizon/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      159 b- defN 22-Aug-08 08:05 odoo/addons/stock_scheduler_assignation_horizon/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      468 b- defN 22-Aug-08 08:05 odoo/addons/stock_scheduler_assignation_horizon/readme/ROADMAP.rst
--rw-r--r--  2.0 unx      175 b- defN 22-Aug-08 08:05 odoo/addons/stock_scheduler_assignation_horizon/readme/USAGE.rst
--rw-r--r--  2.0 unx     9455 b- defN 22-Aug-08 08:05 odoo/addons/stock_scheduler_assignation_horizon/static/description/icon.png
--rw-r--r--  2.0 unx    13437 b- defN 22-Aug-08 08:05 odoo/addons/stock_scheduler_assignation_horizon/static/description/index.html
--rw-r--r--  2.0 unx       39 b- defN 22-Aug-08 08:05 odoo/addons/stock_scheduler_assignation_horizon/tests/__init__.py
--rw-r--r--  2.0 unx     2709 b- defN 22-Aug-08 08:05 odoo/addons/stock_scheduler_assignation_horizon/tests/test_res_config_settings.py
--rw-r--r--  2.0 unx      532 b- defN 22-Aug-08 08:05 odoo/addons/stock_scheduler_assignation_horizon/tests/test_res_config_settings_common.py
--rw-r--r--  2.0 unx     2015 b- defN 22-Aug-08 08:05 odoo/addons/stock_scheduler_assignation_horizon/views/res_config_settings_views.xml
--rw-r--r--  2.0 unx     4346 b- defN 22-Aug-08 08:05 odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.0.1.dev3.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 22-Aug-08 08:05 odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.0.1.dev3.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 22-Aug-08 08:05 odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.0.1.dev3.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2816 b- defN 22-Aug-08 08:05 odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.0.1.dev3.dist-info/RECORD
-22 files, 48294 bytes uncompressed, 23130 bytes compressed:  52.1%
+Zip file size: 29673 bytes, number of entries: 23
+-rw-r--r--  2.0 unx     4086 b- defN 23-Apr-13 10:14 odoo/addons/stock_scheduler_assignation_horizon/README.rst
+-rw-r--r--  2.0 unx      117 b- defN 23-Apr-13 10:14 odoo/addons/stock_scheduler_assignation_horizon/__init__.py
+-rw-r--r--  2.0 unx      641 b- defN 23-Apr-13 10:14 odoo/addons/stock_scheduler_assignation_horizon/__manifest__.py
+-rw-r--r--  2.0 unx      584 b- defN 23-Apr-13 10:14 odoo/addons/stock_scheduler_assignation_horizon/data/ir_config_parameter.xml
+-rw-r--r--  2.0 unx     3795 b- defN 23-Apr-13 10:14 odoo/addons/stock_scheduler_assignation_horizon/i18n/stock_scheduler_assignation_horizon.pot
+-rw-r--r--  2.0 unx     2029 b- defN 23-Apr-13 10:14 odoo/addons/stock_scheduler_assignation_horizon/migrations/14.0.1.0.1/pre-migration.py
+-rw-r--r--  2.0 unx      162 b- defN 23-Apr-13 10:14 odoo/addons/stock_scheduler_assignation_horizon/models/__init__.py
+-rw-r--r--  2.0 unx     1781 b- defN 23-Apr-13 10:14 odoo/addons/stock_scheduler_assignation_horizon/models/procurement_group.py
+-rw-r--r--  2.0 unx     1177 b- defN 23-Apr-13 10:14 odoo/addons/stock_scheduler_assignation_horizon/models/res_config_settings.py
+-rw-r--r--  2.0 unx      107 b- defN 23-Apr-13 10:14 odoo/addons/stock_scheduler_assignation_horizon/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      243 b- defN 23-Apr-13 10:14 odoo/addons/stock_scheduler_assignation_horizon/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      468 b- defN 23-Apr-13 10:14 odoo/addons/stock_scheduler_assignation_horizon/readme/ROADMAP.rst
+-rw-r--r--  2.0 unx      175 b- defN 23-Apr-13 10:14 odoo/addons/stock_scheduler_assignation_horizon/readme/USAGE.rst
+-rw-r--r--  2.0 unx     9455 b- defN 23-Apr-13 10:14 odoo/addons/stock_scheduler_assignation_horizon/static/description/icon.png
+-rw-r--r--  2.0 unx    13922 b- defN 23-Apr-13 10:14 odoo/addons/stock_scheduler_assignation_horizon/static/description/index.html
+-rw-r--r--  2.0 unx       39 b- defN 23-Apr-13 10:14 odoo/addons/stock_scheduler_assignation_horizon/tests/__init__.py
+-rw-r--r--  2.0 unx     2565 b- defN 23-Apr-13 10:14 odoo/addons/stock_scheduler_assignation_horizon/tests/test_res_config_settings.py
+-rw-r--r--  2.0 unx      759 b- defN 23-Apr-13 10:14 odoo/addons/stock_scheduler_assignation_horizon/tests/test_res_config_settings_common.py
+-rw-r--r--  2.0 unx     2180 b- defN 23-Apr-13 10:14 odoo/addons/stock_scheduler_assignation_horizon/views/res_config_settings_views.xml
+-rw-r--r--  2.0 unx     4743 b- defN 23-Apr-13 10:14 odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.1.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Apr-13 10:14 odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.1.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Apr-13 10:14 odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.1.0.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     2946 b- defN 23-Apr-13 10:14 odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.1.0.dist-info/RECORD
+23 files, 52071 bytes uncompressed, 24495 bytes compressed:  53.0%
```

## zipnote {}

```diff
@@ -3,24 +3,27 @@
 
 Filename: odoo/addons/stock_scheduler_assignation_horizon/__init__.py
 Comment: 
 
 Filename: odoo/addons/stock_scheduler_assignation_horizon/__manifest__.py
 Comment: 
 
+Filename: odoo/addons/stock_scheduler_assignation_horizon/data/ir_config_parameter.xml
+Comment: 
+
 Filename: odoo/addons/stock_scheduler_assignation_horizon/i18n/stock_scheduler_assignation_horizon.pot
 Comment: 
 
-Filename: odoo/addons/stock_scheduler_assignation_horizon/models/__init__.py
+Filename: odoo/addons/stock_scheduler_assignation_horizon/migrations/14.0.1.0.1/pre-migration.py
 Comment: 
 
-Filename: odoo/addons/stock_scheduler_assignation_horizon/models/procurement_group.py
+Filename: odoo/addons/stock_scheduler_assignation_horizon/models/__init__.py
 Comment: 
 
-Filename: odoo/addons/stock_scheduler_assignation_horizon/models/res_company.py
+Filename: odoo/addons/stock_scheduler_assignation_horizon/models/procurement_group.py
 Comment: 
 
 Filename: odoo/addons/stock_scheduler_assignation_horizon/models/res_config_settings.py
 Comment: 
 
 Filename: odoo/addons/stock_scheduler_assignation_horizon/readme/CONTRIBUTORS.rst
 Comment: 
@@ -48,20 +51,20 @@
 
 Filename: odoo/addons/stock_scheduler_assignation_horizon/tests/test_res_config_settings_common.py
 Comment: 
 
 Filename: odoo/addons/stock_scheduler_assignation_horizon/views/res_config_settings_views.xml
 Comment: 
 
-Filename: odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.0.1.dev3.dist-info/METADATA
+Filename: odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.1.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.0.1.dev3.dist-info/WHEEL
+Filename: odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.1.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.0.1.dev3.dist-info/top_level.txt
+Filename: odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.1.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.0.1.dev3.dist-info/RECORD
+Filename: odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.1.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/stock_scheduler_assignation_horizon/README.rst

```diff
@@ -3,17 +3,17 @@
 =============================
 
 .. !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
    !! changes will be overwritten.                   !!
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 
-.. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
+.. |badge1| image:: https://img.shields.io/badge/maturity-Alpha-red.png
     :target: https://odoo-community.org/page/development-status
-    :alt: Beta
+    :alt: Alpha
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fstock--logistics--workflow-lightgray.png?logo=github
     :target: https://github.com/OCA/stock-logistics-workflow/tree/14.0/stock_scheduler_assignation_horizon
     :alt: OCA/stock-logistics-workflow
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
@@ -21,15 +21,23 @@
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runbot-Try%20me-875A7B.png
     :target: https://runbot.odoo-community.org/runbot/154/14.0
     :alt: Try me on Runbot
 
 |badge1| |badge2| |badge3| |badge4| |badge5| 
 
-This module allows to set a time horizon that will prevent the scheduler from marking stock pickings as *ready* before the indicated number of days (horizon).
+This module allows to set a time horizon that will prevent the scheduler from marking stock
+pickings as *ready* before the indicated number of days (horizon).
+
+This behavior can be enabled globally via settings or for each company separately.
+
+.. IMPORTANT::
+   This is an alpha version, the data model and design can change at any time without warning.
+   Only for development or testing purpose, do not use in production.
+   `More details on development status <https://odoo-community.org/page/development-status>`_
 
 **Table of contents**
 
 .. contents::
    :local:
 
 Usage
```

## odoo/addons/stock_scheduler_assignation_horizon/__manifest__.py

```diff
@@ -1,16 +1,18 @@
 # Copyright 2022 Camptocamp SA
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
 {
     "name": "Scheduler assignation horizon",
     "summary": "Set a timeframe limit to the delivery scheduler",
-    "version": "14.0.1.0.0",
+    "version": "14.0.1.1.0",
     "category": "Inventory",
     "author": "Camptocamp, Odoo Community Association (OCA)",
     "license": "AGPL-3",
+    "development_status": "Alpha",
     "website": "https://github.com/OCA/stock-logistics-workflow",
     "depends": ["stock"],
     "external_dependencies": {"python": ["pytz"]},
     "data": [
         "views/res_config_settings_views.xml",
+        "data/ir_config_parameter.xml",
     ],
 }
```

## odoo/addons/stock_scheduler_assignation_horizon/i18n/stock_scheduler_assignation_horizon.pot

```diff
@@ -12,101 +12,81 @@
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
 "Plural-Forms: \n"
 
 #. module: stock_scheduler_assignation_horizon
 #: model_terms:ir.ui.view,arch_db:stock_scheduler_assignation_horizon.res_config_settings_view_form_stock
 msgid ""
-"<span class=\"fa fa-lg fa-building-o\" title=\"Values set here are company-"
-"specific.\" aria-label=\"Values set here are company-specific.\" "
+"<span class=\"fa fa-lg\" title=\"Values set here are company-specific.\" "
+"aria-label=\"Values set here are company-specific.\" "
 "groups=\"base.group_multi_company\" role=\"img\"/>"
 msgstr ""
 
 #. module: stock_scheduler_assignation_horizon
-#: model:ir.model.fields,field_description:stock_scheduler_assignation_horizon.field_res_config_settings__moves_assignation_horizon
+#: model:ir.model.fields,field_description:stock_scheduler_assignation_horizon.field_res_config_settings__stock_horizon_move_assignation_limit
 msgid "Assignation Horizon"
 msgstr ""
 
 #. module: stock_scheduler_assignation_horizon
-#: model:ir.model.fields,help:stock_scheduler_assignation_horizon.field_res_config_settings__is_moves_assignation_limited
-msgid ""
-"Check this box to prevent the scheduler from assigning moves before the "
-"horizon below"
-msgstr ""
-
-#. module: stock_scheduler_assignation_horizon
-#: model:ir.model,name:stock_scheduler_assignation_horizon.model_res_company
-msgid "Companies"
-msgstr ""
-
-#. module: stock_scheduler_assignation_horizon
 #: model:ir.model,name:stock_scheduler_assignation_horizon.model_res_config_settings
 msgid "Config Settings"
 msgstr ""
 
 #. module: stock_scheduler_assignation_horizon
 #: model:ir.model.fields,field_description:stock_scheduler_assignation_horizon.field_procurement_group__display_name
-#: model:ir.model.fields,field_description:stock_scheduler_assignation_horizon.field_res_company__display_name
 #: model:ir.model.fields,field_description:stock_scheduler_assignation_horizon.field_res_config_settings__display_name
 msgid "Display Name"
 msgstr ""
 
 #. module: stock_scheduler_assignation_horizon
 #: model_terms:ir.ui.view,arch_db:stock_scheduler_assignation_horizon.res_config_settings_view_form_stock
 msgid "Do not schedule delivery before horizon timeframe"
 msgstr ""
 
 #. module: stock_scheduler_assignation_horizon
+#: model:ir.model.fields,help:stock_scheduler_assignation_horizon.field_res_config_settings__stock_horizon_move_assignation
+msgid "Enable scheduler assignation horizon limit for all companies"
+msgstr ""
+
+#. module: stock_scheduler_assignation_horizon
 #: model_terms:ir.ui.view,arch_db:stock_scheduler_assignation_horizon.res_config_settings_view_form_stock
 msgid "Horizon timeframe (in days)"
 msgstr ""
 
 #. module: stock_scheduler_assignation_horizon
 #: model:ir.model.fields,field_description:stock_scheduler_assignation_horizon.field_procurement_group__id
-#: model:ir.model.fields,field_description:stock_scheduler_assignation_horizon.field_res_company__id
 #: model:ir.model.fields,field_description:stock_scheduler_assignation_horizon.field_res_config_settings__id
 msgid "ID"
 msgstr ""
 
 #. module: stock_scheduler_assignation_horizon
-#: model:ir.model.fields,field_description:stock_scheduler_assignation_horizon.field_res_company__is_moves_assignation_limited
-msgid "Is Moves Assignation Limited"
-msgstr ""
-
-#. module: stock_scheduler_assignation_horizon
 #: model:ir.model.fields,field_description:stock_scheduler_assignation_horizon.field_procurement_group____last_update
-#: model:ir.model.fields,field_description:stock_scheduler_assignation_horizon.field_res_company____last_update
 #: model:ir.model.fields,field_description:stock_scheduler_assignation_horizon.field_res_config_settings____last_update
 msgid "Last Modified on"
 msgstr ""
 
 #. module: stock_scheduler_assignation_horizon
-#: model:ir.model.fields,field_description:stock_scheduler_assignation_horizon.field_res_company__moves_assignation_horizon
-msgid "Moves Assignation Horizon"
-msgstr ""
-
-#. module: stock_scheduler_assignation_horizon
-#: model:ir.model.fields,help:stock_scheduler_assignation_horizon.field_res_config_settings__moves_assignation_horizon
+#: model:ir.model.fields,help:stock_scheduler_assignation_horizon.field_res_config_settings__stock_horizon_move_assignation_limit
 msgid ""
 "Only reserve moves that are scheduled within the specified number of days"
 msgstr ""
 
 #. module: stock_scheduler_assignation_horizon
 #: model:ir.model,name:stock_scheduler_assignation_horizon.model_procurement_group
 msgid "Procurement Group"
 msgstr ""
 
 #. module: stock_scheduler_assignation_horizon
-#: model:ir.model.fields,field_description:stock_scheduler_assignation_horizon.field_res_config_settings__is_moves_assignation_limited
-msgid "Scheduler Assignation Limit"
-msgstr ""
-
-#. module: stock_scheduler_assignation_horizon
 #: model_terms:ir.ui.view,arch_db:stock_scheduler_assignation_horizon.res_config_settings_view_form_stock
 msgid "Shipping Scheduler"
 msgstr ""
 
 #. module: stock_scheduler_assignation_horizon
 #: code:addons/stock_scheduler_assignation_horizon/models/res_config_settings.py:0
 #, python-format
 msgid "The assignation horizon cannot be negative"
 msgstr ""
+
+#. module: stock_scheduler_assignation_horizon
+#: model:ir.model.fields,field_description:stock_scheduler_assignation_horizon.field_res_config_settings__stock_horizon_move_assignation
+msgid "Use Assignation Limit"
+msgstr ""
```

## odoo/addons/stock_scheduler_assignation_horizon/models/__init__.py

```diff
@@ -1,6 +1,5 @@
 # Copyright 2022 Camptocamp SA
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
 
 from . import res_config_settings
-from . import res_company
 from . import procurement_group
```

## odoo/addons/stock_scheduler_assignation_horizon/models/procurement_group.py

```diff
@@ -1,40 +1,49 @@
 # Copyright 2022 Camptocamp SA
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
 
 from datetime import datetime, timedelta
-
-import pytz
+from logging import getLogger
 
 from odoo import models
 from odoo.osv import expression
+from odoo.tools.misc import str2bool
+
+_logger = getLogger(__name__)
 
 
 class ProcurementGroup(models.Model):
     _inherit = "procurement.group"
 
     def _get_moves_to_assign_domain(self, company_id):
         domain = super()._get_moves_to_assign_domain(company_id)
-        company = self.env["res.company"].browse(company_id)
-        if company.is_moves_assignation_limited:
-            domain = self._get_moves_to_assign_domain_assignation_limited(
-                domain, company
-            )
+        global_limit = self._is_assignation_horizon_limited()
+        if global_limit:
+            delay = self._get_assignation_horizon_limit()
+            horizon_domain = self._get_assignation_horizon_domain(delay)
+            domain = expression.AND([domain, horizon_domain])
         return domain
 
-    def _get_moves_to_assign_domain_assignation_limited(self, domain, company):
-        company_tz = pytz.timezone(company.partner_id.tz or "UTC")
-        max_date = (
-            datetime.combine(
-                datetime.now(company_tz)
-                + timedelta(days=company.moves_assignation_horizon),
-                datetime.max.time(),
-            )
-            .astimezone(pytz.utc)
-            .replace(tzinfo=None)
-        )
-        return expression.AND(
-            [
-                domain,
-                [("date", "<=", max_date)],
-            ]
+    def _get_assignation_horizon_domain(self, delay_days):
+        max_date = datetime.now() + timedelta(days=delay_days)
+        return [("date", "<=", max_date)]
+
+    def _is_assignation_horizon_limited(self):
+        get_param = self.env["ir.config_parameter"].sudo().get_param
+        param = "stock_scheduler_assignation_horizon.stock_horizon_move_assignation"
+        return str2bool(get_param(param, False))
+
+    def _get_assignation_horizon_limit(self):
+        get_param = self.env["ir.config_parameter"].sudo().get_param
+        param = (
+            "stock_scheduler_assignation_horizon.stock_horizon_move_assignation_limit"
         )
+        try:
+            param_value = get_param(param, 0)
+            limit = int(param_value)
+        except ValueError:
+            limit = 0
+            _logger.warning(
+                "Wrong value for ir.config_parameter %s: %s . Using %s as default value"
+                % (param, param_value, limit)
+            )
+        return limit
```

## odoo/addons/stock_scheduler_assignation_horizon/models/res_config_settings.py

```diff
@@ -4,26 +4,26 @@
 from odoo import _, api, fields, models
 from odoo.exceptions import ValidationError
 
 
 class ResConfigSettings(models.TransientModel):
     _inherit = "res.config.settings"
 
-    is_moves_assignation_limited = fields.Boolean(
-        "Scheduler Assignation Limit",
-        related="company_id.is_moves_assignation_limited",
+    stock_horizon_move_assignation = fields.Boolean(
+        "Use Assignation Limit",
+        config_parameter="stock_scheduler_assignation_horizon.stock_horizon_move_assignation",
         readonly=False,
-        help="Check this box to prevent the scheduler from "
-        "assigning moves before the horizon below",
+        help="Enable scheduler assignation horizon limit for all companies",
     )
-    moves_assignation_horizon = fields.Integer(
+    stock_horizon_move_assignation_limit = fields.Integer(
         "Assignation Horizon",
-        related="company_id.moves_assignation_horizon",
+        config_parameter="stock_scheduler_assignation_horizon."
+        "stock_horizon_move_assignation_limit",
         readonly=False,
         help="Only reserve moves that are scheduled within the specified number of days",
     )
 
-    @api.constrains("moves_assignation_horizon")
-    def _check_moves_assignation_horizon(self):
+    @api.constrains("stock_horizon_move_assignation_limit")
+    def _check_stock_horizon_move_assignation_limit(self):
         for record in self:
-            if record.moves_assignation_horizon < 0:
+            if record.stock_horizon_move_assignation_limit < 0:
                 raise ValidationError(_("The assignation horizon cannot be negative"))
```

## odoo/addons/stock_scheduler_assignation_horizon/readme/DESCRIPTION.rst

```diff
@@ -1 +1,4 @@
-This module allows to set a time horizon that will prevent the scheduler from marking stock pickings as *ready* before the indicated number of days (horizon).
+This module allows to set a time horizon that will prevent the scheduler from marking stock
+pickings as *ready* before the indicated number of days (horizon).
+
+This behavior can be enabled globally via settings or for each company separately.
```

## odoo/addons/stock_scheduler_assignation_horizon/static/description/index.html

### odoo/addons/stock_scheduler_assignation_horizon/static/description/index.html

```diff
@@ -362,15 +362,15 @@
       <h1 class="title">Scheduler assignation horizon</h1>
       <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 !! This file is generated by oca-gen-addon-readme !!
 !! changes will be overwritten.                   !!
 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
       <p>
         <a class="reference external" href="https://odoo-community.org/page/development-status">
-          <img alt="Beta" src="https://img.shields.io/badge/maturity-Beta-yellow.png"/>
+          <img alt="Alpha" src="https://img.shields.io/badge/maturity-Alpha-red.png"/>
         </a>
         <a class="reference external" href="http://www.gnu.org/licenses/agpl-3.0-standalone.html">
           <img alt="License: AGPL-3" src="https://img.shields.io/badge/licence-AGPL--3-blue.png"/>
         </a>
         <a class="reference external" href="https://github.com/OCA/stock-logistics-workflow/tree/14.0/stock_scheduler_assignation_horizon">
           <img alt="OCA/stock-logistics-workflow" src="https://img.shields.io/badge/github-OCA%2Fstock--logistics--workflow-lightgray.png?logo=github"/>
         </a>
@@ -378,18 +378,28 @@
           <img alt="Translate me on Weblate" src="https://img.shields.io/badge/weblate-Translate%20me-F47D42.png"/>
         </a>
         <a class="reference external" href="https://runbot.odoo-community.org/runbot/154/14.0">
           <img alt="Try me on Runbot" src="https://img.shields.io/badge/runbot-Try%20me-875A7B.png"/>
         </a>
       </p>
       <p>
-        This module allows to set a time horizon that will prevent the scheduler from marking stock pickings as
+        This module allows to set a time horizon that will prevent the scheduler from marking stock
+pickings as
         <em>ready</em>
         before the indicated number of days (horizon).
       </p>
+      <p>This behavior can be enabled globally via settings or for each company separately.</p>
+      <div class="admonition important">
+        <p class="first admonition-title">Important</p>
+        <p class="last">
+          This is an alpha version, the data model and design can change at any time without warning.
+Only for development or testing purpose, do not use in production.
+          <a class="reference external" href="https://odoo-community.org/page/development-status">More details on development status</a>
+        </p>
+      </div>
       <p>
         <strong>Table of contents</strong>
       </p>
       <div class="contents local topic" id="contents">
         <ul class="simple">
           <li>
             <a class="reference internal" href="#usage" id="id1">Usage</a>
```

## odoo/addons/stock_scheduler_assignation_horizon/tests/test_res_config_settings.py

```diff
@@ -5,49 +5,48 @@
 
 from odoo.exceptions import ValidationError
 
 from .test_res_config_settings_common import ResConfigSettingsCase
 
 
 class DeliverySchedulerLimitCase(ResConfigSettingsCase):
-    def test_settings_applied_to_company(self):
-        self.assertEqual(self.company.is_moves_assignation_limited, True)
-        self.assertEqual(self.company.moves_assignation_horizon, 2)
+    @classmethod
+    def setUpClass(cls):
+        super().setUpClass()
+        cls.location = cls.env.ref("stock.stock_location_stock")
+        cls.location_dest = cls.env.ref("stock.stock_location_customers")
 
-    def test_assignation_horizon_negative_value(self):
-        with self.assertRaises(ValidationError) as context:
-            self.settings.moves_assignation_horizon = -3
-        self.assertEqual(
-            "The assignation horizon cannot be negative", str(context.exception)
-        )
-
-    def test_delivery_scheduler_horizon_limit(self):
-        self.location = self.env.ref("stock.stock_location_stock")
-        self.location_dest = self.env.ref("stock.stock_location_customers")
-
-        self.product_1 = self.env["product.product"].create(
+        cls.product_1 = cls.env["product.product"].create(
             {
                 "name": "Test Product 1",
                 "type": "product",
             }
         )
-        self.env["stock.quant"].with_context(inventory_mode=True).create(
+        cls.env["stock.quant"].with_context(inventory_mode=True).create(
             {
-                "product_id": self.product_1.id,
-                "location_id": self.location.id,
+                "product_id": cls.product_1.id,
+                "location_id": cls.location.id,
                 "inventory_quantity": 100,
             }
         )
 
+    def test_assignation_horizon_negative_value(self):
+        with self.assertRaises(ValidationError) as context:
+            self.settings.stock_horizon_move_assignation_limit = -3
+        self.assertEqual(
+            "The assignation horizon cannot be negative", str(context.exception)
+        )
+
+    def test_delivery_scheduler_horizon_limit(self):
         picking_1 = self._create_picking(days_horizon=1)
         picking_2 = self._create_picking(days_horizon=3)
         picking_1.action_confirm()
         picking_2.action_confirm()
 
-        self.env["procurement.group"].run_scheduler(company_id=self.company.id)
+        self.env["procurement.group"].run_scheduler()
 
         self.assertEqual(picking_1.state, "assigned")
         self.assertEqual(picking_2.state, "confirmed")
 
     def _create_picking(self, days_horizon=0):
         scheduled_date = date.today() + timedelta(days=days_horizon)
         operation_type = self.env.ref("stock.picking_type_out")
```

## odoo/addons/stock_scheduler_assignation_horizon/tests/test_res_config_settings_common.py

```diff
@@ -6,12 +6,17 @@
 
 
 class ResConfigSettingsCase(SavepointCase):
     @classmethod
     def setUpClass(cls):
         super().setUpClass()
         cls.env = cls.env(context=dict(cls.env.context, tracking_disable=True))
-        cls.company = cls.env.company
 
-        cls.settings = cls.env["res.config.settings"].create(
-            {"is_moves_assignation_limited": True, "moves_assignation_horizon": 2}
+        cls.settings = cls.env["res.config.settings"].create({})
+        # enable global params
+        cls.env["ir.config_parameter"].sudo().set_param(
+            "stock_scheduler_assignation_horizon.stock_horizon_move_assignation", True
+        )
+        cls.env["ir.config_parameter"].sudo().set_param(
+            "stock_scheduler_assignation_horizon.stock_horizon_move_assignation_limit",
+            2,
         )
```

## odoo/addons/stock_scheduler_assignation_horizon/views/res_config_settings_views.xml

### odoo/addons/stock_scheduler_assignation_horizon/views/res_config_settings_views.xml

```diff
@@ -5,25 +5,25 @@
     <field name="inherit_id" ref="stock.res_config_settings_view_form"/>
     <field name="arch" type="xml">
       <div name="operations_setting_container" position="after">
         <h2>Shipping Scheduler</h2>
         <div class="row mt16 o_settings_container" name="shipping_schedule_setting_container">
           <div class="col-12 col-lg-6 o_setting_box">
             <div class="o_setting_left_pane">
-              <field name="is_moves_assignation_limited"/>
+              <field name="stock_horizon_move_assignation"/>
             </div>
             <div class="o_setting_right_pane">
-              <label for="is_moves_assignation_limited"/>
-              <span class="fa fa-lg fa-building-o" title="Values set here are company-specific." aria-label="Values set here are company-specific." groups="base.group_multi_company" role="img"/>
+              <label for="stock_horizon_move_assignation"/>
+              <span class="fa fa-lg" title="Values set here are company-specific." aria-label="Values set here are company-specific." groups="base.group_multi_company" role="img"/>
               <div class="text-muted">Do not schedule delivery before horizon timeframe</div>
             </div>
-            <div class="o_setting_right_pane">
-              <label for="moves_assignation_horizon"/>
+            <div class="o_setting_right_pane" attrs="{'invisible': [('stock_horizon_move_assignation','=',False)]}">
+              <label for="stock_horizon_move_assignation_limit"/>
               <div class="text-muted">Horizon timeframe (in days)</div>
-              <field name="moves_assignation_horizon"/>
+              <field name="stock_horizon_move_assignation_limit"/>
             </div>
           </div>
         </div>
       </div>
     </field>
   </record>
 </odoo>
```

## Comparing `odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.0.1.dev3.dist-info/METADATA` & `odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.1.0.dist-info/METADATA`

 * *Files 8% similar despite different names*

```diff
@@ -1,36 +1,37 @@
 Metadata-Version: 2.1
 Name: odoo14-addon-stock-scheduler-assignation-horizon
-Version: 14.0.1.0.1.dev3
+Version: 14.0.1.1.0
 Summary: Set a timeframe limit to the delivery scheduler
 Home-page: https://github.com/OCA/stock-logistics-workflow
 Author: Camptocamp, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
 Classifier: Framework :: Odoo :: 14.0
 Classifier: License :: OSI Approved :: GNU Affero General Public License v3
+Classifier: Development Status :: 3 - Alpha
 Requires-Python: >=3.6
 Requires-Dist: odoo (<14.1dev,>=14.0a)
 Requires-Dist: pytz
 
 =============================
 Scheduler assignation horizon
 =============================
 
 .. !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
    !! changes will be overwritten.                   !!
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 
-.. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
+.. |badge1| image:: https://img.shields.io/badge/maturity-Alpha-red.png
     :target: https://odoo-community.org/page/development-status
-    :alt: Beta
+    :alt: Alpha
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fstock--logistics--workflow-lightgray.png?logo=github
     :target: https://github.com/OCA/stock-logistics-workflow/tree/14.0/stock_scheduler_assignation_horizon
     :alt: OCA/stock-logistics-workflow
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
@@ -38,15 +39,23 @@
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runbot-Try%20me-875A7B.png
     :target: https://runbot.odoo-community.org/runbot/154/14.0
     :alt: Try me on Runbot
 
 |badge1| |badge2| |badge3| |badge4| |badge5| 
 
-This module allows to set a time horizon that will prevent the scheduler from marking stock pickings as *ready* before the indicated number of days (horizon).
+This module allows to set a time horizon that will prevent the scheduler from marking stock
+pickings as *ready* before the indicated number of days (horizon).
+
+This behavior can be enabled globally via settings or for each company separately.
+
+.. IMPORTANT::
+   This is an alpha version, the data model and design can change at any time without warning.
+   Only for development or testing purpose, do not use in production.
+   `More details on development status <https://odoo-community.org/page/development-status>`_
 
 **Table of contents**
 
 .. contents::
    :local:
 
 Usage
```

## Comparing `odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.0.1.dev3.dist-info/RECORD` & `odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.1.0.dist-info/RECORD`

 * *Files 9% similar despite different names*

```diff
@@ -1,22 +1,23 @@
-odoo/addons/stock_scheduler_assignation_horizon/README.rst,sha256=mNU07hK8SSU818zFzrpuo2ng6HRAoX_z-9RGYjXwPEY,3728
+odoo/addons/stock_scheduler_assignation_horizon/README.rst,sha256=qzWDfYy4h3Iv057OwvYdjJG0A1tFi1vErXw7G22LXFQ,4086
 odoo/addons/stock_scheduler_assignation_horizon/__init__.py,sha256=JggKuuoZBiAd-H3XaMTFr0c3FiFxteFioV0J19c6qO0,117
-odoo/addons/stock_scheduler_assignation_horizon/__manifest__.py,sha256=vPhF7A8XFwdy2T4qLkqOPXJvtZoehjuF5LTD8Jou8Tk,566
-odoo/addons/stock_scheduler_assignation_horizon/i18n/stock_scheduler_assignation_horizon.pot,sha256=FBLbNhsp5NaSnRG1HgYIVY_58Ro8NXldTElwe79gdZ0,4735
-odoo/addons/stock_scheduler_assignation_horizon/models/__init__.py,sha256=H-k3T6u3lHzzyULBZ4T2argYgGud0ol8xNWpMjX1BDo,188
-odoo/addons/stock_scheduler_assignation_horizon/models/procurement_group.py,sha256=wKoNRzdD1uLdvLhRcXsw85yRWqik8s0CSALKHgYkRqk,1231
-odoo/addons/stock_scheduler_assignation_horizon/models/res_company.py,sha256=SH6rEtI71ncvhpIsD_BYsorCjIh7LH122S1Ku4z6tCA,293
-odoo/addons/stock_scheduler_assignation_horizon/models/res_config_settings.py,sha256=heAzurxU2abxgfCTfMoF6F4pJYqilF39BcgciURK-Wk,1081
+odoo/addons/stock_scheduler_assignation_horizon/__manifest__.py,sha256=iMv3zV5sDgBH4uaQV5qrT79-STtAx3--0A44qmInJLo,641
+odoo/addons/stock_scheduler_assignation_horizon/data/ir_config_parameter.xml,sha256=5-2MZq26uYqNaIAXKuHgsmaoUHM2YBvZrW0kjDKj8Lc,584
+odoo/addons/stock_scheduler_assignation_horizon/i18n/stock_scheduler_assignation_horizon.pot,sha256=7dLD8sHT4drLOOoyabbzYnoccinuUpf8Y_GGVKJsmF4,3795
+odoo/addons/stock_scheduler_assignation_horizon/migrations/14.0.1.0.1/pre-migration.py,sha256=M1cbVjNRh3bxmL6azJ73mD9ZNIWGq7vGhqypDuY5pJM,2029
+odoo/addons/stock_scheduler_assignation_horizon/models/__init__.py,sha256=or2XC8WZU9FuVPZqaLB4b3tJPB4p0EdSrxfw_PWW6g0,162
+odoo/addons/stock_scheduler_assignation_horizon/models/procurement_group.py,sha256=eosQmgHin8VqfGDoFJWrgEWQpU1tEKcMwn6OIrf9Y4g,1781
+odoo/addons/stock_scheduler_assignation_horizon/models/res_config_settings.py,sha256=f9dSg5YNaP5lAdSZDwLwHCnT1cRYBvS_2_3fJ5krI5Y,1177
 odoo/addons/stock_scheduler_assignation_horizon/readme/CONTRIBUTORS.rst,sha256=xgUKcpDOLyTv1q2D1wvgzhBQU_N5Ma_QlZt0iluJeOQ,107
-odoo/addons/stock_scheduler_assignation_horizon/readme/DESCRIPTION.rst,sha256=4VRox2EsYfMlfnKSY_4SEJqgxabl8mMfwkJEuVeQP3E,159
+odoo/addons/stock_scheduler_assignation_horizon/readme/DESCRIPTION.rst,sha256=Qe78d1IsyGMOsydDyfWlBB17W694HODE-Ukt0a6UjpE,243
 odoo/addons/stock_scheduler_assignation_horizon/readme/ROADMAP.rst,sha256=QfNLv-zGL8xzzf33cUb8A7C5WYcbv2B1XfNckOkJM1Y,468
 odoo/addons/stock_scheduler_assignation_horizon/readme/USAGE.rst,sha256=r9rN-n2adrDC2nvwRtF7iOb8TNlymekPo5tJlxaR8oQ,175
 odoo/addons/stock_scheduler_assignation_horizon/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
-odoo/addons/stock_scheduler_assignation_horizon/static/description/index.html,sha256=-8GDoExZwCMGXqbEQBXG3PR2edP_C2ubqci3RzCemjQ,13437
+odoo/addons/stock_scheduler_assignation_horizon/static/description/index.html,sha256=kjoqXzX62blK0ysFqk-ZESMxXyE_k9EEzbfFfCycopg,13922
 odoo/addons/stock_scheduler_assignation_horizon/tests/__init__.py,sha256=u9z-Uq3m233oYaui-8Stzdsn2WpUiGT7u53Y8vjzJrg,39
-odoo/addons/stock_scheduler_assignation_horizon/tests/test_res_config_settings.py,sha256=pQNdcKC3OXHui4Nnd2UaOqdymkZSCmYpDZ33zHuxGE8,2709
-odoo/addons/stock_scheduler_assignation_horizon/tests/test_res_config_settings_common.py,sha256=5qtvbOjk1zJ32H4nuzMFgzckchcgjK6CHZiTh0kRWNk,532
-odoo/addons/stock_scheduler_assignation_horizon/views/res_config_settings_views.xml,sha256=c-z0qFUFi3tO07dTDy5vF58oCbbeVLTRpvTU-2Fm6bs,2015
-odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.0.1.dev3.dist-info/METADATA,sha256=7UGaaNaOiaWeX3H0g_ezaDWrMm4BCNJF-zf8zuYkj68,4346
-odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.0.1.dev3.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.0.1.dev3.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.0.1.dev3.dist-info/RECORD,,
+odoo/addons/stock_scheduler_assignation_horizon/tests/test_res_config_settings.py,sha256=M5PFHPQWjtKXhGzDslEWqdPg-PHhOs8BZgMQo5kwX98,2565
+odoo/addons/stock_scheduler_assignation_horizon/tests/test_res_config_settings_common.py,sha256=SOvBxwNbAKyjgxI5Q_cTZgjDvMKRKC9cDdIlnmnH30I,759
+odoo/addons/stock_scheduler_assignation_horizon/views/res_config_settings_views.xml,sha256=z5f78Z_5DZ1Gqu5m-WmXIJ4KDEM0jjKWr6-9OGCmCtU,2180
+odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.1.0.dist-info/METADATA,sha256=YmaH6a9Ew-tzxkPIKOBcOFcA3_IwEayBa3Zrbi8-ZS8,4743
+odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.1.0.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.1.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo14_addon_stock_scheduler_assignation_horizon-14.0.1.1.0.dist-info/RECORD,,
```

