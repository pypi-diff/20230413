# Comparing `tmp/odoo_addon_partner_time_to_pay-15.0.1.1.0-py3-none-any.whl.zip` & `tmp/odoo_addon_partner_time_to_pay-15.0.1.2.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,29 +1,29 @@
-Zip file size: 32927 bytes, number of entries: 27
--rw-r--r--  2.0 unx     4965 b- defN 23-Mar-27 21:28 odoo/addons/partner_time_to_pay/README.rst
--rw-r--r--  2.0 unx       86 b- defN 23-Mar-27 21:28 odoo/addons/partner_time_to_pay/__init__.py
--rw-r--r--  2.0 unx      692 b- defN 23-Mar-27 21:28 odoo/addons/partner_time_to_pay/__manifest__.py
--rw-r--r--  2.0 unx     4139 b- defN 23-Mar-27 21:28 odoo/addons/partner_time_to_pay/i18n/es.po
--rw-r--r--  2.0 unx     3982 b- defN 23-Mar-27 21:28 odoo/addons/partner_time_to_pay/i18n/fr.po
--rw-r--r--  2.0 unx     4016 b- defN 23-Mar-27 21:28 odoo/addons/partner_time_to_pay/i18n/nl_NL.po
--rw-r--r--  2.0 unx     3507 b- defN 23-Mar-27 21:28 odoo/addons/partner_time_to_pay/i18n/partner_time_to_pay.pot
--rw-r--r--  2.0 unx     3793 b- defN 23-Mar-27 21:28 odoo/addons/partner_time_to_pay/i18n/pt.po
--rw-r--r--  2.0 unx      118 b- defN 23-Mar-27 21:28 odoo/addons/partner_time_to_pay/models/__init__.py
--rw-r--r--  2.0 unx     2133 b- defN 23-Mar-27 21:28 odoo/addons/partner_time_to_pay/models/account_move.py
--rw-r--r--  2.0 unx     2797 b- defN 23-Mar-27 21:28 odoo/addons/partner_time_to_pay/models/res_partner.py
--rw-r--r--  2.0 unx      419 b- defN 23-Mar-27 21:28 odoo/addons/partner_time_to_pay/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      173 b- defN 23-Mar-27 21:28 odoo/addons/partner_time_to_pay/readme/CREDITS.rst
--rw-r--r--  2.0 unx      288 b- defN 23-Mar-27 21:28 odoo/addons/partner_time_to_pay/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      329 b- defN 23-Mar-27 21:28 odoo/addons/partner_time_to_pay/readme/INSTALL.rst
--rw-r--r--  2.0 unx      273 b- defN 23-Mar-27 21:28 odoo/addons/partner_time_to_pay/readme/ROADMAP.rst
--rw-r--r--  2.0 unx      282 b- defN 23-Mar-27 21:28 odoo/addons/partner_time_to_pay/readme/USAGE.rst
--rw-r--r--  2.0 unx     9455 b- defN 23-Mar-27 21:28 odoo/addons/partner_time_to_pay/static/description/icon.png
--rw-r--r--  2.0 unx    15927 b- defN 23-Mar-27 21:28 odoo/addons/partner_time_to_pay/static/description/index.html
--rw-r--r--  2.0 unx      104 b- defN 23-Mar-27 21:28 odoo/addons/partner_time_to_pay/tests/__init__.py
--rw-r--r--  2.0 unx     2081 b- defN 23-Mar-27 21:28 odoo/addons/partner_time_to_pay/tests/test_partner_time_to_pay.py
--rw-r--r--  2.0 unx     1135 b- defN 23-Mar-27 21:28 odoo/addons/partner_time_to_pay/views/account_move_view.xml
--rw-r--r--  2.0 unx      959 b- defN 23-Mar-27 21:28 odoo/addons/partner_time_to_pay/views/res_partner_view.xml
--rw-r--r--  2.0 unx     5609 b- defN 23-Mar-27 21:28 odoo_addon_partner_time_to_pay-15.0.1.1.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Mar-27 21:28 odoo_addon_partner_time_to_pay-15.0.1.1.0.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Mar-27 21:28 odoo_addon_partner_time_to_pay-15.0.1.1.0.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2887 b- defN 23-Mar-27 21:28 odoo_addon_partner_time_to_pay-15.0.1.1.0.dist-info/RECORD
-27 files, 70246 bytes uncompressed, 28017 bytes compressed:  60.1%
+Zip file size: 33473 bytes, number of entries: 27
+-rw-r--r--  2.0 unx     5172 b- defN 23-Apr-13 15:54 odoo/addons/partner_time_to_pay/README.rst
+-rw-r--r--  2.0 unx       86 b- defN 23-Apr-13 15:54 odoo/addons/partner_time_to_pay/__init__.py
+-rw-r--r--  2.0 unx      701 b- defN 23-Apr-13 15:54 odoo/addons/partner_time_to_pay/__manifest__.py
+-rw-r--r--  2.0 unx     5385 b- defN 23-Apr-13 15:54 odoo/addons/partner_time_to_pay/i18n/es.po
+-rw-r--r--  2.0 unx     3982 b- defN 23-Apr-13 15:54 odoo/addons/partner_time_to_pay/i18n/fr.po
+-rw-r--r--  2.0 unx     4016 b- defN 23-Apr-13 15:54 odoo/addons/partner_time_to_pay/i18n/nl_NL.po
+-rw-r--r--  2.0 unx     4526 b- defN 23-Apr-13 15:54 odoo/addons/partner_time_to_pay/i18n/partner_time_to_pay.pot
+-rw-r--r--  2.0 unx     3793 b- defN 23-Apr-13 15:54 odoo/addons/partner_time_to_pay/i18n/pt.po
+-rw-r--r--  2.0 unx      118 b- defN 23-Apr-13 15:54 odoo/addons/partner_time_to_pay/models/__init__.py
+-rw-r--r--  2.0 unx     2133 b- defN 23-Apr-13 15:54 odoo/addons/partner_time_to_pay/models/account_move.py
+-rw-r--r--  2.0 unx     3767 b- defN 23-Apr-13 15:54 odoo/addons/partner_time_to_pay/models/res_partner.py
+-rw-r--r--  2.0 unx      419 b- defN 23-Apr-13 15:54 odoo/addons/partner_time_to_pay/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      173 b- defN 23-Apr-13 15:54 odoo/addons/partner_time_to_pay/readme/CREDITS.rst
+-rw-r--r--  2.0 unx      288 b- defN 23-Apr-13 15:54 odoo/addons/partner_time_to_pay/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      329 b- defN 23-Apr-13 15:54 odoo/addons/partner_time_to_pay/readme/INSTALL.rst
+-rw-r--r--  2.0 unx      273 b- defN 23-Apr-13 15:54 odoo/addons/partner_time_to_pay/readme/ROADMAP.rst
+-rw-r--r--  2.0 unx      347 b- defN 23-Apr-13 15:54 odoo/addons/partner_time_to_pay/readme/USAGE.rst
+-rw-r--r--  2.0 unx     9455 b- defN 23-Apr-13 15:54 odoo/addons/partner_time_to_pay/static/description/icon.png
+-rw-r--r--  2.0 unx    16128 b- defN 23-Apr-13 15:54 odoo/addons/partner_time_to_pay/static/description/index.html
+-rw-r--r--  2.0 unx      104 b- defN 23-Apr-13 15:54 odoo/addons/partner_time_to_pay/tests/__init__.py
+-rw-r--r--  2.0 unx     3193 b- defN 23-Apr-13 15:54 odoo/addons/partner_time_to_pay/tests/test_partner_time_to_pay.py
+-rw-r--r--  2.0 unx     1135 b- defN 23-Apr-13 15:54 odoo/addons/partner_time_to_pay/views/account_move_view.xml
+-rw-r--r--  2.0 unx     1117 b- defN 23-Apr-13 15:54 odoo/addons/partner_time_to_pay/views/res_partner_view.xml
+-rw-r--r--  2.0 unx     5816 b- defN 23-Apr-13 15:54 odoo_addon_partner_time_to_pay-15.0.1.2.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Apr-13 15:54 odoo_addon_partner_time_to_pay-15.0.1.2.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Apr-13 15:54 odoo_addon_partner_time_to_pay-15.0.1.2.0.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     2888 b- defN 23-Apr-13 15:54 odoo_addon_partner_time_to_pay-15.0.1.2.0.dist-info/RECORD
+27 files, 75441 bytes uncompressed, 28563 bytes compressed:  62.1%
```

## zipnote {}

```diff
@@ -63,20 +63,20 @@
 
 Filename: odoo/addons/partner_time_to_pay/views/account_move_view.xml
 Comment: 
 
 Filename: odoo/addons/partner_time_to_pay/views/res_partner_view.xml
 Comment: 
 
-Filename: odoo_addon_partner_time_to_pay-15.0.1.1.0.dist-info/METADATA
+Filename: odoo_addon_partner_time_to_pay-15.0.1.2.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_partner_time_to_pay-15.0.1.1.0.dist-info/WHEEL
+Filename: odoo_addon_partner_time_to_pay-15.0.1.2.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_partner_time_to_pay-15.0.1.1.0.dist-info/top_level.txt
+Filename: odoo_addon_partner_time_to_pay-15.0.1.2.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_partner_time_to_pay-15.0.1.1.0.dist-info/RECORD
+Filename: odoo_addon_partner_time_to_pay-15.0.1.2.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/partner_time_to_pay/README.rst

```diff
@@ -45,15 +45,16 @@
 * then restart Odoo, update the addons list in your database, and install
   the Partner Time to Pay application.
 
 Usage
 =====
 
 * Go to the *Sales & Purchases* tab of a partner
-* There are 4 new fields. These fields represent the average days to pay for
+* There are 6 new fields named *AVG Days to Payable/Receivable*.
+  These fields represent the average days to pay/receive for last year (LY),
   this year (YTD) and since the first invoice (lifetime).
 * Adds a new field in the tree and form invoices views to check the
   Full Reconcile Payment Date
 
 Known issues / Roadmap
 ======================
 
@@ -115,15 +116,18 @@
 
 .. |maintainer-max3903| image:: https://github.com/max3903.png?size=40px
     :target: https://github.com/max3903
     :alt: max3903
 .. |maintainer-rafaelbn| image:: https://github.com/rafaelbn.png?size=40px
     :target: https://github.com/rafaelbn
     :alt: rafaelbn
+.. |maintainer-Shide| image:: https://github.com/Shide.png?size=40px
+    :target: https://github.com/Shide
+    :alt: Shide
 
 Current `maintainers <https://odoo-community.org/page/maintainer-role>`__:
 
-|maintainer-max3903| |maintainer-rafaelbn| 
+|maintainer-max3903| |maintainer-rafaelbn| |maintainer-Shide| 
 
 This module is part of the `OCA/account-invoice-reporting <https://github.com/OCA/account-invoice-reporting/tree/15.0/partner_time_to_pay>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## odoo/addons/partner_time_to_pay/__manifest__.py

```diff
@@ -1,20 +1,20 @@
 # Copyright (C) 2019 Open Source Integrators
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
 
 {
     "name": "Partner Time to Pay",
     "summary": "Add receivables and payables statistics to partners",
-    "version": "15.0.1.1.0",
+    "version": "15.0.1.2.0",
     "license": "AGPL-3",
     "development_status": "Beta",
     "author": "Open Source Integrators, Odoo Community Association (OCA), Moduon",
     "category": "Accounting & Finance",
     "website": "https://github.com/OCA/account-invoice-reporting",
-    "maintainers": ["max3903", "rafaelbn"],
+    "maintainers": ["max3903", "rafaelbn", "Shide"],
     "depends": ["account"],
     "data": [
         "views/account_move_view.xml",
         "views/res_partner_view.xml",
     ],
     "installable": True,
 }
```

## odoo/addons/partner_time_to_pay/i18n/es.po

```diff
@@ -1,63 +1,87 @@
 # Translation of Odoo Server.
 # This file contains the translation of the following modules:
 # 	* partner_time_to_pay
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: Odoo Server 15.0\n"
+"Project-Id-Version: Odoo Server 15.0+e\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2022-11-22 17:16+0000\n"
-"PO-Revision-Date: 2022-11-22 18:18+0100\n"
+"POT-Creation-Date: 2023-04-12 06:27+0000\n"
+"PO-Revision-Date: 2023-04-12 08:29+0200\n"
 "Last-Translator: \n"
 "Language-Team: \n"
 "Language: es\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
 "Plural-Forms: \n"
 "X-Generator: Poedit 3.1.1\n"
 
 #. module: partner_time_to_pay
+#: model:ir.model.fields,field_description:partner_time_to_pay.field_res_partner__d2p_ly
+#: model:ir.model.fields,field_description:partner_time_to_pay.field_res_users__d2p_ly
+msgid "AVG Days to Payable (LY)"
+msgstr "Promedio de días de pago (año anterior)"
+
+#. module: partner_time_to_pay
 #: model:ir.model.fields,field_description:partner_time_to_pay.field_res_partner__d2p_ytd
 #: model:ir.model.fields,field_description:partner_time_to_pay.field_res_users__d2p_ytd
 msgid "AVG Days to Payable (YTD)"
 msgstr "Promedio de días de pago (año actual)"
 
 #. module: partner_time_to_pay
 #: model:ir.model.fields,field_description:partner_time_to_pay.field_res_partner__d2p_life
 #: model:ir.model.fields,field_description:partner_time_to_pay.field_res_users__d2p_life
 msgid "AVG Days to Payable (lifetime)"
 msgstr "Promedio de días de pago (siempre)"
 
 #. module: partner_time_to_pay
+#: model:ir.model.fields,field_description:partner_time_to_pay.field_res_partner__d2r_ly
+#: model:ir.model.fields,field_description:partner_time_to_pay.field_res_users__d2r_ly
+msgid "AVG Days to Receivable (LY)"
+msgstr "Promedio de días de cobro (año anterior)"
+
+#. module: partner_time_to_pay
 #: model:ir.model.fields,field_description:partner_time_to_pay.field_res_partner__d2r_ytd
 #: model:ir.model.fields,field_description:partner_time_to_pay.field_res_users__d2r_ytd
 msgid "AVG Days to Receivable (YTD)"
 msgstr "Promedio de días de cobro (año actual)"
 
 #. module: partner_time_to_pay
 #: model:ir.model.fields,field_description:partner_time_to_pay.field_res_partner__d2r_life
 #: model:ir.model.fields,field_description:partner_time_to_pay.field_res_users__d2r_life
 msgid "AVG Days to Receivable (lifetime)"
 msgstr "Promedio de días de cobro (siempre)"
 
 #. module: partner_time_to_pay
+#: model:ir.model.fields,help:partner_time_to_pay.field_res_partner__d2p_ly
+#: model:ir.model.fields,help:partner_time_to_pay.field_res_users__d2p_ly
+msgid "Average days of payment for incoming invoices last year."
+msgstr "Promedio de días de pago para las facturas entrantes el año anterior."
+
+#. module: partner_time_to_pay
 #: model:ir.model.fields,help:partner_time_to_pay.field_res_partner__d2p_ytd
 #: model:ir.model.fields,help:partner_time_to_pay.field_res_users__d2p_ytd
 msgid "Average days of payment for incoming invoices this year."
 msgstr "Promedio de días de pago para las facturas entrantes éste año."
 
 #. module: partner_time_to_pay
 #: model:ir.model.fields,help:partner_time_to_pay.field_res_partner__d2p_life
 #: model:ir.model.fields,help:partner_time_to_pay.field_res_users__d2p_life
 msgid "Average days of payment for incoming invoices."
 msgstr "Promedio de días de pago para las facturas entrantes."
 
 #. module: partner_time_to_pay
+#: model:ir.model.fields,help:partner_time_to_pay.field_res_partner__d2r_ly
+#: model:ir.model.fields,help:partner_time_to_pay.field_res_users__d2r_ly
+msgid "Average days of payment for outgoing invoices last year."
+msgstr "Promedio de días de pago para las facturas salientes el año anterior."
+
+#. module: partner_time_to_pay
 #: model:ir.model.fields,help:partner_time_to_pay.field_res_partner__d2r_ytd
 #: model:ir.model.fields,help:partner_time_to_pay.field_res_users__d2r_ytd
 msgid "Average days of payment for outgoing invoices this year."
 msgstr "Promedio de días de pago para las facturas salientes éste año."
 
 #. module: partner_time_to_pay
 #: model:ir.model.fields,help:partner_time_to_pay.field_res_partner__d2r_life
```

## odoo/addons/partner_time_to_pay/i18n/partner_time_to_pay.pot

```diff
@@ -10,50 +10,74 @@
 "Language-Team: \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
 "Plural-Forms: \n"
 
 #. module: partner_time_to_pay
+#: model:ir.model.fields,field_description:partner_time_to_pay.field_res_partner__d2p_ly
+#: model:ir.model.fields,field_description:partner_time_to_pay.field_res_users__d2p_ly
+msgid "AVG Days to Payable (LY)"
+msgstr ""
+
+#. module: partner_time_to_pay
 #: model:ir.model.fields,field_description:partner_time_to_pay.field_res_partner__d2p_ytd
 #: model:ir.model.fields,field_description:partner_time_to_pay.field_res_users__d2p_ytd
 msgid "AVG Days to Payable (YTD)"
 msgstr ""
 
 #. module: partner_time_to_pay
 #: model:ir.model.fields,field_description:partner_time_to_pay.field_res_partner__d2p_life
 #: model:ir.model.fields,field_description:partner_time_to_pay.field_res_users__d2p_life
 msgid "AVG Days to Payable (lifetime)"
 msgstr ""
 
 #. module: partner_time_to_pay
+#: model:ir.model.fields,field_description:partner_time_to_pay.field_res_partner__d2r_ly
+#: model:ir.model.fields,field_description:partner_time_to_pay.field_res_users__d2r_ly
+msgid "AVG Days to Receivable (LY)"
+msgstr ""
+
+#. module: partner_time_to_pay
 #: model:ir.model.fields,field_description:partner_time_to_pay.field_res_partner__d2r_ytd
 #: model:ir.model.fields,field_description:partner_time_to_pay.field_res_users__d2r_ytd
 msgid "AVG Days to Receivable (YTD)"
 msgstr ""
 
 #. module: partner_time_to_pay
 #: model:ir.model.fields,field_description:partner_time_to_pay.field_res_partner__d2r_life
 #: model:ir.model.fields,field_description:partner_time_to_pay.field_res_users__d2r_life
 msgid "AVG Days to Receivable (lifetime)"
 msgstr ""
 
 #. module: partner_time_to_pay
+#: model:ir.model.fields,help:partner_time_to_pay.field_res_partner__d2p_ly
+#: model:ir.model.fields,help:partner_time_to_pay.field_res_users__d2p_ly
+msgid "Average days of payment for incoming invoices last year."
+msgstr ""
+
+#. module: partner_time_to_pay
 #: model:ir.model.fields,help:partner_time_to_pay.field_res_partner__d2p_ytd
 #: model:ir.model.fields,help:partner_time_to_pay.field_res_users__d2p_ytd
 msgid "Average days of payment for incoming invoices this year."
 msgstr ""
 
 #. module: partner_time_to_pay
 #: model:ir.model.fields,help:partner_time_to_pay.field_res_partner__d2p_life
 #: model:ir.model.fields,help:partner_time_to_pay.field_res_users__d2p_life
 msgid "Average days of payment for incoming invoices."
 msgstr ""
 
 #. module: partner_time_to_pay
+#: model:ir.model.fields,help:partner_time_to_pay.field_res_partner__d2r_ly
+#: model:ir.model.fields,help:partner_time_to_pay.field_res_users__d2r_ly
+msgid "Average days of payment for outgoing invoices last year."
+msgstr ""
+
+#. module: partner_time_to_pay
 #: model:ir.model.fields,help:partner_time_to_pay.field_res_partner__d2r_ytd
 #: model:ir.model.fields,help:partner_time_to_pay.field_res_users__d2r_ytd
 msgid "Average days of payment for outgoing invoices this year."
 msgstr ""
 
 #. module: partner_time_to_pay
 #: model:ir.model.fields,help:partner_time_to_pay.field_res_partner__d2r_life
```

## odoo/addons/partner_time_to_pay/models/res_partner.py

```diff
@@ -17,63 +17,92 @@
     )
     d2p_ytd = fields.Float(
         compute="_compute_d2x",
         string="AVG Days to Payable (YTD)",
         store=True,
         help="Average days of payment for incoming invoices this year.",
     )
+    d2p_ly = fields.Float(
+        compute="_compute_d2x",
+        string="AVG Days to Payable (LY)",
+        store=True,
+        help="Average days of payment for incoming invoices last year.",
+    )
     # Customers
     d2r_life = fields.Float(
         compute="_compute_d2x",
         string="AVG Days to Receivable (lifetime)",
         store=True,
         help="Average days of payment for outgoing invoices.",
     )
     d2r_ytd = fields.Float(
         compute="_compute_d2x",
         string="AVG Days to Receivable (YTD)",
         store=True,
         help="Average days of payment for outgoing invoices this year.",
     )
+    d2r_ly = fields.Float(
+        compute="_compute_d2x",
+        string="AVG Days to Receivable (LY)",
+        store=True,
+        help="Average days of payment for outgoing invoices last year.",
+    )
 
     @api.depends("invoice_ids.full_reconcile_payment_date")
     def _compute_d2x(self):
         for partner in self:
-            partner.d2r_ytd, partner.d2r_life = partner._compute_d2x_per_invoice_type(
+            (
+                partner.d2r_ly,
+                partner.d2r_ytd,
+                partner.d2r_life,
+            ) = partner._compute_d2x_per_invoice_type(
                 (partner + partner.child_ids).invoice_ids, {"out_invoice"}
             )
-            partner.d2p_ytd, partner.d2p_life = partner._compute_d2x_per_invoice_type(
+            (
+                partner.d2p_ly,
+                partner.d2p_ytd,
+                partner.d2p_life,
+            ) = partner._compute_d2x_per_invoice_type(
                 (partner + partner.child_ids).invoice_ids, {"in_invoice"}
             )
 
     def _compute_d2x_per_invoice_type(self, invoices, invoice_types):
         self.ensure_one()
         this_year = fields.Date.today().year
+        last_year = this_year - 1
 
         total_number_of_invoices_life, total_days_to_pay_life = 0, 0
         total_number_of_invoices_ytd, total_days_to_pay_ytd = 0, 0
-        d2x_ytd, d2x_life = 0, 0
+        total_number_of_invoices_ly, total_days_to_pay_ly = 0, 0
+        d2x_ly, d2x_ytd, d2x_life = 0, 0, 0
 
         selected_invoices = invoices.filtered(
             lambda inv: inv.move_type in invoice_types
             and inv.full_reconcile_payment_date
             and inv.state == "posted"
         )
         for invoice in selected_invoices:
             days_until_invoice_is_paid = (
                 invoice.full_reconcile_payment_date - invoice.invoice_date
             ).days
 
             total_number_of_invoices_life += 1
             total_days_to_pay_life += days_until_invoice_is_paid
 
+            if invoice.invoice_date.year == last_year:
+                total_number_of_invoices_ly += 1
+                total_days_to_pay_ly += days_until_invoice_is_paid
+
             if invoice.invoice_date.year == this_year:
                 total_number_of_invoices_ytd += 1
                 total_days_to_pay_ytd += days_until_invoice_is_paid
 
+        if total_number_of_invoices_ly:
+            d2x_ly = total_days_to_pay_ly / total_number_of_invoices_ly
+
         if total_number_of_invoices_ytd:
             d2x_ytd = total_days_to_pay_ytd / total_number_of_invoices_ytd
 
         if total_number_of_invoices_life:
             d2x_life = total_days_to_pay_life / total_number_of_invoices_life
 
-        return d2x_ytd, d2x_life
+        return d2x_ly, d2x_ytd, d2x_life
```

## odoo/addons/partner_time_to_pay/readme/USAGE.rst

```diff
@@ -1,5 +1,6 @@
 * Go to the *Sales & Purchases* tab of a partner
-* There are 4 new fields. These fields represent the average days to pay for
+* There are 6 new fields named *AVG Days to Payable/Receivable*.
+  These fields represent the average days to pay/receive for last year (LY),
   this year (YTD) and since the first invoice (lifetime).
 * Adds a new field in the tree and form invoices views to check the
   Full Reconcile Payment Date
```

## odoo/addons/partner_time_to_pay/static/description/index.html

### odoo/addons/partner_time_to_pay/static/description/index.html

```diff
@@ -449,16 +449,21 @@
         </h1>
         <ul class="simple">
           <li>
             Go to the
             <em>Sales &amp; Purchases</em>
             tab of a partner
           </li>
-          <li>There are 4 new fields. These fields represent the average days to pay for
-this year (YTD) and since the first invoice (lifetime).</li>
+          <li>
+            There are 6 new fields named
+            <em>AVG Days to Payable/Receivable</em>
+            .
+These fields represent the average days to pay/receive for last year (LY),
+this year (YTD) and since the first invoice (lifetime).
+          </li>
           <li>Adds a new field in the tree and form invoices views to check the
 Full Reconcile Payment Date</li>
         </ul>
       </div>
       <div class="section" id="known-issues-roadmap">
         <h1>
           <a class="toc-backref" href="#id3">Known issues / Roadmap</a>
@@ -584,14 +589,17 @@
           <p>
             <a class="reference external" href="https://github.com/max3903">
               <img alt="max3903" src="https://github.com/max3903.png?size=40px"/>
             </a>
             <a class="reference external" href="https://github.com/rafaelbn">
               <img alt="rafaelbn" src="https://github.com/rafaelbn.png?size=40px"/>
             </a>
+            <a class="reference external" href="https://github.com/Shide">
+              <img alt="Shide" src="https://github.com/Shide.png?size=40px"/>
+            </a>
           </p>
           <p>
             This module is part of the
             <a class="reference external" href="https://github.com/OCA/account-invoice-reporting/tree/15.0/partner_time_to_pay">OCA/account-invoice-reporting</a>
             project on GitHub.
           </p>
           <p>
```

## odoo/addons/partner_time_to_pay/tests/test_partner_time_to_pay.py

```diff
@@ -21,33 +21,55 @@
                 "name": "Test Time to Pay Partner",
                 "is_company": True,
                 "child_ids": [(0, 0, {"name": "TTPP Contact", "type": "invoice"})],
             }
         )
         self.time_to_pay_days = 10
         product = self.env.ref("product.product_product_4")
-        # Create invoice
-        move_form = Form(am_model.with_context(default_move_type="out_invoice"))
-        move_form.partner_id = self.partner.child_ids[0]
-        move_form.invoice_date = today
-        with move_form.invoice_line_ids.new() as line_form:
-            line_form.product_id = product
-            line_form.price_unit = 100.0
-            line_form.quantity = 10.0
-        invoice = move_form.save()
-        invoice.action_post()
-        # Create payment
+        # Create invoice for last year
+        move_form_ly = Form(am_model.with_context(default_move_type="out_invoice"))
+        move_form_ly.partner_id = self.partner.child_ids[0]
+        move_form_ly.invoice_date = today - timedelta(days=365)
+        with move_form_ly.invoice_line_ids.new() as line_form_ly:
+            line_form_ly.product_id = product
+            line_form_ly.price_unit = 100.0
+            line_form_ly.quantity = 10.0
+        invoice_ly = move_form_ly.save()
+        invoice_ly.action_post()
+        # Create payment for last year
         apr_model.with_context(
-            active_model="account.move", active_ids=invoice.ids
+            active_model="account.move", active_ids=invoice_ly.ids
         ).create(
             {
-                "payment_date": invoice.date + timedelta(days=self.time_to_pay_days),
+                "payment_date": invoice_ly.date + timedelta(days=self.time_to_pay_days),
+            }
+        ).with_context(
+            dont_redirect_to_payments=True,
+        ).action_create_payments()
+        # Create invoice for this year
+        move_form_ty = Form(am_model.with_context(default_move_type="out_invoice"))
+        move_form_ty.partner_id = self.partner.child_ids[0]
+        move_form_ty.invoice_date = today
+        with move_form_ty.invoice_line_ids.new() as line_form_ty:
+            line_form_ty.product_id = product
+            line_form_ty.price_unit = 100.0
+            line_form_ty.quantity = 10.0
+        invoice_ty = move_form_ty.save()
+        invoice_ty.action_post()
+        # Create payment for this year
+        apr_model.with_context(
+            active_model="account.move", active_ids=invoice_ty.ids
+        ).create(
+            {
+                "payment_date": invoice_ty.date + timedelta(days=self.time_to_pay_days),
             }
         ).with_context(
             dont_redirect_to_payments=True,
         ).action_create_payments()
 
     def test_partner_compute_d2x(self):
+        self.assertEqual(self.partner.child_ids[0].d2r_ly, self.time_to_pay_days)
         self.assertEqual(self.partner.child_ids[0].d2r_ytd, self.time_to_pay_days)
         self.assertEqual(self.partner.child_ids[0].d2r_life, self.time_to_pay_days)
+        self.assertEqual(self.partner.d2r_ly, self.time_to_pay_days)
         self.assertEqual(self.partner.d2r_ytd, self.time_to_pay_days)
         self.assertEqual(self.partner.d2r_life, self.time_to_pay_days)
```

## odoo/addons/partner_time_to_pay/views/res_partner_view.xml

### odoo/addons/partner_time_to_pay/views/res_partner_view.xml

```diff
@@ -4,17 +4,19 @@
      License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl). -->
   <record id="view_res_partner_form_dtp" model="ir.ui.view">
     <field name="name">res.partner.form.dtp</field>
     <field name="model">res.partner</field>
     <field name="inherit_id" ref="account.view_partner_property_form"/>
     <field name="arch" type="xml">
       <field name="property_payment_term_id" position="after">
+        <field name="d2r_ly" groups="account.group_account_invoice"/>
         <field name="d2r_ytd" groups="account.group_account_invoice"/>
         <field name="d2r_life" groups="account.group_account_invoice"/>
       </field>
       <field name="property_supplier_payment_term_id" position="after">
+        <field name="d2p_ly" groups="account.group_account_invoice"/>
         <field name="d2p_ytd" groups="account.group_account_invoice"/>
         <field name="d2p_life" groups="account.group_account_invoice"/>
       </field>
     </field>
   </record>
 </odoo>
```

## Comparing `odoo_addon_partner_time_to_pay-15.0.1.1.0.dist-info/METADATA` & `odoo_addon_partner_time_to_pay-15.0.1.2.0.dist-info/METADATA`

 * *Files 3% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo-addon-partner-time-to-pay
-Version: 15.0.1.1.0
+Version: 15.0.1.2.0
 Summary: Add receivables and payables statistics to partners
 Home-page: https://github.com/OCA/account-invoice-reporting
 Author: Open Source Integrators, Odoo Community Association (OCA), Moduon
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
@@ -62,15 +62,16 @@
 * then restart Odoo, update the addons list in your database, and install
   the Partner Time to Pay application.
 
 Usage
 =====
 
 * Go to the *Sales & Purchases* tab of a partner
-* There are 4 new fields. These fields represent the average days to pay for
+* There are 6 new fields named *AVG Days to Payable/Receivable*.
+  These fields represent the average days to pay/receive for last year (LY),
   this year (YTD) and since the first invoice (lifetime).
 * Adds a new field in the tree and form invoices views to check the
   Full Reconcile Payment Date
 
 Known issues / Roadmap
 ======================
 
@@ -132,17 +133,20 @@
 
 .. |maintainer-max3903| image:: https://github.com/max3903.png?size=40px
     :target: https://github.com/max3903
     :alt: max3903
 .. |maintainer-rafaelbn| image:: https://github.com/rafaelbn.png?size=40px
     :target: https://github.com/rafaelbn
     :alt: rafaelbn
+.. |maintainer-Shide| image:: https://github.com/Shide.png?size=40px
+    :target: https://github.com/Shide
+    :alt: Shide
 
 Current `maintainers <https://odoo-community.org/page/maintainer-role>`__:
 
-|maintainer-max3903| |maintainer-rafaelbn| 
+|maintainer-max3903| |maintainer-rafaelbn| |maintainer-Shide| 
 
 This module is part of the `OCA/account-invoice-reporting <https://github.com/OCA/account-invoice-reporting/tree/15.0/partner_time_to_pay>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## Comparing `odoo_addon_partner_time_to_pay-15.0.1.1.0.dist-info/RECORD` & `odoo_addon_partner_time_to_pay-15.0.1.2.0.dist-info/RECORD`

 * *Files 19% similar despite different names*

```diff
@@ -1,27 +1,27 @@
-odoo/addons/partner_time_to_pay/README.rst,sha256=Fah4o8r9IFQj9oZFlybjEQ3D0NB_wasTL9Gh22Aoyyg,4965
+odoo/addons/partner_time_to_pay/README.rst,sha256=8PNV5xw7d8PXvpwfQG58MiUXwofq6jVPqCHc3RUBO0w,5172
 odoo/addons/partner_time_to_pay/__init__.py,sha256=ZGjmXT9q1Wc3A9Eb3pRZjwDcSFijPJcJLFSMyZdyxyU,86
-odoo/addons/partner_time_to_pay/__manifest__.py,sha256=j16CpeeTUZaOhd_PuZXP_lYOffa5AS1MsC44mNgxJbo,692
-odoo/addons/partner_time_to_pay/i18n/es.po,sha256=7RHbRBNiOHxQ7vGp0qRWRQeCdZXMmty4tQt_DnCVW1E,4139
+odoo/addons/partner_time_to_pay/__manifest__.py,sha256=mXHEh-GDWGOFjSa-stouZxx3zTTurbhRJ65upxHiXWQ,701
+odoo/addons/partner_time_to_pay/i18n/es.po,sha256=onr0OsL_QLn8whnwEGyEGVWpH88jumRI-v_ntgVIxBA,5385
 odoo/addons/partner_time_to_pay/i18n/fr.po,sha256=DZDSkulESkTZP9Zd-mQlX9LHyCp6JwyeRZF06dFlk7s,3982
 odoo/addons/partner_time_to_pay/i18n/nl_NL.po,sha256=0uFftPwkY5nE6vOTwFE4ItdsYI9y7QzcFdb5KN7yyAA,4016
-odoo/addons/partner_time_to_pay/i18n/partner_time_to_pay.pot,sha256=T2J9Ck-HtP5-Ltn5UTvqq3e7YAU5zYlKUoAZ286zOgY,3507
+odoo/addons/partner_time_to_pay/i18n/partner_time_to_pay.pot,sha256=mdplArg3oVbwmyUh3nbH86enUZOYvaUwQI77HPR3Ing,4526
 odoo/addons/partner_time_to_pay/i18n/pt.po,sha256=x0tyIjfgSnWR7o49rFyq1AquyzqpTrVZph5mb_CDMf0,3793
 odoo/addons/partner_time_to_pay/models/__init__.py,sha256=14ttV_Bnuislw-0FYEG7SNR4eYZc9jU2pIm6AZBKtmk,118
 odoo/addons/partner_time_to_pay/models/account_move.py,sha256=atPPXKy_mPBR31rtU-gUEgEgOxIjH-tG5WzxCcmlyU8,2133
-odoo/addons/partner_time_to_pay/models/res_partner.py,sha256=qq3UQsUA9FIqIQq5rqgwugV-QQPG6rPvLXWgLvhMBtg,2797
+odoo/addons/partner_time_to_pay/models/res_partner.py,sha256=opdpncBM-AGJDyx_ZW8TynZ8acEHEsH9pcOCvY_7h9Y,3767
 odoo/addons/partner_time_to_pay/readme/CONTRIBUTORS.rst,sha256=JBgNI00vyarAqA9XngNeQU1ErDdZ5rrvYC0WZ5RjQqI,419
 odoo/addons/partner_time_to_pay/readme/CREDITS.rst,sha256=m5KYsgSuaSXmn_fk0ZH6YsKpwWf9sLFl-mgKoIZbEzo,173
 odoo/addons/partner_time_to_pay/readme/DESCRIPTION.rst,sha256=HaI-NGyJt4erVttfTLzgKI4WosyVUKsGSsejKw-pEQU,288
 odoo/addons/partner_time_to_pay/readme/INSTALL.rst,sha256=kHt3gIbaSBzpwHZHY1scf3YD9-aJqC1VeR35JpWAMyc,329
 odoo/addons/partner_time_to_pay/readme/ROADMAP.rst,sha256=0PHWRVG6CneIzGwPhhi51C73D7oTXSqj5dyYiXMMfVk,273
-odoo/addons/partner_time_to_pay/readme/USAGE.rst,sha256=dEHky2UfREHGglwjkER1M5-vSBc1kpyuClYksVzinWA,282
+odoo/addons/partner_time_to_pay/readme/USAGE.rst,sha256=8FmGhwd0eWEoa8pnyGfijqCcpNyM3NBPFSRGhR2cnPg,347
 odoo/addons/partner_time_to_pay/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
-odoo/addons/partner_time_to_pay/static/description/index.html,sha256=n1y9UVAoO-GAxwMWmERpzUCre6CFu1fgmzN8yJ14d6c,15927
+odoo/addons/partner_time_to_pay/static/description/index.html,sha256=lwAn8AaAb8YaWVaa1GnnFJ8BP8xf3KZLL6VsHOcGAAI,16128
 odoo/addons/partner_time_to_pay/tests/__init__.py,sha256=Te_VZ4hfOn56h1K954xUtbGJ87YwnACqPHGJzPJJ9Sc,104
-odoo/addons/partner_time_to_pay/tests/test_partner_time_to_pay.py,sha256=zWpr1HU6A6IF7jscV19YB6T9V30D3dvmXy0hwZC9WgQ,2081
+odoo/addons/partner_time_to_pay/tests/test_partner_time_to_pay.py,sha256=amu7L16KfMKA3m2j37lwzMoB6r8c_aeZE-IMeEYqg2U,3193
 odoo/addons/partner_time_to_pay/views/account_move_view.xml,sha256=SO-FWPQ8WP5TRecz9C6-9Vi1h262ZtrIE1NjBu5nIQc,1135
-odoo/addons/partner_time_to_pay/views/res_partner_view.xml,sha256=1bNr2LOJtIsnCvwLO4D7MlFLErLmlWfpiZ-K3ejjgVU,959
-odoo_addon_partner_time_to_pay-15.0.1.1.0.dist-info/METADATA,sha256=PZNQBNBHVu-mViDG6CZnxIvvk3R7GICdDYMDRfkDumo,5609
-odoo_addon_partner_time_to_pay-15.0.1.1.0.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-odoo_addon_partner_time_to_pay-15.0.1.1.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_partner_time_to_pay-15.0.1.1.0.dist-info/RECORD,,
+odoo/addons/partner_time_to_pay/views/res_partner_view.xml,sha256=JVAnQVBAwVdmeBCalLQgk4JxdkYl3V4ydaddCNpaGbg,1117
+odoo_addon_partner_time_to_pay-15.0.1.2.0.dist-info/METADATA,sha256=KTxOFwdS4CERvDqYnPwTwedgIchSICS_GkfiemWlKRU,5816
+odoo_addon_partner_time_to_pay-15.0.1.2.0.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+odoo_addon_partner_time_to_pay-15.0.1.2.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo_addon_partner_time_to_pay-15.0.1.2.0.dist-info/RECORD,,
```

